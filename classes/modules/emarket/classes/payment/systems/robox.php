<?php
 class roboxPayment extends payment {public function validate() {return true;}public function process($v66f6181bcb4cff4cd38fbc804a036db6 = null) {$vd56b699830e77ba53855679cb1d252da = $this->object->login;$v5f4dcc3b5aa765d61d8327deb882cf99 = $this->object->password1;$ve9f40e1f1d1658681dad2dac4ae0971e = number_format($this->order->getActualPrice(), 2, '.', '');$v04b29480233f4def5c875875b6bdc3b1 = md5("{$vd56b699830e77ba53855679cb1d252da}:{$ve9f40e1f1d1658681dad2dac4ae0971e}:{$this->order->id}:{$v5f4dcc3b5aa765d61d8327deb882cf99}:shp_orderId={$this->order->id}");$veca07335a33c5aeb5e1bc7c98b4b9d80 = array();$veca07335a33c5aeb5e1bc7c98b4b9d80['formAction'] = $this->object->test_mode ? "http://test.robokassa.ru/Index.aspx" : "https://merchant.roboxchange.com/Index.aspx";$veca07335a33c5aeb5e1bc7c98b4b9d80['MrchLogin']  = $vd56b699830e77ba53855679cb1d252da;$veca07335a33c5aeb5e1bc7c98b4b9d80['OutSum']    = $ve9f40e1f1d1658681dad2dac4ae0971e;$veca07335a33c5aeb5e1bc7c98b4b9d80['InvId']    = $this->order->id;$veca07335a33c5aeb5e1bc7c98b4b9d80['Desc']    = "Payment for order {$this->order->id}";$veca07335a33c5aeb5e1bc7c98b4b9d80['SignatureValue'] = $v04b29480233f4def5c875875b6bdc3b1;$veca07335a33c5aeb5e1bc7c98b4b9d80['shp_orderId']    = $this->order->id;$veca07335a33c5aeb5e1bc7c98b4b9d80['IncCurrLabel'] = "PCR";$veca07335a33c5aeb5e1bc7c98b4b9d80['Culture']    = strtolower(cmsController::getInstance()->getCurrentLang()->getPrefix());$this->order->setPaymentStatus('initialized');list($v78325ef2910aaa327bba1fde7d68bbf9) = def_module::loadTemplates("tpls/emarket/payment/robokassa/".$v66f6181bcb4cff4cd38fbc804a036db6.".tpl", "form_block");return def_module::parseTemplate($v78325ef2910aaa327bba1fde7d68bbf9, $veca07335a33c5aeb5e1bc7c98b4b9d80);}public function poll() {$ve9f40e1f1d1658681dad2dac4ae0971e  = getRequest("OutSum");$ve5f96ae00443877315fbb64fd3d90005 = getRequest("InvId");$v04b29480233f4def5c875875b6bdc3b1    = getRequest("SignatureValue");$v61e9abeaa2ba0e1296555c135d818e6e = getRequest("shp_orderId");$v5f4dcc3b5aa765d61d8327deb882cf99 = $this->object->password2;$v3820ea4f16943e1308ffadf71e8bc376 = md5("{$ve9f40e1f1d1658681dad2dac4ae0971e}:{$ve5f96ae00443877315fbb64fd3d90005}:{$v5f4dcc3b5aa765d61d8327deb882cf99}:shp_orderId={$v61e9abeaa2ba0e1296555c135d818e6e}");$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();$v7f2db423a49b305459147332fb01cf87->clear();$v7f2db423a49b305459147332fb01cf87->contentType("text/plain");if(strcasecmp($v3820ea4f16943e1308ffadf71e8bc376, $v04b29480233f4def5c875875b6bdc3b1) == 0) {$this->order->setPaymentStatus("accepted");$this->order->payment_document_num = $ve5f96ae00443877315fbb64fd3d90005;$v7f2db423a49b305459147332fb01cf87->push("OK{$ve5f96ae00443877315fbb64fd3d90005}");}else {$v7f2db423a49b305459147332fb01cf87->push("failed");}$v7f2db423a49b305459147332fb01cf87->end();}};?>