<?php
 class autoupdate extends def_module {public function __construct() {parent::__construct();if(cmsController::getInstance()->getCurrentMode() == "admin") {$this->__loadLib("__admin.php");$this->__implement("__autoupdate");$this->__loadLib("__json.php");$this->__implement("__json_autoupdate");}}public function service () {$v4119639092e62c55ea8be348e4d9260d = strtoupper(getRequest('param0'));$va7d5dad04d78eeebcbb55ba2d6ba3105 = (bool) regedit::getInstance()->getVal("//modules/autoupdate/autoupdates_disabled");if($va7d5dad04d78eeebcbb55ba2d6ba3105) {$this->flush('DISABLED', "text/plain");}$this->checkIsValidSender();switch($v4119639092e62c55ea8be348e4d9260d) {case "STATUS":     $result = $this->returnStatus();break;case "VERSION":     $result = $this->returnVersions();break;case "LAST_UPDATED":     $result = $this->returnLastUpdated();break;case "MODULES": {$result = $this->getModules();break;}case "DOMAINS": {$result = $this->getDomains();break;}default:     $result = "UNHANDLED_EVENT";break;}$this->flush($result, "text/plain");}protected function returnStatus () {return (string) regedit::getInstance()->getVal("//modules/autoupdate/status");}protected function returnVersions() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();return (string) $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/autoupdate/system_version") . "\n" . $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/autoupdate/system_build");}public function returnLastUpdated() {return (string) $this->getLastUpdated();}protected function checkIsValidSender () {}protected function getModules() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$v9830e1f81f623b33106acc186b93374e = $vb1444fb0c07653567ad325aa25d4e37a->getList("//modules");$v9b207167e5381c47682c6b4f58a623fb = "";foreach($v9830e1f81f623b33106acc186b93374e as $v6f8f57715090da2632453988d9a1501b) {$v9b207167e5381c47682c6b4f58a623fb .= $v6f8f57715090da2632453988d9a1501b[0] . "\n";}return $v9b207167e5381c47682c6b4f58a623fb;}protected function getDomains() {$v14a0ffee308315f250f040d5b4d48560 = domainsCollection::getInstance();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = $v14a0ffee308315f250f040d5b4d48560->getList();$v9b207167e5381c47682c6b4f58a623fb = "";foreach($ve4e46deb7f9cc58c7abfb32e5570b6f3 as $vad5f82e879a9c5d6b5b442eb37e50551) {$v9b207167e5381c47682c6b4f58a623fb .= $vad5f82e879a9c5d6b5b442eb37e50551->getHost() . "\n";}return $v9b207167e5381c47682c6b4f58a623fb;}public function getCurrentVersion () {return (string) regedit::getInstance()->getVal("//modules/autoupdate/system_version");}public function setCurrentVersion ($v2af72f100c356273d46284f6fd1dfc08) {regedit::getInstance()->setVal("//modules/autoupdate/system_version", (string) $v2af72f100c356273d46284f6fd1dfc08);}public function getLastUpdated () {return (string) (int) regedit::getInstance()->getVal("//modules/autoupdate/last_updated");}public function setLastUpdated ($v07cc694b9b3fc636710fa08b6922c42b) {regedit::getInstance()->setVal("//modules/autoupdate/last_updated", (int) $v07cc694b9b3fc636710fa08b6922c42b);}};?>
