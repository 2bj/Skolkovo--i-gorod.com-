<?php
 class DeleteFilesByPatternAction extends atomicAction {protected $movedItems = Array(), $targetDirectory;public function execute() {$v207e5b7e7d2b07f6b19066e8d62f4b1d = $this->getParam("target-directory");$this->pattern = $this->getParam('pattern');$this->checkDirectory($v207e5b7e7d2b07f6b19066e8d62f4b1d);$this->deleteFiles(new umiDirectory($v207e5b7e7d2b07f6b19066e8d62f4b1d));}public function rollback() {}protected function checkDirectory($v5f8f22b8cdbaeee8cf857673a9b6ba20) {if(is_dir($v5f8f22b8cdbaeee8cf857673a9b6ba20)) {return;}else if(mkdir($v5f8f22b8cdbaeee8cf857673a9b6ba20, 0777)) {return;}else {throw new Exception("Can't create temporary directory");}}protected function deleteFiles(umiDirectory $v736007832d2167baaae763fd3a3f3cf1) {foreach($v736007832d2167baaae763fd3a3f3cf1 as $v447b7147e84be512208dcc0995d67ebc) {if($v447b7147e84be512208dcc0995d67ebc instanceof umiDirectory) {$this->deleteFiles($v447b7147e84be512208dcc0995d67ebc);}if($v447b7147e84be512208dcc0995d67ebc instanceof umiFile) {if($v447b7147e84be512208dcc0995d67ebc->getExt() == "bak") {$v447b7147e84be512208dcc0995d67ebc->delete();}}}}};?>