<?php
function DebugPrintResult($vb45cffe084dd3d20d928bee85e7b0f21) {echo "<pre><b style=\"color:blue;\">Returned by server</b><br />".htmlentities($vb45cffe084dd3d20d928bee85e7b0f21)."</pre>";}interface IServerHTTPRequest {public function setHeader($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804);public function clearHeaders();public function addPostVariable($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804);public function clearPostVariables();public function execute($v572d4e421e5e6b9bc11d815e8a027112);};class BaseServerHTTPRequest implements IServerHTTPRequest {protected $postVariables     = array();protected $additionalHeaders = array();protected function __construct() {}public function setHeader($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804) {$this->additionalHeaders[$vb068931cc450442b63f5b3d276ea4297] = (string) $v2063c1608d6e0baf80249c42e2be5804;}public function clearHeaders() {$this->additionalHeaders = array();}public function addPostVariable($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804) {if(isset($this->postVariables[$vb068931cc450442b63f5b3d276ea4297])) {if(!is_array($this->postVariables[$vb068931cc450442b63f5b3d276ea4297])) {$this->postVariables[$vb068931cc450442b63f5b3d276ea4297] = array($this->postVariables[$vb068931cc450442b63f5b3d276ea4297]);}$this->postVariables[$vb068931cc450442b63f5b3d276ea4297] = array_merge($this->postVariables[$vb068931cc450442b63f5b3d276ea4297], is_array($v2063c1608d6e0baf80249c42e2be5804) ? $v2063c1608d6e0baf80249c42e2be5804 : array($v2063c1608d6e0baf80249c42e2be5804));}else {$this->postVariables[$vb068931cc450442b63f5b3d276ea4297] = $v2063c1608d6e0baf80249c42e2be5804;}}public function clearPostVariables() {$this->postVariables = array();}public function execute($v572d4e421e5e6b9bc11d815e8a027112) {return true;}protected function buildHeaders() {if(empty($this->additionalHeaders)) return '';$va8631f5df1a55262ef1365a0ed379990 = array();foreach($this->additionalHeaders as $v5b56d13efd69e1602f78ded5d4b9cb80 => $vd67aaa644beff2bfdf506b40ff2a32f2) {$va8631f5df1a55262ef1365a0ed379990[] = $v5b56d13efd69e1602f78ded5d4b9cb80 . ': ' . $vd67aaa644beff2bfdf506b40ff2a32f2;}return implode("\r\n", $va8631f5df1a55262ef1365a0ed379990 );}};class CurlServerHTTPRequest extends BaseServerHTTPRequest {public function __construct() {}public function execute($v572d4e421e5e6b9bc11d815e8a027112) {$ve1260894f59eeae98c8440899de4df8d = curl_init($v572d4e421e5e6b9bc11d815e8a027112);if(!$ve1260894f59eeae98c8440899de4df8d) throw new Exception('CURL init failed', 9101);curl_setopt($ve1260894f59eeae98c8440899de4df8d, CURLOPT_RETURNTRANSFER, true);if(!empty($this->postVariables)) {curl_setopt($ve1260894f59eeae98c8440899de4df8d, CURLOPT_POST,   count($this->postVariables));curl_setopt($ve1260894f59eeae98c8440899de4df8d, CURLOPT_POSTFIELDS, http_build_query($this->postVariables));}curl_setopt($ve1260894f59eeae98c8440899de4df8d, CURLOPT_HEADER, empty($this->additionalHeaders) ? 0 : $this->buildHeaders() );$result = curl_exec($ve1260894f59eeae98c8440899de4df8d);$vcaf9b6b99962bf5c2264824231d7a40c   = curl_getinfo($ve1260894f59eeae98c8440899de4df8d);if($result === false || $vcaf9b6b99962bf5c2264824231d7a40c['http_code'] != 200) {throw new Exception('Curl error: ' . curl_error($ve1260894f59eeae98c8440899de4df8d), 9102);}curl_close($ve1260894f59eeae98c8440899de4df8d);return $result;}};class SocketServerHTTPRequest extends BaseServerHTTPRequest {const READ_PACKET_SIZE = 4096;public function __construct() {}public function execute($v572d4e421e5e6b9bc11d815e8a027112) {$vac9c1876b892b814d6c24e7a85a09f85 = parse_url($v572d4e421e5e6b9bc11d815e8a027112);$v901555fb06e346cb065ceb9808dcfc25      = isset($vac9c1876b892b814d6c24e7a85a09f85['port']) ? $vac9c1876b892b814d6c24e7a85a09f85['port'] : getservbyname('www', 'tcp');$v884d9804999fc47a3c2694e49ad2536a   = gethostbyname($vac9c1876b892b814d6c24e7a85a09f85['host']);$v61f2529360aec54f5dc9804b842cf3fa    = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);if(!socket_connect($v61f2529360aec54f5dc9804b842cf3fa, $v884d9804999fc47a3c2694e49ad2536a, $v901555fb06e346cb065ceb9808dcfc25)) {throw new Exception('Can not connect to host ' . $vac9c1876b892b814d6c24e7a85a09f85['host'], 9201);}$v0546e8b62aa5fd8bf2522c04ae878d90     = (!empty($this->postVariables)) ? http_build_query($this->postVariables) : null;$v618699e56323a66d68ff3231ae0f9a6b = (empty($this->postVariables)?"GET ":"POST ").$vac9c1876b892b814d6c24e7a85a09f85['path']." HTTP/1.1\r\n".                      "Host: ".$vac9c1876b892b814d6c24e7a85a09f85['host']."\r\n".               "User-Agent: smu v1.0\r\n".               (empty($this->postVariables) ? "" : "Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ".strlen($v0546e8b62aa5fd8bf2522c04ae878d90)."\r\n") .               (strlen($vfa816edb83e95bf0c8da580bdfd491ef = $this->buildHeaders()) ? ($vfa816edb83e95bf0c8da580bdfd491ef . "\r\n") : "") .               "Connection: close\r\n\r\n" . $v0546e8b62aa5fd8bf2522c04ae878d90;if(socket_send($v61f2529360aec54f5dc9804b842cf3fa, $v618699e56323a66d68ff3231ae0f9a6b, strlen($v618699e56323a66d68ff3231ae0f9a6b), 0) < 0) {throw new Exception('Request send failed', 9202);}$v7f2db423a49b305459147332fb01cf87 = '';$result = '';$v3c8759eb5f0fe45f9ea243dddbce2a67 = false;do{$vd871906e18d7e876e6494103da4beebd = socket_recv($v61f2529360aec54f5dc9804b842cf3fa, $v7f2db423a49b305459147332fb01cf87, SocketServerHTTPRequest::READ_PACKET_SIZE, 0);if(!$v3c8759eb5f0fe45f9ea243dddbce2a67) {$v4340fd73e75df7a9d9e45902a59ba3a4 = substr($v7f2db423a49b305459147332fb01cf87, 0, strpos($v7f2db423a49b305459147332fb01cf87, "\r\n\r\n"));$v7f2db423a49b305459147332fb01cf87  = substr($v7f2db423a49b305459147332fb01cf87, strpos($v7f2db423a49b305459147332fb01cf87, "\r\n\r\n")+4);$vd871906e18d7e876e6494103da4beebd = $vd871906e18d7e876e6494103da4beebd - strlen($v4340fd73e75df7a9d9e45902a59ba3a4) - 4;$v3c8759eb5f0fe45f9ea243dddbce2a67 = true;$v4340fd73e75df7a9d9e45902a59ba3a4 = explode("\r\n", $v4340fd73e75df7a9d9e45902a59ba3a4);$v9acb44549b41563697bb490144ec6258  = explode(" ", $v4340fd73e75df7a9d9e45902a59ba3a4[0]);if($v9acb44549b41563697bb490144ec6258[1] != '200') {throw new Exception('Remote file does not exists', 9203);}}$result .= $v7f2db423a49b305459147332fb01cf87;}while($vd871906e18d7e876e6494103da4beebd != 0);socket_close($v61f2529360aec54f5dc9804b842cf3fa);return $result;}};class StreamServerHTTPRequest extends BaseServerHTTPRequest {public function __construct() {}public function execute($v572d4e421e5e6b9bc11d815e8a027112) {$v5c18ef72771564b7f43c497dc507aeab = NULL;if(!empty($this->additionalHeaders) || !empty($this->postVariables)) {$vc14cdec3a3c0414bf4fee2a9233fcece = array('http'=>array());if(!empty($vbc7d420606e2e2ab63b4a2528a7bbadf)) {$vc14cdec3a3c0414bf4fee2a9233fcece['http']['header'] = $this->buildHeaders();}if(!empty($this->postVariables)) {$vc14cdec3a3c0414bf4fee2a9233fcece['http']['method']  = 'POST';$vc14cdec3a3c0414bf4fee2a9233fcece['http']['content'] = http_build_query($this->postVariables);}$v5c18ef72771564b7f43c497dc507aeab = stream_context_create($vc14cdec3a3c0414bf4fee2a9233fcece);}$result = file_get_contents($v572d4e421e5e6b9bc11d815e8a027112, false, $v5c18ef72771564b7f43c497dc507aeab);if(!$result) {throw new Exception('Remote file does not exists', 9301);}return $result;}};function getServerRequest() {if(function_exists('curl_init')) {return new CurlServerHTTPRequest();}if(intval(ini_get('allow_url_fopen'))) {return new StreamServerHTTPRequest();}if(function_exists('socket_create')) {return new SocketServerHTTPRequest();}throw new Exception('No suitable method found for request', 9001);}?>