<?php
 class utypeStream extends umiBaseStream {protected $scheme = "utype", $group_name = NULL, $field_name = NULL;public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736) {$vb99eb979e6f6efabc396f777b503f7e7 = cacheFrontend::getInstance();if($v8d777f385d3dfec8815d20f7496026dc = $vb99eb979e6f6efabc396f777b503f7e7->loadData($vd6fe1d0be6347b8ef2427fa629c04485)) {return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}$v94757cae63fd3e398c0811a976dd6bbe = $this->parsePath($vd6fe1d0be6347b8ef2427fa629c04485);$vdb6d9b451b818ccc9a449383f2f0c450 = umiObjectTypesCollection::getInstance();if(is_array($v94757cae63fd3e398c0811a976dd6bbe)) {$vd14a8022b085f9ef19d479cbdd581127 = array();foreach($v94757cae63fd3e398c0811a976dd6bbe as $vb80bb7740288fda1f201890375a60c8f) {$vd14a8022b085f9ef19d479cbdd581127[] = $vdb6d9b451b818ccc9a449383f2f0c450->getType($vb80bb7740288fda1f201890375a60c8f);}}else {$vd14a8022b085f9ef19d479cbdd581127 = $vdb6d9b451b818ccc9a449383f2f0c450->getType($v94757cae63fd3e398c0811a976dd6bbe);}if(($vd14a8022b085f9ef19d479cbdd581127 instanceof iUmiObjectType) || is_array($vd14a8022b085f9ef19d479cbdd581127)) {$v8d777f385d3dfec8815d20f7496026dc = $this->translateToXml($vd14a8022b085f9ef19d479cbdd581127);if($this->expire) $vb99eb979e6f6efabc396f777b503f7e7->saveData($vd6fe1d0be6347b8ef2427fa629c04485, $v8d777f385d3dfec8815d20f7496026dc, $this->expire);return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}else {return $this->setDataError('not-found');}}protected function parsePath($vd6fe1d0be6347b8ef2427fa629c04485) {$vd6fe1d0be6347b8ef2427fa629c04485 = parent::parsePath($vd6fe1d0be6347b8ef2427fa629c04485);$v47c80780ab608cc046f2a6e6f071feb6 = split("\/", $vd6fe1d0be6347b8ef2427fa629c04485);if(sizeof($v47c80780ab608cc046f2a6e6f071feb6) >= 2) {switch($v47c80780ab608cc046f2a6e6f071feb6[0]){case "dominant" : {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();return $vb81ca7c0ccaa77e7aa91936ab0070695->getDominantTypeId( $this->getTypeId($v47c80780ab608cc046f2a6e6f071feb6[1]) );}case "child" : {$vdb6d9b451b818ccc9a449383f2f0c450 = umiObjectTypesCollection::getInstance();return $vdb6d9b451b818ccc9a449383f2f0c450->getChildClasses( $this->getTypeId($v47c80780ab608cc046f2a6e6f071feb6[1]) );}}}$v47c80780ab608cc046f2a6e6f071feb6 = split("\.", $vd6fe1d0be6347b8ef2427fa629c04485);if(is_array($v47c80780ab608cc046f2a6e6f071feb6)) {$vd6fe1d0be6347b8ef2427fa629c04485 = $v47c80780ab608cc046f2a6e6f071feb6[0];if(sizeof($v47c80780ab608cc046f2a6e6f071feb6) > 1) {$this->group_name = $v47c80780ab608cc046f2a6e6f071feb6[1];}if(sizeof($v47c80780ab608cc046f2a6e6f071feb6) > 2) {$this->field_name = $v47c80780ab608cc046f2a6e6f071feb6[2];}}return $vd6fe1d0be6347b8ef2427fa629c04485;}private function getTypeId($veb43610bff4bf58aa2af0ba56299d57a) {if((string)((int) $veb43610bff4bf58aa2af0ba56299d57a) == $veb43610bff4bf58aa2af0ba56299d57a) {return (int) $veb43610bff4bf58aa2af0ba56299d57a;}else {list($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) = explode("::", $veb43610bff4bf58aa2af0ba56299d57a);return umiObjectTypesCollection::getInstance()->getBaseType($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}}protected function translateToXml($v599dcce2998a6b40b1e38e8c6006cb0a) {switch(false) {case is_null($this->field_name): {$v3aabf39f2d943fa886d86dcbbee4d910 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId($this->field_name);$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$v10573b873d2fa5a365d558a45e328e47 = Array("full:field" => $v06e3d36fa30cea095545139854ad1fb9);break;}case is_null($this->group_name): {$vdb0f6f37ebeb6ea09489124345af2a45 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroupByName($this->group_name);$v10573b873d2fa5a365d558a45e328e47 = Array("full:group" => $vdb0f6f37ebeb6ea09489124345af2a45);break;}case !is_array($v599dcce2998a6b40b1e38e8c6006cb0a): {$v10573b873d2fa5a365d558a45e328e47 = array();$v10573b873d2fa5a365d558a45e328e47 = array("nodes:type" => $v599dcce2998a6b40b1e38e8c6006cb0a);break;}default: {$v10573b873d2fa5a365d558a45e328e47 = Array("full:type" => $v599dcce2998a6b40b1e38e8c6006cb0a);break;}}return parent::translateToXml($v10573b873d2fa5a365d558a45e328e47);}};?>