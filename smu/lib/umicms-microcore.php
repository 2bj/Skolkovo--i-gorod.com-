<?php
 if(!defined("CURRENT_VERSION_LINE")) define("CURRENT_VERSION_LINE", "");if(!defined("CURRENT_WORKING_DIR")) define("CURRENT_WORKING_DIR", "/tmp/non-existing-directory");$vd2962d9ba1823a204aa406e3fe3f906b = Array('ru');if(isset($_REQUEST['p'])) {$v83878c91171338902e0fe0fb97a8c47a = (int) $_REQUEST['p'];if($v83878c91171338902e0fe0fb97a8c47a < 0) $v83878c91171338902e0fe0fb97a8c47a = 0;$_REQUEST['p'] = $v83878c91171338902e0fe0fb97a8c47a;unset($v83878c91171338902e0fe0fb97a8c47a);}function wa_strtolower($v341be97d9aff90c9978347f66f945b77) {$vafd513cd02b262cb9f984eabad9764d9 = function_exists("mb_strtolower") ? "mb_strtolower" : "strtolower";return $vafd513cd02b262cb9f984eabad9764d9($v341be97d9aff90c9978347f66f945b77);}function wa_substr($v341be97d9aff90c9978347f66f945b77, $v5e0bdcbddccca4d66d74ba8c1cee1a68, $v7a86c157ee9713c34fbd7a1ee40f0c5a) {$vbb8e741b6ff17aedde9db8832684e175 = function_exists("mb_strtolower") ? "mb_substr" : "substr";return $vbb8e741b6ff17aedde9db8832684e175($v341be97d9aff90c9978347f66f945b77, $v5e0bdcbddccca4d66d74ba8c1cee1a68, $v7a86c157ee9713c34fbd7a1ee40f0c5a);}function wa_strlen($v341be97d9aff90c9978347f66f945b77) {$ve534965e4b07f2d84ec5ee19506ee2e3 = function_exists("mb_strlen") ? "mb_strlen" : "strlen";return $ve534965e4b07f2d84ec5ee19506ee2e3($v341be97d9aff90c9978347f66f945b77);}function getArrayKey($vf1f713c9e000f5d3f280adbd124df4f5, $v3c6e0b8a9c15224a8228b9a98ca1531d) {if(!is_array($vf1f713c9e000f5d3f280adbd124df4f5)) {return false;}if($v3c6e0b8a9c15224a8228b9a98ca1531d === false) return NULL;if(array_key_exists($v3c6e0b8a9c15224a8228b9a98ca1531d, $vf1f713c9e000f5d3f280adbd124df4f5)) {return $vf1f713c9e000f5d3f280adbd124df4f5[$v3c6e0b8a9c15224a8228b9a98ca1531d];}else {return NULL;}}function getRequest($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_REQUEST, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getSession($v3c6e0b8a9c15224a8228b9a98ca1531d) {if(!isset($_SESSION)) return NULL;return getArrayKey($_SESSION, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getServer($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_SERVER, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getCookie($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_COOKIE, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getLabel($v3c6e0b8a9c15224a8228b9a98ca1531d, $vd6fe1d0be6347b8ef2427fa629c04485 = false) {return ulangStream::getLabel($v3c6e0b8a9c15224a8228b9a98ca1531d, $vd6fe1d0be6347b8ef2427fa629c04485);}function getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {return ulangStream::getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b);}function getMaxValue($v47c80780ab608cc046f2a6e6f071feb6) {$v9b207167e5381c47682c6b4f58a623fb = false;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v47c80780ab608cc046f2a6e6f071feb6);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vfa816edb83e95bf0c8da580bdfd491ef = $v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741];if($vfa816edb83e95bf0c8da580bdfd491ef > $v9b207167e5381c47682c6b4f58a623fb) {$v9b207167e5381c47682c6b4f58a623fb = $vfa816edb83e95bf0c8da580bdfd491ef;}}return $v9b207167e5381c47682c6b4f58a623fb;}function l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, $va7eb3552b40c56df3241c1b4b523dae5 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array(), $v865c0c0b4ab0e063e5caa3387c1a8741 = 0;if(substr($vac5c74b64b4b8352ef2f181affb5ac2a, 0, 1) == "\t") {$vac5c74b64b4b8352ef2f181affb5ac2a = trim($vac5c74b64b4b8352ef2f181affb5ac2a, " \t\n");}if(strtoupper(substr($vac5c74b64b4b8352ef2f181affb5ac2a, 0, 6)) != "SELECT" || defined('MYSQL_DISABLE_CACHE')) return mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v0800fc577294c34e0b28ad2839435945 = md5($vac5c74b64b4b8352ef2f181affb5ac2a);if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945]) && $va7eb3552b40c56df3241c1b4b523dae5 == false) {$result = $v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945][0];if($v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945][1]) {mysql_data_seek($result, 0);}}else {$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if(mysql_error()) {$v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945] = false;}else {$v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945] = Array($result, mysql_num_rows($result));}}return $result;}function bytes_strlen($vb45cffe084dd3d20d928bee85e7b0f21) {if(function_exists('mb_internal_encoding')) {$vf36ec1ca57a6e572e8fa65316520437b  = mb_internal_encoding();mb_internal_encoding("latin1");$va5a928b6b6b19de8a18398c7b29f47d7 = strlen($vb45cffe084dd3d20d928bee85e7b0f21);mb_internal_encoding($vf36ec1ca57a6e572e8fa65316520437b);}else {return strlen($vb45cffe084dd3d20d928bee85e7b0f21);}}function bytes_substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844 = false) {if(function_exists('mb_internal_encoding')) {$vf36ec1ca57a6e572e8fa65316520437b = mb_internal_encoding();mb_internal_encoding("latin1");$vdccc8c8d061984a56d899361b4934477 = '';if($v2fa47f7c65fec19cc163b195725e3844 !== false) {$vdccc8c8d061984a56d899361b4934477 = substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844);}else {$vdccc8c8d061984a56d899361b4934477 = substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92);}mb_internal_encoding($vf36ec1ca57a6e572e8fa65316520437b);return $vdccc8c8d061984a56d899361b4934477;}else {if($v2fa47f7c65fec19cc163b195725e3844 !== false)    return substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844);else    return substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92);}}function removeDirectory($v736007832d2167baaae763fd3a3f3cf1) {if(!$v700f6fa0edb608ee5cc3cfa63f1c94cc = @opendir($v736007832d2167baaae763fd3a3f3cf1)) {return false;}while (($vbe8f80182e0c983916da7338c2c1c040 = readdir($v700f6fa0edb608ee5cc3cfa63f1c94cc)) !== false) {if($vbe8f80182e0c983916da7338c2c1c040=='.' || $vbe8f80182e0c983916da7338c2c1c040=='..') continue;if (!@unlink($v736007832d2167baaae763fd3a3f3cf1.'/'.$vbe8f80182e0c983916da7338c2c1c040)) {removeDirectory($v736007832d2167baaae763fd3a3f3cf1.'/'.$vbe8f80182e0c983916da7338c2c1c040);}}@rmdir($v736007832d2167baaae763fd3a3f3cf1);return true;}function getInterfaceLangs() {global $vd2962d9ba1823a204aa406e3fe3f906b;return $vd2962d9ba1823a204aa406e3fe3f906b;}function checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a) {$v5a05866850c28651fe234659f6c92ada = getInterfaceLangs();if(in_array($v851f5ac9941d720844d143ed9cfcf60a, $v5a05866850c28651fe234659f6c92ada)) {return $v851f5ac9941d720844d143ed9cfcf60a;}else {return "ru";}}function check_session() {$v957b527bcfbad2e80f58d20683931435 = getServer('REMOTE_ADDR');if(is_null(getSession('session-owner-ip'))) {$_SESSION['session-owner-ip'] = $v957b527bcfbad2e80f58d20683931435;return true;}if(!session_id()) {session_start();}if(getSession('session-owner-ip') == $v957b527bcfbad2e80f58d20683931435) {return true;}else {session_destroy();session_start();return false;}}function makeThumbnailFullUnsharpMask($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $ve9f40e1f1d1658681dad2dac4ae0971e, $vfc021d54683383e5078ab9fefc4d53c8, $vf0598264a691a8f62272aca0e79af374) {if (function_exists('UnsharpMask')){return UnsharpMask($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $ve9f40e1f1d1658681dad2dac4ae0971e, $vfc021d54683383e5078ab9fefc4d53c8, $vf0598264a691a8f62272aca0e79af374);}else{if ($ve9f40e1f1d1658681dad2dac4ae0971e > 500) $ve9f40e1f1d1658681dad2dac4ae0971e = 500;$ve9f40e1f1d1658681dad2dac4ae0971e = $ve9f40e1f1d1658681dad2dac4ae0971e * 0.016;if ($vfc021d54683383e5078ab9fefc4d53c8 > 50) $vfc021d54683383e5078ab9fefc4d53c8 = 50;$vfc021d54683383e5078ab9fefc4d53c8 = $vfc021d54683383e5078ab9fefc4d53c8 * 2;if ($vf0598264a691a8f62272aca0e79af374 > 255) $vf0598264a691a8f62272aca0e79af374 = 255;$vfc021d54683383e5078ab9fefc4d53c8 = abs(round($vfc021d54683383e5078ab9fefc4d53c8));if ($vfc021d54683383e5078ab9fefc4d53c8 == 0) {return $vb798abe6e1b1318ee36b0dcb3fb9e4d3;imagedestroy($vb798abe6e1b1318ee36b0dcb3fb9e4d3);break;}$vf1290186a5d0b1ceab27f4e77c0c5d68 = imagesx($vb798abe6e1b1318ee36b0dcb3fb9e4d3);$v2510c39011c5be704182423e3a695e91 = imagesy($vb798abe6e1b1318ee36b0dcb3fb9e4d3);$vdd2b9c2d0f89eb88267d945e852649e1 = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;$v731eea25c6c42b949dd8b33e55cb622e = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;$v0912bfe735bcb6f63b4dc49ae3833df8 = imagecreatetruecolor($vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91);for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $vfc021d54683383e5078ab9fefc4d53c8;$v865c0c0b4ab0e063e5caa3387c1a8741++)    {imagecopy   ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 1, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91 - 1);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 1, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 50);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 1, 1, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91, 33.33333);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 0, 0, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91 - 1, 25);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 1, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91, 33.33333);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 0, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 25);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 0, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91 - 1, 20 );imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 1, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 16.666667);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 50);}$vdd2b9c2d0f89eb88267d945e852649e1 = $v0912bfe735bcb6f63b4dc49ae3833df8;for ($v9dd4e461268c8034f5c8564e155c67a6 = 0;$v9dd4e461268c8034f5c8564e155c67a6 < $vf1290186a5d0b1ceab27f4e77c0c5d68;$v9dd4e461268c8034f5c8564e155c67a6++)    {for ($v415290769594460e2e485922904f345d = 0;$v415290769594460e2e485922904f345d < $v2510c39011c5be704182423e3a695e91;$v415290769594460e2e485922904f345d++)     {$ve7ee80f9d3ee77a07b7e0e40911d4b85 = ImageColorAt($v731eea25c6c42b949dd8b33e55cb622e, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d);$vcd8a4c8c79b1ff2c064026bb7cefe760 = (($ve7ee80f9d3ee77a07b7e0e40911d4b85 >> 16) & 0xFF);$vd7fd33dc47e7db31c2bdd232804331bf = (($ve7ee80f9d3ee77a07b7e0e40911d4b85 >> 8) & 0xFF);$v62f533cdf0bda50d31d41662bbe16e8e = ($ve7ee80f9d3ee77a07b7e0e40911d4b85 & 0xFF);$v82d175da0ae7901210ea5d63914f5212 = ImageColorAt($vdd2b9c2d0f89eb88267d945e852649e1, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d);$v56dc21b41aac91a611402ee281442e54 = (($v82d175da0ae7901210ea5d63914f5212 >> 16) & 0xFF);$vab27a9c8dd988ea5d32cd8f3e763b1b1 = (($v82d175da0ae7901210ea5d63914f5212 >> 8) & 0xFF);$vfbdaa5229703cc85625873f73f1ef573 = ($v82d175da0ae7901210ea5d63914f5212 & 0xFF);$v6c99f2ac4dbbc9ac99a83340dacd50cb = (abs($vcd8a4c8c79b1ff2c064026bb7cefe760 - $v56dc21b41aac91a611402ee281442e54) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($vcd8a4c8c79b1ff2c064026bb7cefe760 - $v56dc21b41aac91a611402ee281442e54)) + $vcd8a4c8c79b1ff2c064026bb7cefe760)) : $vcd8a4c8c79b1ff2c064026bb7cefe760;$v8f3e420d187de004189e440099d8e9b8 = (abs($vd7fd33dc47e7db31c2bdd232804331bf - $vab27a9c8dd988ea5d32cd8f3e763b1b1) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($vd7fd33dc47e7db31c2bdd232804331bf - $vab27a9c8dd988ea5d32cd8f3e763b1b1)) + $vd7fd33dc47e7db31c2bdd232804331bf)) : $vd7fd33dc47e7db31c2bdd232804331bf;$v4798968467b4ab45ea7902a5084666b8 = (abs($v62f533cdf0bda50d31d41662bbe16e8e - $vfbdaa5229703cc85625873f73f1ef573) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($v62f533cdf0bda50d31d41662bbe16e8e - $vfbdaa5229703cc85625873f73f1ef573)) + $v62f533cdf0bda50d31d41662bbe16e8e)) : $v62f533cdf0bda50d31d41662bbe16e8e;if (($vcd8a4c8c79b1ff2c064026bb7cefe760 != $v6c99f2ac4dbbc9ac99a83340dacd50cb) || ($vd7fd33dc47e7db31c2bdd232804331bf != $v8f3e420d187de004189e440099d8e9b8) || ($v62f533cdf0bda50d31d41662bbe16e8e != $v4798968467b4ab45ea7902a5084666b8))      {$vfbfe459f582d8ac5384527d6aaadb670 = ImageColorAllocate($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $v6c99f2ac4dbbc9ac99a83340dacd50cb, $v8f3e420d187de004189e440099d8e9b8, $v4798968467b4ab45ea7902a5084666b8);ImageSetPixel($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d, $vfbfe459f582d8ac5384527d6aaadb670);}}}return $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}}function makeThumbnailFullPlaceLogo($v78805a221a988e79ef3f42d7c5bfd418) {$vf021103e5dbf3bd28654d514602d5f2c="./images/cms/thumbs_logo.png";$v2a09903bdaa62517a021343b515d5661=3;$v9dd4e461268c8034f5c8564e155c67a6=5;$v415290769594460e2e485922904f345d=5;$v322bee9d252d58cb28c88282610ce462=imagesx($v78805a221a988e79ef3f42d7c5bfd418);$vf307c0e7396c8251b0c15f231deb4c81=imagesy($v78805a221a988e79ef3f42d7c5bfd418);if (file_exists($vf021103e5dbf3bd28654d514602d5f2c)) {$vf090fa7c4d8ad01ab02cf08039a139ca = new umiImageFile($vf021103e5dbf3bd28654d514602d5f2c);if(($v322bee9d252d58cb28c88282610ce462 < ($vf090fa7c4d8ad01ab02cf08039a139ca->getWidth()+$v9dd4e461268c8034f5c8564e155c67a6)) || ($vf307c0e7396c8251b0c15f231deb4c81 < ($vf090fa7c4d8ad01ab02cf08039a139ca->getHeight()+$v415290769594460e2e485922904f345d)) ){return $v78805a221a988e79ef3f42d7c5bfd418;}$v96d6f2e7e1f705ab5e59c84a6dc009b2=@imagecreatefrompng($vf021103e5dbf3bd28654d514602d5f2c);if ($v96d6f2e7e1f705ab5e59c84a6dc009b2) {$v52a052e1889e293183cfb19c8ba46cfe=imagesx($v96d6f2e7e1f705ab5e59c84a6dc009b2);$vb7b422b08bdd1848f0238602b511a5e4=imagesy($v96d6f2e7e1f705ab5e59c84a6dc009b2);switch ($v2a09903bdaa62517a021343b515d5661) {case 2:      $v9dd4e461268c8034f5c8564e155c67a6=$v322bee9d252d58cb28c88282610ce462-$v9dd4e461268c8034f5c8564e155c67a6-$v52a052e1889e293183cfb19c8ba46cfe;break;case 3:      $v9dd4e461268c8034f5c8564e155c67a6=$v322bee9d252d58cb28c88282610ce462-$v9dd4e461268c8034f5c8564e155c67a6-$v52a052e1889e293183cfb19c8ba46cfe;$v415290769594460e2e485922904f345d=$vf307c0e7396c8251b0c15f231deb4c81-$v415290769594460e2e485922904f345d-$vb7b422b08bdd1848f0238602b511a5e4;break;case 4:      $v415290769594460e2e485922904f345d=$vf307c0e7396c8251b0c15f231deb4c81-$v415290769594460e2e485922904f345d-$vb7b422b08bdd1848f0238602b511a5e4;break;case 5:      $v9dd4e461268c8034f5c8564e155c67a6=floor($v322bee9d252d58cb28c88282610ce462/2-$v52a052e1889e293183cfb19c8ba46cfe/2);$v415290769594460e2e485922904f345d=floor($vf307c0e7396c8251b0c15f231deb4c81/2-$vb7b422b08bdd1848f0238602b511a5e4/2);break;default:    }imagecopy($v78805a221a988e79ef3f42d7c5bfd418,$v96d6f2e7e1f705ab5e59c84a6dc009b2,$v9dd4e461268c8034f5c8564e155c67a6,$v415290769594460e2e485922904f345d,0,0,$v52a052e1889e293183cfb19c8ba46cfe,$vb7b422b08bdd1848f0238602b511a5e4);}}return $v78805a221a988e79ef3f42d7c5bfd418;}function makeThumbnailFull($vd6fe1d0be6347b8ef2427fa629c04485, $vf09cbf63485d929911164e808f84423b, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $va634e7960e04b1633c103382004fe526 = true, $v70c8b4c146f72fc2a6a1886dae113831 = 5, $vb5db1323df6de62d5bda823c63ad4cbe = false) {$vd66636b253cb346dbb6240e30def3618 = 80;$vf711798e436a77f680a1070c008a2a66=true;$v78805a221a988e79ef3f42d7c5bfd418 = new umiImageFile($vd6fe1d0be6347b8ef2427fa629c04485);$v3090ad88ff7c9ca191579b709069fe64 = $v78805a221a988e79ef3f42d7c5bfd418->getFileName();$veb9f74e698fbb6e2897b3791bc406cbf = $v78805a221a988e79ef3f42d7c5bfd418->getExt();$veb9f74e698fbb6e2897b3791bc406cbf = strtolower($veb9f74e698fbb6e2897b3791bc406cbf);$v107703932395f334896434b598ccdc55 = Array('gif', 'jpeg', 'jpg', 'png', 'bmp');if(!in_array($veb9f74e698fbb6e2897b3791bc406cbf, $v107703932395f334896434b598ccdc55)) return "";$v9184e69b9ad79d5076c912710a99e551  = filemtime($vd6fe1d0be6347b8ef2427fa629c04485);$vddc9a97c07cfa1f9fe744dbc63143e5c = md5($vd6fe1d0be6347b8ef2427fa629c04485.$veaae26a6fb20ed3ef54fb23bfa0b1fcc.$vb435e227d5dd201e1768b2bcb2e0aa81.$va634e7960e04b1633c103382004fe526.$v70c8b4c146f72fc2a6a1886dae113831.$vb5db1323df6de62d5bda823c63ad4cbe)."." . $veb9f74e698fbb6e2897b3791bc406cbf;$vf38211e4c6839893265bcda112b63f80 = $vf09cbf63485d929911164e808f84423b . $vddc9a97c07cfa1f9fe744dbc63143e5c;if(!is_file($vf38211e4c6839893265bcda112b63f80)) {$v3a8d65a128a22de38fe374a76974161c = $v78805a221a988e79ef3f42d7c5bfd418->getWidth();$v427c23061461a4b29c5d39dd32b7f2c6 = $v78805a221a988e79ef3f42d7c5bfd418->getHeight();if($vb435e227d5dd201e1768b2bcb2e0aa81 == "auto") {$v3c10300988ff410c7f7181d43214229e = (int) round($v427c23061461a4b29c5d39dd32b7f2c6 * ($veaae26a6fb20ed3ef54fb23bfa0b1fcc / $v3a8d65a128a22de38fe374a76974161c));$vb435e227d5dd201e1768b2bcb2e0aa81=$v3c10300988ff410c7f7181d43214229e;$v6f81aaeb51b38cddc8851000851e9c98 = (int) $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}else {if($veaae26a6fb20ed3ef54fb23bfa0b1fcc == "auto") {$v6f81aaeb51b38cddc8851000851e9c98 = (int) round($v3a8d65a128a22de38fe374a76974161c * ($vb435e227d5dd201e1768b2bcb2e0aa81 / $v427c23061461a4b29c5d39dd32b7f2c6));$veaae26a6fb20ed3ef54fb23bfa0b1fcc=$v6f81aaeb51b38cddc8851000851e9c98;}else {$v6f81aaeb51b38cddc8851000851e9c98 = (int) $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}$v3c10300988ff410c7f7181d43214229e = (int) $vb435e227d5dd201e1768b2bcb2e0aa81;}$va13a7d0465adabf0bc59a5a26873cc4d=0;$v6918e386f5cdd77edf37c6f42cdad6a2=0;if (!intval($veaae26a6fb20ed3ef54fb23bfa0b1fcc) || !intval($vb435e227d5dd201e1768b2bcb2e0aa81)) {$va634e7960e04b1633c103382004fe526 = false;}if($va634e7960e04b1633c103382004fe526)     {$v17370b9bf2bb4af83eba44b15e2315b9 = $v3a8d65a128a22de38fe374a76974161c/$veaae26a6fb20ed3ef54fb23bfa0b1fcc;$v205a8652407c62be13889d94c91f49e8 = $v427c23061461a4b29c5d39dd32b7f2c6/$vb435e227d5dd201e1768b2bcb2e0aa81;if ($v17370b9bf2bb4af83eba44b15e2315b9 > $v205a8652407c62be13889d94c91f49e8)      {$v6918e386f5cdd77edf37c6f42cdad6a2 = round(($v3a8d65a128a22de38fe374a76974161c-$veaae26a6fb20ed3ef54fb23bfa0b1fcc*$v205a8652407c62be13889d94c91f49e8)/2);$v3a8d65a128a22de38fe374a76974161c = round($veaae26a6fb20ed3ef54fb23bfa0b1fcc*$v205a8652407c62be13889d94c91f49e8);}elseif ($v17370b9bf2bb4af83eba44b15e2315b9 < $v205a8652407c62be13889d94c91f49e8)      {$va13a7d0465adabf0bc59a5a26873cc4d = round(($v427c23061461a4b29c5d39dd32b7f2c6-$vb435e227d5dd201e1768b2bcb2e0aa81*$v17370b9bf2bb4af83eba44b15e2315b9)/2);$v427c23061461a4b29c5d39dd32b7f2c6 = round($vb435e227d5dd201e1768b2bcb2e0aa81*$v17370b9bf2bb4af83eba44b15e2315b9);}if($v70c8b4c146f72fc2a6a1886dae113831)     {switch ($v70c8b4c146f72fc2a6a1886dae113831):       case 1:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 2:        $va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 3:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;$va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 4:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;break;case 5:        break;case 6:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;break;case 7:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;case 8:        $va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;case 9:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;$va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;endswitch;}}$vf12105146129696d6a7e0ed521db2e48 = imagecreatetruecolor($v6f81aaeb51b38cddc8851000851e9c98, $v3c10300988ff410c7f7181d43214229e);if ($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromgif($vd6fe1d0be6347b8ef2427fa629c04485);}else if ($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefrompng($vd6fe1d0be6347b8ef2427fa629c04485);}else {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromjpeg($vd6fe1d0be6347b8ef2427fa629c04485);}if ($veaae26a6fb20ed3ef54fb23bfa0b1fcc*4 < $v3a8d65a128a22de38fe374a76974161c AND $vb435e227d5dd201e1768b2bcb2e0aa81*4 < $v427c23061461a4b29c5d39dd32b7f2c6) {$_TMP=array();$_TMP['width'] = round($veaae26a6fb20ed3ef54fb23bfa0b1fcc*4);$_TMP['height'] = round($vb435e227d5dd201e1768b2bcb2e0aa81*4);$_TMP['image'] = imagecreatetruecolor($_TMP['width'], $_TMP['height']);imagecopyresized($_TMP['image'], $v36cd38f49b9afa08222c0dc9ebfe35eb, 0, 0, $v6918e386f5cdd77edf37c6f42cdad6a2, $va13a7d0465adabf0bc59a5a26873cc4d, $_TMP['width'], $_TMP['height'], $v3a8d65a128a22de38fe374a76974161c, $v427c23061461a4b29c5d39dd32b7f2c6);$v36cd38f49b9afa08222c0dc9ebfe35eb = $_TMP['image'];$v3a8d65a128a22de38fe374a76974161c = $_TMP['width'];$v427c23061461a4b29c5d39dd32b7f2c6 = $_TMP['height'];$v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d = 0;unset($_TMP);}imagecopyresampled($vf12105146129696d6a7e0ed521db2e48, $v36cd38f49b9afa08222c0dc9ebfe35eb, 0, 0, $v6918e386f5cdd77edf37c6f42cdad6a2, $va13a7d0465adabf0bc59a5a26873cc4d, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $v3a8d65a128a22de38fe374a76974161c, $v427c23061461a4b29c5d39dd32b7f2c6);if($vb5db1323df6de62d5bda823c63ad4cbe) {$vf12105146129696d6a7e0ed521db2e48 = makeThumbnailFullPlaceLogo($vf12105146129696d6a7e0ed521db2e48);}if($vf711798e436a77f680a1070c008a2a66) $vf12105146129696d6a7e0ed521db2e48 = makeThumbnailFullUnsharpMask($vf12105146129696d6a7e0ed521db2e48,80,.5,3);if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {imagepng($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {imagegif($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else {imagejpeg($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80, $vd66636b253cb346dbb6240e30def3618);}}$v2063c1608d6e0baf80249c42e2be5804 = new umiImageFile($vf38211e4c6839893265bcda112b63f80);$v47c80780ab608cc046f2a6e6f071feb6 = Array();$v47c80780ab608cc046f2a6e6f071feb6['size'] = $v2063c1608d6e0baf80249c42e2be5804->getSize();$v47c80780ab608cc046f2a6e6f071feb6['filename'] = $v2063c1608d6e0baf80249c42e2be5804->getFileName();$v47c80780ab608cc046f2a6e6f071feb6['filepath'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath();$v47c80780ab608cc046f2a6e6f071feb6['src'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath(true);$v47c80780ab608cc046f2a6e6f071feb6['ext'] = $v2063c1608d6e0baf80249c42e2be5804->getExt();$v47c80780ab608cc046f2a6e6f071feb6['width'] = $v2063c1608d6e0baf80249c42e2be5804->getWidth();$v47c80780ab608cc046f2a6e6f071feb6['height'] = $v2063c1608d6e0baf80249c42e2be5804->getHeight();if(cmsController::getInstance()->getCurrentMode() == "admin") {$v47c80780ab608cc046f2a6e6f071feb6['src'] = str_replace("&", "&amp;", $v47c80780ab608cc046f2a6e6f071feb6['src']);}return $v47c80780ab608cc046f2a6e6f071feb6;}function array_extract_values($vf1f713c9e000f5d3f280adbd124df4f5, &$result = NULL, $v19358374f34dd2c9d2dc34952227664a = false) {if(is_array($vf1f713c9e000f5d3f280adbd124df4f5) == false) {return Array();}if(is_array($result) == false) {$result = Array();}foreach($vf1f713c9e000f5d3f280adbd124df4f5 as $v2063c1608d6e0baf80249c42e2be5804) {if(is_array($v2063c1608d6e0baf80249c42e2be5804) == false) {if($v2063c1608d6e0baf80249c42e2be5804 || $v19358374f34dd2c9d2dc34952227664a == true) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}}else {array_extract_values($v2063c1608d6e0baf80249c42e2be5804, $result, $v19358374f34dd2c9d2dc34952227664a);}}return $result;}function array_positive_values($v47c80780ab608cc046f2a6e6f071feb6, $vf8532b6380228945d474f37fb6cdac27 = true) {if(is_array($v47c80780ab608cc046f2a6e6f071feb6) == false) {return Array();}$result = Array();foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {if($v2063c1608d6e0baf80249c42e2be5804) {if(is_array($v2063c1608d6e0baf80249c42e2be5804)) {if($vf8532b6380228945d474f37fb6cdac27) {$v2063c1608d6e0baf80249c42e2be5804 = array_positive_values($v2063c1608d6e0baf80249c42e2be5804, $vf8532b6380228945d474f37fb6cdac27);if(sizeof($v2063c1608d6e0baf80249c42e2be5804) == 0) {continue;}}}$result[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v2063c1608d6e0baf80249c42e2be5804;}}return $result;}function enableOutputCompression() {if(extension_loaded('zlib')) {ob_start('ob_gzhandler');}}function disableOutputCompression() {static $v4f33252742282f871b0617168156fd55 = false;if($v4f33252742282f871b0617168156fd55) {return false;}ob_end_clean();ob_start();header("Content-Encoding:");header("Content-Length:");header("Vary:");$v4f33252742282f871b0617168156fd55 = true;return true;}function natsort2d(&$v0b7b66da920976f738db754a6716a9e8, $v6af2d999a15a64f0b143bbfa790c2f37 = 0) {if(is_array($v0b7b66da920976f738db754a6716a9e8) == false) {return;}$v3d801aa532c1cec3ee82d87a99fdf63f = $v26b75b176d665f24a5fd22a2ad815763 = Array();foreach ($v0b7b66da920976f738db754a6716a9e8 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {$v3d801aa532c1cec3ee82d87a99fdf63f[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v2063c1608d6e0baf80249c42e2be5804[$v6af2d999a15a64f0b143bbfa790c2f37];}natsort($v3d801aa532c1cec3ee82d87a99fdf63f);foreach ($v3d801aa532c1cec3ee82d87a99fdf63f as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {$v26b75b176d665f24a5fd22a2ad815763[] = $v0b7b66da920976f738db754a6716a9e8[$v3c6e0b8a9c15224a8228b9a98ca1531d];}$v0b7b66da920976f738db754a6716a9e8 = $v26b75b176d665f24a5fd22a2ad815763;}function array_unique_arrays($vf1f713c9e000f5d3f280adbd124df4f5, $v3c6e0b8a9c15224a8228b9a98ca1531d) {$result = Array();$v14f802e1fba977727845e8872c1743a7 = Array();foreach($vf1f713c9e000f5d3f280adbd124df4f5 as $v47c80780ab608cc046f2a6e6f071feb6) {$v33e588420461dec019f1b83ed3119030 = isset($v47c80780ab608cc046f2a6e6f071feb6[$v3c6e0b8a9c15224a8228b9a98ca1531d]) ? $v47c80780ab608cc046f2a6e6f071feb6[$v3c6e0b8a9c15224a8228b9a98ca1531d] : NULL;if(in_array($v33e588420461dec019f1b83ed3119030, $v14f802e1fba977727845e8872c1743a7)) {continue;}else {$v14f802e1fba977727845e8872c1743a7[] = $v33e588420461dec019f1b83ed3119030;$result[] = $v47c80780ab608cc046f2a6e6f071feb6;}}return $result;}abstract class baseException extends Exception {protected $strcode;public static $catchedExceptions = Array();public function __construct ($v78e731027d8fd50ed642340b7c9a63b3, $vc13367945d5d4c91047b3b50234aa7ab = 0, $vd6ccd2379d1965a49b998d0f4207337d = "") {$v78e731027d8fd50ed642340b7c9a63b3 = templater::putLangs($v78e731027d8fd50ed642340b7c9a63b3);baseException::$catchedExceptions[] = $this;$this->strcode = $vd6ccd2379d1965a49b998d0f4207337d;parent::__construct($v78e731027d8fd50ed642340b7c9a63b3, $vc13367945d5d4c91047b3b50234aa7ab);}public function getStrCode() {return (string) $this->strcode;}};class coreException extends baseException {};class coreBreakEventsException extends coreException {};class privateException extends baseException {};class wrongParamException extends privateException {};class errorPanicException extends Exception {};class publicException extends baseException {};class publicAdminException extends publicException {};class expectElementException extends publicAdminException {};class expectObjectException extends publicAdminException {};class expectObjectTypeException extends publicAdminException {};class requireAdminPermissionsException extends publicAdminException {};class requreMoreAdminPermissionsException extends publicAdminException {};class requireAdminParamException extends publicAdminException {};class wrongElementTypeAdminException extends publicAdminException {};class publicAdminPageLimitException extends publicAdminException {};class publicAdminLicenseLimitException extends publicAdminException {};class maxIterationsExeededException extends publicException {};class umiRemoteFileGetterException extends publicException {};interface iSingleton {public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL);};abstract class singleton {private static $instances = Array();abstract protected function __construct();public static function getInstance($v4a8a08f09d37b73795649038408b5f33) {if (!isset(singleton::$instances[$v4a8a08f09d37b73795649038408b5f33])) {singleton::$instances[$v4a8a08f09d37b73795649038408b5f33] = new $v4a8a08f09d37b73795649038408b5f33;}return singleton::$instances[$v4a8a08f09d37b73795649038408b5f33];}public function __clone() {throw new coreException('Singletone clonning is not permitted. Just becase it\'s non-sense.');}protected function disableCache() {if(!defined('MYSQL_DISABLE_CACHE')) {define('MYSQL_DISABLE_CACHE', '1');}}protected function translateLabel($vd304ba20e96d87411588eeabac850e34) {$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(substr($vd304ba20e96d87411588eeabac850e34, 0, strlen($v851f5ac9941d720844d143ed9cfcf60a)) == $v851f5ac9941d720844d143ed9cfcf60a) {$v341be97d9aff90c9978347f66f945b77 = getLabel(substr($vd304ba20e96d87411588eeabac850e34, strlen($v851f5ac9941d720844d143ed9cfcf60a)));}else {$v341be97d9aff90c9978347f66f945b77 = getLabel($vd304ba20e96d87411588eeabac850e34);}return (is_null($v341be97d9aff90c9978347f66f945b77)) ? $vd304ba20e96d87411588eeabac850e34 : $v341be97d9aff90c9978347f66f945b77;}};interface iUmiEntinty {public function getId();public function commit();public function update();public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21);};abstract class umiEntinty {protected $id, $is_updated = false;protected $bNeedUpdateCache = false;public function __construct($vb80bb7740288fda1f201890375a60c8f, $vf1965a857bc285d26fe22023aa5ab50d = false) {$this->setId($vb80bb7740288fda1f201890375a60c8f);$this->is_updated = false;if($this->loadInfo($vf1965a857bc285d26fe22023aa5ab50d) === false) {throw new privateException("Failed to load info for {$this->store_type} with id {$vb80bb7740288fda1f201890375a60c8f}");}}public function __clone() {throw new coreException('umiEntinty must not be cloned');}public function __destruct() {if ($this->is_updated) {$this->save();$this->setIsUpdated(false);$this->updateCache();}elseif ($this->bNeedUpdateCache) {$this->updateCache();}}public function getId() {return $this->id;}protected function setId($vb80bb7740288fda1f201890375a60c8f) {$this->id = (int) $vb80bb7740288fda1f201890375a60c8f;}public function getIsUpdated() {return $this->is_updated;}public function setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f = true) {$this->is_updated      = (bool) $v50e544b8aa9b48fae6d78fb7574d402f;$this->bNeedUpdateCache = $this->is_updated;}abstract protected function loadInfo();abstract protected function save();public function commit() {if ($this->is_updated) {$this->disableCache();$v9b207167e5381c47682c6b4f58a623fb = $this->save();if (cacheFrontend::getInstance()->getIsConnected()) {$this->update();$this->updateCache();}else {$this->setIsUpdated(false);}return $v9b207167e5381c47682c6b4f58a623fb;}else {return false;}}public function update() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadInfo();$this->setIsUpdated(false);return $v9b207167e5381c47682c6b4f58a623fb;}public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = mysql_real_escape_string($vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function updateCache() {cacheFrontend::getInstance()->save($this, $this->store_type);}protected function disableCache() {if(!defined('MYSQL_DISABLE_CACHE')) {if(get_class($this) === "umiObjectProperty") {return;}define('MYSQL_DISABLE_CACHE', '1');}}protected function translateLabel($vd304ba20e96d87411588eeabac850e34) {$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(substr($vd304ba20e96d87411588eeabac850e34, 0, strlen($v851f5ac9941d720844d143ed9cfcf60a)) == $v851f5ac9941d720844d143ed9cfcf60a) {$v341be97d9aff90c9978347f66f945b77 = getLabel(substr($vd304ba20e96d87411588eeabac850e34, strlen($v851f5ac9941d720844d143ed9cfcf60a)));}else {$v341be97d9aff90c9978347f66f945b77 = getLabel($vd304ba20e96d87411588eeabac850e34);}return (is_null($v341be97d9aff90c9978347f66f945b77)) ? $vd304ba20e96d87411588eeabac850e34 : $v341be97d9aff90c9978347f66f945b77;}protected function translateI18n($v341be97d9aff90c9978347f66f945b77, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {$vd304ba20e96d87411588eeabac850e34 = getI18n($v341be97d9aff90c9978347f66f945b77, $v240bf022e685b0ee30ad9fe9e1fb5d5b);return (is_null($vd304ba20e96d87411588eeabac850e34)) ? $v341be97d9aff90c9978347f66f945b77 : $vd304ba20e96d87411588eeabac850e34;}};interface iRegedit {public function getKey($vd4c18838d606531e28b9f694e066b003, $v5809e03a3657bacd238321e736b9e85d = 0);public function getVal($vd4c18838d606531e28b9f694e066b003);public function setVar($vd4c18838d606531e28b9f694e066b003, $v2063c1608d6e0baf80249c42e2be5804);public function setVal($vd4c18838d606531e28b9f694e066b003, $v2063c1608d6e0baf80249c42e2be5804);public function delVar($vd4c18838d606531e28b9f694e066b003);public function getList($vd4c18838d606531e28b9f694e066b003);};class regedit extends singleton implements iRegedit {protected $cacheFilePath, $cache = Array(), $cacheSaved = false;public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getKey($vd6fe1d0be6347b8ef2427fa629c04485, $v5809e03a3657bacd238321e736b9e85d = 0) {$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");if(isset($this->cache['keys'][$vd6fe1d0be6347b8ef2427fa629c04485])) {return $this->cache['keys'][$vd6fe1d0be6347b8ef2427fa629c04485];}$vbb90bf734107ea3b2f4c14a5d4bc4f91 = 0;foreach(split("\/", $vd6fe1d0be6347b8ef2427fa629c04485) as $v3c6e0b8a9c15224a8228b9a98ca1531d) {$v3c6e0b8a9c15224a8228b9a98ca1531d = mysql_real_escape_string($v3c6e0b8a9c15224a8228b9a98ca1531d);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms_reg WHERE rel = '$vbb90bf734107ea3b2f4c14a5d4bc4f91' AND var = '{$v3c6e0b8a9c15224a8228b9a98ca1531d}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if(mysql_num_rows($result)) {list($vbb90bf734107ea3b2f4c14a5d4bc4f91) = mysql_fetch_row($result);}else {return $this->cache['keys'][$vd6fe1d0be6347b8ef2427fa629c04485] = false;}}return $this->cache['keys'][$vd6fe1d0be6347b8ef2427fa629c04485] = (int) $vbb90bf734107ea3b2f4c14a5d4bc4f91;}public function getVal($vd6fe1d0be6347b8ef2427fa629c04485) {$vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->getKey($vd6fe1d0be6347b8ef2427fa629c04485);if(isset($this->cache['values'][$vd6fe1d0be6347b8ef2427fa629c04485])) {return $this->cache['values'][$vd6fe1d0be6347b8ef2427fa629c04485];}if($vbb90bf734107ea3b2f4c14a5d4bc4f91) {if(isset($this->cache['values'][$vbb90bf734107ea3b2f4c14a5d4bc4f91])) {return $this->cache['values'][$vbb90bf734107ea3b2f4c14a5d4bc4f91];}$this->cacheSaved = false;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT val FROM cms_reg WHERE id = '{$vbb90bf734107ea3b2f4c14a5d4bc4f91}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);list($v2063c1608d6e0baf80249c42e2be5804) = mysql_fetch_row($result);return $this->cache['values'][$vbb90bf734107ea3b2f4c14a5d4bc4f91] = $v2063c1608d6e0baf80249c42e2be5804;}else {return $this->cache['values'][$vd6fe1d0be6347b8ef2427fa629c04485] = false;}}public function setVar($vd6fe1d0be6347b8ef2427fa629c04485, $v2063c1608d6e0baf80249c42e2be5804) {return $this->setVal($vd6fe1d0be6347b8ef2427fa629c04485, $v2063c1608d6e0baf80249c42e2be5804);}public function setVal($vd6fe1d0be6347b8ef2427fa629c04485, $v2063c1608d6e0baf80249c42e2be5804) {$this->resetCache();$vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->getKey($vd6fe1d0be6347b8ef2427fa629c04485);if($vbb90bf734107ea3b2f4c14a5d4bc4f91 == false) {$vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->createKey($vd6fe1d0be6347b8ef2427fa629c04485);}$v2063c1608d6e0baf80249c42e2be5804 = mysql_real_escape_string($v2063c1608d6e0baf80249c42e2be5804);$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms_reg SET val = '{$v2063c1608d6e0baf80249c42e2be5804}' WHERE id = '{$vbb90bf734107ea3b2f4c14a5d4bc4f91}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$this->resetCache();}public function delVar($vd6fe1d0be6347b8ef2427fa629c04485) {$vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->getKey($vd6fe1d0be6347b8ef2427fa629c04485);if($vbb90bf734107ea3b2f4c14a5d4bc4f91) {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms_reg WHERE rel = '{$vbb90bf734107ea3b2f4c14a5d4bc4f91}' OR id = '{$vbb90bf734107ea3b2f4c14a5d4bc4f91}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);$this->resetCache();return true;}else {return false;}}public function getList($vd6fe1d0be6347b8ef2427fa629c04485) {if(isset($this->cache['lists'][$vd6fe1d0be6347b8ef2427fa629c04485])) {return $this->cache['lists'][$vd6fe1d0be6347b8ef2427fa629c04485];}$vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->getKey($vd6fe1d0be6347b8ef2427fa629c04485);if($vd6fe1d0be6347b8ef2427fa629c04485 == "//") {$vbb90bf734107ea3b2f4c14a5d4bc4f91 = 0;}if($vbb90bf734107ea3b2f4c14a5d4bc4f91 || $vd6fe1d0be6347b8ef2427fa629c04485 == "//") {if(isset($this->cache['lists'][$vbb90bf734107ea3b2f4c14a5d4bc4f91])) {return $this->cache['lists'][$vbb90bf734107ea3b2f4c14a5d4bc4f91];}$this->cacheSaved = false;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id, var, val FROM cms_reg WHERE rel = '{$vbb90bf734107ea3b2f4c14a5d4bc4f91}' ORDER BY id ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);$vf09cc7ee3a9a93273f4b80601cafb00c = Array();while(list($vb80bb7740288fda1f201890375a60c8f, $vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_array($result)) {$vf09cc7ee3a9a93273f4b80601cafb00c[] = Array($vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $this->cache['lists'][$vbb90bf734107ea3b2f4c14a5d4bc4f91] = $vf09cc7ee3a9a93273f4b80601cafb00c;}else {return $this->cache['lists'][$vd6fe1d0be6347b8ef2427fa629c04485] = false;}}final public static function checkSomething($v0cc175b9c0f1b6a831c399e269772661, $v92eb5ffee6ae2fec3ad71c777531578f) {$vd06146603244a6f9c3a69f88c7e4ac2e = 3600*24*45;if(($_SERVER['HTTP_HOST'] == 'localhost' || $_SERVER['HTTP_HOST'] == 'subdomain.localhost') && $_SERVER['SERVER_ADDR'] == '127.0.0.1') {return true;}if(substr($_SERVER['HTTP_HOST'], strlen($_SERVER['HTTP_HOST']) - 4, 4) == "cvs5") {return true;}foreach($v92eb5ffee6ae2fec3ad71c777531578f as $v0f4153145310ca3a80263d772ccd01d4 => $v0a3d72134fb3d6c024db4c510bc1605b) {$vf1825f6bb156dc954f46bde74ca2f841 = (bool) (substr($v0cc175b9c0f1b6a831c399e269772661, 12, strlen($v0cc175b9c0f1b6a831c399e269772661) - 12) == $v0a3d72134fb3d6c024db4c510bc1605b);if($vf1825f6bb156dc954f46bde74ca2f841 === true) {define("CURRENT_VERSION_LINE", $v0f4153145310ca3a80263d772ccd01d4);if($v0f4153145310ca3a80263d772ccd01d4 == "trial") {$vb16a626598674ad426e4b885017906d7 = filectime(__FILE__);$v95f1cf7766ccd7c57cede3b85f3a5685 = time();if(file_exists("./cache/trash")) {unlink("./cache/trash");}if(($v95f1cf7766ccd7c57cede3b85f3a5685 - $vb16a626598674ad426e4b885017906d7) > $vd06146603244a6f9c3a69f88c7e4ac2e){if(file_exists("./cache/reg")) {unlink("./cache/reg");}include "./errors/trial_expired.html";exit();}}return true;}}}public function getDaysLeft() {return 45 - floor((time() - filectime(__FILE__)) / 3600*24);}protected function __construct() {$this->loadCache();}public function __destruct() {if(!$this->cacheSaved) {$this->saveCache();}}protected function loadCache() {if(cacheFrontend::getInstance()->getIsConnected()) {if($v0fea6a13c52b4d4725368f24b045ca84 = cacheFrontend::getInstance()->loadSql("registry")) {$this->cache = unserialize($v0fea6a13c52b4d4725368f24b045ca84);$this->cacheSaved = true;return;}}if(file_exists(CURRENT_WORKING_DIR . "/cache/registry")) {$v0fea6a13c52b4d4725368f24b045ca84 = unserialize(file_get_contents(CURRENT_WORKING_DIR . "/cache/registry"));if(is_array($v0fea6a13c52b4d4725368f24b045ca84)) {$this->cacheSaved = true;$this->cache = $v0fea6a13c52b4d4725368f24b045ca84;}}}protected function saveCache() {if(is_array($this->cache)) {if(is_dir(CURRENT_WORKING_DIR . "/cache")) {file_put_contents(CURRENT_WORKING_DIR . "/cache/registry", serialize($this->cache));}if(cacheFrontend::getInstance()->getIsConnected()) {cacheFrontend::getInstance()->saveSql("registry", serialize($this->cache));}}$this->cacheSaved = true;}protected function createKey($vd6fe1d0be6347b8ef2427fa629c04485) {$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");$vf961aedab905271a350c4e6eb6d7b6b9 = "//";$va722790b49e8eb1f37a1c672326ec501 = 0;foreach(split("\/", $vd6fe1d0be6347b8ef2427fa629c04485) as $v3c6e0b8a9c15224a8228b9a98ca1531d) {$vf961aedab905271a350c4e6eb6d7b6b9 .= $v3c6e0b8a9c15224a8228b9a98ca1531d . "/";if($vbb90bf734107ea3b2f4c14a5d4bc4f91 = $this->getKey($vf961aedab905271a350c4e6eb6d7b6b9)) {$va722790b49e8eb1f37a1c672326ec501 = $vbb90bf734107ea3b2f4c14a5d4bc4f91;}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms_reg (rel, var, val) VALUES ('$va722790b49e8eb1f37a1c672326ec501', '{$v3c6e0b8a9c15224a8228b9a98ca1531d}', '')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);$va722790b49e8eb1f37a1c672326ec501 = $vbb90bf734107ea3b2f4c14a5d4bc4f91 = (int) mysql_insert_id();}}return $vbb90bf734107ea3b2f4c14a5d4bc4f91;}protected function resetCache($v14f802e1fba977727845e8872c1743a7 = false) {if(is_array($v14f802e1fba977727845e8872c1743a7)) {foreach($v14f802e1fba977727845e8872c1743a7 as $v3c6e0b8a9c15224a8228b9a98ca1531d) {if(isset($this->cache[$v3c6e0b8a9c15224a8228b9a98ca1531d])) {unset($this->cache[$v3c6e0b8a9c15224a8228b9a98ca1531d]);}}}else {$this->cache = Array();}$this->saveCache();}};interface iSearchModel {public function runSearch($v597a51f04d341eba4ca965899acc10b3, $vb393233f792f2e0472c964ea8ddbd1f5 = NULL);public function getContext($v7552cd149af7495ee7d8225974e50f80, $v597a51f04d341eba4ca965899acc10b3);public function getIndexPages();public function getIndexWords();public function getIndexWordsUniq();public function getIndexLast();public function truncate_index();public function index_all($vaa9f73eea60a006820d0f8768bc8a3fc = false);public function index_item($v7552cd149af7495ee7d8225974e50f80);public function index_items($v7552cd149af7495ee7d8225974e50f80);public function unindex_items($v7552cd149af7495ee7d8225974e50f80);};class searchModel extends singleton implements iSingleton, iSearchModel {public function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function index_all($vaa9f73eea60a006820d0f8768bc8a3fc = false) {$vfbb44b4487415b134bce9c790a27fe5e = 0;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id, updatetime FROM cms3_hierarchy WHERE is_deleted = '0' AND is_active = '1'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);while(list($v7057e8409c7c531a1a6e9ac3df4ed549, $v3e04dc2abd929a9d02e2e0fa41d24bf9) = mysql_fetch_row($result)) {if(!$this->elementIsReindexed($v7057e8409c7c531a1a6e9ac3df4ed549, $v3e04dc2abd929a9d02e2e0fa41d24bf9)) {$result = $this->index_item($v7057e8409c7c531a1a6e9ac3df4ed549, true);++$vfbb44b4487415b134bce9c790a27fe5e;if($result === false) {continue;}if(($vaa9f73eea60a006820d0f8768bc8a3fc !== false) && (--$vaa9f73eea60a006820d0f8768bc8a3fc == 0)) {break;}}}return $vfbb44b4487415b134bce9c790a27fe5e;}public function index_item($v7057e8409c7c531a1a6e9ac3df4ed549, $v887c6b9b516fdd344e1f03a0786c90e8 = false) {if(defined("UMICMS_CLI_MODE") || defined("DISABLE_SEARCH_REINDEX")) {return false;}l_mysql_query("START TRANSACTION /* Reindexing element #{$v7057e8409c7c531a1a6e9ac3df4ed549} */", true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vec5463c0e508eaa43548444d87ab2e83 = $this->parseItem($v7057e8409c7c531a1a6e9ac3df4ed549);l_mysql_query("COMMIT", true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}return $vec5463c0e508eaa43548444d87ab2e83;}public function elementIsReindexed($v7057e8409c7c531a1a6e9ac3df4ed549, $v3e04dc2abd929a9d02e2e0fa41d24bf9) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_search WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' AND indextime > '{$v3e04dc2abd929a9d02e2e0fa41d24bf9}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);return (bool) $v4a8a08f09d37b73795649038408b5f33;}public function parseItem($v7057e8409c7c531a1a6e9ac3df4ed549) {if(!($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true))) {return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getValue("is_unindexed")) return false;$v9d1be7b20c9b43741bbda33a93ae2597 = Array();$v94757cae63fd3e398c0811a976dd6bbe = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getTypeId();$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe);$vb308737ea9e2bcc45fd2bf20dc6c7d45 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroupsList();foreach($vb308737ea9e2bcc45fd2bf20dc6c7d45 as $v6c26c1979a522c2dd7e76e527aa69ca5 => $v38f582e54454005ec0664831734e1152) {foreach($v38f582e54454005ec0664831734e1152->getFields() as $v3aabf39f2d943fa886d86dcbbee4d910 => $v06e3d36fa30cea095545139854ad1fb9) {if($v06e3d36fa30cea095545139854ad1fb9->getIsInSearch() == false) continue;$v73f329f154a663bfda020aadcdd0b775 = $v06e3d36fa30cea095545139854ad1fb9->getName();$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v8e2dcfd7e7e24b1ca76c1193f645902b->getValue($v73f329f154a663bfda020aadcdd0b775);$v17f71d965fe9589ddbd11caf7182243e = $v06e3d36fa30cea095545139854ad1fb9->getFieldType()->getDataType();if($v17f71d965fe9589ddbd11caf7182243e) {if(is_array($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$veacb22b193453295e2d1ecb0499b1fc7 = "";foreach($v3a6d0284e743dc4a9b86f97d6dd1a3bf as $v818ad5ef6588e140ecb9f81e810c028a) {$vbe8f80182e0c983916da7338c2c1c040 = umiObjectsCollection::getInstance()->getObject($v818ad5ef6588e140ecb9f81e810c028a);if(is_object($vbe8f80182e0c983916da7338c2c1c040)) {$veacb22b193453295e2d1ecb0499b1fc7 .= $vbe8f80182e0c983916da7338c2c1c040->getName() . " ";}else if (is_string($v818ad5ef6588e140ecb9f81e810c028a)) {$veacb22b193453295e2d1ecb0499b1fc7 .= $v818ad5ef6588e140ecb9f81e810c028a . " ";}}$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $veacb22b193453295e2d1ecb0499b1fc7;unset($veacb22b193453295e2d1ecb0499b1fc7);}else {if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {continue;}$vbe8f80182e0c983916da7338c2c1c040 = umiObjectsCollection::getInstance()->getObject($v3a6d0284e743dc4a9b86f97d6dd1a3bf);if(is_object($vbe8f80182e0c983916da7338c2c1c040)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $vbe8f80182e0c983916da7338c2c1c040->getName();}}}if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf) || !$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = preg_replace("/%([A-z_]*)%/m", "", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v3a6d0284e743dc4a9b86f97d6dd1a3bf = preg_replace("/%([A-zЂ-пРђ-СЏ \/\._\-\(\)0-9%:<>,!@\|'&=;\?\+#]*)%/m", "", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v9d1be7b20c9b43741bbda33a93ae2597[$v73f329f154a663bfda020aadcdd0b775] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}$v9f1c8757350ffe06fffc7cc4b03150af = $this->buildIndexImage($v9d1be7b20c9b43741bbda33a93ae2597);$this->updateSearchIndex($v7057e8409c7c531a1a6e9ac3df4ed549, $v9f1c8757350ffe06fffc7cc4b03150af);}public function buildIndexImage($v5308cca1be08c0bdbdfd06290ce5bed2) {$vb798abe6e1b1318ee36b0dcb3fb9e4d3 = Array();$v63f4f1e9b725370f459720575cd5f953 = Array(    'h1' => 5,    'title' => 5,    'meta_keywords' => 3,    'meta_descriptions' => 3,    'tags' => 3   );foreach($v5308cca1be08c0bdbdfd06290ce5bed2 as $v972bf3f05d14ffbdb817bef60638ff00 => $v341be97d9aff90c9978347f66f945b77) {$v47c80780ab608cc046f2a6e6f071feb6 = $this->splitString($v341be97d9aff90c9978347f66f945b77);if(isset($v63f4f1e9b725370f459720575cd5f953[$v972bf3f05d14ffbdb817bef60638ff00])) {$v7edabf994b76a00cbc60c95af337db8f = (int) $v63f4f1e9b725370f459720575cd5f953[$v972bf3f05d14ffbdb817bef60638ff00];}else {$v7edabf994b76a00cbc60c95af337db8f = 1;}foreach($v47c80780ab608cc046f2a6e6f071feb6 as $vc47d187067c6cf953245f128b5fde62a)  {if(array_key_exists($vc47d187067c6cf953245f128b5fde62a, $vb798abe6e1b1318ee36b0dcb3fb9e4d3)) {$vb798abe6e1b1318ee36b0dcb3fb9e4d3[$vc47d187067c6cf953245f128b5fde62a] += $v7edabf994b76a00cbc60c95af337db8f;}else {$vb798abe6e1b1318ee36b0dcb3fb9e4d3[$vc47d187067c6cf953245f128b5fde62a] = $v7edabf994b76a00cbc60c95af337db8f;}}}return $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}public static function splitString($v341be97d9aff90c9978347f66f945b77) {if(is_object($v341be97d9aff90c9978347f66f945b77)) {return NULL;}$v29a6859860d0f35ec9a976557ce6923c = Array("&nbsp;", "&quote;", ".", ",", "?", ":", ";", "%", ")", "(", "/", 0x171, 0x187, "<", ">", "-");$v341be97d9aff90c9978347f66f945b77 = str_replace(">", "> ", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace("\"", " ", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = strip_tags($v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace($v29a6859860d0f35ec9a976557ce6923c, " ", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/([ \t\r\n]{1-100})/u", " ", $v341be97d9aff90c9978347f66f945b77);$vfa816edb83e95bf0c8da580bdfd491ef = explode(" ", $v341be97d9aff90c9978347f66f945b77);$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($vfa816edb83e95bf0c8da580bdfd491ef as $v9e3669d19b675bd57058fd4664205d2a) {$v9e3669d19b675bd57058fd4664205d2a = trim($v9e3669d19b675bd57058fd4664205d2a);if(wa_strlen($v9e3669d19b675bd57058fd4664205d2a) <= 2) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v9e3669d19b675bd57058fd4664205d2a;}return $v9b207167e5381c47682c6b4f58a623fb;}public function updateSearchIndex($v7057e8409c7c531a1a6e9ac3df4ed549, $v9f1c8757350ffe06fffc7cc4b03150af) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true);$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();$v94757cae63fd3e398c0811a976dd6bbe = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_search WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row(l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true));if(!$v4a8a08f09d37b73795649038408b5f33) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_search (rel_id, domain_id, lang_id, type_id) VALUES('{$v7057e8409c7c531a1a6e9ac3df4ed549}', '{$v662cbf1253ac7d8750ed9190c52163e5}', '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}', '{$v94757cae63fd3e398c0811a976dd6bbe}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_ERROR);}}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_search_index WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_search_index (rel_id, weight, word_id, tf) VALUES ";$v7b8b965ad4bca0e41ab51de7b31363a1 = 0;$vb29c3fd06b2e60bd082b5378410d9171 = array_sum($v9f1c8757350ffe06fffc7cc4b03150af);foreach($v9f1c8757350ffe06fffc7cc4b03150af as $vc47d187067c6cf953245f128b5fde62a => $v7edabf994b76a00cbc60c95af337db8f) {if(($v83ca49d02d735958e354492a19f076b0 = $this->getWordId($vc47d187067c6cf953245f128b5fde62a)) == false) continue;$vc3ee2af7ca7bbe492f11cf36a6a7cea7 = $v7edabf994b76a00cbc60c95af337db8f / $vb29c3fd06b2e60bd082b5378410d9171;$vac5c74b64b4b8352ef2f181affb5ac2a .= "('{$v7057e8409c7c531a1a6e9ac3df4ed549}', '{$v7edabf994b76a00cbc60c95af337db8f}', '{$v83ca49d02d735958e354492a19f076b0}', '{$vc3ee2af7ca7bbe492f11cf36a6a7cea7}'), ";++$v7b8b965ad4bca0e41ab51de7b31363a1;}if($v7b8b965ad4bca0e41ab51de7b31363a1) {$vac5c74b64b4b8352ef2f181affb5ac2a = substr($vac5c74b64b4b8352ef2f181affb5ac2a, 0, wa_strlen($vac5c74b64b4b8352ef2f181affb5ac2a) - 2);l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);}$v07cc694b9b3fc636710fa08b6922c42b = time();$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_search SET indextime = '{$v07cc694b9b3fc636710fa08b6922c42b}' WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);umiHierarchy::getInstance()->unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {return true;}}public static function getWordId($vc47d187067c6cf953245f128b5fde62a) {$vc47d187067c6cf953245f128b5fde62a = str_replace("037", "", $vc47d187067c6cf953245f128b5fde62a);$vc47d187067c6cf953245f128b5fde62a = trim($vc47d187067c6cf953245f128b5fde62a, "\r\n\t? ;.,!@#$%^&*()_+-=\\/:<>{}[]'\"`~|");$vc47d187067c6cf953245f128b5fde62a = wa_strtolower($vc47d187067c6cf953245f128b5fde62a);if(wa_strlen($vc47d187067c6cf953245f128b5fde62a) < 3) {return false;}$vc47d187067c6cf953245f128b5fde62a = mysql_real_escape_string($vc47d187067c6cf953245f128b5fde62a);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_search_index_words WHERE word = '{$vc47d187067c6cf953245f128b5fde62a}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}if(list($v83ca49d02d735958e354492a19f076b0) = mysql_fetch_row($result)) {return $v83ca49d02d735958e354492a19f076b0;}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_search_index_words (word) VALUES('{$vc47d187067c6cf953245f128b5fde62a}')";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}return (int) mysql_insert_id();}}public function getIndexPages() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE SQL_SMALL_RESULT COUNT(*) FROM cms3_search";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);return (int) $v4a8a08f09d37b73795649038408b5f33;}}public function getIndexWords() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE SQL_SMALL_RESULT SUM(weight) FROM cms3_search_index";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);return (int) $v4a8a08f09d37b73795649038408b5f33;}}public function getIndexWordsUniq() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE SQL_SMALL_RESULT COUNT(*) FROM cms3_search_index_words";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);return (int) $v4a8a08f09d37b73795649038408b5f33;}}public function getIndexLast() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE SQL_SMALL_RESULT indextime FROM cms3_search ORDER BY indextime DESC LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);return (int) $v4a8a08f09d37b73795649038408b5f33;}}public function truncate_index () {$vac5c74b64b4b8352ef2f181affb5ac2a = "TRUNCATE TABLE cms3_search_index_words";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "TRUNCATE TABLE cms3_search_index";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "TRUNCATE TABLE cms3_search";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}return true;}public function runSearch($v341be97d9aff90c9978347f66f945b77, $vb934cdf74d9a078a5654bd8b129741d9 = NULL, $v06eba0c81e2c853a3850d7d920570edb = NULL, $vae1d6a6518a73b480c52bcf30553f9f8 = false) {$v2574a7edd9f928bdb2eb29959e4e1797 = preg_split("/[ \-\_]/", $v341be97d9aff90c9978347f66f945b77);$v89759e1284e2479b991d2669de104942 = Array();foreach($v2574a7edd9f928bdb2eb29959e4e1797 as $vc47d187067c6cf953245f128b5fde62a) {if(wa_strlen($vc47d187067c6cf953245f128b5fde62a) >= 3) {$v89759e1284e2479b991d2669de104942[] = $vc47d187067c6cf953245f128b5fde62a;}}$v6a7f245843454cf4f28ad7c5e2572aa2 = $this->buildQueries($v89759e1284e2479b991d2669de104942, $vb934cdf74d9a078a5654bd8b129741d9, $v06eba0c81e2c853a3850d7d920570edb, $vae1d6a6518a73b480c52bcf30553f9f8);return $v6a7f245843454cf4f28ad7c5e2572aa2;}public function buildQueries($v89759e1284e2479b991d2669de104942, $vb934cdf74d9a078a5654bd8b129741d9 = NULL, $v06eba0c81e2c853a3850d7d920570edb = NULL, $vae1d6a6518a73b480c52bcf30553f9f8 = false) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v721023118cca90897209b50c681b3160 = Array();foreach($v89759e1284e2479b991d2669de104942 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $vc47d187067c6cf953245f128b5fde62a) {if(wa_strlen($vc47d187067c6cf953245f128b5fde62a) < 3) {unset($v89759e1284e2479b991d2669de104942[$v865c0c0b4ab0e063e5caa3387c1a8741]);continue;}$vc47d187067c6cf953245f128b5fde62a = mysql_real_escape_string($vc47d187067c6cf953245f128b5fde62a);$vc47d187067c6cf953245f128b5fde62a = str_replace(Array("%", "_"), Array("\\%", "\\_"), $vc47d187067c6cf953245f128b5fde62a);$v76f3c2687c1bc668f07f87b8e760cad7 = language_morph::get_word_base($vc47d187067c6cf953245f128b5fde62a);$v1c8b3a3ca57a0beda8c7653fd724183d = "siw.word LIKE '{$vc47d187067c6cf953245f128b5fde62a}%' OR ";if(wa_strlen($v76f3c2687c1bc668f07f87b8e760cad7) >= 3) {$v76f3c2687c1bc668f07f87b8e760cad7 = mysql_real_escape_string($v76f3c2687c1bc668f07f87b8e760cad7);$v1c8b3a3ca57a0beda8c7653fd724183d .= "siw.word LIKE '{$v76f3c2687c1bc668f07f87b8e760cad7}%'";}else {$v1c8b3a3ca57a0beda8c7653fd724183d = trim($v1c8b3a3ca57a0beda8c7653fd724183d, " OR ");}$v721023118cca90897209b50c681b3160[] = "(" . $v1c8b3a3ca57a0beda8c7653fd724183d . ")";}$v03ed04426fc17f79e0b77603ce6c81d3 = implode(" OR ", $v721023118cca90897209b50c681b3160);$v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule("users");$ve8701ad48ba05a91604e480dd60899a3 = $v9bc65c2abec141778ffaa729489f3e87->user_id;$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3);$v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getValue("groups");$v1471e4e05a4db95d353cc867fe317314[] = $ve8701ad48ba05a91604e480dd60899a3;$v1471e4e05a4db95d353cc867fe317314[] = regedit::getInstance()->getVal("//modules/users/guest_id");$v1471e4e05a4db95d353cc867fe317314 = array_extract_values($v1471e4e05a4db95d353cc867fe317314);$v538df8a817542c341fb29adc5c5b165d = "";$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v1471e4e05a4db95d353cc867fe317314);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) {$v538df8a817542c341fb29adc5c5b165d .= " AND (";}$v538df8a817542c341fb29adc5c5b165d .= "(c3p.owner_id = '{$v1471e4e05a4db95d353cc867fe317314[$v865c0c0b4ab0e063e5caa3387c1a8741]}' AND c3p.rel_id = h.id AND level >= 1)";if($v865c0c0b4ab0e063e5caa3387c1a8741 == ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1)) {$v538df8a817542c341fb29adc5c5b165d .= ")";}else {$v538df8a817542c341fb29adc5c5b165d .= " OR ";}}$vcaa5ab4338b5a978e76f6a161216e45d = ", cms3_permissions c3p";if(cmsController::getInstance()->getModule('users')->isSv()) {$vcaa5ab4338b5a978e76f6a161216e45d = "";$v538df8a817542c341fb29adc5c5b165d = "";}$v6c666917ae648d1e7ec45408bf54efc6 = "";if(is_array($vb934cdf74d9a078a5654bd8b129741d9)) {if(sizeof($vb934cdf74d9a078a5654bd8b129741d9)) {if($vb934cdf74d9a078a5654bd8b129741d9 && $vb934cdf74d9a078a5654bd8b129741d9[0]) {$v6c666917ae648d1e7ec45408bf54efc6 = " AND s.type_id IN (" . implode(", ", $vb934cdf74d9a078a5654bd8b129741d9) . ")";}}}$va9e49c488dc6a07200de31dbd512d69a = "";if (is_array($v06eba0c81e2c853a3850d7d920570edb) && count($v06eba0c81e2c853a3850d7d920570edb)) {$va9e49c488dc6a07200de31dbd512d69a = " AND h.rel IN (" . implode(", ", $v06eba0c81e2c853a3850d7d920570edb) . ")";}if($v03ed04426fc17f79e0b77603ce6c81d3 == false) {return Array();}mysql_query("CREATE TEMPORARY TABLE temp_search (rel_id int unsigned, tf float, word varchar(64))");$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL

INSERT INTO temp_search SELECT SQL_SMALL_RESULT HIGH_PRIORITY SQL_CACHE s.rel_id, si.tf, siw.word

	FROM    cms3_search_index_words siw,
		cms3_search_index si,
		cms3_search s,
		cms3_hierarchy h
		{$vcaa5ab4338b5a978e76f6a161216e45d}

			WHERE    ({$v03ed04426fc17f79e0b77603ce6c81d3}) AND
				si.word_id = siw.id AND
				s.rel_id = si.rel_id AND
				s.domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}' AND
				s.lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND
				h.id = s.rel_id AND
				h.is_deleted = '0' AND
				h.is_active = '1'
				{$v6c666917ae648d1e7ec45408bf54efc6}
				{$va9e49c488dc6a07200de31dbd512d69a}
				{$v538df8a817542c341fb29adc5c5b165d}


SQL;   $v9b207167e5381c47682c6b4f58a623fb = Array();l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}if($vae1d6a6518a73b480c52bcf30553f9f8) {$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT rel_id, (SUM(tf) / AVG(tf)) AS x 
	FROM temp_search 
		GROUP BY rel_id 
			ORDER BY x DESC
SQL;   }else {$vdb9d5968645f90092f4b913cf77a9af7 = sizeof($v89759e1284e2479b991d2669de104942);$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT rel_id, (SUM(tf) / AVG(tf)) AS x, COUNT(word) AS wc 
	FROM temp_search 
		GROUP BY rel_id 
			HAVING wc >= '{$vdb9d5968645f90092f4b913cf77a9af7}'
				ORDER BY x DESC
SQL;   }$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);while(list($v7057e8409c7c531a1a6e9ac3df4ed549) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}mysql_query("DROP TEMPORARY TABLE IF EXISTS temp_search");return $v9b207167e5381c47682c6b4f58a623fb;}public function prepareContext($v7057e8409c7c531a1a6e9ac3df4ed549, $vcc475582f6f7e3f30f5a46236d75b6c5 = false) {if(!($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549))) {return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getValue("is_unindexed")) return false;$v5c18ef72771564b7f43c497dc507aeab = Array();$v94757cae63fd3e398c0811a976dd6bbe = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getTypeId();$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe);$vb308737ea9e2bcc45fd2bf20dc6c7d45 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroupsList();foreach($vb308737ea9e2bcc45fd2bf20dc6c7d45 as $v6c26c1979a522c2dd7e76e527aa69ca5 => $v38f582e54454005ec0664831734e1152) {foreach($v38f582e54454005ec0664831734e1152->getFields() as $v3aabf39f2d943fa886d86dcbbee4d910 => $v06e3d36fa30cea095545139854ad1fb9) {if($v06e3d36fa30cea095545139854ad1fb9->getIsInSearch() == false) continue;$v73f329f154a663bfda020aadcdd0b775 = $v06e3d36fa30cea095545139854ad1fb9->getName();$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v8e2dcfd7e7e24b1ca76c1193f645902b->getValue($v73f329f154a663bfda020aadcdd0b775);if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf) || !$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {continue;}$v5c18ef72771564b7f43c497dc507aeab[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}if($vcc475582f6f7e3f30f5a46236d75b6c5) {$v5c18ef72771564b7f43c497dc507aeab = array_unique($v5c18ef72771564b7f43c497dc507aeab);}$v9b207167e5381c47682c6b4f58a623fb = "";foreach($v5c18ef72771564b7f43c497dc507aeab as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_array($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {continue;}$v9b207167e5381c47682c6b4f58a623fb .= $v3a6d0284e743dc4a9b86f97d6dd1a3bf . " ";}$v9b207167e5381c47682c6b4f58a623fb = preg_replace("/%[A-z0-9_]+ [A-z0-9_]+\([^\)]+\)%/im", "", $v9b207167e5381c47682c6b4f58a623fb);$v9b207167e5381c47682c6b4f58a623fb = str_replace("%", "&#037", $v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}public function getContext($v7057e8409c7c531a1a6e9ac3df4ed549, $va3dbaf37ab12f39c3cd19c0f04a360a0) {$v9a0364b9e99bb480dd25e1f0284c8555 = $this->prepareContext($v7057e8409c7c531a1a6e9ac3df4ed549, true);$v9a0364b9e99bb480dd25e1f0284c8555 = preg_replace("/%content redirect\((.*)\)%/im", "::CONTENT_REDIRECT::\\1::", $v9a0364b9e99bb480dd25e1f0284c8555);$v9a0364b9e99bb480dd25e1f0284c8555 = preg_replace("/(%|&#037)[A-z0-9]+ [A-z0-9]+\((.*)\)(%|&#037)/im", "", $v9a0364b9e99bb480dd25e1f0284c8555);$v6920626369b1f05844f5e3d6f93b5f6e = "<b>";$v4de1b7a4dc53e4a84c25ffb7cdb580ee = "</b>";$v8836d156dbd01a6c0776b086b0ff3b83 = split(" ", $va3dbaf37ab12f39c3cd19c0f04a360a0);$v9a0364b9e99bb480dd25e1f0284c8555 = preg_replace("/([A-zА-я0-9])\.([A-zА-я0-9])/im", "\\1&#46;\\2", $v9a0364b9e99bb480dd25e1f0284c8555);$v5c18ef72771564b7f43c497dc507aeab = str_replace(">", "> ", $v9a0364b9e99bb480dd25e1f0284c8555);$v5c18ef72771564b7f43c497dc507aeab = str_replace("<br>", " ", $v5c18ef72771564b7f43c497dc507aeab);$v5c18ef72771564b7f43c497dc507aeab = str_replace("&nbsp;", " ", $v5c18ef72771564b7f43c497dc507aeab);$v5c18ef72771564b7f43c497dc507aeab = str_replace("\n", " ", $v5c18ef72771564b7f43c497dc507aeab);$v5c18ef72771564b7f43c497dc507aeab = strip_tags($v5c18ef72771564b7f43c497dc507aeab);if(preg_match_all("/::CONTENT_REDIRECT::(.*)::/i", $v5c18ef72771564b7f43c497dc507aeab, $v3d801aa532c1cec3ee82d87a99fdf63f)) {$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v3d801aa532c1cec3ee82d87a99fdf63f[1]);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_numeric($v3d801aa532c1cec3ee82d87a99fdf63f[1][$v865c0c0b4ab0e063e5caa3387c1a8741])) {$v4a0dc59dd475d7fbeadc872e24f24dd0 = cmsController::getInstance()->getModule('content')->get_page_url($v3d801aa532c1cec3ee82d87a99fdf63f[1][$v865c0c0b4ab0e063e5caa3387c1a8741]);$v4a0dc59dd475d7fbeadc872e24f24dd0 = umiHierarchy::getInstance()->getPathById($v3d801aa532c1cec3ee82d87a99fdf63f[1][$v865c0c0b4ab0e063e5caa3387c1a8741]);$v4a0dc59dd475d7fbeadc872e24f24dd0 = trim($v4a0dc59dd475d7fbeadc872e24f24dd0, "'");$v9b207167e5381c47682c6b4f58a623fb = str_replace($v3d801aa532c1cec3ee82d87a99fdf63f[0][$v865c0c0b4ab0e063e5caa3387c1a8741], "<p>%search_redirect_text% \"<a href='$v4a0dc59dd475d7fbeadc872e24f24dd0'>$v4a0dc59dd475d7fbeadc872e24f24dd0</a>\"</p>", $v5c18ef72771564b7f43c497dc507aeab);}else {$v4a0dc59dd475d7fbeadc872e24f24dd0 = strip_tags($v3d801aa532c1cec3ee82d87a99fdf63f[1][$v865c0c0b4ab0e063e5caa3387c1a8741]);$v4a0dc59dd475d7fbeadc872e24f24dd0 = trim($v4a0dc59dd475d7fbeadc872e24f24dd0, "'");$v5c18ef72771564b7f43c497dc507aeab = str_replace($v3d801aa532c1cec3ee82d87a99fdf63f[0][$v865c0c0b4ab0e063e5caa3387c1a8741], "<p>%search_redirect_text% <a href=\"" . $v4a0dc59dd475d7fbeadc872e24f24dd0 . "\">" . $v4a0dc59dd475d7fbeadc872e24f24dd0 . "</a></p>", $v5c18ef72771564b7f43c497dc507aeab);}}}$v5c18ef72771564b7f43c497dc507aeab .= "\n";$vcb114fb1f5594c74601a4d8a142d932d = "";$v980da98409d058c365664ff7ea33dd6b = Array();foreach($v8836d156dbd01a6c0776b086b0ff3b83 as $v350e6018b5636ab1e90720fed9694ccf) {if(wa_strlen($v350e6018b5636ab1e90720fed9694ccf) <= 1)    continue;$v1798c7d9bd5a5d637ead47154f0d36e3 = $v5c18ef72771564b7f43c497dc507aeab;$vf3b462d93b24cb0538f5d864546bc3e0 = language_morph::get_word_base($v350e6018b5636ab1e90720fed9694ccf);$vd6f81d33de1672f67ef047aa89b6848b = "/([^\.^\?^!^<^>.]*)$vf3b462d93b24cb0538f5d864546bc3e0([^\.^\?^!^<^>.]*)[!\.\?\n]/imu";$v1dcb47f8fb7fc589f094bc7707d8ffa7 = "/([^ ^[\.[ ]*]^!^\?^\(^\).]*)($vf3b462d93b24cb0538f5d864546bc3e0)([^ ^\.^!^\?^\(^\).]*)/imu";if (preg_match($vd6f81d33de1672f67ef047aa89b6848b, $v1798c7d9bd5a5d637ead47154f0d36e3, $v1798c7d9bd5a5d637ead47154f0d36e3)) {$v980da98409d058c365664ff7ea33dd6b[] = $v1798c7d9bd5a5d637ead47154f0d36e3[0];}}$v980da98409d058c365664ff7ea33dd6b = array_unique($v980da98409d058c365664ff7ea33dd6b);$vcb114fb1f5594c74601a4d8a142d932d = "";foreach($v980da98409d058c365664ff7ea33dd6b as $v6438c669e0d0de98e6929c2cc0fac474) {foreach($v8836d156dbd01a6c0776b086b0ff3b83 as $v350e6018b5636ab1e90720fed9694ccf) {$vf3b462d93b24cb0538f5d864546bc3e0 = language_morph::get_word_base($v350e6018b5636ab1e90720fed9694ccf);$v1dcb47f8fb7fc589f094bc7707d8ffa7 = "/([^ ^.^!^\?.]*)($vf3b462d93b24cb0538f5d864546bc3e0)([^ ^.^!^\?.]*)/imu";$v6438c669e0d0de98e6929c2cc0fac474 = preg_replace($v1dcb47f8fb7fc589f094bc7707d8ffa7, $v6920626369b1f05844f5e3d6f93b5f6e . "\\1\\2\\3" . $v4de1b7a4dc53e4a84c25ffb7cdb580ee, $v6438c669e0d0de98e6929c2cc0fac474);}if($v6438c669e0d0de98e6929c2cc0fac474) {$vcb114fb1f5594c74601a4d8a142d932d .= "<p>" . $v6438c669e0d0de98e6929c2cc0fac474 . "</p>";}}if(!$vcb114fb1f5594c74601a4d8a142d932d) {preg_match("/([^\.^!^\?.]*)([\.!\?]*)/im", $v5c18ef72771564b7f43c497dc507aeab, $vcb114fb1f5594c74601a4d8a142d932d);$vcb114fb1f5594c74601a4d8a142d932d = $vcb114fb1f5594c74601a4d8a142d932d[0];$vcb114fb1f5594c74601a4d8a142d932d = "<p></p>";}return $vcb114fb1f5594c74601a4d8a142d932d;}public function unindex_items($v7057e8409c7c531a1a6e9ac3df4ed549) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$vadce578d04ed03c31f6ac59451fcf8e4 = $vb81ca7c0ccaa77e7aa91936ab0070695->getChilds($v7057e8409c7c531a1a6e9ac3df4ed549, true, true, 99);$v6a7f245843454cf4f28ad7c5e2572aa2 = Array($v7057e8409c7c531a1a6e9ac3df4ed549);$this->expandArray($vadce578d04ed03c31f6ac59451fcf8e4, $v6a7f245843454cf4f28ad7c5e2572aa2);$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_search WHERE rel_id IN (" . implode(", ", $v6a7f245843454cf4f28ad7c5e2572aa2) . ")";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_search_index WHERE rel_id IN (" . implode(", ", $v6a7f245843454cf4f28ad7c5e2572aa2) . ")";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}return true;}public function index_items($v7057e8409c7c531a1a6e9ac3df4ed549) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$vadce578d04ed03c31f6ac59451fcf8e4 = $vb81ca7c0ccaa77e7aa91936ab0070695->getChilds($v7057e8409c7c531a1a6e9ac3df4ed549, true, true, 99);$v6a7f245843454cf4f28ad7c5e2572aa2 = Array($v7057e8409c7c531a1a6e9ac3df4ed549);$this->expandArray($vadce578d04ed03c31f6ac59451fcf8e4, $v6a7f245843454cf4f28ad7c5e2572aa2);foreach($v6a7f245843454cf4f28ad7c5e2572aa2 as $v7057e8409c7c531a1a6e9ac3df4ed549) {$this->index_item($v7057e8409c7c531a1a6e9ac3df4ed549);}}public function calculateIDF($vd1f5ee0092ec47708f200415f2a89717) {static $vf68d7efaad2efd0f8c0c965a34fbe5e1 = false;if($vf68d7efaad2efd0f8c0c965a34fbe5e1 === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_search";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);list($v8277e0910d750195b448797616e091ad) = mysql_fetch_row($result);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_search_index WHERE word_id = {$vd1f5ee0092ec47708f200415f2a89717}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);list($v1aabac6d068eef6a7bad3fdf50a05cc8) = mysql_fetch_row($result);$vf68d7efaad2efd0f8c0c965a34fbe5e1 = log($v8277e0910d750195b448797616e091ad / $v1aabac6d068eef6a7bad3fdf50a05cc8);}return $vf68d7efaad2efd0f8c0c965a34fbe5e1;}private function expandArray($v47c80780ab608cc046f2a6e6f071feb6, &$result) {if(is_null($result)) {$result = Array();}foreach($v47c80780ab608cc046f2a6e6f071feb6 as $vb80bb7740288fda1f201890375a60c8f => $vadce578d04ed03c31f6ac59451fcf8e4) {$result[] = $vb80bb7740288fda1f201890375a60c8f;$this->expandArray($vadce578d04ed03c31f6ac59451fcf8e4, $result);}}};interface iPermissionsCollection {public function getOwnerType($vb0ab4f7791b60b1e8ea01057b77873b0);public function makeSqlWhere($vb0ab4f7791b60b1e8ea01057b77873b0);public function isAllowedModule($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5);public function isAllowedMethod($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);public function isAllowedObject($vb0ab4f7791b60b1e8ea01057b77873b0, $v16b2b26000987faccb260b9d39df1269);public function isSv($v8e44f0089b076e18a718eb9ca3d94674 = false);public function isAdmin($v8e44f0089b076e18a718eb9ca3d94674 = false);public function isOwnerOfObject($v16b2b26000987faccb260b9d39df1269, $v8e44f0089b076e18a718eb9ca3d94674);public function resetElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vb0ab4f7791b60b1e8ea01057b77873b0 = false);public function resetModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function setElementPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d);public function setModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = false);public function setDefaultPermissions($v7552cd149af7495ee7d8225974e50f80);public function hasUserPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function copyHierarchyPermissions($vd716f7168cd6371e0d98414d7951f602, $v804b661fe297600e2dbf54048bc56753);public function getUserId();public function setAllElementsDefaultPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function getUsersByElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1);public function pushElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1);};class permissionsCollection extends singleton implements iSingleton, iPermissionsCollection {protected $methodsPermissions = Array(), $user_id = 0, $tempElementPermissions = Array();public function __construct() {if(is_null(getRequest('guest-mode')) == false) {$this->user_id = self::getGuestId();return;}$v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule("users");if($v9bc65c2abec141778ffaa729489f3e87 instanceof def_module) {$this->user_id = $v9bc65c2abec141778ffaa729489f3e87->user_id;}}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getOwnerType($v5e7b19364b8de2dedd3aa48cf62706e3) {if($v41064781857b29db62b319b579676852 = umiObjectsCollection::getInstance()->getObject($v5e7b19364b8de2dedd3aa48cf62706e3)) {if($v1471e4e05a4db95d353cc867fe317314 = $v41064781857b29db62b319b579676852->getPropByName("groups")) {return $v1471e4e05a4db95d353cc867fe317314->getValue();}else {return $v5e7b19364b8de2dedd3aa48cf62706e3;}}else {return false;}}public function makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3, $v8a7ee68c0472cf0cf8e3f2cba2134c27 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3])) return $v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3];$v72122ce96bfec66e2396d2e25225d70a = $this->getOwnerType($v5e7b19364b8de2dedd3aa48cf62706e3);if(is_numeric($v72122ce96bfec66e2396d2e25225d70a)) {$v72122ce96bfec66e2396d2e25225d70a = Array();}if($v5e7b19364b8de2dedd3aa48cf62706e3) {$v72122ce96bfec66e2396d2e25225d70a[] = $v5e7b19364b8de2dedd3aa48cf62706e3;}$v72122ce96bfec66e2396d2e25225d70a[] = self::getGuestId();$v72122ce96bfec66e2396d2e25225d70a = array_unique($v72122ce96bfec66e2396d2e25225d70a);if(sizeof($v72122ce96bfec66e2396d2e25225d70a) > 2) {foreach($v72122ce96bfec66e2396d2e25225d70a as $v865c0c0b4ab0e063e5caa3387c1a8741 => $vb80bb7740288fda1f201890375a60c8f) {if($vb80bb7740288fda1f201890375a60c8f == $v5e7b19364b8de2dedd3aa48cf62706e3 && $v8a7ee68c0472cf0cf8e3f2cba2134c27) {unset($v72122ce96bfec66e2396d2e25225d70a[$v865c0c0b4ab0e063e5caa3387c1a8741]);}}$v72122ce96bfec66e2396d2e25225d70a = array_unique($v72122ce96bfec66e2396d2e25225d70a);sort($v72122ce96bfec66e2396d2e25225d70a);}$vac5c74b64b4b8352ef2f181affb5ac2a = "";$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v72122ce96bfec66e2396d2e25225d70a);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "cp.owner_id = '{$v72122ce96bfec66e2396d2e25225d70a[$v865c0c0b4ab0e063e5caa3387c1a8741]}'";if($v865c0c0b4ab0e063e5caa3387c1a8741 < ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1)) {$vac5c74b64b4b8352ef2f181affb5ac2a .= " OR ";}}$vac5c74b64b4b8352ef2f181affb5ac2a = "({$vac5c74b64b4b8352ef2f181affb5ac2a})";return $v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3] = $vac5c74b64b4b8352ef2f181affb5ac2a;}public function isAllowedModule($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5) {if($v5e7b19364b8de2dedd3aa48cf62706e3 == false) {$v5e7b19364b8de2dedd3aa48cf62706e3 = $this->getUserId();}if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) return true;$v7a310d89a58d8189e31d766fb1fb745a = $this->makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3);$v22884db148f0ffb0d830ba431102b0b5 = mysql_real_escape_string($v22884db148f0ffb0d830ba431102b0b5);if(substr($v22884db148f0ffb0d830ba431102b0b5, 0, 7) == "macros_") return false;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE MAX(cp.allow) FROM cms_permissions cp WHERE module = '{$v22884db148f0ffb0d830ba431102b0b5}' AND method IS NULL AND {$v7a310d89a58d8189e31d766fb1fb745a}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);list($vb394126a0e52e75f1e3d535d0fb0d33c) = mysql_fetch_row($result);return (bool) $vb394126a0e52e75f1e3d535d0fb0d33c;}public function isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $v8a7ee68c0472cf0cf8e3f2cba2134c27 = false) {if($v22884db148f0ffb0d830ba431102b0b5 == "content" && $vea9f6aca279138c58f705c8d4cb4b8ce == "") return 1;if($v22884db148f0ffb0d830ba431102b0b5 == "config" && $vea9f6aca279138c58f705c8d4cb4b8ce == "menu") return 1;if($this->isAdmin($v5e7b19364b8de2dedd3aa48cf62706e3)) {if($this->isAdminAllowedMethod($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {return 1;}}if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) return true;$vea9f6aca279138c58f705c8d4cb4b8ce = $this->getBaseMethodName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);$vcb69789460f93042a787f8d250ca26dc = &$this->methodsPermissions;if(!isset($vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3]) || !is_array($vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3])) {$vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3] = Array();}$v0fea6a13c52b4d4725368f24b045ca84 = &$vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3];$v7a310d89a58d8189e31d766fb1fb745a = $this->makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3, $v8a7ee68c0472cf0cf8e3f2cba2134c27);if($v22884db148f0ffb0d830ba431102b0b5 == "backup" && $vea9f6aca279138c58f705c8d4cb4b8ce == "rollback") return true;if($v22884db148f0ffb0d830ba431102b0b5 == "config" && ($vea9f6aca279138c58f705c8d4cb4b8ce == "lang_list" || $vea9f6aca279138c58f705c8d4cb4b8ce == "lang_phrases")) return true;if($v22884db148f0ffb0d830ba431102b0b5 == "users" && ($vea9f6aca279138c58f705c8d4cb4b8ce == "auth" || $vea9f6aca279138c58f705c8d4cb4b8ce == "login_do" || $vea9f6aca279138c58f705c8d4cb4b8ce == "login")) return true;$v0a42907b589a309ad94f8874eacbc63f = $v22884db148f0ffb0d830ba431102b0b5;if(!array_key_exists($v0a42907b589a309ad94f8874eacbc63f, $v0fea6a13c52b4d4725368f24b045ca84)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE cp.method, cp.allow FROM cms_permissions cp WHERE module = '{$v22884db148f0ffb0d830ba431102b0b5}' AND {$v7a310d89a58d8189e31d766fb1fb745a}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = Array();while(list($v05dd82e678780573a4af462d35d7f06d) = mysql_fetch_row($result)) {$v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f][] = $v05dd82e678780573a4af462d35d7f06d;}}if (in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f]) || in_array(strtolower($vea9f6aca279138c58f705c8d4cb4b8ce), $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {return true;}else {return false;}}public function isAllowedObject($v5e7b19364b8de2dedd3aa48cf62706e3, $vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;if($vaf31437ce61345f416579830a98c91e5 == 0) return Array(0, 0);if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) {return Array(true, true);}if(array_key_exists($vaf31437ce61345f416579830a98c91e5, $this->tempElementPermissions)) {$vc9e9a848920877e76685b2e4e76de38d = $this->tempElementPermissions[$vaf31437ce61345f416579830a98c91e5];switch($vc9e9a848920877e76685b2e4e76de38d) {case 0: return Array(false, false);case 1: return Array(true, false);case 2: return Array(true, true);default: return;}}static $v0fea6a13c52b4d4725368f24b045ca84;if(!is_array($v0fea6a13c52b4d4725368f24b045ca84)) {$v0fea6a13c52b4d4725368f24b045ca84 = Array();}$v0a42907b589a309ad94f8874eacbc63f = $v5e7b19364b8de2dedd3aa48cf62706e3 . "." . $vaf31437ce61345f416579830a98c91e5;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {if(is_array($v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f];}}$v7a310d89a58d8189e31d766fb1fb745a = $this->makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(cp.level) FROM cms3_permissions cp WHERE rel_id = '{$vaf31437ce61345f416579830a98c91e5}' AND {$v7a310d89a58d8189e31d766fb1fb745a}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);list($vc9e9a848920877e76685b2e4e76de38d) = mysql_fetch_row($result);$v4b43b0aee35624cd95b910189b3dc231 = false;$ve1671797c52e15f763380b45e841ec32 = false;if($vc9e9a848920877e76685b2e4e76de38d >= 1) {$v4b43b0aee35624cd95b910189b3dc231 = true;}if($vc9e9a848920877e76685b2e4e76de38d >= 2) {$ve1671797c52e15f763380b45e841ec32 = true;}$v9b207167e5381c47682c6b4f58a623fb = Array($v4b43b0aee35624cd95b910189b3dc231, $ve1671797c52e15f763380b45e841ec32);$v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f] = $v9b207167e5381c47682c6b4f58a623fb;return $v9b207167e5381c47682c6b4f58a623fb;}public function isSv($ve8701ad48ba05a91604e480dd60899a3 = false) {static $v1b747442de0fb075fcdc59af978fa41b = Array();if($ve8701ad48ba05a91604e480dd60899a3 === false) {$ve8701ad48ba05a91604e480dd60899a3 = $this->getUserId();}if(isset($v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3])) {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3];}if(is_null(getRequest('guest-mode')) == false) {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = false;}if($vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3)) {if($ve8701ad48ba05a91604e480dd60899a3 == 15) {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = true;}if($v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getPropByName("groups")) {if(in_array(15, $v1471e4e05a4db95d353cc867fe317314->getValue())) {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = true;}else {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = false;}}else {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = false;}}else {return $v1b747442de0fb075fcdc59af978fa41b[$ve8701ad48ba05a91604e480dd60899a3] = false;}}public function isAdmin($ve8701ad48ba05a91604e480dd60899a3 = false) {static $vc60879c6b41321704ee88fbc7b9a73e4 = Array();if($ve8701ad48ba05a91604e480dd60899a3 === false) {$ve8701ad48ba05a91604e480dd60899a3 = $this->getUserId();}if(isset($vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3])) {return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3];}if($this->isSv($ve8701ad48ba05a91604e480dd60899a3)) {return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3] = true;}$v7a310d89a58d8189e31d766fb1fb745a = $this->makeSqlWhere($ve8701ad48ba05a91604e480dd60899a3);$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT SQL_CACHE COUNT(cp.allow) 
	FROM cms_permissions cp 
	WHERE method IS NULL AND {$v7a310d89a58d8189e31d766fb1fb745a} AND cp.allow IN (1, 2)
SQL;   $result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}list($v2817f701d5e1a1181e657251363295fd) = mysql_fetch_row($result);return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3] = (bool) $v2817f701d5e1a1181e657251363295fd;}public function isOwnerOfObject($vaf31437ce61345f416579830a98c91e5, $ve8701ad48ba05a91604e480dd60899a3) {if($ve8701ad48ba05a91604e480dd60899a3 == $vaf31437ce61345f416579830a98c91e5) {return true;}else {$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($vaf31437ce61345f416579830a98c91e5);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$v5e7b19364b8de2dedd3aa48cf62706e3 = $va8cfde6331bd59eb2ac96f8911c4b666->getOwnerId();}else {$v5e7b19364b8de2dedd3aa48cf62706e3 = 0;}if($v5e7b19364b8de2dedd3aa48cf62706e3 == 0 || $v5e7b19364b8de2dedd3aa48cf62706e3 == $ve8701ad48ba05a91604e480dd60899a3) {return true;}else {return false;}}}public function setDefaultPermissions($v7057e8409c7c531a1a6e9ac3df4ed549) {if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return false;}l_mysql_query("START TRANSACTION");if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_permissions WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true);$v0715f6d9497f93911417c9c324265771 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v0715f6d9497f93911417c9c324265771);$v22884db148f0ffb0d830ba431102b0b5 = $vb946c44d711ade3b061653732977d043->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $vb946c44d711ade3b061653732977d043->getExt();$v94757cae63fd3e398c0811a976dd6bbe = umiObjectTypesCollection::getInstance()->getBaseType("users", "user");$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->setObjectTypeFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v94757cae63fd3e398c0811a976dd6bbe);$v31b536969506cd993ffe6c80f210b435 = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe)->getFieldId("groups");$v8be74552df93e31bbdd6b36ed74bdb6a->setPropertyFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addPropertyFilterIsNull($v31b536969506cd993ffe6c80f210b435);$v9bc65c2abec141778ffaa729489f3e87 = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);$v87306dd4235ed712ebc07fe169b76f83 = umiObjectTypesCollection::getInstance()->getBaseType("users", "users");$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->setObjectTypeFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v87306dd4235ed712ebc07fe169b76f83);$v1471e4e05a4db95d353cc867fe317314 = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);$v5891da2d64975cae48d175d1e001f5da = array_merge($v9bc65c2abec141778ffaa729489f3e87, $v1471e4e05a4db95d353cc867fe317314);$v5e7b19364b8de2dedd3aa48cf62706e3 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getOwnerId();if($v72122ce96bfec66e2396d2e25225d70a = umiObjectsCollection::getInstance()->getObject($v5e7b19364b8de2dedd3aa48cf62706e3)) {if($va8ba6ec990d9c7eeadb629f342dbab1e = $v72122ce96bfec66e2396d2e25225d70a->getValue("groups")) {$vd7be1bb48db472fbda8dbc2e05e98083 = $va8ba6ec990d9c7eeadb629f342dbab1e;}else {$vd7be1bb48db472fbda8dbc2e05e98083 = Array($v5e7b19364b8de2dedd3aa48cf62706e3);}}else {$vd7be1bb48db472fbda8dbc2e05e98083 = Array();}foreach($v5891da2d64975cae48d175d1e001f5da as $v8a0462e9b477e23253ef0cd29b0e7ab7) {if($v22884db148f0ffb0d830ba431102b0b5 == "content") $vea9f6aca279138c58f705c8d4cb4b8ce == "page";if($this->isAllowedMethod($v8a0462e9b477e23253ef0cd29b0e7ab7, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {if(in_array($v8a0462e9b477e23253ef0cd29b0e7ab7, $vd7be1bb48db472fbda8dbc2e05e98083) || $v8a0462e9b477e23253ef0cd29b0e7ab7 == SV_GROUP_ID) {$vc9e9a848920877e76685b2e4e76de38d = 2;}else {$vc9e9a848920877e76685b2e4e76de38d = 1;}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_permissions (rel_id, owner_id, level) VALUES('{$v7057e8409c7c531a1a6e9ac3df4ed549}', '{$v8a0462e9b477e23253ef0cd29b0e7ab7}', '{$vc9e9a848920877e76685b2e4e76de38d}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}}l_mysql_query("COMMIT");if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}l_mysql_query("SET AUTOCOMMIT=1");if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$this->cleanupElementPermissions($v7057e8409c7c531a1a6e9ac3df4ed549);$v0a42907b589a309ad94f8874eacbc63f = $this->user_id . "." . $v7057e8409c7c531a1a6e9ac3df4ed549;cacheFrontend::getInstance()->saveSql($v0a42907b589a309ad94f8874eacbc63f, Array(true, true));}public function resetElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vb0ab4f7791b60b1e8ea01057b77873b0 = false) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;if($vb0ab4f7791b60b1e8ea01057b77873b0 === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_permissions WHERE rel_id = '{$v7552cd149af7495ee7d8225974e50f80}'";}else {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_permissions WHERE owner_id = '{$vb0ab4f7791b60b1e8ea01057b77873b0}' AND rel_id = '{$v7552cd149af7495ee7d8225974e50f80}'";}l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}public function resetModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v0eb9b3af2e4a00837a1b1a854c9ea18c = NULL) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms_permissions WHERE owner_id = '{$vb0ab4f7791b60b1e8ea01057b77873b0}'";if(is_array($v0eb9b3af2e4a00837a1b1a854c9ea18c)) {if(sizeof($v0eb9b3af2e4a00837a1b1a854c9ea18c)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms_permissions WHERE owner_id = '{$vb0ab4f7791b60b1e8ea01057b77873b0}' AND module IN ('" . implode("', '", $v0eb9b3af2e4a00837a1b1a854c9ea18c) . "')";}}l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}public function setElementPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$vc9e9a848920877e76685b2e4e76de38d = (int) $vc9e9a848920877e76685b2e4e76de38d;if($v7552cd149af7495ee7d8225974e50f80 == 0 || $vb0ab4f7791b60b1e8ea01057b77873b0 == 0) {return false;}$v6a7f46dad32f8b8b17febd2ac9dca521 = "DELETE FROM cms3_permissions WHERE owner_id = '".$vb0ab4f7791b60b1e8ea01057b77873b0."' AND rel_id = '".$v7552cd149af7495ee7d8225974e50f80."'";l_mysql_query($v6a7f46dad32f8b8b17febd2ac9dca521);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_permissions (owner_id, rel_id, level) VALUES('{$vb0ab4f7791b60b1e8ea01057b77873b0}', '{$v7552cd149af7495ee7d8225974e50f80}', '{$vc9e9a848920877e76685b2e4e76de38d}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$this->cleanupElementPermissions($v7552cd149af7495ee7d8225974e50f80);return true;}}public function setModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = false) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$v22884db148f0ffb0d830ba431102b0b5 = mysql_real_escape_string($v22884db148f0ffb0d830ba431102b0b5);if($vea9f6aca279138c58f705c8d4cb4b8ce !== false) {return $this->setMethodPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms_permissions (owner_id, module, method, allow) VALUES('{$vb0ab4f7791b60b1e8ea01057b77873b0}', '{$v22884db148f0ffb0d830ba431102b0b5}', NULL, '1')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$this->cleanupBasePermissions();return true;}}}protected function setMethodPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {$vea9f6aca279138c58f705c8d4cb4b8ce = mysql_real_escape_string($vea9f6aca279138c58f705c8d4cb4b8ce);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms_permissions (owner_id, module, method, allow) VALUES('{$vb0ab4f7791b60b1e8ea01057b77873b0}', '{$v22884db148f0ffb0d830ba431102b0b5}', '{$vea9f6aca279138c58f705c8d4cb4b8ce}', '1')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$this->cleanupBasePermissions();return true;}}public function hasUserPermissions($vb0ab4f7791b60b1e8ea01057b77873b0) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_permissions WHERE owner_id = '{$vb0ab4f7791b60b1e8ea01057b77873b0}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}list($v2817f701d5e1a1181e657251363295fd) = mysql_fetch_row($result);return $v2817f701d5e1a1181e657251363295fd;}public function copyHierarchyPermissions($v1fa96cda79d6a13e7abbc85448084fcf, $v3504006854d4e51b5c97e94f19baba29) {if($v1fa96cda79d6a13e7abbc85448084fcf == self::getGuestId()) {return false;}$v1fa96cda79d6a13e7abbc85448084fcf = (int) $v1fa96cda79d6a13e7abbc85448084fcf;$v3504006854d4e51b5c97e94f19baba29 = (int) $v3504006854d4e51b5c97e94f19baba29;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_permissions (level, rel_id, owner_id) SELECT level, rel_id, '{$v3504006854d4e51b5c97e94f19baba29}' FROM cms3_permissions WHERE owner_id = '{$v1fa96cda79d6a13e7abbc85448084fcf}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}protected function getBaseMethodName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {$va9ac5a6cc3cbe84f9c18323af2b9007f = $this->getStaticPermissions($v22884db148f0ffb0d830ba431102b0b5);if(is_array($va9ac5a6cc3cbe84f9c18323af2b9007f)) {if(array_key_exists($vea9f6aca279138c58f705c8d4cb4b8ce, $va9ac5a6cc3cbe84f9c18323af2b9007f)) {return $vea9f6aca279138c58f705c8d4cb4b8ce;}else {foreach($va9ac5a6cc3cbe84f9c18323af2b9007f as $va85c62c99bf80aeffb74914fb56a1942 => $v568356dafd7353c803edafa5eb5d438f) {if(is_array($v568356dafd7353c803edafa5eb5d438f)) {if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $v568356dafd7353c803edafa5eb5d438f) || in_array(strtolower($vea9f6aca279138c58f705c8d4cb4b8ce), $v568356dafd7353c803edafa5eb5d438f)) {return $va85c62c99bf80aeffb74914fb56a1942;}}}return $vea9f6aca279138c58f705c8d4cb4b8ce;}}else {return $vea9f6aca279138c58f705c8d4cb4b8ce;}}protected function getStaticPermissions($v22884db148f0ffb0d830ba431102b0b5) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v8e0891fe51dd9fe334c902144be6bd90 = CURRENT_WORKING_DIR . "/classes/modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/permissions.php";if(file_exists($v8e0891fe51dd9fe334c902144be6bd90)) {include $v8e0891fe51dd9fe334c902144be6bd90;if(isset($permissions)) {$v31bdd6780dad16b675b3e57ffb3f2272 = $permissions;$v9645b439bd2d770beb425162e180d91c = CURRENT_WORKING_DIR . "/classes/modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/permissions.custom.php";if(file_exists($v9645b439bd2d770beb425162e180d91c)) {unset($permissions);include $v9645b439bd2d770beb425162e180d91c;if(isset($permissions)) {$v31bdd6780dad16b675b3e57ffb3f2272 = array_merge_recursive($v31bdd6780dad16b675b3e57ffb3f2272, $permissions);}}$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = $v31bdd6780dad16b675b3e57ffb3f2272;unset($v31bdd6780dad16b675b3e57ffb3f2272);unset($permissions);}else {$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = false;}}else {$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = false;}return $v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5];}public function getUserId() {return $this->user_id;}protected function cleanupBasePermissions() {$v92ad7554e2e0d208f33729db6d54b59b = self::getGuestId();$vac5c74b64b4b8352ef2f181affb5ac2a    = "SELECT module, method FROM cms_permissions WHERE owner_id = '{$v92ad7554e2e0d208f33729db6d54b59b}' AND allow = 1";$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$vac5c74b64b4b8352ef2f181affb5ac2a = array();while(list($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) = mysql_fetch_row($result)) {if($vea9f6aca279138c58f705c8d4cb4b8ce) {$vac5c74b64b4b8352ef2f181affb5ac2a[] = "(module = '{$v22884db148f0ffb0d830ba431102b0b5}' AND method = '{$vea9f6aca279138c58f705c8d4cb4b8ce}')";}else {$vac5c74b64b4b8352ef2f181affb5ac2a[] = "(module = '{$v22884db148f0ffb0d830ba431102b0b5}' AND method IS NULL)";}}if(!empty($vac5c74b64b4b8352ef2f181affb5ac2a))     mysql_query("DELETE FROM cms_permissions WHERE owner_id != '{$v92ad7554e2e0d208f33729db6d54b59b}' AND (" . implode(' OR ', $vac5c74b64b4b8352ef2f181affb5ac2a) . ")");}protected function cleanupElementPermissions($vd5d4bb9b2c282937ee64b1fb0495ef08) {$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$v92ad7554e2e0d208f33729db6d54b59b = self::getGuestId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT level FROM cms3_permissions WHERE owner_id = '{$v92ad7554e2e0d208f33729db6d54b59b}' AND rel_id = {$vd5d4bb9b2c282937ee64b1fb0495ef08}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v075d12d847ab6a1266bae1458b09cfc0 = 0;while(list($vc9e9a848920877e76685b2e4e76de38d) = mysql_fetch_row($result)) {if($vc9e9a848920877e76685b2e4e76de38d>$v075d12d847ab6a1266bae1458b09cfc0) $v075d12d847ab6a1266bae1458b09cfc0 = $vc9e9a848920877e76685b2e4e76de38d;}mysql_query("DELETE FROM cms3_permissions WHERE owner_id != '{$v92ad7554e2e0d208f33729db6d54b59b}' AND level <= {$v075d12d847ab6a1266bae1458b09cfc0} AND rel_id = {$vd5d4bb9b2c282937ee64b1fb0495ef08}");}public function isAllowedDomain($v5e7b19364b8de2dedd3aa48cf62706e3, $v662cbf1253ac7d8750ed9190c52163e5) {$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $v662cbf1253ac7d8750ed9190c52163e5;if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) {return 1;}$v877a071b41344936293b7b8e9922d1ef = $this->makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(cp.allow) FROM cms_permissions cp WHERE cp.module = 'domain' AND cp.method = '{$v662cbf1253ac7d8750ed9190c52163e5}' AND " . $v877a071b41344936293b7b8e9922d1ef;$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}if($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {list($vc9e9a848920877e76685b2e4e76de38d) = $vf1965a857bc285d26fe22023aa5ab50d;return (int) $vc9e9a848920877e76685b2e4e76de38d;}else {return "0";}}public function setAllowedDomain($v5e7b19364b8de2dedd3aa48cf62706e3, $v662cbf1253ac7d8750ed9190c52163e5, $vb394126a0e52e75f1e3d535d0fb0d33c = 1) {$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $v662cbf1253ac7d8750ed9190c52163e5;$vb394126a0e52e75f1e3d535d0fb0d33c = (int) $vb394126a0e52e75f1e3d535d0fb0d33c;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms_permissions WHERE module = 'domain' AND method = '{$v662cbf1253ac7d8750ed9190c52163e5}' AND owner_id = '{$v5e7b19364b8de2dedd3aa48cf62706e3}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms_permissions (module, method, owner_id, allow) VALUES('domain', '{$v662cbf1253ac7d8750ed9190c52163e5}', '{$v5e7b19364b8de2dedd3aa48cf62706e3}', '{$vb394126a0e52e75f1e3d535d0fb0d33c}')";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}return true;}public function setDefaultElementPermissions(iUmiHierarchyElement $v8e2dcfd7e7e24b1ca76c1193f645902b, $v5e7b19364b8de2dedd3aa48cf62706e3) {$v22884db148f0ffb0d830ba431102b0b5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$vea9f6aca279138c58f705c8d4cb4b8ce = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();$vc9e9a848920877e76685b2e4e76de38d = 0;if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, true)) {$vc9e9a848920877e76685b2e4e76de38d = 1;}if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce . ".edit", true)) {$vc9e9a848920877e76685b2e4e76de38d = 2;}$this->setElementPermissions($v5e7b19364b8de2dedd3aa48cf62706e3, $v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), $vc9e9a848920877e76685b2e4e76de38d);return $vc9e9a848920877e76685b2e4e76de38d;}public function setAllElementsDefaultPermissions($v5e7b19364b8de2dedd3aa48cf62706e3) {$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;$v6942e8fa62b3cc9d93881a58210e2fd7 = umiHierarchyTypesCollection::getInstance();$v72122ce96bfec66e2396d2e25225d70a = $this->getOwnerType($v5e7b19364b8de2dedd3aa48cf62706e3);if(is_numeric($v72122ce96bfec66e2396d2e25225d70a)) {$v72122ce96bfec66e2396d2e25225d70a = Array();}$v72122ce96bfec66e2396d2e25225d70a[] = self::getGuestId();$v72122ce96bfec66e2396d2e25225d70a = array_unique($v72122ce96bfec66e2396d2e25225d70a);l_mysql_query("START TRANSACTION");$vecae13117d6f0584c25a9da6c8f8415e = Array();$vefb2a684e4afb7d55e6147fbe5a332ee = Array();foreach($v6942e8fa62b3cc9d93881a58210e2fd7->getTypesList() as $v89b0b9deff65f8b9cd1f71bc74ce36ba) {$v22884db148f0ffb0d830ba431102b0b5 = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt();if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce . ".edit", true)) {foreach($v72122ce96bfec66e2396d2e25225d70a as $v2d53a8fb7abf5be7f4a3cf4b565cc75c) {if($this->isAllowedMethod($v2d53a8fb7abf5be7f4a3cf4b565cc75c, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce . ".edit", true)) {continue 2;}}$vefb2a684e4afb7d55e6147fbe5a332ee[] = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getId();$vc9e9a848920877e76685b2e4e76de38d = 2;}else if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, true)) {foreach($v72122ce96bfec66e2396d2e25225d70a as $v2d53a8fb7abf5be7f4a3cf4b565cc75c) {if($this->isAllowedMethod($v2d53a8fb7abf5be7f4a3cf4b565cc75c, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, true)) {continue 2;}}$vecae13117d6f0584c25a9da6c8f8415e[] = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getId();$vc9e9a848920877e76685b2e4e76de38d = 1;}else {$vc9e9a848920877e76685b2e4e76de38d = 0;}}if(sizeof($vecae13117d6f0584c25a9da6c8f8415e)) {$vd14a8022b085f9ef19d479cbdd581127 = implode(", ", $vecae13117d6f0584c25a9da6c8f8415e);$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_permissions (level, owner_id, rel_id) 
	SELECT 1, '{$v5e7b19364b8de2dedd3aa48cf62706e3}', id FROM cms3_hierarchy WHERE type_id IN ({$vd14a8022b085f9ef19d479cbdd581127})
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);}if(sizeof($vefb2a684e4afb7d55e6147fbe5a332ee)) {$vd14a8022b085f9ef19d479cbdd581127 = implode(", ", $vefb2a684e4afb7d55e6147fbe5a332ee);$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_permissions (level, owner_id, rel_id) 
	SELECT 2, '{$v5e7b19364b8de2dedd3aa48cf62706e3}', id FROM cms3_hierarchy WHERE type_id IN ({$vd14a8022b085f9ef19d479cbdd581127})
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);}l_mysql_query("COMMIT");}public function getUsersByElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$vc9e9a848920877e76685b2e4e76de38d = (int) $vc9e9a848920877e76685b2e4e76de38d;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT owner_id FROM cms3_permissions WHERE rel_id = '{$v7552cd149af7495ee7d8225974e50f80}' AND level >= '{$vc9e9a848920877e76685b2e4e76de38d}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vb132392a317588e56460e77a8fd74229 = Array();while(list($vb0ab4f7791b60b1e8ea01057b77873b0) = mysql_fetch_row($result)) {$vb132392a317588e56460e77a8fd74229[] = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;}return $vb132392a317588e56460e77a8fd74229;}public function pushElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1) {if(array_key_exists($v7552cd149af7495ee7d8225974e50f80, $this->tempElementPermissions) == false) {$this->tempElementPermissions[$v7552cd149af7495ee7d8225974e50f80] = (int) $vc9e9a848920877e76685b2e4e76de38d;}}public static function getGuestId() {static $v92ad7554e2e0d208f33729db6d54b59b;if(!$v92ad7554e2e0d208f33729db6d54b59b) {$v92ad7554e2e0d208f33729db6d54b59b = (int) regedit::getInstance()->getVal("//modules/users/guest_id");}return $v92ad7554e2e0d208f33729db6d54b59b;}protected function isAdminAllowedMethod($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {$va9ac5a6cc3cbe84f9c18323af2b9007f = Array(   'content' =>    Array('json_mini_browser', 'old_json_load_files', 'json_load_files',        'json_load_zip_folder', 'load_tree_node', 'get_editable_region',       'save_editable_region', 'widget_create', 'widget_delete',       'getObjectsByTypeList', 'getObjectsByBaseTypeList',        'json_get_images_panel', 'json_create_imanager_object',       'domainTemplates', 'json_unlock_page', 'tree_unlock_page'),   'backup' =>     Array('backup_panel'),   'data'   =>     Array('guide_items', 'guide_items_all', 'json_load_hierarchy_level'),   'webo' => Array('show'),   'users'  => Array('getFavourites', 'json_change_dock'),   '*'   =>  Array('dataset_config')   );if(isset($va9ac5a6cc3cbe84f9c18323af2b9007f[$v22884db148f0ffb0d830ba431102b0b5])) {if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $va9ac5a6cc3cbe84f9c18323af2b9007f[$v22884db148f0ffb0d830ba431102b0b5])) {return true;}}if(isset($va9ac5a6cc3cbe84f9c18323af2b9007f['*'])) {if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $va9ac5a6cc3cbe84f9c18323af2b9007f['*'])) {return true;}}return false;}};interface iCifi {public function __construct($v76ff0c075d2de8d9ce2bb3361bb114c3, $vb9d3d046443cf690c6e6e502a0944706, $vf2accb3510f76a78979768c29f95a9d7 = true);public function read_files();public function make_element($v16830a58e1e33a4163524366ba7b701b = "");public function make_div();public function make_upload();public function getUpdatedValue($v8c1e38676c728849ec6620527345fcc7 = false);};class cifi implements iCifi {private $name, $dir;private $exts = Array('gif', 'jpg', 'jpeg', 'bmp', 'png', 'swf', 'GIF', 'JPG', 'JPEG', 'BMP', 'PNG', 'SWF');private $image_only;public $maxFilesPerFolder = 150;public function __construct($vb068931cc450442b63f5b3d276ea4297, $v736007832d2167baaae763fd3a3f3cf1, $ve2a3c99961f7b9cb0c3949c325166430 = true) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->dir = $v736007832d2167baaae763fd3a3f3cf1;$this->image_only = $ve2a3c99961f7b9cb0c3949c325166430;}public function old_read_files() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v736007832d2167baaae763fd3a3f3cf1 = $this->dir;$vd7e701984ce4a202864bfce634079069 = new umiDirectory($v736007832d2167baaae763fd3a3f3cf1);$v9354d23e6add83850f6476ba92ed0c1d = $vd7e701984ce4a202864bfce634079069->getFiles("(?<!\.htaccess|\.svn)\s?$");$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach ($v9354d23e6add83850f6476ba92ed0c1d as $va5d3f256df556554a2b2fdd8943eaea5 => $v7c471091e23954fe746b0cb10ae737cf) {if((++$v865c0c0b4ab0e063e5caa3387c1a8741 > $this->maxFilesPerFolder) && $this->maxFilesPerFolder) {return true;}$vfa7149a8afabc835b744f53daf9a58e1 = split("\.", $va5d3f256df556554a2b2fdd8943eaea5);$vabf77184f55403d75b9d51d79162a7ca = $vfa7149a8afabc835b744f53daf9a58e1[sizeof($vfa7149a8afabc835b744f53daf9a58e1)-1];if(!in_array($vabf77184f55403d75b9d51d79162a7ca, $this->exts) && $this->image_only) {continue;}$va5d3f256df556554a2b2fdd8943eaea5 = str_replace("&", "&amp;", $va5d3f256df556554a2b2fdd8943eaea5);$vfa816edb83e95bf0c8da580bdfd491ef = iconv("CP1251", "UTF-8//IGNORE", $va5d3f256df556554a2b2fdd8943eaea5);if($vfa816edb83e95bf0c8da580bdfd491ef === false) {$vfa816edb83e95bf0c8da580bdfd491ef = iconv("CP1251", "UTF-8//TRANSLIT", $va5d3f256df556554a2b2fdd8943eaea5);}$v9b207167e5381c47682c6b4f58a623fb[] = $vfa816edb83e95bf0c8da580bdfd491ef;}return $v9b207167e5381c47682c6b4f58a623fb;}public function read_files() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v736007832d2167baaae763fd3a3f3cf1 = $this->dir;$vd7e701984ce4a202864bfce634079069 = new umiDirectory($v736007832d2167baaae763fd3a3f3cf1);$v9354d23e6add83850f6476ba92ed0c1d = $vd7e701984ce4a202864bfce634079069->getFiles("(?<!\.htaccess|\.svn)\s?$");$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach ($v9354d23e6add83850f6476ba92ed0c1d as $va5d3f256df556554a2b2fdd8943eaea5 => $v7c471091e23954fe746b0cb10ae737cf) {if((++$v865c0c0b4ab0e063e5caa3387c1a8741 > $this->maxFilesPerFolder) && $this->maxFilesPerFolder) {return true;}$vfa7149a8afabc835b744f53daf9a58e1 = split("\.", $va5d3f256df556554a2b2fdd8943eaea5);$vabf77184f55403d75b9d51d79162a7ca = $vfa7149a8afabc835b744f53daf9a58e1[sizeof($vfa7149a8afabc835b744f53daf9a58e1)-1];if(!in_array($vabf77184f55403d75b9d51d79162a7ca, $this->exts) && $this->image_only) {continue;}$va5d3f256df556554a2b2fdd8943eaea5 = str_replace("&", "&amp;", $va5d3f256df556554a2b2fdd8943eaea5);$v2e3a8d3f3d1c742f7234c3d6dd74cc3c = iconv("CP1251", "UTF-8//IGNORE", $this->dir.'/'.$va5d3f256df556554a2b2fdd8943eaea5);$vd707f488d8ffd0422872f4b4ab4ebafe = iconv("CP1251", "UTF-8//IGNORE", $va5d3f256df556554a2b2fdd8943eaea5);$v9b207167e5381c47682c6b4f58a623fb[] = array($v2e3a8d3f3d1c742f7234c3d6dd74cc3c, $vd707f488d8ffd0422872f4b4ab4ebafe);}return $v9b207167e5381c47682c6b4f58a623fb;}public function make_element($v4ed9407630eb1000c0f6b63842defa7d = "", $v03eb662e3aeaf66b73b3296be3f050d5 = array()) {$vbfe6ca8c2816187ae8d51c913879f38a = $this->read_files();if($vbfe6ca8c2816187ae8d51c913879f38a === true) {if($v4ed9407630eb1000c0f6b63842defa7d) {$vbfe6ca8c2816187ae8d51c913879f38a = Array();$vbfe6ca8c2816187ae8d51c913879f38a[] = $v4ed9407630eb1000c0f6b63842defa7d;}else {$vbfe6ca8c2816187ae8d51c913879f38a = Array();}$vbdec6c316b977a09ec96bb56e4e11c17 = true;}else {$vbdec6c316b977a09ec96bb56e4e11c17 = false;}if(!is_array($vbfe6ca8c2816187ae8d51c913879f38a)) {return false;}$v9b207167e5381c47682c6b4f58a623fb = <<<JS
<script type="text/javascript">
	cifi_images_arr_{$this->name} = Array();

JS;   $v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vbfe6ca8c2816187ae8d51c913879f38a);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v9b207167e5381c47682c6b4f58a623fb .= <<<JS
	cifi_images_arr_{$this->name}[{$v865c0c0b4ab0e063e5caa3387c1a8741}] = "{$vbfe6ca8c2816187ae8d51c913879f38a[$v865c0c0b4ab0e063e5caa3387c1a8741]}";

JS;   }$v4ed9407630eb1000c0f6b63842defa7d = ($v4ed9407630eb1000c0f6b63842defa7d) ? "'" . str_replace("&", "&amp;", $v4ed9407630eb1000c0f6b63842defa7d) . "'" : "''";if($vbdec6c316b977a09ec96bb56e4e11c17) {$v736007832d2167baaae763fd3a3f3cf1 = "'" . mysql_escape_string(basename($this->dir)) . "'";}else {$v736007832d2167baaae763fd3a3f3cf1 = "''";}$v9b207167e5381c47682c6b4f58a623fb .= <<<JS
	cifi_generate('{$this->name}', cifi_images_arr_{$this->name}, {$v4ed9407630eb1000c0f6b63842defa7d}, {$v736007832d2167baaae763fd3a3f3cf1});
</script>

JS;   return $v9b207167e5381c47682c6b4f58a623fb;}public function make_div() {return <<<END
<div id="cifi_mdiv_{$this->name}" style="text-align: left; border: #FFF 1px solid;"></div>
END;  }public function make_upload() {$vef7de3f485174ff47f061ad27d83d0ee = $_REQUEST['select_' . $this->name];$vbf5f3461956c8f4ab9d7c0877c1505ad = $_FILES['f_' . $this->name];if($vbf5f3461956c8f4ab9d7c0877c1505ad['name'] == $vef7de3f485174ff47f061ad27d83d0ee) {system_upload_file($vbf5f3461956c8f4ab9d7c0877c1505ad['tmp_name'], $this->dir, $vbf5f3461956c8f4ab9d7c0877c1505ad['name']);return $vbf5f3461956c8f4ab9d7c0877c1505ad['name'];}else {return false;}}public function getUpdatedValue($v15d61712450a686a7f365adf4fef581f = false) {$vb068931cc450442b63f5b3d276ea4297 = $this->name;$v851148b4fd8fd7ae74bd9100c5c0c898 = $this->dir;$v810ad1bb47955cef46ca47144c3ea889 = getRequest('select_' . $vb068931cc450442b63f5b3d276ea4297);$vbfe6ca8c2816187ae8d51c913879f38a = ($v15d61712450a686a7f365adf4fef581f) ? $vdc150a9e3e923a67fddf1f5ebd0f1ada : $_FILES;if($vbfe6ca8c2816187ae8d51c913879f38a['pics']['size'][$vb068931cc450442b63f5b3d276ea4297] != 0) {if($v810ad1bb47955cef46ca47144c3ea889 == $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297]) {system_upload_file($vbfe6ca8c2816187ae8d51c913879f38a['pics']['tmp_name'][$vb068931cc450442b63f5b3d276ea4297], $v851148b4fd8fd7ae74bd9100c5c0c898, $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297]);$v9b207167e5381c47682c6b4f58a623fb = $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297];}else {$v9b207167e5381c47682c6b4f58a623fb = $v810ad1bb47955cef46ca47144c3ea889;}}else {$v9b207167e5381c47682c6b4f58a623fb = $v810ad1bb47955cef46ca47144c3ea889;}return $v9b207167e5381c47682c6b4f58a623fb;}};class ranges {public function __construct() {$this->days = Array(            'понедельник'    => 0,            'вторник'    => 1,            'среда'        => 2,            'четверг'    => 3,            'пятница'    => 4,            'суббота'    => 5,            'восскресенье'    => 6,            'пн'        => 0,            'пон'        => 0,            'вт'        => 1,            'ср'        => 2,            'срд'        => 2,            'чт'        => 3,            'чет'        => 3,            'пт'        => 4,            'птн'        => 4,            'сб'        => 5,            'вс'        => 6);$this->months = Array(            'январь'    => 0,            'февраль'    => 1,            'март'        => 2,            'апрель'    => 3,            'май'        => 4,            'июнь'        => 5,            'июль'        => 6,            'август'    => 7,            'сентябрь'    => 8,            'октябрь'    => 9,            'ноябрь'    => 10,            'декабрь'    => 11,            'янв'    => 0,            'ян'    => 0,            'фев'    => 1,            'фв'    => 1,            'мар'    => 2,            'апр'    => 3,            'ап'    => 3,            'май'    => 4,            'июнь'        => 5,            'ин'        => 5,            'июль'        => 6,            'ил'        => 6,            'август'    => 7,            'авг'    => 7,            'сент'    => 8,            'сен'    => 8,            'окт'    => 9,            'ок'    => 9,            'нбр'    => 10,            'дек'    => 11);}public function get($v341be97d9aff90c9978347f66f945b77 = "", $v15d61712450a686a7f365adf4fef581f = 0) {$v341be97d9aff90c9978347f66f945b77 = $this->prepareStr($v341be97d9aff90c9978347f66f945b77, $v15d61712450a686a7f365adf4fef581f);return $this->str2range($v341be97d9aff90c9978347f66f945b77);}private function prepareStr($v341be97d9aff90c9978347f66f945b77 = "", $v15d61712450a686a7f365adf4fef581f = 0) {switch($v15d61712450a686a7f365adf4fef581f) {case 0: {return system_assoc_replace($v341be97d9aff90c9978347f66f945b77, $this->days);break;}case 1: {return system_assoc_replace($v341be97d9aff90c9978347f66f945b77, $this->months);break;}}}private function str2range($v03c7c0ace395d80182db07ae2c30f034) {$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/ +/", " ", $v03c7c0ace395d80182db07ae2c30f034);$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/ - /", "-", $v03c7c0ace395d80182db07ae2c30f034);$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/! /", "!", $v03c7c0ace395d80182db07ae2c30f034);if(preg_match_all("/(?!!)(\d+)(?!\-)/", $v03c7c0ace395d80182db07ae2c30f034, $vcc92747bf6da4d917e6e0b0356cd5133)) {$vcc92747bf6da4d917e6e0b0356cd5133 = $vcc92747bf6da4d917e6e0b0356cd5133[1];}if(preg_match_all("/!(\d+)(?!\-)/", $v03c7c0ace395d80182db07ae2c30f034, $v2c8e6355b8c15bc4c2707142268a1d8a)) {$v2c8e6355b8c15bc4c2707142268a1d8a = $v2c8e6355b8c15bc4c2707142268a1d8a[1];}if(preg_match_all("/(?!!)(\d+\-\d+)/", $v03c7c0ace395d80182db07ae2c30f034, $v37b19816109a32106d109e83bbb3c97d)) {$v37b19816109a32106d109e83bbb3c97d = $v37b19816109a32106d109e83bbb3c97d[0];}if(preg_match_all("/!(\d+\-\d+)/", $v03c7c0ace395d80182db07ae2c30f034, $v42ea0dce5802c9119056fe8b8f8a39ea)) {$v42ea0dce5802c9119056fe8b8f8a39ea = $v42ea0dce5802c9119056fe8b8f8a39ea[1];}$v9b207167e5381c47682c6b4f58a623fb = Array();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v42ea0dce5802c9119056fe8b8f8a39ea);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741  < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_array($v42ea0dce5802c9119056fe8b8f8a39ea[$v865c0c0b4ab0e063e5caa3387c1a8741])) continue;list($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531) = split("-", $v42ea0dce5802c9119056fe8b8f8a39ea[$v865c0c0b4ab0e063e5caa3387c1a8741]);if($vd98a07f84921b24ee30f86fd8cd85c3c <= $v01b6e20344b68835c5ed1ddedf20d531) {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}}else {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= 31;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}for($v7b8b965ad4bca0e41ab51de7b31363a1 = 1;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}}}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v37b19816109a32106d109e83bbb3c97d);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_array($v37b19816109a32106d109e83bbb3c97d[$v865c0c0b4ab0e063e5caa3387c1a8741])) continue;list($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531) = split("-", $v37b19816109a32106d109e83bbb3c97d[$v865c0c0b4ab0e063e5caa3387c1a8741]);if($vd98a07f84921b24ee30f86fd8cd85c3c <= $v01b6e20344b68835c5ed1ddedf20d531) {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}}else {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= 31;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}for($v7b8b965ad4bca0e41ab51de7b31363a1 = 1;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}}}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vcc92747bf6da4d917e6e0b0356cd5133);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(!in_array((int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741], $v2c8e6355b8c15bc4c2707142268a1d8a) && !in_array((int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741], $v9b207167e5381c47682c6b4f58a623fb) && !empty($vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741]))                $v9b207167e5381c47682c6b4f58a623fb[] = (int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741];}return $v9b207167e5381c47682c6b4f58a623fb;}}interface iTranslit {public static function convert($vb45cffe084dd3d20d928bee85e7b0f21);}class translit implements iTranslit {public static $fromUpper = Array("Э/g", "Ч", "Ш", "Ё", "Ё", "Ж", "Ю", "Ю", "Я", "Я", "А", "Б", "В", "Г", "Д", "Е", "З", "И", "Й", "К", "Л", "М", "Н", "О", "П", "Р", "С", "Т", "У", "Ф", "Х", "Ц", "Щ", "Ъ", "Ы", "Ь");public static $fromLower = Array("э", "ч", "ш", "ё", "ё", "ж", "ю", "ю", "я", "я", "а", "б", "в", "г", "д", "е", "з", "и", "й", "к", "л", "м", "н", "о", "п", "р", "с", "т", "у", "ф", "х", "ц", "щ", "ъ", "ы", "ь");public static $toLower   = Array("e\'", "ch", "sh", "yo", "jo", "zh", "yu", "ju", "ya", "ja", "a", "b", "v", "g", "d", "e", "z", "i", "j", "k", "l", "m", "n", "o", "p", "r", "s",  "t", "u", "f", "h", "c", "w", "~", "y", "\'");public static function convert($v341be97d9aff90c9978347f66f945b77) {$v341be97d9aff90c9978347f66f945b77 = umiObjectProperty::filterInputString($v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(self::$fromLower, self::$toLower, $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(self::$fromUpper, self::$toLower, $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = strtolower($v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/([^A-z^0-9^_^\-]+)/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/[\/\\\',\t`\^\[\]]*/", "", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(chr(8470), "", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/[ \.]+/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/([_]+)/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = trim(trim($v341be97d9aff90c9978347f66f945b77), "_");return $v341be97d9aff90c9978347f66f945b77;}}interface iTemplater {public function init($va43c1b0aa53a0c908810c06ab1ff3967);public function loadLangs();public function putLangs($va43c1b0aa53a0c908810c06ab1ff3967);public function parseInput($va43c1b0aa53a0c908810c06ab1ff3967);public function parseMacros($vdc3ef687d19cc2fb071d846f9360ecbe);public function executeMacros($v8ee1d4327d02df333859c8dd0101aae8);public static function pushEditable($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f);public function cleanUpResult($va43c1b0aa53a0c908810c06ab1ff3967);}class templater extends singleton implements iTemplater {public $defaultMacroses = Array(Array("%content%", "macros_content"),  Array("%menu%", "macros_menu"),  Array("%header%", "macros_header"),  Array("%pid%", "macros_returnPid"),  Array("%parent_id%", "macros_returnParentId"),  Array("%pre_lang%", "macros_returnPreLang"),  Array("%curr_time%", "macros_curr_time"),  Array("%domain%", "macros_returnDomain"),  Array("%domain_floated%", "macros_returnDomainFloated"),   Array("%title%", "macros_title"),  Array("%keywords%", "macros_keywords"),  Array("%describtion%", "macros_describtion"),  Array("%description%", "macros_describtion"),  Array("%adm_menu%", "macros_adm_menu"),  Array("%adm_navibar%", "macros_adm_navibar"),  Array("%skin_path%", "macros_skin_path"),  Array("%ico_ext%", "macros_ico_ext"),   Array("%current_user_id%", "macros_current_user_id"),  Array("%current_version_line%", "macros_current_version_line"),  Array("%context_help%", "macros_help"),  Array("%current_alt_name%", "macros_current_alt_name"));public $cacheMacroses = Array();public $processingCache = array();public $cachePermitted = false;public $LANGS = Array();public $cacheEnabled = 0;protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function init($va43c1b0aa53a0c908810c06ab1ff3967) {$this->loadLangs();$this->cacheMacroses["%content%"] = $this->parseInput(cmsController::getInstance()->parsedContent);$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($va43c1b0aa53a0c908810c06ab1ff3967);$v9b207167e5381c47682c6b4f58a623fb = $this->putLangs($v9b207167e5381c47682c6b4f58a623fb);$this->output = system_parse_short_calls($v9b207167e5381c47682c6b4f58a623fb);}public function loadLangs() {$vdcb02837c3430cb5b0b73a05d1d40c8e = CURRENT_WORKING_DIR . "/classes/modules/lang." . cmsController::getInstance()->getLang()->getPrefix() . ".php";if(!file_exists($vdcb02837c3430cb5b0b73a05d1d40c8e)) {$vdcb02837c3430cb5b0b73a05d1d40c8e = CURRENT_WORKING_DIR . "/classes/modules/lang.php";}include_once $vdcb02837c3430cb5b0b73a05d1d40c8e;if(isset($LANG_EXPORT)) {$v4d424a5679c0aa6e84a0235ec1949c43 = cmsController::getInstance();$v4d424a5679c0aa6e84a0235ec1949c43->langs = array_merge($v4d424a5679c0aa6e84a0235ec1949c43->langs, $LANG_EXPORT);unset($LANG_EXPORT);}return true;}public function putLangs($va43c1b0aa53a0c908810c06ab1ff3967) {$v9b207167e5381c47682c6b4f58a623fb = $va43c1b0aa53a0c908810c06ab1ff3967;if(($v83878c91171338902e0fe0fb97a8c47a = strpos($v9b207167e5381c47682c6b4f58a623fb, "%")) === false) return $v9b207167e5381c47682c6b4f58a623fb;$v5a05866850c28651fe234659f6c92ada = cmsController::getInstance()->langs;foreach($v5a05866850c28651fe234659f6c92ada as $vde3ec0aa2234aa1e3ee275bbc715c6c9 => $v05f59f175b8961c00305e4ee7c88f9f2) {if(is_array($v05f59f175b8961c00305e4ee7c88f9f2)) continue;$v6f8f57715090da2632453988d9a1501b = "%" . $vde3ec0aa2234aa1e3ee275bbc715c6c9 . "%";if(($v1f2dfa567dcf95833eddf7aec167fec7 = strpos($v9b207167e5381c47682c6b4f58a623fb, $v6f8f57715090da2632453988d9a1501b, $v83878c91171338902e0fe0fb97a8c47a)) !== false) {$v9b207167e5381c47682c6b4f58a623fb = str_replace($v6f8f57715090da2632453988d9a1501b, $v05f59f175b8961c00305e4ee7c88f9f2, $v9b207167e5381c47682c6b4f58a623fb, $v1f2dfa567dcf95833eddf7aec167fec7);}}return $v9b207167e5381c47682c6b4f58a623fb;}public function parseInput($va43c1b0aa53a0c908810c06ab1ff3967) {$v9b207167e5381c47682c6b4f58a623fb = $va43c1b0aa53a0c908810c06ab1ff3967;if(is_array($v9b207167e5381c47682c6b4f58a623fb)) {return $v9b207167e5381c47682c6b4f58a623fb;}$v0db3209e1adc6d67be435a81baf9a66e = cmsController::getInstance()->getCurrentElementId();$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%pid%", $v0db3209e1adc6d67be435a81baf9a66e, $va43c1b0aa53a0c908810c06ab1ff3967);if(strrpos($v9b207167e5381c47682c6b4f58a623fb, "%") === false) {return $v9b207167e5381c47682c6b4f58a623fb;}$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%%", "%\r\n%", $va43c1b0aa53a0c908810c06ab1ff3967);if(preg_match_all("/%([A-z_]{3,})%/m", $va43c1b0aa53a0c908810c06ab1ff3967, $v3d801aa532c1cec3ee82d87a99fdf63f)) {$v3d801aa532c1cec3ee82d87a99fdf63f = $v3d801aa532c1cec3ee82d87a99fdf63f[0];$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v3d801aa532c1cec3ee82d87a99fdf63f);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {try {$v4b43b0aee35624cd95b910189b3dc231 = $this->parseMacros($v3d801aa532c1cec3ee82d87a99fdf63f[$v865c0c0b4ab0e063e5caa3387c1a8741]);}catch (publicException $ve1671797c52e15f763380b45e841ec32) {}}}if(preg_match_all("/%([A-zА-Яа-я0-9]+\s+[A-zА-Яа-я0-9_]+\([A-zА-Яа-я \/\._\-\(\)0-9%:<>,!@\|'&=;\?\+#]*\))%/mu", $va43c1b0aa53a0c908810c06ab1ff3967, $v3d801aa532c1cec3ee82d87a99fdf63f)) {$v3d801aa532c1cec3ee82d87a99fdf63f = $v3d801aa532c1cec3ee82d87a99fdf63f[0];$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v3d801aa532c1cec3ee82d87a99fdf63f);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {try {$v4b43b0aee35624cd95b910189b3dc231 = $this->parseMacros($v3d801aa532c1cec3ee82d87a99fdf63f[$v865c0c0b4ab0e063e5caa3387c1a8741]);}catch (publicException $ve1671797c52e15f763380b45e841ec32) {}}}if(is_array($v9b207167e5381c47682c6b4f58a623fb)) implode('',$v9b207167e5381c47682c6b4f58a623fb);$v0fea6a13c52b4d4725368f24b045ca84 = $this->cacheMacroses;$v0fea6a13c52b4d4725368f24b045ca84 = array_reverse($v0fea6a13c52b4d4725368f24b045ca84);foreach($v0fea6a13c52b4d4725368f24b045ca84 as $vee33e909372d935d190f4fcb2a92d542 => $vd9394066970e44ae252fd0347e58c03e) {if(($v83878c91171338902e0fe0fb97a8c47a = strpos($v9b207167e5381c47682c6b4f58a623fb, $vee33e909372d935d190f4fcb2a92d542)) !== false) {$v9b207167e5381c47682c6b4f58a623fb = str_replace($vee33e909372d935d190f4fcb2a92d542, $vd9394066970e44ae252fd0347e58c03e, $v9b207167e5381c47682c6b4f58a623fb);}}return $this->cleanUpResult( $this->putLangs($v9b207167e5381c47682c6b4f58a623fb) );}public function parseMacros($vdc3ef687d19cc2fb071d846f9360ecbe) {$v8ee1d4327d02df333859c8dd0101aae8 = Array();if(strrpos($vdc3ef687d19cc2fb071d846f9360ecbe, "%") === false)   return $v8ee1d4327d02df333859c8dd0101aae8;if(isset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe])) return $vdc3ef687d19cc2fb071d846f9360ecbe;$this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe] = true;$v63a86638c46e7c3bcc05b4b73aa7dd79 = "/%([A-z0-9]+)\s+([A-z0-9]+)\((.*)\)%/m";if(defined("TPL_MODE")) {if(TPL_MODE == "SIMPLE") {$v63a86638c46e7c3bcc05b4b73aa7dd79 = "/%([A-z0-9]+)\s+([A-z0-9]+)\((.*)\)%/Um";}}if(preg_match($v63a86638c46e7c3bcc05b4b73aa7dd79, $vdc3ef687d19cc2fb071d846f9360ecbe, $v7f51cd1d44922c57f8f7945fc268ef09)) {$v8ee1d4327d02df333859c8dd0101aae8['str']    = $v7f51cd1d44922c57f8f7945fc268ef09[0];$v8ee1d4327d02df333859c8dd0101aae8['module'] = $v7f51cd1d44922c57f8f7945fc268ef09[1];$v8ee1d4327d02df333859c8dd0101aae8['method'] = $v7f51cd1d44922c57f8f7945fc268ef09[2];$v8ee1d4327d02df333859c8dd0101aae8['args']   = $v7f51cd1d44922c57f8f7945fc268ef09[3];if(array_key_exists($v8ee1d4327d02df333859c8dd0101aae8['str'], $this->cacheMacroses)) {unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $this->cacheMacroses[$v8ee1d4327d02df333859c8dd0101aae8['str']];}$v21ffce5b8a6cc8cc6a41448dd69623c9 = split(",", $v8ee1d4327d02df333859c8dd0101aae8['args']);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v21ffce5b8a6cc8cc6a41448dd69623c9);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vf33a4e939ffe21234596860b7249c246 = $v21ffce5b8a6cc8cc6a41448dd69623c9[$v865c0c0b4ab0e063e5caa3387c1a8741];if(strpos($vf33a4e939ffe21234596860b7249c246, "%") !== false) {$vf33a4e939ffe21234596860b7249c246 = $this->parseInput($vf33a4e939ffe21234596860b7249c246);}$v21ffce5b8a6cc8cc6a41448dd69623c9[$v865c0c0b4ab0e063e5caa3387c1a8741] = trim($vf33a4e939ffe21234596860b7249c246, "'\" ");}$v8ee1d4327d02df333859c8dd0101aae8['args'] = $v21ffce5b8a6cc8cc6a41448dd69623c9;$v9b207167e5381c47682c6b4f58a623fb = $v8ee1d4327d02df333859c8dd0101aae8['result'] = $this->executeMacros($v8ee1d4327d02df333859c8dd0101aae8);$this->cacheMacroses[$v8ee1d4327d02df333859c8dd0101aae8['str']] = $v8ee1d4327d02df333859c8dd0101aae8['result'];unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $v9b207167e5381c47682c6b4f58a623fb;}else {$vf96b9890e2821e2b15992ff81ce1806d = $this->defaultMacroses;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vf96b9890e2821e2b15992ff81ce1806d);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++)    if(stripos($vdc3ef687d19cc2fb071d846f9360ecbe, $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]) !== false) {if(array_key_exists($vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0], $this->cacheMacroses)) {unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $this->cacheMacroses[$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]];}if(!isset($vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2])) {$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2] = NULL;}$v9b207167e5381c47682c6b4f58a623fb = $this->executeMacros(          Array(           "module" => $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][1],           "method" => $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2],           "args"   => Array()           )         );$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($v9b207167e5381c47682c6b4f58a623fb);$this->cacheMacroses[$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]] = $v9b207167e5381c47682c6b4f58a623fb;unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $v9b207167e5381c47682c6b4f58a623fb;}$this->cacheMacroses[$vdc3ef687d19cc2fb071d846f9360ecbe] = $vdc3ef687d19cc2fb071d846f9360ecbe;unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $vdc3ef687d19cc2fb071d846f9360ecbe;}}public function executeMacros($v8ee1d4327d02df333859c8dd0101aae8) {$v22884db148f0ffb0d830ba431102b0b5 = $v8ee1d4327d02df333859c8dd0101aae8['module'];$vea9f6aca279138c58f705c8d4cb4b8ce = $v8ee1d4327d02df333859c8dd0101aae8['method'];if($v22884db148f0ffb0d830ba431102b0b5 == "current_module")   $v22884db148f0ffb0d830ba431102b0b5 = cmsController::getInstance()->getCurrentModule();$v9b207167e5381c47682c6b4f58a623fb = "";if(!$vea9f6aca279138c58f705c8d4cb4b8ce) {$vb69957bad52d90073d0bd2ed82d0a7cb = $v8ee1d4327d02df333859c8dd0101aae8['args'];$v9b207167e5381c47682c6b4f58a623fb = call_user_func_array($v8ee1d4327d02df333859c8dd0101aae8['module'], $vb69957bad52d90073d0bd2ed82d0a7cb);}if($v22884db148f0ffb0d830ba431102b0b5 == "core" || $v22884db148f0ffb0d830ba431102b0b5 == "system" || $v22884db148f0ffb0d830ba431102b0b5 == "custom") {$v1cd3c693132f4c31b5b5e5f4c5eed6bd = &system_buildin_load($v22884db148f0ffb0d830ba431102b0b5);if($v1cd3c693132f4c31b5b5e5f4c5eed6bd) {$v9b207167e5381c47682c6b4f58a623fb = $v1cd3c693132f4c31b5b5e5f4c5eed6bd->cms_callMethod($vea9f6aca279138c58f705c8d4cb4b8ce, $v8ee1d4327d02df333859c8dd0101aae8['args']);}}if($v22884db148f0ffb0d830ba431102b0b5 != "core" && $v22884db148f0ffb0d830ba431102b0b5 != "system") {if(system_is_allowed($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {if($v47a12618c9a47b69a3050e6b9313a351 = cmsController::getInstance()->getModule($v22884db148f0ffb0d830ba431102b0b5)) {$v9b207167e5381c47682c6b4f58a623fb = $v47a12618c9a47b69a3050e6b9313a351->cms_callMethod($vea9f6aca279138c58f705c8d4cb4b8ce, $v8ee1d4327d02df333859c8dd0101aae8['args']);}}}if(is_array($v9b207167e5381c47682c6b4f58a623fb)) {$vfa816edb83e95bf0c8da580bdfd491ef = "";foreach($v9b207167e5381c47682c6b4f58a623fb as $v03c7c0ace395d80182db07ae2c30f034) {if(!is_array($v03c7c0ace395d80182db07ae2c30f034)) {$vfa816edb83e95bf0c8da580bdfd491ef .= $v03c7c0ace395d80182db07ae2c30f034;}}$v9b207167e5381c47682c6b4f58a623fb = $vfa816edb83e95bf0c8da580bdfd491ef;}if(strpos($v9b207167e5381c47682c6b4f58a623fb, "%") !== false) {$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($v9b207167e5381c47682c6b4f58a623fb);}return $v9b207167e5381c47682c6b4f58a623fb;}public function __destruct() {}public $blocks = Array();public static function pushEditable($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f) {if($v22884db148f0ffb0d830ba431102b0b5 === false && $vea9f6aca279138c58f705c8d4cb4b8ce === false) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($vb80bb7740288fda1f201890375a60c8f)) {$v94efb9bd8805ffa2a3d248cbe836b6ef = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();if($v481a5f16b24d461e31d85aba607238b8 = umiObjectTypesCollection::getInstance()->getType($v94efb9bd8805ffa2a3d248cbe836b6ef)) {$v09f4280d9972439d11df682357c4b807 = $v481a5f16b24d461e31d85aba607238b8->getHierarchyTypeId();if($v5f8d8192d2d4ff7e065aaf1958d15913 = umiHierarchyTypesCollection::getInstance()->getType($v09f4280d9972439d11df682357c4b807)) {$v22884db148f0ffb0d830ba431102b0b5 = $v5f8d8192d2d4ff7e065aaf1958d15913->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $v5f8d8192d2d4ff7e065aaf1958d15913->getExt();}else {return false;}}}}$v640eac53ad75db5c49a9ec86390d8530 = templater::getInstance();$v640eac53ad75db5c49a9ec86390d8530->blocks[] = Array($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f);}public function prepareQuickEdit() {$v5e72c7891093d301b60783c6a47f7aa0 = $this->blocks;if(sizeof($v5e72c7891093d301b60783c6a47f7aa0) == 0) return;$v3c6e0b8a9c15224a8228b9a98ca1531d = md5("http://" . getServer('HTTP_HOST') . getServer('REQUEST_URI'));$_SESSION[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v5e72c7891093d301b60783c6a47f7aa0;}final public static function getSomething($v0f4153145310ca3a80263d772ccd01d4 = "pro") {$v520579a4307a11304874d3845f4e67cb = domainsCollection::getInstance()->getDefaultDomain();$v43c8ce94d81492e62c60092a3664a65f = md5($_SERVER['SERVER_ADDR']);switch($v0f4153145310ca3a80263d772ccd01d4) {case "pro":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost()))))))))));break;case "free":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())));break;case "lite":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())))));break;case "freelance":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())))))));break;case "trial": {$v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost()))))));}}$v90fdeb3fda515dc805fa06fda3504d5c = strtoupper(substr($v43c8ce94d81492e62c60092a3664a65f, 0, 11) . "-" . substr($v834c51a71b8c3cca066197db43bb209d, 0, 11));return $v90fdeb3fda515dc805fa06fda3504d5c;}public function cleanUpResult($va43c1b0aa53a0c908810c06ab1ff3967) {return $va43c1b0aa53a0c908810c06ab1ff3967;$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%pid%", cmsController::getInstance()->getCurrentElementId(), $va43c1b0aa53a0c908810c06ab1ff3967);if(!regedit::getInstance()->getVal("//settings/show_macros_onerror")) {$va43c1b0aa53a0c908810c06ab1ff3967 = preg_replace("/%([A-z?-?А-я \/\._\-\(\)0-9%:<>,!@\|'&=;\?\+#]*)%/m", "", $va43c1b0aa53a0c908810c06ab1ff3967);}return $va43c1b0aa53a0c908810c06ab1ff3967;}};interface iCmsController {public function loadBuildInModule($v52a43e48ec4649dee819dadabcab1bde);public function getModule($v52a43e48ec4649dee819dadabcab1bde);public function installModule($v52a43e48ec4649dee819dadabcab1bde);public function getSkinPath();public function getCurrentModule();public function getCurrentMethod();public function getCurrentElementId();public function getCurrentMode();public function getCurrentDomain();public function getCurrentLang();public function getLang();public function setCurrentModule($v52a43e48ec4649dee819dadabcab1bde);public function setCurrentMethod($vddaa6e8c8c412299272e183087b8f7b6);public function getRequestId();public function getPreLang();public function calculateRefererUri();public function getCalculatedRefererUri();}class cmsController extends singleton implements iSingleton, iCmsController {private $modules = Array(),    $current_module = false,    $current_method = false,    $current_mode = false,    $current_element_id = false,    $current_lang = false,    $current_domain = false,    $calculated_referer_uri = false;public  $parsedContent = false,    $currentTitle = false,    $currentHeader = false,    $currentMetaKeywords = false,    $currentMetaDescription = false,    $langs = Array(),    $langs_export = Array(),    $nav_arr = Array(),    $pre_lang = "",    $errorUrl, $headerLabel = false;public  $isContentMode = false;protected function __construct() {$this->init();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function loadModule($v854203cccade0bbe21be239a208aea49) {$v3d788fa62d7c185a1bee4c9147ee1091 = "//modules/" . $v854203cccade0bbe21be239a208aea49;if(!defined("CURRENT_VERSION_LINE")) {define("CURRENT_VERSION_LINE", "");}if(CURRENT_VERSION_LINE == "free" || CURRENT_VERSION_LINE == "lite") {if($v854203cccade0bbe21be239a208aea49 == "forum" || $v854203cccade0bbe21be239a208aea49 == "vote" || $v854203cccade0bbe21be239a208aea49 == "webforms") {return false;}}if(ulangStream::getLangPrefix() != "ru" && $v854203cccade0bbe21be239a208aea49 == "seo") {return false;}if(regedit::getInstance()->getVal($v3d788fa62d7c185a1bee4c9147ee1091) == $v854203cccade0bbe21be239a208aea49) {$va8b32a4ad344b2574316ceac9b89c028 = CURRENT_WORKING_DIR . "/classes/modules/" . $v854203cccade0bbe21be239a208aea49 . "/class.php";$v2a99e5deda39091dffae0e1ee29ca09a = CURRENT_WORKING_DIR . "/classes/modules/" . $v854203cccade0bbe21be239a208aea49 . "/interface.php";if(file_exists($va8b32a4ad344b2574316ceac9b89c028)) {if(file_exists($v2a99e5deda39091dffae0e1ee29ca09a)) {include_once $v2a99e5deda39091dffae0e1ee29ca09a;}include_once $va8b32a4ad344b2574316ceac9b89c028;if(class_exists($v854203cccade0bbe21be239a208aea49)) {$vaeae00c17480e2734db07010c518d054 = new $v854203cccade0bbe21be239a208aea49();$vaeae00c17480e2734db07010c518d054->cms_init();$vaeae00c17480e2734db07010c518d054->pre_lang = $this->pre_lang;$this->modules[$v854203cccade0bbe21be239a208aea49] = $vaeae00c17480e2734db07010c518d054;return $vaeae00c17480e2734db07010c518d054;}}else {return false;}}else {return false;}}public function loadBuildInModule($v52a43e48ec4649dee819dadabcab1bde) {}public function getModule($v854203cccade0bbe21be239a208aea49) {if(!$v854203cccade0bbe21be239a208aea49) return false;if(array_key_exists($v854203cccade0bbe21be239a208aea49, $this->modules)) {return $this->modules[$v854203cccade0bbe21be239a208aea49];}else {return $this->loadModule($v854203cccade0bbe21be239a208aea49);}}public function installModule($v52a43e48ec4649dee819dadabcab1bde) {}public function getSkinPath() {}public function getCurrentModule() {return $this->current_module;}public function getCurrentMethod() {return $this->current_method;}public function getCurrentElementId() {return $this->current_element_id;}public function getLang() {return $this->current_lang;}public function getCurrentLang() {return $this->getLang();}public function getCurrentMode() {return $this->current_mode;}public function getCurrentDomain() {return $this->current_domain;}private function init() {$this->detectDomain();$this->detectLang();$this->detectMode();$this->loadLangs();$LANG_EXPORT = array();$v2a41f6d927793b754d2d6dcd7485d96f = CURRENT_WORKING_DIR . "/classes/modules/lang.php";if (file_exists($v2a41f6d927793b754d2d6dcd7485d96f)) {include $v2a41f6d927793b754d2d6dcd7485d96f;}$this->langs = array_merge($this->langs, $LANG_EXPORT);$v1b2c38000ce4861a9ba046bf4dc483a4 = CURRENT_WORKING_DIR . "/classes/modules/lang." . $this->getCurrentLang()->getPrefix() . ".php";if(file_exists($v1b2c38000ce4861a9ba046bf4dc483a4)) {include $v1b2c38000ce4861a9ba046bf4dc483a4;$this->langs = array_merge($this->langs, $LANG_EXPORT);}$this->errorUrl = getServer('HTTP_REFERER');$this->doSomething();$this->calculateRefererUri();}private function detectDomain() {$v67b3dba8bc6778101892eb77249db32e = getServer('HTTP_HOST');if($v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDomain($v662cbf1253ac7d8750ed9190c52163e5);}else {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDefaultDomain()->getId();}if(is_object($vad5f82e879a9c5d6b5b442eb37e50551)) {$this->current_domain = $vad5f82e879a9c5d6b5b442eb37e50551;return true;}else {$this->current_domain = domainsCollection::getInstance()->getDefaultDomain();return false;}}private function detectLang() {$vb24bcd6b7d395b852353e079beaec4f9 = getRequest('lang_id');$v78e6dd7a49f5b0cb2106a3a434dd5c86 = false;if($vb24bcd6b7d395b852353e079beaec4f9 != null) {if(is_array($vb24bcd6b7d395b852353e079beaec4f9)) list($vb24bcd6b7d395b852353e079beaec4f9) = $vb24bcd6b7d395b852353e079beaec4f9;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = intval($vb24bcd6b7d395b852353e079beaec4f9);}else if (!is_null(getRequest('links')) && is_array($v7ffc4d510260a8544e5550e62ec56bc1 = getRequest('rel'))) {if(sizeof($v7ffc4d510260a8544e5550e62ec56bc1) && ($v7552cd149af7495ee7d8225974e50f80 = array_pop($v7ffc4d510260a8544e5550e62ec56bc1))) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7552cd149af7495ee7d8225974e50f80, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();}}}else {list($vb31590b98760b74e7c4e1a809e43152d) = $this->getPathArray();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = langsCollection::getInstance()->getLangId($vb31590b98760b74e7c4e1a809e43152d);}if(($this->current_lang = langsCollection::getInstance()->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86)) === false ) {if($this->current_domain) {if($v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->current_domain->getDefaultLangId()) {$this->current_lang = langsCollection::getInstance()->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86);}else {$this->current_lang = langsCollection::getInstance()->getDefaultLang();}}else {$this->current_lang = langsCollection::getInstance()->getDefaultLang();}}if($this->current_lang->getId() != $this->current_domain->getDefaultLangId()) {$this->pre_lang = "/" . $this->current_lang->getPrefix();$_REQUEST['pre_lang'] = $this->pre_lang;}}private function getPathArray() {$vd6fe1d0be6347b8ef2427fa629c04485 = getRequest('path');$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");return explode("/", $vd6fe1d0be6347b8ef2427fa629c04485);}private function detectMode() {$v32660e7b27600e0fde6ff1333c6c0568 = $this->getPathArray();if(sizeof($v32660e7b27600e0fde6ff1333c6c0568) < 2) {$v32660e7b27600e0fde6ff1333c6c0568[1] = NULL;}list($v9ea3ab74bc8133d47b81a107f1a1c585, $v394072637b008e3829968bb5109f17ac) = $v32660e7b27600e0fde6ff1333c6c0568;if($v9ea3ab74bc8133d47b81a107f1a1c585 == "admin" || $v394072637b008e3829968bb5109f17ac == "admin") {$this->current_mode = "admin";}else {$this->current_mode = "";cacheFrontend::$cacheMode = true;}}private function getSubPathType($vb31590b98760b74e7c4e1a809e43152d) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if(!$this->current_module) {if($vb31590b98760b74e7c4e1a809e43152d == "seo") {if(ulangStream::getLangPrefix() != "ru") {return "UNKNOWN";}}if($vb31590b98760b74e7c4e1a809e43152d == "trash") {def_module::redirect($this->pre_lang . "/admin/data/trash/");}if($vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/" . $vb31590b98760b74e7c4e1a809e43152d)) {$this->setCurrentModule($vb31590b98760b74e7c4e1a809e43152d);return "MODULE";}}if($this->current_module && !$this->current_method) {$this->setCurrentMethod($vb31590b98760b74e7c4e1a809e43152d);return "METHOD";}if($this->current_module && $this->current_method) {return "PARAM";}return "UNKNOWN";}public function analyzePath() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v32660e7b27600e0fde6ff1333c6c0568 = $this->getPathArray();$vd6fe1d0be6347b8ef2427fa629c04485 = getRequest('path');$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v32660e7b27600e0fde6ff1333c6c0568);$vaddb1838ab68ee501d3a0e2868a127c9 = Array();$v83878c91171338902e0fe0fb97a8c47a = 0;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vb31590b98760b74e7c4e1a809e43152d = $v32660e7b27600e0fde6ff1333c6c0568[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v865c0c0b4ab0e063e5caa3387c1a8741 <= 1) {if(($vb31590b98760b74e7c4e1a809e43152d == $this->current_mode) || ($vb31590b98760b74e7c4e1a809e43152d == $this->current_lang->getPrefix())) {continue;}}$vaddb1838ab68ee501d3a0e2868a127c9[] = $vb31590b98760b74e7c4e1a809e43152d;$vbdcb4bec1c234b49e0a70911cf33ff6f = $this->getSubPathType($vb31590b98760b74e7c4e1a809e43152d);if($vbdcb4bec1c234b49e0a70911cf33ff6f == "PARAM") {$_REQUEST['param' . $v83878c91171338902e0fe0fb97a8c47a++] = $vb31590b98760b74e7c4e1a809e43152d;}}if(!$this->current_module) {if($this->current_mode == "admin") {$v854203cccade0bbe21be239a208aea49 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/default_module_admin");$this->autoRedirectToMethod($v854203cccade0bbe21be239a208aea49);}else {$v854203cccade0bbe21be239a208aea49 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/default_module");}$this->setCurrentModule($v854203cccade0bbe21be239a208aea49);}if(!$this->current_method) {if($this->current_mode == "admin") {$this->autoRedirectToMethod($this->current_module);}else {$v2fa70149e2a7e75da2b0303d0a36a944 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/" . $this->current_module . "/default_method");}$this->setCurrentMethod($v2fa70149e2a7e75da2b0303d0a36a944);}if($this->getCurrentMode() == "admin") {return;}$v7057e8409c7c531a1a6e9ac3df4ed549 = false;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vaddb1838ab68ee501d3a0e2868a127c9);$vb31590b98760b74e7c4e1a809e43152d = "";for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vb31590b98760b74e7c4e1a809e43152d .= "/" . $vaddb1838ab68ee501d3a0e2868a127c9[$v865c0c0b4ab0e063e5caa3387c1a8741];if(!($vfa816edb83e95bf0c8da580bdfd491ef = $vb81ca7c0ccaa77e7aa91936ab0070695->getIdByPath($vb31590b98760b74e7c4e1a809e43152d, false, $v3dbd53d892aaea70c9f5fefc18fc7e4c))) {$v7057e8409c7c531a1a6e9ac3df4ed549 = false;break;}else {$v7057e8409c7c531a1a6e9ac3df4ed549 = $vfa816edb83e95bf0c8da580bdfd491ef;}}if($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v3dbd53d892aaea70c9f5fefc18fc7e4c > 0 && !defined("DISABLE_AUTOCORRECTION_REDIRECT")) {$vd6fe1d0be6347b8ef2427fa629c04485 = $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v7057e8409c7c531a1a6e9ac3df4ed549);if($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) {if($this->isModule($vaddb1838ab68ee501d3a0e2868a127c9[0])) {$v7057e8409c7c531a1a6e9ac3df4ed549 = false;break;}}header("HTTP/1.1 301 Moved Permanently");header("Location: {$vd6fe1d0be6347b8ef2427fa629c04485}");exit();}$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDefault()) {$vd6fe1d0be6347b8ef2427fa629c04485 = $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v7057e8409c7c531a1a6e9ac3df4ed549);header("HTTP/1.1 301 Moved Permanently");header("Location: {$vd6fe1d0be6347b8ef2427fa629c04485}");exit();}}}if(($vd6fe1d0be6347b8ef2427fa629c04485 == "" || $vd6fe1d0be6347b8ef2427fa629c04485 == $this->current_lang->getPrefix()) && $this->current_mode != "admin") {if($v7057e8409c7c531a1a6e9ac3df4ed549 = $vb81ca7c0ccaa77e7aa91936ab0070695->getDefaultElementId($this->getCurrentLang()->getId(), $this->getCurrentDomain()->getId())) {$this->current_element_id = $v7057e8409c7c531a1a6e9ac3df4ed549;}}if($v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true)) {$v599dcce2998a6b40b1e38e8c6006cb0a = umiHierarchyTypesCollection::getInstance()->getType($v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId());if(!$v599dcce2998a6b40b1e38e8c6006cb0a) return false;$this->current_module = $v599dcce2998a6b40b1e38e8c6006cb0a->getName();if($vabf77184f55403d75b9d51d79162a7ca = $v599dcce2998a6b40b1e38e8c6006cb0a->getExt()) {$this->setCurrentMethod($vabf77184f55403d75b9d51d79162a7ca);}else {$this->setCurrentMethod("content");}$this->current_element_id = $v7057e8409c7c531a1a6e9ac3df4ed549;}}public function setCurrentModule($v854203cccade0bbe21be239a208aea49) {$this->current_module = $v854203cccade0bbe21be239a208aea49;}public function setCurrentMethod($v2fa70149e2a7e75da2b0303d0a36a944) {if(defined("CURRENT_VERSION_LINE")) {if(CURRENT_VERSION_LINE == "free" || CURRENT_VERSION_LINE == "lite" || CURRENT_VERSION_LINE == "freelance") {if(cmsController::getInstance()->getCurrentMode() == "admin") {if($this->current_module == "data" && substr($v2fa70149e2a7e75da2b0303d0a36a944, 0, strlen("trash")) != "trash" && $v2fa70149e2a7e75da2b0303d0a36a944 != "json_load_hierarchy_level") {$this->current_module = "content";$this->current_method = "sitetree";return false;}}}}$this->current_method = $v2fa70149e2a7e75da2b0303d0a36a944;}public function loadLangs() {$v0eb9b3af2e4a00837a1b1a854c9ea18c = regedit::getInstance()->getList("//modules");foreach($v0eb9b3af2e4a00837a1b1a854c9ea18c as $v22884db148f0ffb0d830ba431102b0b5) {$v854203cccade0bbe21be239a208aea49 = $v22884db148f0ffb0d830ba431102b0b5[0];$v9a4a6f6ee974a928a90c9152a674b141 = CURRENT_WORKING_DIR . '/classes/modules/' . $v854203cccade0bbe21be239a208aea49 . '/';$v9a4a6f6ee974a928a90c9152a674b141 .= "lang.php";if (file_exists($v9a4a6f6ee974a928a90c9152a674b141)) {include $v9a4a6f6ee974a928a90c9152a674b141;}if(isset($v4ace5046c3309f93a68ee49049d2c114)) {if(is_array($v4ace5046c3309f93a68ee49049d2c114)) {$this->langs[$v854203cccade0bbe21be239a208aea49] = $v4ace5046c3309f93a68ee49049d2c114;unset($v4ace5046c3309f93a68ee49049d2c114);}}if(isset($LANG_EXPORT)) {if(is_array($LANG_EXPORT)) {$this->langs = array_merge($this->langs, $LANG_EXPORT);unset($LANG_EXPORT);}}$v9a4a6f6ee974a928a90c9152a674b141 = CURRENT_WORKING_DIR . '/classes/modules/' . $v854203cccade0bbe21be239a208aea49 . '/';$v9a4a6f6ee974a928a90c9152a674b141 .= "lang." . $this->getCurrentLang()->getPrefix() .".php";if(file_exists($v9a4a6f6ee974a928a90c9152a674b141)) {include $v9a4a6f6ee974a928a90c9152a674b141;if(is_array($v4ace5046c3309f93a68ee49049d2c114)) {$this->langs[$v854203cccade0bbe21be239a208aea49] = $v4ace5046c3309f93a68ee49049d2c114;unset($v4ace5046c3309f93a68ee49049d2c114);}if(is_array($LANG_EXPORT)) {$this->langs = array_merge($this->langs, $LANG_EXPORT);unset($LANG_EXPORT);}}}}final private function doSomething () {return false;if(defined("CURRENT_VERSION_LINE")) {if(CURRENT_VERSION_LINE != "demo") {include CURRENT_WORKING_DIR . "/errors/invalid_license.html";exit();}else {return true;}}$v1a54c1036ccb10069e9c06281d52007a = regedit::getInstance()->getVal("//settings/keycode");if($this->doStrangeThings($v1a54c1036ccb10069e9c06281d52007a)) {return true;}$v9030f0c3bdeaad3bfed5afe95b6abb39 = Array();$v9030f0c3bdeaad3bfed5afe95b6abb39['pro'] = templater::getSomething("pro");$v9030f0c3bdeaad3bfed5afe95b6abb39['free'] = templater::getSomething("free");$v9030f0c3bdeaad3bfed5afe95b6abb39['lite'] = templater::getSomething("lite");$v9030f0c3bdeaad3bfed5afe95b6abb39['freelance'] = templater::getSomething("freelance");$v9030f0c3bdeaad3bfed5afe95b6abb39['trial'] = templater::getSomething("trial");if(regedit::checkSomething($v1a54c1036ccb10069e9c06281d52007a, $v9030f0c3bdeaad3bfed5afe95b6abb39)) {return true;}else {include CURRENT_WORKING_DIR . "/errors/invalid_license.html";exit();}}final private function doStrangeThings($v1a54c1036ccb10069e9c06281d52007a) {$v02af0c970ae1d359ec007b3e1d3c064d = CURRENT_WORKING_DIR . "/cache/trash";$v5321626b774a579656cf063f8d8ac056 = false;$vcd91e7679d575a2c548bd2c889c23b9e = 604800;if(!file_exists(CURRENT_WORKING_DIR . "/cache")) {mkdir(CURRENT_WORKING_DIR . "/cache", 0777);}if(file_exists($v02af0c970ae1d359ec007b3e1d3c064d)) {if((time() - filemtime($v02af0c970ae1d359ec007b3e1d3c064d)) > $vcd91e7679d575a2c548bd2c889c23b9e) {$v5321626b774a579656cf063f8d8ac056 = base64_decode(file_get_contents($v02af0c970ae1d359ec007b3e1d3c064d));}}else {file_put_contents($v02af0c970ae1d359ec007b3e1d3c064d, base64_encode($v1a54c1036ccb10069e9c06281d52007a));}if($v5321626b774a579656cf063f8d8ac056 !== false && $v1a54c1036ccb10069e9c06281d52007a) {if($v1a54c1036ccb10069e9c06281d52007a === $v5321626b774a579656cf063f8d8ac056) {return true;}}return false;}public function getRequestId() {static $v510ff634fce407eea1763854519fd3ce = false;if($v510ff634fce407eea1763854519fd3ce === false) $v510ff634fce407eea1763854519fd3ce = time();return $v510ff634fce407eea1763854519fd3ce;}public function getPreLang() {return $this->pre_lang;}protected function autoRedirectToMethod($v22884db148f0ffb0d830ba431102b0b5) {$v25173eac47bcd1aa0bb3a146f0595bb7 = $this->pre_lang;$vea9f6aca279138c58f705c8d4cb4b8ce = regedit::getInstance()->getVal("//modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/default_method_admin");$v572d4e421e5e6b9bc11d815e8a027112 = $v25173eac47bcd1aa0bb3a146f0595bb7 . "/admin/" . $v22884db148f0ffb0d830ba431102b0b5 . "/" . $vea9f6aca279138c58f705c8d4cb4b8ce . "/";header("Location: {$v572d4e421e5e6b9bc11d815e8a027112}");exit();}public function calculateRefererUri() {if($vc66c00ae9f18fc0c67d8973bd07dc4cd = getRequest('referer')) {$_SESSION['referer'] = $vc66c00ae9f18fc0c67d8973bd07dc4cd;}else {if($vc66c00ae9f18fc0c67d8973bd07dc4cd = getSession('referer')) {unset($_SESSION['referer']);}else {$vc66c00ae9f18fc0c67d8973bd07dc4cd = getServer('HTTP_REFERER');}}$this->calculated_referer_uri = $vc66c00ae9f18fc0c67d8973bd07dc4cd;}public function getCalculatedRefererUri() {if($this->calculated_referer_uri === false) {$this->calculateRefererUri();}return $this->calculated_referer_uri;}public function isModule($v854203cccade0bbe21be239a208aea49) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if($vb1444fb0c07653567ad325aa25d4e37a->getVal('//modules/' . $v854203cccade0bbe21be239a208aea49)) {return true;}else {return false;}}};interface iLanguageMorph {public function __construct();public static function get_word_base($vc47d187067c6cf953245f128b5fde62a);public static function get_word_morph($vc47d187067c6cf953245f128b5fde62a, $v599dcce2998a6b40b1e38e8c6006cb0a = 'noun', $ve2942a04780e223b215eb8b663cf5353 = 0);};class language_morph implements iLanguageMorph {private $lang;public function __construct() {}public static function get_word_base($vc47d187067c6cf953245f128b5fde62a) {$vce5f02f301018ab60c4921d6654a75cd = umiConversion::getInstance();return $vce5f02f301018ab60c4921d6654a75cd->stemmerRu($vc47d187067c6cf953245f128b5fde62a);}public static function get_word_morph($vc47d187067c6cf953245f128b5fde62a, $v599dcce2998a6b40b1e38e8c6006cb0a = 'noun', $ve2942a04780e223b215eb8b663cf5353 = 0) {}};interface iUmiDate {public function __construct($v87a3cb5c3554b2d9d8a1a773ad0936be = false);public function getFormattedDate($v3c64ab0a1c8c902a8cfc3bdeedccd50a = false);public function getCurrentTimeStamp();public function getDateTimeStamp();public function setDateByTimeStamp($v87a3cb5c3554b2d9d8a1a773ad0936be);public function setDateByString($ved2f216e8eb7276d3e828504ebdf5437);public static function getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437);}class umiDate implements iUmiDate {public $timestamp;public $defaultFormatString = "Y-m-d H:i";public function __construct($vd7e6d55ba379a13d08c25d15faf2a23b = false) {if($vd7e6d55ba379a13d08c25d15faf2a23b === false) {$vd7e6d55ba379a13d08c25d15faf2a23b = self::getCurrentTimeStamp();}$this->setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b);}public function getCurrentTimeStamp() {return time();}public function getDateTimeStamp() {return intval($this->timestamp);}public function getFormattedDate($v3c64ab0a1c8c902a8cfc3bdeedccd50a = false) {if($v3c64ab0a1c8c902a8cfc3bdeedccd50a === false) {$v3c64ab0a1c8c902a8cfc3bdeedccd50a = $this->defaultFormatString;}return date($v3c64ab0a1c8c902a8cfc3bdeedccd50a, $this->timestamp);}public function setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b) {if(!is_numeric($vd7e6d55ba379a13d08c25d15faf2a23b)) {return false;}$this->timestamp = $vd7e6d55ba379a13d08c25d15faf2a23b;return true;}public function setDateByString($ved2f216e8eb7276d3e828504ebdf5437) {$ved2f216e8eb7276d3e828504ebdf5437 = umiObjectProperty::filterInputString($ved2f216e8eb7276d3e828504ebdf5437);$vd7e6d55ba379a13d08c25d15faf2a23b  = strlen($ved2f216e8eb7276d3e828504ebdf5437) ? self::getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437) : time();return $this->setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b);}public static function getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437) {return toTimeStamp($ved2f216e8eb7276d3e828504ebdf5437);}}interface iUmiFile {public function __construct($v47826cacc65c665212b821e6ff80b9b0);public function delete();public static function upload($vace49b0950fb197bb64f2ffb6a715467, $v2eb515ec764b456f2b9e57c512233229, $v74fd4667ea41a65d884a6de38d24a946);public function getSize();public function getExt();public function getFileName();public function getDirName();public function getModifyTime();public function getFilePath($vb660cf7888d38578b005371413e1c0a6 = false);public function getIsBroken();public function __toString();public static function getUnconflictPath($vd6fe1d0be6347b8ef2427fa629c04485);public function download($v789726e10bf01b1777c5d2ae06bede3e = false);}class umiFile implements iUmiFile {protected $filepath,    $size, $ext, $name, $dirname, $modify_time,    $is_broken = false;public static $mask = 0777;protected static $class_name = 'umiFile';public function __construct($v6a2a431fe8b621037ea949531c28551d) {$v6a2a431fe8b621037ea949531c28551d = str_replace("//", "/", $v6a2a431fe8b621037ea949531c28551d);$v6a2a431fe8b621037ea949531c28551d = str_replace("\\\\", "\\", $v6a2a431fe8b621037ea949531c28551d);if(!@is_file($v6a2a431fe8b621037ea949531c28551d)) {$this->is_broken = true;return false;}$this->filepath = $v6a2a431fe8b621037ea949531c28551d;$this->filepath = str_replace("\\", "/", $v6a2a431fe8b621037ea949531c28551d);$this->loadInfo();}public function delete() {if(is_writable($this->filepath)) {return unlink($this->filepath);}else {return false;}}public function download($v789726e10bf01b1777c5d2ae06bede3e = false) {ob_end_clean();header('HTTP/1.1 200 OK');header("Cache-Control: public, must-revalidate");header("Pragma: no-cache");header("Content-type: application/force-download");header("Content-Length: " . $this->getSize());header('Accept-Ranges: bytes');header("Content-Encoding: None");header("Vary:");header('Content-Transfer-Encoding: Binary');header("Content-Disposition: attachment; filename=" . $this->getFileName());readfile(realpath($this->getFilePath()));if($v789726e10bf01b1777c5d2ae06bede3e) {$this->delete();}exit();}public static function manualUpload($vb068931cc450442b63f5b3d276ea4297, $ve440be6a92dba11caa790215081671ae, $vf7bd60b75b29d79b660a2859395c1a24, $vb2ed5fc91c9760886b14c955ac6c82d7) {if(!$vf7bd60b75b29d79b660a2859395c1a24 || !$vb068931cc450442b63f5b3d276ea4297 || $vb068931cc450442b63f5b3d276ea4297 == ".htaccess" || !is_uploaded_file($ve440be6a92dba11caa790215081671ae)) return 1;$v694fbbfc143481cbc48ab8ddeadb00f1 = array("php", "php3", "php4", "php5", "phtml");if( in_array(substr($vb068931cc450442b63f5b3d276ea4297, strrpos($vb068931cc450442b63f5b3d276ea4297, '.')), $v694fbbfc143481cbc48ab8ddeadb00f1) ) return 2;list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . strtolower($v566bbee0f961ad71b54c3c2fd36db053);$v9024b204fb4c4ffdd07ee631ed791f75 = $vb2ed5fc91c9760886b14c955ac6c82d7 . "/" . $vb068931cc450442b63f5b3d276ea4297;if($vb068931cc450442b63f5b3d276ea4297 == ".htaccess") {return 3;}$v566bbee0f961ad71b54c3c2fd36db053 = strtolower($v566bbee0f961ad71b54c3c2fd36db053);if( in_array( $v566bbee0f961ad71b54c3c2fd36db053, $v694fbbfc143481cbc48ab8ddeadb00f1 ) ) {return 4;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v9024b204fb4c4ffdd07ee631ed791f75)) {chmod($v9024b204fb4c4ffdd07ee631ed791f75, self::$mask);$v9024b204fb4c4ffdd07ee631ed791f75 = self::getRelPath($v9024b204fb4c4ffdd07ee631ed791f75);return new self::$class_name($v9024b204fb4c4ffdd07ee631ed791f75);}else {return 5;}}else {return 6;}}public static function upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f = false) {global $_FILES;$ve067156fc3a90cfa942be4efa6f5bc7e = &$_FILES;$va1b423d9a2738b47df059a8a38abbd27 = $vb2ed5fc91c9760886b14c955ac6c82d7;if(substr($va1b423d9a2738b47df059a8a38abbd27, strlen($va1b423d9a2738b47df059a8a38abbd27) - 1, 1) != "/") $va1b423d9a2738b47df059a8a38abbd27 .= "/";$vb2ed5fc91c9760886b14c955ac6c82d7 = realpath($vb2ed5fc91c9760886b14c955ac6c82d7);if(!is_dir($vb2ed5fc91c9760886b14c955ac6c82d7)) {return false;}if(!is_writable($vb2ed5fc91c9760886b14c955ac6c82d7)) {return false;}if(!is_array($ve067156fc3a90cfa942be4efa6f5bc7e)) {return false;}if(!isset($ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e]) && isset($ve067156fc3a90cfa942be4efa6f5bc7e['pics'])) {$ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e] = $ve067156fc3a90cfa942be4efa6f5bc7e['pics'];$veeeb23fbd23e52a6a6ff78b9f18cbc4e = "pics";}if(array_key_exists($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $ve067156fc3a90cfa942be4efa6f5bc7e)) {$v080505fba0c91df9d7cff41d972acaf1 = $ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e];if(isset($v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17])) {$vb80bb7740288fda1f201890375a60c8f = false;}$vf7bd60b75b29d79b660a2859395c1a24 = ($vb80bb7740288fda1f201890375a60c8f === false) ?                                     (isset($v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17])? $v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17] : 0)                                        :                                     (isset($v080505fba0c91df9d7cff41d972acaf1['size'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17])? $v080505fba0c91df9d7cff41d972acaf1['size'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17] : 0);if($vf7bd60b75b29d79b660a2859395c1a24 == 0) {return false;}else {$ve440be6a92dba11caa790215081671ae = ($vb80bb7740288fda1f201890375a60c8f === false) ? $v080505fba0c91df9d7cff41d972acaf1['tmp_name'][$v86536e21993c5a96a4d4c9c9afcc9b17] : $v080505fba0c91df9d7cff41d972acaf1['tmp_name'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17];$vb068931cc450442b63f5b3d276ea4297 = ($vb80bb7740288fda1f201890375a60c8f === false) ? $v080505fba0c91df9d7cff41d972acaf1['name'][$v86536e21993c5a96a4d4c9c9afcc9b17] : $v080505fba0c91df9d7cff41d972acaf1['name'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17];$v694fbbfc143481cbc48ab8ddeadb00f1 = array("php", "php3", "php4", "php5", "phtml");if( in_array(substr($vb068931cc450442b63f5b3d276ea4297, strrpos($vb068931cc450442b63f5b3d276ea4297, '.')), $v694fbbfc143481cbc48ab8ddeadb00f1) ) return false;list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . strtolower($v566bbee0f961ad71b54c3c2fd36db053);$v9024b204fb4c4ffdd07ee631ed791f75 = $vb2ed5fc91c9760886b14c955ac6c82d7 . "/" . $vb068931cc450442b63f5b3d276ea4297;if($vb068931cc450442b63f5b3d276ea4297 == ".htaccess") {return false;}$v566bbee0f961ad71b54c3c2fd36db053 = strtolower($v566bbee0f961ad71b54c3c2fd36db053);if( in_array( $v566bbee0f961ad71b54c3c2fd36db053, $v694fbbfc143481cbc48ab8ddeadb00f1 ) ) {return false;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v9024b204fb4c4ffdd07ee631ed791f75)) {chmod($v9024b204fb4c4ffdd07ee631ed791f75, self::$mask);$v9024b204fb4c4ffdd07ee631ed791f75 = self::getRelPath($v9024b204fb4c4ffdd07ee631ed791f75);return new self::$class_name($v9024b204fb4c4ffdd07ee631ed791f75);}else {return false;}}else {return false;}}}else {return false;}}public static function upload_zip ($v86536e21993c5a96a4d4c9c9afcc9b17, $v8c7dd922ad47494fc02c388e12c00eac = "", $v851148b4fd8fd7ae74bd9100c5c0c898 = "./images/cms/data/")  {if ($v8c7dd922ad47494fc02c388e12c00eac == "") {$ve440be6a92dba11caa790215081671ae = $v86536e21993c5a96a4d4c9c9afcc9b17['tmp_name'];$vb068931cc450442b63f5b3d276ea4297 = $v86536e21993c5a96a4d4c9c9afcc9b17['name'];list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . $v566bbee0f961ad71b54c3c2fd36db053;$v9024b204fb4c4ffdd07ee631ed791f75 = $v851148b4fd8fd7ae74bd9100c5c0c898.$vb068931cc450442b63f5b3d276ea4297;$v3cc7992a6d5b20ce784f6169f4423048 = './'.$vb068931cc450442b63f5b3d276ea4297;if ($v86536e21993c5a96a4d4c9c9afcc9b17['size'] == 0) {return false;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v3cc7992a6d5b20ce784f6169f4423048)) {chmod($v3cc7992a6d5b20ce784f6169f4423048, self::$mask);}else {return false;}}else {return false;}}else {$v8c7dd922ad47494fc02c388e12c00eac = "./".$v8c7dd922ad47494fc02c388e12c00eac;if (!file_exists ($v8c7dd922ad47494fc02c388e12c00eac) || !is_writable($v8c7dd922ad47494fc02c388e12c00eac)) return "File not exists!";$ve6223bee17b330d9aed62e68463e0515 = pathinfo ($v8c7dd922ad47494fc02c388e12c00eac);if ($ve6223bee17b330d9aed62e68463e0515['extension'] != "zip") {return "It's not zip-file!";}$v9024b204fb4c4ffdd07ee631ed791f75 = $v8c7dd922ad47494fc02c388e12c00eac;$v3cc7992a6d5b20ce784f6169f4423048 = $v8c7dd922ad47494fc02c388e12c00eac;}$v888d0ee361af3603736f32131e7b20a2 = new PclZip($v3cc7992a6d5b20ce784f6169f4423048);if (($v10ae9fc7d453b0dd525d0edf2ede7961 = $v888d0ee361af3603736f32131e7b20a2->extract(PCLZIP_OPT_PATH, $v851148b4fd8fd7ae74bd9100c5c0c898,    PCLZIP_CB_PRE_EXTRACT, "callbackPreExtract",    PCLZIP_CB_POST_EXTRACT, "callbackPostExtract",    PCLZIP_OPT_REMOVE_ALL_PATH)) == 0 || !is_array ($v10ae9fc7d453b0dd525d0edf2ede7961)) {if(is_writable($v9024b204fb4c4ffdd07ee631ed791f75)) {unlink($v9024b204fb4c4ffdd07ee631ed791f75);}throw new coreException ("Zip extracting error: ".$v888d0ee361af3603736f32131e7b20a2->errorInfo(true));}if(is_writable($v9024b204fb4c4ffdd07ee631ed791f75)) {unlink($v9024b204fb4c4ffdd07ee631ed791f75);}return $v10ae9fc7d453b0dd525d0edf2ede7961;}public function getFileName() {return $this->name;}public function getDirName() {return $this->dirname;}public function getModifyTime() {return $this->modify_time;}public function getExt() {return $this->ext;}public function getSize() {return $this->size;}public function getFilePath($v335fe1286880112c216697dceb9e2bd3 = false) {if($v335fe1286880112c216697dceb9e2bd3) {$vbf7be97451be760d000d8fd7b26c5a3d = ini_get("include_path");if (substr($this->filepath, 0, strlen($vbf7be97451be760d000d8fd7b26c5a3d)) === $vbf7be97451be760d000d8fd7b26c5a3d) {return "/" . substr($this->filepath, strlen($vbf7be97451be760d000d8fd7b26c5a3d));}return (substr($this->filepath, 0, 2) == "./") ? ("/" . substr($this->filepath, 2, strlen($this->filepath) - 2)) : $this->filepath;}else {return $this->filepath;}}private function loadInfo() {if(!is_file($this->filepath)) {$this->is_broken = true;return false;}if(!is_readable($this->filepath)) {$this->is_broken = true;return false;}$va93b85dcfbb9969f5bb3c6be71737ed5 = pathinfo($this->filepath);$this->modify_time = filemtime($this->filepath);$this->size = filesize($this->filepath);$this->dirname = $va93b85dcfbb9969f5bb3c6be71737ed5['dirname'];$this->name = $va93b85dcfbb9969f5bb3c6be71737ed5['basename'];$this->ext = strtolower(getArrayKey($va93b85dcfbb9969f5bb3c6be71737ed5, 'extension'));if($this->ext == "php" || $this->ext == "php5" || $this->ext == "phtml") {$this->is_broken = true;}if($this->name == ".htaccess") {$this->is_broken = true;}}public function __toString() {$v6a2a431fe8b621037ea949531c28551d = $this->getFilePath(true);return is_null($v6a2a431fe8b621037ea949531c28551d) ? "" : $v6a2a431fe8b621037ea949531c28551d;}public function getIsBroken() {return (bool) $this->is_broken;}public static function getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75) {if(!file_exists($v9024b204fb4c4ffdd07ee631ed791f75)) {return $v9024b204fb4c4ffdd07ee631ed791f75;}else {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v9024b204fb4c4ffdd07ee631ed791f75);$v954eef6d6eac59aca304b6d7abb4fb3e = $vcaf9b6b99962bf5c2264824231d7a40c['dirname'];$v435ed7e9f07f740abf511a62c00eef6e = $vcaf9b6b99962bf5c2264824231d7a40c['filename'];$vabf77184f55403d75b9d51d79162a7ca = $vcaf9b6b99962bf5c2264824231d7a40c['extension'];for($v865c0c0b4ab0e063e5caa3387c1a8741 = 1;$v865c0c0b4ab0e063e5caa3387c1a8741 < 257;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v9024b204fb4c4ffdd07ee631ed791f75 = $v954eef6d6eac59aca304b6d7abb4fb3e . "/" . $v435ed7e9f07f740abf511a62c00eef6e . $v865c0c0b4ab0e063e5caa3387c1a8741 . "." . $vabf77184f55403d75b9d51d79162a7ca;if(!file_exists($v9024b204fb4c4ffdd07ee631ed791f75)) {return $v9024b204fb4c4ffdd07ee631ed791f75;}}throw new coreException("This is really hard to happen");}}protected static function getRelPath($vd6fe1d0be6347b8ef2427fa629c04485) {$v109633366fd0d46d371ede589998abaa = realpath(getcwd());return "." . substr(realpath($vd6fe1d0be6347b8ef2427fa629c04485), strlen($v109633366fd0d46d371ede589998abaa));}};function callbackPreExtract ($v50cd20d6ab1f950f5f7cd9594d824078, &$v346210869c15b12ae6d906bb9e095aac) {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v346210869c15b12ae6d906bb9e095aac['filename']);$v954eb83bca864c64ee1e669dfab01c95 = substr($vcaf9b6b99962bf5c2264824231d7a40c['basename'], 0, (strlen($vcaf9b6b99962bf5c2264824231d7a40c['basename']) - strlen($vcaf9b6b99962bf5c2264824231d7a40c['extension']))-1);$v954eb83bca864c64ee1e669dfab01c95 = translit::convert($v954eb83bca864c64ee1e669dfab01c95);$v346210869c15b12ae6d906bb9e095aac['filename'] = $vcaf9b6b99962bf5c2264824231d7a40c['dirname']."/".$v954eb83bca864c64ee1e669dfab01c95.".".$vcaf9b6b99962bf5c2264824231d7a40c['extension'];$v346210869c15b12ae6d906bb9e095aac['filename'] = umiFile::getUnconflictPath($v346210869c15b12ae6d906bb9e095aac['filename']);return 1;}function callbackPostExtract ($v50cd20d6ab1f950f5f7cd9594d824078, &$v346210869c15b12ae6d906bb9e095aac) {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v346210869c15b12ae6d906bb9e095aac['stored_filename']);$v7fee4f7b906c49d382375b9db2541387 = array ("jpg","jpeg","gif","bmp","png");if ( !in_array ($vcaf9b6b99962bf5c2264824231d7a40c['extension'], $v7fee4f7b906c49d382375b9db2541387)) {unlink ($v346210869c15b12ae6d906bb9e095aac['filename']);}return 1;}interface iUmiImageFile {public function getWidth();public function getHeight();}class umiImageFile extends umiFile implements iUmiImageFile {private static $aSupportedTypes = null;private static $useWatermark = false;public function __construct($v6a2a431fe8b621037ea949531c28551d) {parent::__construct($v6a2a431fe8b621037ea949531c28551d);if (!$this->is_broken) {$this->is_broken = ! self::getIsImage($this->name);}}public static function getSupportedImageTypes() {if (is_null(self::$aSupportedTypes)) {self::$aSupportedTypes = array();self::$aSupportedTypes[] = "GIF";self::$aSupportedTypes[] = "JPG";self::$aSupportedTypes[] = "JPEG";self::$aSupportedTypes[] = "PNG";self::$aSupportedTypes[] = "WBMP";self::$aSupportedTypes[] = "BMP";self::$aSupportedTypes[] = "SWF";}return self::$aSupportedTypes;}public static function setWatermarkOn () {self::$useWatermark = true;}public static function setWatermarkOff () {self::$useWatermark = false;}public static function upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f = false) {self::$class_name = __CLASS__;$v6a2a431fe8b621037ea949531c28551d = parent::upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f);$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$ve6a7ab42343e8bc9131d89646abcb773 = (int) $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/max_img_filesize");$v79001f389eb5f5185f6945430cb57be1 = (int) ini_get("upload_max_filesize");$ve6a7ab42343e8bc9131d89646abcb773 = ($ve6a7ab42343e8bc9131d89646abcb773 < $v79001f389eb5f5185f6945430cb57be1) ? $ve6a7ab42343e8bc9131d89646abcb773 : $v79001f389eb5f5185f6945430cb57be1;$v11b4278c7e5a79003db77272c1ed2cf5 = (int) filesize("." . $v6a2a431fe8b621037ea949531c28551d);$ve6a7ab42343e8bc9131d89646abcb773 = (int) $ve6a7ab42343e8bc9131d89646abcb773*1024*1024;if($ve6a7ab42343e8bc9131d89646abcb773 > 0) {if($ve6a7ab42343e8bc9131d89646abcb773 < $v11b4278c7e5a79003db77272c1ed2cf5) {unlink("." . $v6a2a431fe8b621037ea949531c28551d);return false;}}if (self::$useWatermark) {self::addWatermark ("./".$v6a2a431fe8b621037ea949531c28551d);}self::setWatermarkOff ();return $v6a2a431fe8b621037ea949531c28551d;}public static function getIsImage($v718f2106be68f0edfc366ed06124fe55) {$vdc94d607c2365888317e7b14f9ea0a9d = explode(".", $v718f2106be68f0edfc366ed06124fe55);$vdd3d03de4e016ecdd03c280fe46c86a3 = strtoupper(array_pop($vdc94d607c2365888317e7b14f9ea0a9d));return in_array($vdd3d03de4e016ecdd03c280fe46c86a3, self::getSupportedImageTypes());}public function getWidth() {list($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81) = getimagesize($this->filepath);return $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}public function getHeight() {list($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81) = getimagesize($this->filepath);return $vb435e227d5dd201e1768b2bcb2e0aa81;}private static function addWatermark ($v47826cacc65c665212b821e6ff80b9b0) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance ();$v9234d6561fcbf96ed0c3f0ee5794032d = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/image");$v0246d16e9822ba3b810310987d165c71 = 80;$v8fa8b46b17731c7c9c882faede387741 = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/alpha");$v379da31305f1eba200307fcdf9cf0ca0 = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/valign");$vb1c37415e373f67b34bfbdeac8a8338f = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/halign");if (!file_exists ($v9234d6561fcbf96ed0c3f0ee5794032d)) {return false;}if (!$v8fa8b46b17731c7c9c882faede387741) {$v8fa8b46b17731c7c9c882faede387741 = 70;}if (!$v379da31305f1eba200307fcdf9cf0ca0) {$v379da31305f1eba200307fcdf9cf0ca0 = "bottom";}if (!$vb1c37415e373f67b34bfbdeac8a8338f) {$vb1c37415e373f67b34bfbdeac8a8338f = "right";}$vfc1eb20506413fbbdc753afe5117cff0 = self::createImage ($v9234d6561fcbf96ed0c3f0ee5794032d);$v6226ba4abbac63dbd2114cb5966b1bf8 = self::createImage ($v47826cacc65c665212b821e6ff80b9b0);$vfcf76116d23aa625909b9eb0e709b276 = pathinfo ($v47826cacc65c665212b821e6ff80b9b0);if (!$vfc1eb20506413fbbdc753afe5117cff0 || !$v6226ba4abbac63dbd2114cb5966b1bf8) {return false;}$v9174d2f2b3c032f04911450bb5b7b25e = $vfc1eb20506413fbbdc753afe5117cff0["height"] / $v6226ba4abbac63dbd2114cb5966b1bf8["height"];$v3393d19d534fb6257afdc49390e536c4 = $vfc1eb20506413fbbdc753afe5117cff0["width"] / $v6226ba4abbac63dbd2114cb5966b1bf8["width"];if (($v9174d2f2b3c032f04911450bb5b7b25e > $v0246d16e9822ba3b810310987d165c71/100) || ($v3393d19d534fb6257afdc49390e536c4 > $v0246d16e9822ba3b810310987d165c71/100)) {$v0cb47aeb6e5f9323f0969e628c4e59f5 = ($v0246d16e9822ba3b810310987d165c71 / 100) / (($v9174d2f2b3c032f04911450bb5b7b25e > $v3393d19d534fb6257afdc49390e536c4) ? $v9174d2f2b3c032f04911450bb5b7b25e : $v3393d19d534fb6257afdc49390e536c4);$v91890ebc9d3427ff4a7d27c8f94caefc = floor($vfc1eb20506413fbbdc753afe5117cff0["height"] * $v0cb47aeb6e5f9323f0969e628c4e59f5);$vdee127a12af5fa50ceb8944739d5ef01 = floor($vfc1eb20506413fbbdc753afe5117cff0["width"] * $v0cb47aeb6e5f9323f0969e628c4e59f5);}else {$v91890ebc9d3427ff4a7d27c8f94caefc = $vfc1eb20506413fbbdc753afe5117cff0["height"];$vdee127a12af5fa50ceb8944739d5ef01 = $vfc1eb20506413fbbdc753afe5117cff0["width"];}$v98ac273381790591214fbee1fa05a6e9 = imagecreatetruecolor ($vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc);$v4362482a4ee187713f71bacd03c3f3b8 = imagecolorallocate ($v98ac273381790591214fbee1fa05a6e9, 255, 255, 255);imagefilledrectangle ($v98ac273381790591214fbee1fa05a6e9, 0, 0, $vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc, $v4362482a4ee187713f71bacd03c3f3b8);imagecopyresized ($v98ac273381790591214fbee1fa05a6e9, $vfc1eb20506413fbbdc753afe5117cff0["im"], 0, 0, 0, 0, $vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc, $vfc1eb20506413fbbdc753afe5117cff0["width"], $vfc1eb20506413fbbdc753afe5117cff0["height"]);imagedestroy ($vfc1eb20506413fbbdc753afe5117cff0["im"]);$vfc1eb20506413fbbdc753afe5117cff0 = array (    "im" => $v98ac273381790591214fbee1fa05a6e9,    "width" => $vdee127a12af5fa50ceb8944739d5ef01,    "height" => $v91890ebc9d3427ff4a7d27c8f94caefc   );$v98ac273381790591214fbee1fa05a6e9 = imagecreatetruecolor ($v6226ba4abbac63dbd2114cb5966b1bf8["width"], $v6226ba4abbac63dbd2114cb5966b1bf8["height"]);$v4362482a4ee187713f71bacd03c3f3b8 = imagecolorallocate ($v98ac273381790591214fbee1fa05a6e9, 255, 255, 255);imagecopy ($v98ac273381790591214fbee1fa05a6e9, $v6226ba4abbac63dbd2114cb5966b1bf8["im"], 0,0,0,0, $v6226ba4abbac63dbd2114cb5966b1bf8["width"], $v6226ba4abbac63dbd2114cb5966b1bf8["height"]);$v6382f6cf920a5e1f12258b86b3fcac3b = 0;$v44ef37a80954a70dc24d955310d80967 = 0;switch ($vb1c37415e373f67b34bfbdeac8a8338f){case "center" : {$v6382f6cf920a5e1f12258b86b3fcac3b = floor (($v6226ba4abbac63dbd2114cb5966b1bf8["width"] - $vfc1eb20506413fbbdc753afe5117cff0["width"]) / 2);break;}case "right" : {$v6382f6cf920a5e1f12258b86b3fcac3b = $v6226ba4abbac63dbd2114cb5966b1bf8["width"] - $vfc1eb20506413fbbdc753afe5117cff0["width"];}}switch ($v379da31305f1eba200307fcdf9cf0ca0) {case "center" : {$v44ef37a80954a70dc24d955310d80967 = floor (($v6226ba4abbac63dbd2114cb5966b1bf8["height"] - $vfc1eb20506413fbbdc753afe5117cff0["height"]) / 2);break;}case "bottom" : {$v44ef37a80954a70dc24d955310d80967 = $v6226ba4abbac63dbd2114cb5966b1bf8["height"] - $vfc1eb20506413fbbdc753afe5117cff0["height"];}}imagecopymerge ($v98ac273381790591214fbee1fa05a6e9, $vfc1eb20506413fbbdc753afe5117cff0["im"], $v6382f6cf920a5e1f12258b86b3fcac3b, $v44ef37a80954a70dc24d955310d80967, 0, 0, $vfc1eb20506413fbbdc753afe5117cff0["width"], $vfc1eb20506413fbbdc753afe5117cff0["height"], $v8fa8b46b17731c7c9c882faede387741);switch ($vfcf76116d23aa625909b9eb0e709b276['extension']) {case "jpeg" :    case "jpg"  :    case "JPEG" :    case "JPG"  : {imagejpeg ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0, 90);break;}case "png" :    case "PNG" : {imagepng ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0);}case "gif" :    case "GIF" : {imagegif ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0);break;}case "bmp" :    case "BMP" : {}}imagedestroy ($v6226ba4abbac63dbd2114cb5966b1bf8["im"]);imagedestroy ($vfc1eb20506413fbbdc753afe5117cff0["im"]);imagedestroy ($v98ac273381790591214fbee1fa05a6e9);return true;}private static function createImage ($vfdc0a99c383c1558bed83c633f57a836) {$v931072b8630108758003074932646789 = 0;$va93b85dcfbb9969f5bb3c6be71737ed5 = parse_url ($vfdc0a99c383c1558bed83c633f57a836);$vfdc0a99c383c1558bed83c633f57a836 = (substr ($va93b85dcfbb9969f5bb3c6be71737ed5["path"], 0, 1) == "/")        ? substr ($va93b85dcfbb9969f5bb3c6be71737ed5["path"], 1)        : $va93b85dcfbb9969f5bb3c6be71737ed5["path"];list ($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $v599dcce2998a6b40b1e38e8c6006cb0a, $v815be97df65d6c4b510cd07189c5347a) = getimagesize ($vfdc0a99c383c1558bed83c633f57a836);$vd14a8022b085f9ef19d479cbdd581127 = array (    "GIF" => "1",    "JPG" => "2",    "PNG" => "3",    "WBMP"=> "15",    "XBM" => "16"   );switch($v599dcce2998a6b40b1e38e8c6006cb0a){case $vd14a8022b085f9ef19d479cbdd581127["GIF"] : {$v931072b8630108758003074932646789 = imagecreatefromgif ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["JPG"] : {$v931072b8630108758003074932646789 = imagecreatefromjpeg ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["PNG"] : {$v931072b8630108758003074932646789 = imagecreatefrompng ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["WBMP"] : {$v931072b8630108758003074932646789 = imagecreatefromwbmp ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["XBM"]: {$v931072b8630108758003074932646789 = imagecreatefromxbm ($vfdc0a99c383c1558bed83c633f57a836);}}if (!$v931072b8630108758003074932646789) {return false;}return array (    "im"     => $v931072b8630108758003074932646789,    "width"  => $veaae26a6fb20ed3ef54fb23bfa0b1fcc,    "height" => $vb435e227d5dd201e1768b2bcb2e0aa81   );}}interface iLang {public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getPrefix();public function setPrefix($v851f5ac9941d720844d143ed9cfcf60a);public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);}class lang extends umiEntinty implements iUmiEntinty, iLang {private $prefix, $is_default, $title;protected $store_type = "lang";protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, prefix, is_default, title FROM cms3_langs WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $v851f5ac9941d720844d143ed9cfcf60a, $vf62baf4c4ead98d50d516eca0ac5a746, $vd5d3db1765287eef77d7927cc956f50a) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->prefix = $v851f5ac9941d720844d143ed9cfcf60a;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;return true;}else {return false;}}public function getTitle() {return $this->title;}public function getPrefix() {return $this->prefix;}public function getIsDefault() {return $this->is_default;}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setPrefix($v851f5ac9941d720844d143ed9cfcf60a) {$this->prefix = $v851f5ac9941d720844d143ed9cfcf60a;$this->setIsUpdated();}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}protected function save() {$vd5d3db1765287eef77d7927cc956f50a = self::filterInputString($this->title);$v851f5ac9941d720844d143ed9cfcf60a = self::filterInputString($this->prefix);$v851f5ac9941d720844d143ed9cfcf60a = $this->filterPrefix($v851f5ac9941d720844d143ed9cfcf60a);$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_langs SET prefix = '{$v851f5ac9941d720844d143ed9cfcf60a}', is_default = '{$vf62baf4c4ead98d50d516eca0ac5a746}', title = '{$vd5d3db1765287eef77d7927cc956f50a}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}protected function filterPrefix($v851f5ac9941d720844d143ed9cfcf60a) {return preg_replace("/[^A-z0-9_\-]+/", "", $v851f5ac9941d720844d143ed9cfcf60a);}}interface iLangsCollection {public function addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a, $ve558e63f3083922542d8745224a66eea = false);public function delLang($vf585b7f018bb4ced15a03683a733e50b);public function getDefaultLang();public function setDefault($vf585b7f018bb4ced15a03683a733e50b);public function getLangId($v851f5ac9941d720844d143ed9cfcf60a);public function getLang($vf585b7f018bb4ced15a03683a733e50b);public function getList();public function getAssocArray();}class langsCollection extends singleton implements iSingleton, iLangsCollection {private $langs = Array(),   $def_lang;protected function __construct() {$this->loadLangs();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function loadLangs() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, prefix, is_default, title FROM cms3_langs ORDER BY id";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}while(list($v78e6dd7a49f5b0cb2106a3a434dd5c86) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v7572559ca86e781ba8fe8073a0b725c6 = cacheFrontend::getInstance()->load($v78e6dd7a49f5b0cb2106a3a434dd5c86, "lang");if($v7572559ca86e781ba8fe8073a0b725c6 instanceof lang == false) {try {$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v7572559ca86e781ba8fe8073a0b725c6, "lang");}$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = $v7572559ca86e781ba8fe8073a0b725c6;if($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]->getIsDefault()) {$this->def_lang = $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86];}}}public function getLangId($v851f5ac9941d720844d143ed9cfcf60a) {foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {if($v7572559ca86e781ba8fe8073a0b725c6->getPrefix() == $v851f5ac9941d720844d143ed9cfcf60a) {return $v7572559ca86e781ba8fe8073a0b725c6->getId();}}return false;}public function addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {$this->disableCache();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->getLangId($v851f5ac9941d720844d143ed9cfcf60a)) {return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_langs VALUES()";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = mysql_insert_id();$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v7572559ca86e781ba8fe8073a0b725c6->setPrefix($v851f5ac9941d720844d143ed9cfcf60a);$v7572559ca86e781ba8fe8073a0b725c6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v7572559ca86e781ba8fe8073a0b725c6->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);$v7572559ca86e781ba8fe8073a0b725c6->commit();$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = &$v7572559ca86e781ba8fe8073a0b725c6;return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}}public function delLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$this->disableCache();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_langs WHERE id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {unset($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]);}}public function getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;return ($this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) ? $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] : false;}public function isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86) {return (bool) array_key_exists($v78e6dd7a49f5b0cb2106a3a434dd5c86, $this->langs);}public function getList() {return (Array) $this->langs;}public function setDefault($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {return false;}if($this->def_lang) {$this->def_lang->setIsDefault(false);$this->def_lang->commit();}$this->def_lang = $this->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$this->def_lang->setIsDefault(true);$this->def_lang->commit();}public function getDefaultLang() {return ($this->def_lang) ? $this->def_lang : false;}public function getAssocArray() {$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {$v9b207167e5381c47682c6b4f58a623fb[$v7572559ca86e781ba8fe8073a0b725c6->getId()] = $v7572559ca86e781ba8fe8073a0b725c6->getTitle();}return $v9b207167e5381c47682c6b4f58a623fb;}}interface iDomainMirrow {public function getHost();public function setHost($v67b3dba8bc6778101892eb77249db32e);}class domainMirrow extends umiEntinty implements iUmiEntinty, iDomainMirrow {private $host;public function setHost($v67b3dba8bc6778101892eb77249db32e) {$this->host = trim($v67b3dba8bc6778101892eb77249db32e);$this->setIsUpdated();}public function getHost() {return $this->host;}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, host FROM cms3_domain_mirrows WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $v67b3dba8bc6778101892eb77249db32e) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->host = $v67b3dba8bc6778101892eb77249db32e;return true;}else {return false;}}protected function save() {$v67b3dba8bc6778101892eb77249db32e = self::filterInputString($this->host);$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_domain_mirrows SET host = '{$v67b3dba8bc6778101892eb77249db32e}' WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {return true;}}}interface iDomain {public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);public function addMirrow($vbe5301edeed9917bd552fa98fa1c1766);public function delMirrow($vb240b3b51bcbee2838ac4e9835f9ef51);public function getMirrowId($vbe5301edeed9917bd552fa98fa1c1766);public function getMirrow($vb240b3b51bcbee2838ac4e9835f9ef51);public function getMirrowsList();public function delAllMirrows();public function isMirrowExists($vb240b3b51bcbee2838ac4e9835f9ef51);public function getDefaultLangId();public function setDefaultLangId($vf585b7f018bb4ced15a03683a733e50b);}class domain extends umiEntinty implements iUmiEntinty, iDomainMirrow, iDomain {private $host, $default_lang_id, $mirrows = Array();protected $store_type = "domain";protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, host, is_default, default_lang_id FROM cms3_domains WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $v67b3dba8bc6778101892eb77249db32e, $vf62baf4c4ead98d50d516eca0ac5a746, $v97558aef72e0ceae6733793ba319a8d1) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->host = $v67b3dba8bc6778101892eb77249db32e;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->default_lang_id = (int) $v97558aef72e0ceae6733793ba319a8d1;return $this->loadMirrows();}else {return false;}}public function getHost() {return $this->host;}public function getIsDefault() {return $this->is_default;}public function setHost($v67b3dba8bc6778101892eb77249db32e) {$this->host = trim($v67b3dba8bc6778101892eb77249db32e);$this->setIsUpdated();}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}public function getDefaultLangId() {return $this->default_lang_id;}public function setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(langsCollection::getInstance()->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->default_lang_id = $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();return true;}else {trigger_error("Language #{$v78e6dd7a49f5b0cb2106a3a434dd5c86} doesn't exists", E_USER_WARNING);return false;}}public function addMirrow($vc9b148be34c2f7632fa35c418e265083) {if($v8ec042d79ac0de3ba2c91d757c4bbf06 = $this->getMirrowId($vc9b148be34c2f7632fa35c418e265083)) {return $v8ec042d79ac0de3ba2c91d757c4bbf06;}else {$this->setIsUpdated();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_domain_mirrows (rel) VALUES('{$this->id}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$v8ec042d79ac0de3ba2c91d757c4bbf06 = mysql_insert_id();$vda570110a5cf8f2ea8b037f530ec4f5a = new domainMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06);$vda570110a5cf8f2ea8b037f530ec4f5a->setHost($vc9b148be34c2f7632fa35c418e265083);$vda570110a5cf8f2ea8b037f530ec4f5a->commit();$this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06] = $vda570110a5cf8f2ea8b037f530ec4f5a;return $v8ec042d79ac0de3ba2c91d757c4bbf06;}}public function delMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06) {if($this->isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06)) {$this->setIsUpdated();$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_domain_mirrows WHERE id = '{$v8ec042d79ac0de3ba2c91d757c4bbf06}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {unset($this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06]);return true;}}else {return false;}}public function delAllMirrows() {$this->setIsUpdated();$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_domain_mirrows WHERE rel = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {return true;}}public function getMirrowId($vc9b148be34c2f7632fa35c418e265083) {foreach($this->mirrows as $vda570110a5cf8f2ea8b037f530ec4f5a) {if($vda570110a5cf8f2ea8b037f530ec4f5a->getHost() == $vc9b148be34c2f7632fa35c418e265083) {return $vda570110a5cf8f2ea8b037f530ec4f5a->getId();}}return false;}public function getMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06) {if($this->isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06)) {return $this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06];}else {return false;}}public function isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06) {return (bool) array_key_exists($v8ec042d79ac0de3ba2c91d757c4bbf06, $this->mirrows);}public function getMirrowsList() {return $this->mirrows;}private function loadMirrows() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, host FROM cms3_domain_mirrows WHERE rel = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}while(list($v8ec042d79ac0de3ba2c91d757c4bbf06) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {try {$this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06] = new domainMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}}return true;}protected function save() {$v67b3dba8bc6778101892eb77249db32e = self::filterInputString($this->host);$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$v97558aef72e0ceae6733793ba319a8d1 = (int) $this->default_lang_id;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_domains SET host = '{$v67b3dba8bc6778101892eb77249db32e}', is_default = '{$vf62baf4c4ead98d50d516eca0ac5a746}', default_lang_id = '{$v97558aef72e0ceae6733793ba319a8d1}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {return true;}}}interface iDomainsCollection {public function addDomain($v67b3dba8bc6778101892eb77249db32e, $va840f33f4bf1f6686232b6ca1c12384e, $ve558e63f3083922542d8745224a66eea = false);public function delDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDefaultDomain();public function setDefaultDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDomainId($v67b3dba8bc6778101892eb77249db32e, $vaa852eb4a7729f6a309496b84a01631b = true);public function getList();}class domainsCollection extends singleton implements iSingleton, iDomainsCollection {private $domains = Array(), $def_domain;protected function __construct() {$this->loadDomains();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addDomain($v67b3dba8bc6778101892eb77249db32e, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 = $this->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {return $v662cbf1253ac7d8750ed9190c52163e5;}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_domains VALUES()";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$v662cbf1253ac7d8750ed9190c52163e5 = mysql_insert_id();$this->domains[$v662cbf1253ac7d8750ed9190c52163e5] = $vad5f82e879a9c5d6b5b442eb37e50551 = new domain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->setHost($v67b3dba8bc6778101892eb77249db32e);$vad5f82e879a9c5d6b5b442eb37e50551->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);$vad5f82e879a9c5d6b5b442eb37e50551->setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);if($vf62baf4c4ead98d50d516eca0ac5a746) $this->setDefaultDomain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->commit();return $v662cbf1253ac7d8750ed9190c52163e5;}}public function setDefaultDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_domains SET is_default = '0' WHERE is_default = '1'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {if($v2dc2d350ce3298213f154e90eb3211c3 = $this->getDefaultDomain()) {$v2dc2d350ce3298213f154e90eb3211c3->setIsDefault(false);$v2dc2d350ce3298213f154e90eb3211c3->commit();}$this->def_domain = $v662cbf1253ac7d8750ed9190c52163e5;$this->def_domain->setIsDefault(true);$this->def_domain->commit();}}else {return false;}}public function delDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {$vad5f82e879a9c5d6b5b442eb37e50551 = $this->getDomain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->delAllMirrows();if($vad5f82e879a9c5d6b5b442eb37e50551->getIsDefault()) {$this->def_domain = false;}unset($vad5f82e879a9c5d6b5b442eb37e50551);unset($this->domains[$v662cbf1253ac7d8750ed9190c52163e5]);$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_hierarchy WHERE domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_domains WHERE id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}else {return true;}}else {trigger_error("Domain #{$v662cbf1253ac7d8750ed9190c52163e5} doesn't exists.", E_USER_WARNING);return false;}}public function getDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {return $this->domains[$v662cbf1253ac7d8750ed9190c52163e5];}else {return false;}}public function getDefaultDomain() {return ($this->def_domain) ? $this->def_domain : false;}public function getList() {return $this->domains;}public function isExists($v662cbf1253ac7d8750ed9190c52163e5) {return (bool) array_key_exists($v662cbf1253ac7d8750ed9190c52163e5, $this->domains);}public function getDomainId($v67b3dba8bc6778101892eb77249db32e, $vee68968f28c875319a24db7a4687bcc6 = true) {foreach($this->domains as $vad5f82e879a9c5d6b5b442eb37e50551) {if($vad5f82e879a9c5d6b5b442eb37e50551->getHost() == $v67b3dba8bc6778101892eb77249db32e) {return $vad5f82e879a9c5d6b5b442eb37e50551->getId();}else {if($vee68968f28c875319a24db7a4687bcc6) {$v1971009c5db21ab4fa6ae028d9fd2c9f = $vad5f82e879a9c5d6b5b442eb37e50551->getMirrowsList();foreach($v1971009c5db21ab4fa6ae028d9fd2c9f as $v15515d42c0242547a1c1972abb21cfad) {if($v15515d42c0242547a1c1972abb21cfad->getHost() == $v67b3dba8bc6778101892eb77249db32e) {return $vad5f82e879a9c5d6b5b442eb37e50551->getId();}}}}}return false;}private function loadDomains() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, host, is_default, default_lang_id FROM cms3_domains";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_error($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}while(list($v662cbf1253ac7d8750ed9190c52163e5) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$vad5f82e879a9c5d6b5b442eb37e50551 = cacheFrontend::getInstance()->load($v662cbf1253ac7d8750ed9190c52163e5, "domain");if($vad5f82e879a9c5d6b5b442eb37e50551 instanceof domain == false) {try {$vad5f82e879a9c5d6b5b442eb37e50551 = new domain($v662cbf1253ac7d8750ed9190c52163e5, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($vad5f82e879a9c5d6b5b442eb37e50551, "domain");}$this->domains[$v662cbf1253ac7d8750ed9190c52163e5] = $vad5f82e879a9c5d6b5b442eb37e50551;if($vad5f82e879a9c5d6b5b442eb37e50551->getIsDefault()) {$this->def_domain = $vad5f82e879a9c5d6b5b442eb37e50551;}}return true;}}interface iTemplate {public function getFilename();public function setFilename($v435ed7e9f07f740abf511a62c00eef6e);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getDomainId();public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getLangId();public function setLangId($vf585b7f018bb4ced15a03683a733e50b);public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);public function getUsedPages();public function setUsedPages($v70cc97e695e61c16cbbc6297b3865289);}class template extends umiEntinty implements iUmiEntinty, iTemplate {private $filename, $title, $domain_id, $lang_id, $is_default;protected $store_type = "template";public function getFilename() {return $this->filename;}public function getTitle() {return $this->title;}public function getDomainId() {return $this->domain_id;}public function getLangId() {return $this->lang_id;}public function getIsDefault() {return $this->is_default;}public function setFilename($v435ed7e9f07f740abf511a62c00eef6e) {$this->filename = $v435ed7e9f07f740abf511a62c00eef6e;$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setDomainId($v662cbf1253ac7d8750ed9190c52163e5) {$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();if($ve4e46deb7f9cc58c7abfb32e5570b6f3->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->setIsUpdated();return true;}else {return false;}}public function setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v5a05866850c28651fe234659f6c92ada = langsCollection::getInstance();if($v5a05866850c28651fe234659f6c92ada->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();return true;}else {return false;}}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}public function getUsedPages() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT h.id, o.name FROM cms3_hierarchy h, cms3_objects o WHERE h.tpl_id = '{$this->id}' AND o.id = h.obj_id AND h.is_deleted = '0' AND h.domain_id = '{$this->domain_id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = Array($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297);}return $v9b207167e5381c47682c6b4f58a623fb;}public function setUsedPages($vb3b32a2d422265cd25c3323ed0157f81) {if(is_null($vb3b32a2d422265cd25c3323ed0157f81)) return false;$v3822e54d799ece2cf6bec7120d8a3a9f = templatesCollection::getInstance()->getDefaultTemplate($this->domain_id, $this->lang_id)->getId();$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET tpl_id = '{$v3822e54d799ece2cf6bec7120d8a3a9f}' WHERE tpl_id = '{$this->id}' AND is_deleted = '0' AND domain_id = '{$this->domain_id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();if(!is_array($vb3b32a2d422265cd25c3323ed0157f81)) {return false;}if(is_array($vb3b32a2d422265cd25c3323ed0157f81)&&!empty($vb3b32a2d422265cd25c3323ed0157f81)) {foreach($vb3b32a2d422265cd25c3323ed0157f81 as $v7057e8409c7c531a1a6e9ac3df4ed549) {$v71860c77c6745379b0d44304d66b6a13 = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v71860c77c6745379b0d44304d66b6a13 instanceof umiHierarchyElement) {$v71860c77c6745379b0d44304d66b6a13->setTplId($this->id);$v71860c77c6745379b0d44304d66b6a13->commit();unset($v71860c77c6745379b0d44304d66b6a13);$vb81ca7c0ccaa77e7aa91936ab0070695->unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549);}}}return true;}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id, filename, title, domain_id, lang_id, is_default FROM cms3_templates WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf62baf4c4ead98d50d516eca0ac5a746) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->filename = $v435ed7e9f07f740abf511a62c00eef6e;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;return true;}else {return false;}}protected function save() {$v435ed7e9f07f740abf511a62c00eef6e = self::filterInputString($this->filename);$vd5d3db1765287eef77d7927cc956f50a = self::filterInputString($this->title);$v662cbf1253ac7d8750ed9190c52163e5 = (int) $this->domain_id;$v78e6dd7a49f5b0cb2106a3a434dd5c86 =  (int) $this->lang_id;$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_templates SET filename = '{$v435ed7e9f07f740abf511a62c00eef6e}', title = '{$vd5d3db1765287eef77d7927cc956f50a}', domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}', lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}', is_default = '{$vf62baf4c4ead98d50d516eca0ac5a746}' WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}}interface iTemplatesCollection {public function addTemplate($v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v72ee76c5c29383b7c9f9225c1fa4d10b = false, $vf585b7f018bb4ced15a03683a733e50b = false, $ve558e63f3083922542d8745224a66eea = false);public function delTemplate($v3200a31fc05da4e9d5a0465c36822e2f);public function getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false);public function setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false);public function getTemplatesList($v72ee76c5c29383b7c9f9225c1fa4d10b, $vf585b7f018bb4ced15a03683a733e50b);public function getTemplate($v3200a31fc05da4e9d5a0465c36822e2f);}class templatesCollection extends singleton implements iSingleton, iTemplatesCollection {private $templates = Array(), $def_template;protected function __construct() {$this->loadTemplates();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addTemplate($v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {$this->disableCache();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();$v5a05866850c28651fe234659f6c92ada = langsCollection::getInstance();if(!$ve4e46deb7f9cc58c7abfb32e5570b6f3->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {if($ve4e46deb7f9cc58c7abfb32e5570b6f3->getDefaultDomain()) {$v662cbf1253ac7d8750ed9190c52163e5 = $ve4e46deb7f9cc58c7abfb32e5570b6f3->getDefaultDomain()->getId();}else {return false;}}if(!$v5a05866850c28651fe234659f6c92ada->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {if($v5a05866850c28651fe234659f6c92ada->getDefaultLang()) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v5a05866850c28651fe234659f6c92ada->getDefaultLang()->getId();}else {return false;}}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_templates VALUES()";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v74f5356453a69e438e0f58ef93103cc0 = mysql_insert_id();$v66f6181bcb4cff4cd38fbc804a036db6 = new template($v74f5356453a69e438e0f58ef93103cc0);$v66f6181bcb4cff4cd38fbc804a036db6->setFilename($v435ed7e9f07f740abf511a62c00eef6e);$v66f6181bcb4cff4cd38fbc804a036db6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v66f6181bcb4cff4cd38fbc804a036db6->setDomainId($v662cbf1253ac7d8750ed9190c52163e5);$v66f6181bcb4cff4cd38fbc804a036db6->setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);if($vf62baf4c4ead98d50d516eca0ac5a746) {$this->setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0);}$v66f6181bcb4cff4cd38fbc804a036db6->commit();$this->templates[$v74f5356453a69e438e0f58ef93103cc0] = $v66f6181bcb4cff4cd38fbc804a036db6;return $v74f5356453a69e438e0f58ef93103cc0;}public function setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 == false) $v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDefaultDomain()->getId();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 ==false) $v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();if(!$this->isExists($v74f5356453a69e438e0f58ef93103cc0)) {return false;}$vfed36e93a0509e20f2dc96cbbd85b678 = $this->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5,$v78e6dd7a49f5b0cb2106a3a434dd5c86);foreach ($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v74f5356453a69e438e0f58ef93103cc0 == $v66f6181bcb4cff4cd38fbc804a036db6->getId()) {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(true);}else {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(false);}$v66f6181bcb4cff4cd38fbc804a036db6->commit();}return true;if(!($v66f6181bcb4cff4cd38fbc804a036db6 = $this->getTemplate($v3200a31fc05da4e9d5a0465c36822e2f))) {return false;}if($this->def_template) {$this->def_template->setIsDefault(false);$this->def_template->commit();}$this->def_template = $v66f6181bcb4cff4cd38fbc804a036db6;$this->def_template->setIsDefault(true);$this->def_template->commit();return true;}public function delTemplate($v74f5356453a69e438e0f58ef93103cc0) {$this->disableCache();if($this->isExists($v74f5356453a69e438e0f58ef93103cc0)) {if($this->templates[$v74f5356453a69e438e0f58ef93103cc0]->getIsDefault()) {unset($this->def_template);}unset($this->templates[$v74f5356453a69e438e0f58ef93103cc0]);$vb3f91ed738222a77e3713df926f55fd7 = $this->getDefaultTemplate();if (!$vb3f91ed738222a77e3713df926f55fd7 || $vb3f91ed738222a77e3713df926f55fd7->getId() == $v74f5356453a69e438e0f58ef93103cc0) return false;$v9f59b21a53f60f6a67487a5896c52d7f = "UPDATE cms3_hierarchy SET tpl_id = '".$vb3f91ed738222a77e3713df926f55fd7->getId()."' WHERE tpl_id='{$v74f5356453a69e438e0f58ef93103cc0}'";l_mysql_query($v9f59b21a53f60f6a67487a5896c52d7f);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_templates WHERE id = '{$v74f5356453a69e438e0f58ef93103cc0}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}return true;}else return false;}public function getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($this->templates as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v66f6181bcb4cff4cd38fbc804a036db6->getDomainId() == $v662cbf1253ac7d8750ed9190c52163e5 && $v66f6181bcb4cff4cd38fbc804a036db6->getLangId() == $v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v9b207167e5381c47682c6b4f58a623fb[] = $v66f6181bcb4cff4cd38fbc804a036db6;}}return $v9b207167e5381c47682c6b4f58a623fb;}public function getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 == false) $v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 ==false) $v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$vfed36e93a0509e20f2dc96cbbd85b678 = $this->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);foreach($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v66f6181bcb4cff4cd38fbc804a036db6->getIsDefault() == true) {return $v66f6181bcb4cff4cd38fbc804a036db6;}}if(sizeof($vfed36e93a0509e20f2dc96cbbd85b678)) {$v8e62a507ba5e75a37beefceaad9fe22c = $vfed36e93a0509e20f2dc96cbbd85b678[0];$this->setDefaultTemplate($v8e62a507ba5e75a37beefceaad9fe22c->getId(), $v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);return $v8e62a507ba5e75a37beefceaad9fe22c;}return false;}public function getTemplate($v74f5356453a69e438e0f58ef93103cc0) {return ($this->isExists($v74f5356453a69e438e0f58ef93103cc0)) ? $this->templates[$v74f5356453a69e438e0f58ef93103cc0] : false;}public function isExists($v74f5356453a69e438e0f58ef93103cc0) {return (bool) array_key_exists($v74f5356453a69e438e0f58ef93103cc0, $this->templates);}private function loadTemplates() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, filename, title, domain_id, lang_id, is_default FROM cms3_templates";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v74f5356453a69e438e0f58ef93103cc0) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v66f6181bcb4cff4cd38fbc804a036db6 = cacheFrontend::getInstance()->load($v74f5356453a69e438e0f58ef93103cc0, "template");if($v66f6181bcb4cff4cd38fbc804a036db6 instanceof template == false) {try {$v66f6181bcb4cff4cd38fbc804a036db6 = new template($v74f5356453a69e438e0f58ef93103cc0, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v66f6181bcb4cff4cd38fbc804a036db6, "template");}$this->templates[$v74f5356453a69e438e0f58ef93103cc0] = $v66f6181bcb4cff4cd38fbc804a036db6;if($v66f6181bcb4cff4cd38fbc804a036db6->getIsDefault()) {$this->def_template = $v66f6181bcb4cff4cd38fbc804a036db6;}}return true;}}interface iUmiHierarchyType {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getExt();public function setExt($vabf77184f55403d75b9d51d79162a7ca);}class umiHierarchyType extends umiEntinty implements iUmiEntinty, iUmiHierarchyType {private $name, $title, $ext;protected $store_type = "element_type";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getExt() {return $this->ext;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "hierarchy-type-");$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setExt($vabf77184f55403d75b9d51d79162a7ca) {$this->ext = $vabf77184f55403d75b9d51d79162a7ca;$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id, name, title, ext FROM cms3_hierarchy_types WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->ext = $vabf77184f55403d75b9d51d79162a7ca;return true;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = self::filterInputString($this->name);$vd5d3db1765287eef77d7927cc956f50a = self::filterInputString($this->title);$vabf77184f55403d75b9d51d79162a7ca = self::filterInputString($this->ext);$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy_types SET name = '{$vb068931cc450442b63f5b3d276ea4297}', title = '{$vd5d3db1765287eef77d7927cc956f50a}', ext = '{$vabf77184f55403d75b9d51d79162a7ca}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}}interface iUmiHierarchyTypesCollection {public function addType($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca = "");public function getType($v5f694956811487225d15e973ca38fbab);public function delType($v5f694956811487225d15e973ca38fbab);public function getTypeByName($v84aa805a9d919179ab8f8b24376e2ed7, $va93d60b62600196e433071e75061f398 = false);public function getTypesList();}class umiHierarchyTypesCollection extends singleton implements iSingleton, iUmiHierarchyTypesCollection {private $types;protected function __construct() {$this->loadTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->types[$v94757cae63fd3e398c0811a976dd6bbe];}else {return false;}}public function getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca = false) {foreach($this->types as $v599dcce2998a6b40b1e38e8c6006cb0a) {if($v599dcce2998a6b40b1e38e8c6006cb0a->getName() == $vb068931cc450442b63f5b3d276ea4297 && !$vabf77184f55403d75b9d51d79162a7ca) return $v599dcce2998a6b40b1e38e8c6006cb0a;if($v599dcce2998a6b40b1e38e8c6006cb0a->getName() == $vb068931cc450442b63f5b3d276ea4297 && $v599dcce2998a6b40b1e38e8c6006cb0a->getExt() == $vabf77184f55403d75b9d51d79162a7ca && $vabf77184f55403d75b9d51d79162a7ca) return $v599dcce2998a6b40b1e38e8c6006cb0a;}return false;}public function addType($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca = "") {$this->disableCache();if($vb946c44d711ade3b061653732977d043  = $this->getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca)) {$vb946c44d711ade3b061653732977d043->setTitle($vd5d3db1765287eef77d7927cc956f50a);return $vb946c44d711ade3b061653732977d043->getId();}$v32409b63878fa9d5541998646b533159 = mysql_real_escape_string($vb068931cc450442b63f5b3d276ea4297);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_hierarchy_types (name) VALUES('{$v32409b63878fa9d5541998646b533159}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v94757cae63fd3e398c0811a976dd6bbe = mysql_insert_id();$v599dcce2998a6b40b1e38e8c6006cb0a = new umiHierarchyType($v94757cae63fd3e398c0811a976dd6bbe);$v599dcce2998a6b40b1e38e8c6006cb0a->setName($vb068931cc450442b63f5b3d276ea4297);$v599dcce2998a6b40b1e38e8c6006cb0a->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v599dcce2998a6b40b1e38e8c6006cb0a->setExt($vabf77184f55403d75b9d51d79162a7ca);$v599dcce2998a6b40b1e38e8c6006cb0a->commit();$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return $v94757cae63fd3e398c0811a976dd6bbe;}public function delType($v94757cae63fd3e398c0811a976dd6bbe) {$this->disableCache();if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {unset($this->types[$v94757cae63fd3e398c0811a976dd6bbe]);$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_hierarchy_types WHERE id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}return true;}else {return false;}}public function isExists($v94757cae63fd3e398c0811a976dd6bbe) {if($v94757cae63fd3e398c0811a976dd6bbe === false) return false;return (bool) array_key_exists($v94757cae63fd3e398c0811a976dd6bbe, $this->types);}private function loadTypes() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, title, ext FROM cms3_hierarchy_types ORDER BY name, ext";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vb80bb7740288fda1f201890375a60c8f) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v599dcce2998a6b40b1e38e8c6006cb0a = cacheFrontend::getInstance()->load($vb80bb7740288fda1f201890375a60c8f, "element_type");if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiHierarchyType == false) {try {$v599dcce2998a6b40b1e38e8c6006cb0a = new umiHierarchyType($vb80bb7740288fda1f201890375a60c8f, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v599dcce2998a6b40b1e38e8c6006cb0a, "element_type");}$this->types[$vb80bb7740288fda1f201890375a60c8f] = $v599dcce2998a6b40b1e38e8c6006cb0a;}return true;}public function getTypesList() {return $this->types;}}interface iUmiHierarchyElement {public function getIsDeleted();public function setIsDeleted($va18b1057c4327b9cc46abc9fcf952bd8 = false);public function getIsActive();public function setIsActive($v367e854225a0810977297b3bedb2f309 = true);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024 = true);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getLangId();public function setLangId($vf585b7f018bb4ced15a03683a733e50b);public function getTplId();public function setTplId($vdfae309a35c166d21d4a1ab377b78a47);public function getDomainId();public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getUpdateTime();public function setUpdateTime($v87a3cb5c3554b2d9d8a1a773ad0936be = 0);public function getOrd();public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9);public function getRel();public function setRel($vd5d4bb9b2c282937ee64b1fb0495ef08);public function getObject();public function setObject(umiObject $va8cfde6331bd59eb2ac96f8911c4b666);public function setAltName($v0330da281541887f65b0a60066351c91, $v9081405e153955c7c08554c483e264cb = true);public function getAltName();public function setIsDefault($ve558e63f3083922542d8745224a66eea = true);public function getIsDefault();public function getParentId();public function getValue($v46b9e6004c49d9cc040029c197cab278);public function setValue($v46b9e6004c49d9cc040029c197cab278, $vafd40dce490ea113be83c89ca7f3052d);public function getFieldId($vc5b8d76e52be996ffe6ea3b9a19f1fed);public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getObjectTypeId();public function getHierarchyType();public function getObjectId();public function getModule();public function getMethod();}class umiHierarchyElement extends umiEntinty implements iUmiEntinty, iUmiHierarchyElement {private $rel, $alt_name, $ord, $object_id,   $type_id, $domain_id, $lang_id, $tpl_id,   $is_deleted = false, $is_active = true, $is_visible = true, $is_default = false, $name,   $update_time,   $object,   $is_broken = false;protected $store_type = "element";public function getIsDeleted() {return $this->is_deleted;}public function getIsActive() {return $this->is_active;}public function getIsVisible() {return $this->is_visible;}public function getLangId() {return $this->lang_id;}public function getDomainId() {return $this->domain_id;}public function getTplId() {return $this->tpl_id;}public function getTypeId() {return $this->type_id;}public function getUpdateTime() {return $this->update_time;}public function getOrd() {return $this->ord;}public function getRel() {return $this->rel;}public function getAltName() {return $this->alt_name;}public function getIsDefault() {return $this->is_default;}public function getObject() {if($this->object) {return $this->object;}else {$this->object = umiObjectsCollection::getInstance()->getObject($this->object_id);return $this->object;}}public function getParentId() {return $this->rel;}public function getName() {return $this->translateLabel($this->name);}public function setName($vb068931cc450442b63f5b3d276ea4297) {$v9b207167e5381c47682c6b4f58a623fb = $this->getObject()->setName($vb068931cc450442b63f5b3d276ea4297);$this->setIsUpdated(true);return $v9b207167e5381c47682c6b4f58a623fb;}public function getValue($vdfc394bd05a4b48161c790034af522a8) {return $this->getObject()->getValue($vdfc394bd05a4b48161c790034af522a8);}public function setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e) {$v9b207167e5381c47682c6b4f58a623fb = $this->getObject()->setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e);$this->setIsUpdated(true);return $v9b207167e5381c47682c6b4f58a623fb;}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true) {if ($this->is_visible !== ((bool)$ve1c6c9ef2fcbe75f26f815c4ef2e60b4)) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}}public function setIsActive($v4264c638e0098acb172519b0436db099 = true) {if ($this->is_active !== ((bool)$v4264c638e0098acb172519b0436db099)) {$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->setIsUpdated();}}public function setIsDeleted($vf49e2553045b3240a95c36854d36dddc = false) {if ($this->is_deleted !== ((bool)$vf49e2553045b3240a95c36854d36dddc)) {$this->is_deleted = (bool) $vf49e2553045b3240a95c36854d36dddc;$this->setIsUpdated();}}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {if ($this->type_id !== ((int)$v94757cae63fd3e398c0811a976dd6bbe)) {$this->type_id = (int) $v94757cae63fd3e398c0811a976dd6bbe;$this->setIsUpdated();}}public function setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if ($this->lang_id !== ((int)$v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();}}public function setTplId($vd02e12eb6d6c3f6ebd763197df01e211) {if ($this->tpl_id !== ((int)$vd02e12eb6d6c3f6ebd763197df01e211)) {$this->tpl_id = (int) $vd02e12eb6d6c3f6ebd763197df01e211;$this->setIsUpdated();}}public function setDomainId($v662cbf1253ac7d8750ed9190c52163e5) {$vadce578d04ed03c31f6ac59451fcf8e4 = umiHierarchy::getInstance()->getChilds($this->id, true, true);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$v1b7d5726533ab525a8760351e9b5e415 = umiHierarchy::getInstance()->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5);$v1b7d5726533ab525a8760351e9b5e415->setDomainId($v662cbf1253ac7d8750ed9190c52163e5);umiHierarchy::getInstance()->unloadElement($vf36263a38d7de5cdaa953c1e2b2f79b5);unset($v1b7d5726533ab525a8760351e9b5e415);}if ($this->domain_id !== ((int)$v662cbf1253ac7d8750ed9190c52163e5)) {$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->setIsUpdated();}}public function setUpdateTime($ve0df5a999da22bc6fa9e26b115eb4ae4 = 0) {if($ve0df5a999da22bc6fa9e26b115eb4ae4 == 0) {$ve0df5a999da22bc6fa9e26b115eb4ae4 = umiHierarchy::getTimeStamp();}if ($this->update_time !== ((int)$ve0df5a999da22bc6fa9e26b115eb4ae4)) {$this->update_time = (int) $ve0df5a999da22bc6fa9e26b115eb4ae4;$this->setIsUpdated();}}public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9) {if ($this->ord !== ((int)$v8bef1cc20ada3bef55fdf132cb2a1cb9)) {$this->ord = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;$this->setIsUpdated();}}public function setRel($v7ffc4d510260a8544e5550e62ec56bc1) {if ($this->rel !== ((int)$v7ffc4d510260a8544e5550e62ec56bc1)) {$this->rel = (int) $v7ffc4d510260a8544e5550e62ec56bc1;$this->setIsUpdated();}}public function setObject(umiObject $va8cfde6331bd59eb2ac96f8911c4b666, $vac2a04437278cf6e6e597b1b9295b193 = true) {$this->object = $va8cfde6331bd59eb2ac96f8911c4b666;$this->object_id = $va8cfde6331bd59eb2ac96f8911c4b666->getId();if ($vac2a04437278cf6e6e597b1b9295b193) $this->setIsUpdated();}public function setAltName($vd84ff935144e00c3e1d395c2379aca47, $v5c42c04954c401e189bb85786bde8adb = true) {if(!$vd84ff935144e00c3e1d395c2379aca47) {$vd84ff935144e00c3e1d395c2379aca47 = $this->getName();}if($v5c42c04954c401e189bb85786bde8adb) {$vd84ff935144e00c3e1d395c2379aca47 = umiHierarchy::convertAltName($vd84ff935144e00c3e1d395c2379aca47);if(!$vd84ff935144e00c3e1d395c2379aca47) $vd84ff935144e00c3e1d395c2379aca47 = "_";}$vd295b8117d72bf06e54a27bcbfc782cf = $this->alt_name;$this->alt_name = $this->getRightAltName(umiObjectProperty::filterInputString($vd84ff935144e00c3e1d395c2379aca47));if(!$this->alt_name) {$this->alt_name = $vd84ff935144e00c3e1d395c2379aca47;}$v1988c61c48f30d2b39eed4edcf1e3c8b = $this->alt_name;if ($v1988c61c48f30d2b39eed4edcf1e3c8b !== $vd295b8117d72bf06e54a27bcbfc782cf) $this->setIsUpdated();}private function getRightAltName($vd84ff935144e00c3e1d395c2379aca47) {if(empty($vd84ff935144e00c3e1d395c2379aca47)) $vd84ff935144e00c3e1d395c2379aca47 = '1';if($this->getRel() == 0 && !defined('IGNORE_MODULE_NAMES_OVERRITE')) {$v6c63406410aa57b3c97b88d3feb09990 = regedit::getInstance()->getList("//modules");foreach($v6c63406410aa57b3c97b88d3feb09990 as $v854203cccade0bbe21be239a208aea49) {if($vd84ff935144e00c3e1d395c2379aca47 == $v854203cccade0bbe21be239a208aea49[0]) {$vd84ff935144e00c3e1d395c2379aca47 .= '1';break;}}if(langsCollection::getInstance()->getLangId($vd84ff935144e00c3e1d395c2379aca47)) {$vd84ff935144e00c3e1d395c2379aca47 .= '1';}}$vc1332a8893475d77a4cb5226b0e6246d =  array();preg_match  ("/^([a-z0-9_.-]*\D)(\d*)$/", $vd84ff935144e00c3e1d395c2379aca47, $v66373a9c960d5bb19f89068c5a2797b0);$va2d2953131ec91efe3c90d4dbcee3777 = isset($v66373a9c960d5bb19f89068c5a2797b0[2]) ? $v66373a9c960d5bb19f89068c5a2797b0[2] : NULL;$v544988e29afe707b134aa03709eb443e = isset($v66373a9c960d5bb19f89068c5a2797b0[1]) ? $v66373a9c960d5bb19f89068c5a2797b0[1] : NULL;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $this->getDomainId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT alt_name FROM cms3_hierarchy WHERE rel={$this->getRel()} AND id <> {$this->getId()} AND is_deleted = '0' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}' AND alt_name LIKE '{$v544988e29afe707b134aa03709eb443e}%';";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v447b7147e84be512208dcc0995d67ebc) = mysql_fetch_row($result)) $vc1332a8893475d77a4cb5226b0e6246d[] = $v447b7147e84be512208dcc0995d67ebc;if(!empty($vc1332a8893475d77a4cb5226b0e6246d) and in_array($vd84ff935144e00c3e1d395c2379aca47,$vc1332a8893475d77a4cb5226b0e6246d)){foreach($vc1332a8893475d77a4cb5226b0e6246d as $v52dfbb9b0e571701b76699a145406d48){preg_match  ("/(\D*)(\d*)/", $v52dfbb9b0e571701b76699a145406d48, $v66373a9c960d5bb19f89068c5a2797b0);if (!empty($v66373a9c960d5bb19f89068c5a2797b0[2])) $va2d2953131ec91efe3c90d4dbcee3777 = max($va2d2953131ec91efe3c90d4dbcee3777,$v66373a9c960d5bb19f89068c5a2797b0[2]);}++$va2d2953131ec91efe3c90d4dbcee3777;}return $v544988e29afe707b134aa03709eb443e. $va2d2953131ec91efe3c90d4dbcee3777;}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746 = true) {if ($this->is_default !== ((int)$vf62baf4c4ead98d50d516eca0ac5a746)) {$this->is_default = (int) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}}public function getFieldId($v73f329f154a663bfda020aadcdd0b775) {return umiObjectTypesCollection::getInstance()->getType($this->getObject()->getTypeId())->getFieldId($v73f329f154a663bfda020aadcdd0b775);}protected function loadInfo() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE h.rel, h.type_id, h.lang_id, h.domain_id, h.tpl_id, h.obj_id, h.ord, h.alt_name, h.is_active, h.is_visible, h.is_deleted, h.updatetime, h.is_default, o.name FROM cms3_hierarchy h, cms3_objects o WHERE h.id = '{$this->id}' AND o.id = h.obj_id";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v7ffc4d510260a8544e5550e62ec56bc1, $v94757cae63fd3e398c0811a976dd6bbe, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $v662cbf1253ac7d8750ed9190c52163e5, $vd02e12eb6d6c3f6ebd763197df01e211, $v818ad5ef6588e140ecb9f81e810c028a, $v8bef1cc20ada3bef55fdf132cb2a1cb9, $vd84ff935144e00c3e1d395c2379aca47, $v4264c638e0098acb172519b0436db099, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $vf49e2553045b3240a95c36854d36dddc, $v3e04dc2abd929a9d02e2e0fa41d24bf9, $vf62baf4c4ead98d50d516eca0ac5a746, $vb068931cc450442b63f5b3d276ea4297) = mysql_fetch_row($result)) {if(!$v818ad5ef6588e140ecb9f81e810c028a) {umiHierarchy::getInstance()->delElement($this->id);$this->is_broken = true;return false;}$this->rel = (int) $v7ffc4d510260a8544e5550e62ec56bc1;$this->type_id = (int) $v94757cae63fd3e398c0811a976dd6bbe;$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->tpl_id = (int) $vd02e12eb6d6c3f6ebd763197df01e211;$this->object_id = (int) $v818ad5ef6588e140ecb9f81e810c028a;$this->ord = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;$this->alt_name = $vd84ff935144e00c3e1d395c2379aca47;$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->is_deleted = (bool) $vf49e2553045b3240a95c36854d36dddc;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->name = $vb068931cc450442b63f5b3d276ea4297;if (!$v3e04dc2abd929a9d02e2e0fa41d24bf9) {$v3e04dc2abd929a9d02e2e0fa41d24bf9 = umiHierarchy::getTimeStamp();}$this->update_time = (int)$v3e04dc2abd929a9d02e2e0fa41d24bf9;return true;}else {$this->is_broken = true;return false;}}protected function save() {$v7ffc4d510260a8544e5550e62ec56bc1 = (int) $this->rel;$v94757cae63fd3e398c0811a976dd6bbe = (int) $this->type_id;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $this->lang_id;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $this->domain_id;$vd02e12eb6d6c3f6ebd763197df01e211 = (int) $this->tpl_id;$vaf31437ce61345f416579830a98c91e5 = (int) $this->object_id;$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $this->ord;$vd84ff935144e00c3e1d395c2379aca47 = self::filterInputString($this->alt_name);$v4264c638e0098acb172519b0436db099 = (int) $this->is_active;$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = (int) $this->is_visible;$vf49e2553045b3240a95c36854d36dddc = (int) $this->is_deleted;$ve0df5a999da22bc6fa9e26b115eb4ae4 = (int) $this->update_time;$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;if($vf62baf4c4ead98d50d516eca0ac5a746) {$vac5c74b64b4b8352ef2f181affb5ac2a ="UPDATE cms3_hierarchy SET is_default = '0' WHERE is_default = '1' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET rel = '{$v7ffc4d510260a8544e5550e62ec56bc1}', type_id = '{$v94757cae63fd3e398c0811a976dd6bbe}', lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}', domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}', tpl_id = '{$vd02e12eb6d6c3f6ebd763197df01e211}', obj_id = '{$vaf31437ce61345f416579830a98c91e5}', ord = '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}', alt_name = '{$vd84ff935144e00c3e1d395c2379aca47}', is_active = '{$v4264c638e0098acb172519b0436db099}', is_visible = '{$ve1c6c9ef2fcbe75f26f815c4ef2e60b4}', is_deleted = '{$vf49e2553045b3240a95c36854d36dddc}', updatetime = '{$ve0df5a999da22bc6fa9e26b115eb4ae4}', is_default = '{$vf62baf4c4ead98d50d516eca0ac5a746}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}else {if ($this->is_updated && cmsController::getInstance()->getModule('search')) {if($this->getIsActive() && $this->getIsDeleted() == false) {searchModel::getInstance()->index_items($this->id);}else {searchModel::getInstance()->unindex_items($this->id);}}return true;}}public function setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f = true) {parent::setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f);$this->update_time = time();umiHierarchy::getInstance()->addUpdatedElementId($this->id);if($this->rel) {umiHierarchy::getInstance()->addUpdatedElementId($this->rel);}}public function getIsBroken() {return $this->is_broken;}public function commit() {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject();if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$va8cfde6331bd59eb2ac96f8911c4b666->commit();$v16b2b26000987faccb260b9d39df1269 = $va8cfde6331bd59eb2ac96f8911c4b666->getId();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();cacheFrontend::getInstance()->del($v16b2b26000987faccb260b9d39df1269, "object");$va7f1f2c46c62415198e0884b827bd2d2 = $vb81ca7c0ccaa77e7aa91936ab0070695->getObjectInstances($v16b2b26000987faccb260b9d39df1269);foreach($va7f1f2c46c62415198e0884b827bd2d2 as $va3e6bf52d6871a75cae73e5262de04af) {cacheFrontend::getInstance()->del($va3e6bf52d6871a75cae73e5262de04af, "element");}}parent::commit();}public function getObjectTypeId() {return $this->getObject()->getTypeId();}public function getHierarchyType() {return umiHierarchyTypesCollection::getInstance()->getType($this->type_id);}public function getObjectId() {return $this->object_id;}protected function getType() {$v1723bdd4ee51910267a625cae41ced8a = umiHierarchyTypesCollection::getInstance();return $v1723bdd4ee51910267a625cae41ced8a->getType($this->getTypeId());}public function getModule() {return $this->getType()->getName();}public function getMethod() {return $this->getType()->getExt();}public function __sleep() {$vb63119da730344b345cdc8f62a4711e9 = get_class_vars(get_class($this));$vb63119da730344b345cdc8f62a4711e9['object'] = NULL;return array_keys($vb63119da730344b345cdc8f62a4711e9);}};interface iUmiHierarchy {public function addElement($va722790b49e8eb1f37a1c672326ec501, $vacf567c9c3d6cf7c6e2cc0ce108e0631, $vb068931cc450442b63f5b3d276ea4297, $vd84ff935144e00c3e1d395c2379aca47, $v6301cee35ea764a1e241978f93f01069 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false, $vf585b7f018bb4ced15a03683a733e50b = false, $v3200a31fc05da4e9d5a0465c36822e2f = false);public function getElement($v7552cd149af7495ee7d8225974e50f80, $ve70325c72e806c33fd52022dd9c07eb2 = false, $vbeaf7e25161be5ef9784e550ab4fc891 = false);public function delElement($v7552cd149af7495ee7d8225974e50f80);public function copyElement($v7552cd149af7495ee7d8225974e50f80, $v05ea772b3414e6a459bc1b52cc830436, $v5972c4d2dc988e33130281251a6f282a = false);public function cloneElement($v7552cd149af7495ee7d8225974e50f80, $v05ea772b3414e6a459bc1b52cc830436, $v5972c4d2dc988e33130281251a6f282a = false);public function getDeletedList();public function restoreElement($v7552cd149af7495ee7d8225974e50f80);public function removeDeletedElement($v7552cd149af7495ee7d8225974e50f80);public function removeDeletedAll();public function getParent($v7552cd149af7495ee7d8225974e50f80);public function getAllParents($v970489db8d4f274439de776cfb2f36c2, $vd990c45185b59769adb599de6227718d = false);public function getChilds($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee = true, $vbc8c7a7f95968293eac2b176cc1a21b5 = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vacf567c9c3d6cf7c6e2cc0ce108e0631 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function getChildsCount($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee = true, $vbc8c7a7f95968293eac2b176cc1a21b5 = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vacf567c9c3d6cf7c6e2cc0ce108e0631 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function getPathById($v7552cd149af7495ee7d8225974e50f80, $v5cd943c36b800237522c35155d898244 = false, $vbc9ecd0be77ceffa51fc6918c714e5d3 = false);public function getIdByPath($v4a20784bb5bad10b0f5c941a900f0c04, $v4ee7832bcc23d41fa74f84e483f1859e = false, &$v5f51e765b4dc9821bb184fe18370ab8d = 0);public static function compareStrings($v34b577be20fbc15477aadb9a08101ff9, $v91c0c59c8f6fc9aa2dc99a89f2fd0ab5);public static function convertAltName($vd84ff935144e00c3e1d395c2379aca47);public static function getTimeStamp();public function getDefaultElementId($vf585b7f018bb4ced15a03683a733e50b = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function moveBefore($v7552cd149af7495ee7d8225974e50f80, $va722790b49e8eb1f37a1c672326ec501, $v2862c7667bfa3eb6b4c6fa1de2bd8826 = false);public function moveFirst($v7552cd149af7495ee7d8225974e50f80, $va722790b49e8eb1f37a1c672326ec501);public function getDominantTypeId($v7552cd149af7495ee7d8225974e50f80);public function addUpdatedElementId($v7552cd149af7495ee7d8225974e50f80);public function getUpdatedElements();public function unloadElement($v7552cd149af7495ee7d8225974e50f80);public function getElementsCount($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = "");public function forceAbsolutePath($vf9448cc5666e281bc210298b60567801 = true);public function getObjectInstances($v16b2b26000987faccb260b9d39df1269, $vfc9bd216c399e5612672290fa3f0cbe2 = false, $v1200c36ada21fb70df10f131f49eaf3d = false);public function getLastUpdatedElements($vaa9f73eea60a006820d0f8768bc8a3fc, $v9a5e73d67afbd1b69ff848efe5e73442 = 0);public function checkIsVirtual($v8e67e94f87e92070a0874d1de3ff8f6a);}class umiHierarchy extends singleton implements iSingleton, iUmiHierarchy {private $elements = Array(),   $objects, $langs, $domains, $templates;private $updatedElements = Array();private $autocorrectionDisabled = false;private $elementsLastUpdateTime = 0;private $bForceAbsolutePath = false;private $symlinks = Array();private $misc_elements = Array();protected function __construct() {$this->objects  = &umiObjectsCollection::getInstance();$this->langs  = &langsCollection::getInstance();$this->domains  = &domainsCollection::getInstance();$this->templates = &templatesCollection::getInstance();if(regedit::getInstance()->getVal("//settings/disable_url_autocorrection")) {$this->autocorrectionDisabled = true;}}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function isExists($v7057e8409c7c531a1a6e9ac3df4ed549) {if($this->isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549)) {return true;}else {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result);}return (bool) $ve2942a04780e223b215eb8b663cf5353;}}public function isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v7057e8409c7c531a1a6e9ac3df4ed549 === false) {return false;}if(is_array($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v5b78ddc78e0a270e44c7928843456220 = true;foreach($v7057e8409c7c531a1a6e9ac3df4ed549 as $v7a83e592dae31301d9b5c2bbc544d822) {if(!array_key_exists($v7a83e592dae31301d9b5c2bbc544d822, $this->elements)) {$v5b78ddc78e0a270e44c7928843456220 = false;break;}}return $v5b78ddc78e0a270e44c7928843456220;}else {return (bool) array_key_exists($v7057e8409c7c531a1a6e9ac3df4ed549, $this->elements);}}public function getElement($v7057e8409c7c531a1a6e9ac3df4ed549, $ve70325c72e806c33fd52022dd9c07eb2 = false, $vbeaf7e25161be5ef9784e550ab4fc891 = false) {if(!$ve70325c72e806c33fd52022dd9c07eb2) {if(!$this->isAllowed($v7057e8409c7c531a1a6e9ac3df4ed549)) return false;}if($this->isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549)) {return $this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549];}else {$v8e2dcfd7e7e24b1ca76c1193f645902b = cacheFrontend::getInstance()->load($v7057e8409c7c531a1a6e9ac3df4ed549, "element");if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement == false) {try {$v8e2dcfd7e7e24b1ca76c1193f645902b = new umiHierarchyElement($v7057e8409c7c531a1a6e9ac3df4ed549);cacheFrontend::getInstance()->save($v8e2dcfd7e7e24b1ca76c1193f645902b, "element");}catch (privateException $ve1671797c52e15f763380b45e841ec32) {return false;}}$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;if(is_object($v8e2dcfd7e7e24b1ca76c1193f645902b)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsBroken()) {return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDeleted() && !$vbeaf7e25161be5ef9784e550ab4fc891) return false;$this->pushElementsLastUpdateTime($v8e2dcfd7e7e24b1ca76c1193f645902b->getUpdateTime());$this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549] = $v8e2dcfd7e7e24b1ca76c1193f645902b;return $this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549];}else {return false;}}}public function delElement($v7057e8409c7c531a1a6e9ac3df4ed549) {$this->disableCache();$this->addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549);$this->forceCacheCleanup();if($v24af3aa6132f2de2388dc4d034732920 = cmsController::getInstance()->getModule("users")) {if(!$v24af3aa6132f2de2388dc4d034732920->isAllowedObject($v24af3aa6132f2de2388dc4d034732920->user_id, $v7057e8409c7c531a1a6e9ac3df4ed549)) {return false;}}if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy FORCE INDEX(rel) WHERE rel = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vf36263a38d7de5cdaa953c1e2b2f79b5) = mysql_fetch_row($result)) {$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5, true, true);$this->delElement($vf36263a38d7de5cdaa953c1e2b2f79b5);cacheFrontend::getInstance()->del($vf36263a38d7de5cdaa953c1e2b2f79b5, "element");}$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDeleted(true);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);cacheFrontend::getInstance()->del($v7057e8409c7c531a1a6e9ac3df4ed549, "element");return true;}else {return false;}}public function copyElement($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v5972c4d2dc988e33130281251a6f282a = false) {$this->disableCache();cacheFrontend::getInstance()->flush();$this->misc_elements[] = $vd5d4bb9b2c282937ee64b1fb0495ef08;$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$this->forceCacheCleanup();if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) && ($this->isExists($vd5d4bb9b2c282937ee64b1fb0495ef08) || $vd5d4bb9b2c282937ee64b1fb0495ef08 === 0)) {$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$vd7e6d55ba379a13d08c25d15faf2a23b = self::getTimeStamp();if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$this->misc_elements[] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();}$v9b207167e5381c47682c6b4f58a623fb = mysql_fetch_array(l_mysql_query('SELECT MAX(ord) FROM cms3_hierarchy', true));$v8bef1cc20ada3bef55fdf132cb2a1cb9 = $v9b207167e5381c47682c6b4f58a623fb[0]+1;$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL

INSERT INTO cms3_hierarchy
	(rel, type_id, lang_id, domain_id, tpl_id, obj_id, alt_name, is_active, is_visible, is_deleted, updatetime, ord)
		SELECT '{$vd5d4bb9b2c282937ee64b1fb0495ef08}', type_id, lang_id, domain_id, tpl_id, obj_id, alt_name, is_active, is_visible, is_deleted, '{$vd7e6d55ba379a13d08c25d15faf2a23b}', '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}'
				FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' LIMIT 1
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v2114c8075d855b3cea53d5d880c68948 = $v7057e8409c7c531a1a6e9ac3df4ed549;$v7057e8409c7c531a1a6e9ac3df4ed549 = mysql_insert_id();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL

INSERT INTO cms3_permissions
	(level, owner_id, rel_id)
		SELECT level, owner_id, '{$v7057e8409c7c531a1a6e9ac3df4ed549}' FROM cms3_permissions WHERE rel_id = '{$v2114c8075d855b3cea53d5d880c68948}'

SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$this->buildRelationNewNodes($v7057e8409c7c531a1a6e9ac3df4ed549);if($v5972c4d2dc988e33130281251a6f282a) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChilds($v2114c8075d855b3cea53d5d880c68948, true, true, 0, false, $v662cbf1253ac7d8750ed9190c52163e5);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$this->copyElement($vf36263a38d7de5cdaa953c1e2b2f79b5, $v7057e8409c7c531a1a6e9ac3df4ed549, true);}}$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {return false;}}else {return false;}}public function cloneElement($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v5972c4d2dc988e33130281251a6f282a = false) {$this->disableCache();cacheFrontend::getInstance()->flush();$this->misc_elements[] = $vd5d4bb9b2c282937ee64b1fb0495ef08;$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$this->forceCacheCleanup();if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) && ($this->isExists($vd5d4bb9b2c282937ee64b1fb0495ef08) || $vd5d4bb9b2c282937ee64b1fb0495ef08 === 0)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $v8e2dcfd7e7e24b1ca76c1193f645902b->getOrd();}$this->misc_elements[] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();$v9b207167e5381c47682c6b4f58a623fb = mysql_fetch_array(l_mysql_query('SELECT MAX(ord) FROM cms3_hierarchy', true));$v8bef1cc20ada3bef55fdf132cb2a1cb9 = $v9b207167e5381c47682c6b4f58a623fb[0]+1;$vaf31437ce61345f416579830a98c91e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getId();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_objects
	(name, is_locked, type_id, owner_id)
		SELECT name, is_locked, type_id, owner_id
			FROM cms3_objects
				WHERE id = '{$vaf31437ce61345f416579830a98c91e5}'
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v5e3f5f5bf865de072ff1e4cd710d4a39 = mysql_insert_id();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_object_content
	(field_id, int_val, varchar_val, text_val, rel_val, float_val, obj_id)
		SELECT field_id, int_val, varchar_val, text_val, rel_val, float_val, '{$v5e3f5f5bf865de072ff1e4cd710d4a39}'
			FROM cms3_object_content
				WHERE obj_id = '{$vaf31437ce61345f416579830a98c91e5}'
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vd7e6d55ba379a13d08c25d15faf2a23b = self::getTimeStamp();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL

INSERT INTO cms3_hierarchy
	(rel, type_id, lang_id, domain_id, tpl_id, obj_id, alt_name, is_active, is_visible, is_deleted, updatetime, ord)
		SELECT '{$vd5d4bb9b2c282937ee64b1fb0495ef08}', type_id, lang_id, domain_id, tpl_id, '{$v5e3f5f5bf865de072ff1e4cd710d4a39}', alt_name, is_active, is_visible, is_deleted, '{$vd7e6d55ba379a13d08c25d15faf2a23b}', '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}'
				FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' LIMIT 1
SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v2114c8075d855b3cea53d5d880c68948 = $v7057e8409c7c531a1a6e9ac3df4ed549;$v7057e8409c7c531a1a6e9ac3df4ed549 = mysql_insert_id();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL

INSERT INTO cms3_permissions
	(level, owner_id, rel_id)
		SELECT level, owner_id, '{$v7057e8409c7c531a1a6e9ac3df4ed549}' FROM cms3_permissions WHERE rel_id = '{$v2114c8075d855b3cea53d5d880c68948}'

SQL;    l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$this->buildRelationNewNodes($v7057e8409c7c531a1a6e9ac3df4ed549);if($v5972c4d2dc988e33130281251a6f282a) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChilds($v2114c8075d855b3cea53d5d880c68948, true, true, 0, false, $v662cbf1253ac7d8750ed9190c52163e5);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$this->cloneElement($vf36263a38d7de5cdaa953c1e2b2f79b5, $v7057e8409c7c531a1a6e9ac3df4ed549, true);}}$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {return false;}}}public function getDeletedList() {$v9b207167e5381c47682c6b4f58a623fb = Array();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT id, rel FROM cms3_hierarchy WHERE is_deleted = '1' ORDER BY updatetime DESC
SQL;   $result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vfa816edb83e95bf0c8da580bdfd491ef = Array();while(list($vb80bb7740288fda1f201890375a60c8f, $v7ffc4d510260a8544e5550e62ec56bc1) = mysql_fetch_row($result)) {if(array_key_exists($v7ffc4d510260a8544e5550e62ec56bc1, $vfa816edb83e95bf0c8da580bdfd491ef)) {continue;}if(array_key_exists($vb80bb7740288fda1f201890375a60c8f, $v9b207167e5381c47682c6b4f58a623fb)) {unset($v9b207167e5381c47682c6b4f58a623fb[$vfa816edb83e95bf0c8da580bdfd491ef[$vb80bb7740288fda1f201890375a60c8f]]);}$v9b207167e5381c47682c6b4f58a623fb[$vb80bb7740288fda1f201890375a60c8f] = $vb80bb7740288fda1f201890375a60c8f;$vfa816edb83e95bf0c8da580bdfd491ef[$vb80bb7740288fda1f201890375a60c8f] = $v7ffc4d510260a8544e5550e62ec56bc1;}return array_values($v9b207167e5381c47682c6b4f58a623fb);}public function restoreElement($v7057e8409c7c531a1a6e9ac3df4ed549) {$this->disableCache();if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, false, true)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDeleted(false);$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE rel = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vf36263a38d7de5cdaa953c1e2b2f79b5) = mysql_fetch_row($result)) {$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5, true, true);$this->restoreElement($vf36263a38d7de5cdaa953c1e2b2f79b5);}return true;}else {return false;}}public function removeDeletedElement($v7057e8409c7c531a1a6e9ac3df4ed549) {$this->disableCache();if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDeleted()) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vaf31437ce61345f416579830a98c91e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObjectId();$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE rel = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vf36263a38d7de5cdaa953c1e2b2f79b5) = mysql_fetch_row($result)) {$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5, true, true);$v2da0d90fc7822dade6effbdd1f48b458->setIsDeleted(true);$this->removeDeletedElement($vf36263a38d7de5cdaa953c1e2b2f79b5);}$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' LIMIT 1";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($v8e2dcfd7e7e24b1ca76c1193f645902b);unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_hierarchy WHERE obj_id = '{$vaf31437ce61345f416579830a98c91e5}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result)) {if($v4a8a08f09d37b73795649038408b5f33 == 0) {$v5891da2d64975cae48d175d1e001f5da->delObject($vaf31437ce61345f416579830a98c91e5);}}$this->earseRelationNodes($v7057e8409c7c531a1a6e9ac3df4ed549);return true;}else {return false;}}else {return false;}}public function removeDeletedAll() {$this->disableCache();mysql_query("START TRANSACTION /* umiHierarchy::removeDeletedAll() */");$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE is_deleted = '1'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v7057e8409c7c531a1a6e9ac3df4ed549) = mysql_fetch_row($result)) {$this->removeDeletedElement($v7057e8409c7c531a1a6e9ac3df4ed549);}mysql_query("COMMIT");return true;}public function getParent($v7057e8409c7c531a1a6e9ac3df4ed549) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE rel FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(mysql_num_rows($result)) {list($v6be379826b20cc58475f636e33f4606b) = mysql_fetch_row($result);$this->misc_elements[] = $v6be379826b20cc58475f636e33f4606b;return (int) $v6be379826b20cc58475f636e33f4606b;}else {return false;}}public function getAllParents($v7057e8409c7c531a1a6e9ac3df4ed549, $vd0e8988bcdf8745f43ea50ef3e1b54b2 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vc68ad910ed49ac65f21f1bf2c5dbf912 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549])) {$vc68ad910ed49ac65f21f1bf2c5dbf912 = $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549];}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT rel_id FROM cms3_hierarchy_relations WHERE child_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' ORDER BY rel_id";$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}while(list($v6be379826b20cc58475f636e33f4606b) = mysql_fetch_row($result)) {$vc68ad910ed49ac65f21f1bf2c5dbf912[] = $v6be379826b20cc58475f636e33f4606b;}$v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = $vc68ad910ed49ac65f21f1bf2c5dbf912;}if($vd0e8988bcdf8745f43ea50ef3e1b54b2) {$vc68ad910ed49ac65f21f1bf2c5dbf912[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}return $vc68ad910ed49ac65f21f1bf2c5dbf912;}public function getChilds($v7057e8409c7c531a1a6e9ac3df4ed549, $v69077352f5ac48235305c08dd983bf9f = true, $vbdbeb3b037059befbd5195fe4863ac5e = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $v0715f6d9497f93911417c9c324265771 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$v69077352f5ac48235305c08dd983bf9f = (int) $v69077352f5ac48235305c08dd983bf9f;$vbdbeb3b037059befbd5195fe4863ac5e = (int) $vbdbeb3b037059befbd5195fe4863ac5e;$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = ($v72ee76c5c29383b7c9f9225c1fa4d10b) ? $v72ee76c5c29383b7c9f9225c1fa4d10b : cmsController::getInstance()->getCurrentDomain()->getId();$vee90edc893b714c546b99fe996ebd90d = ($v7057e8409c7c531a1a6e9ac3df4ed549 > 0) ? "" : " AND h.domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";$permissions = permissionsCollection::getInstance();$v8e44f0089b076e18a718eb9ca3d94674 = $permissions->getUserId();$ve6f9f41f5312cc3f7302c1a2687fc264 = $permissions->isSv($v8e44f0089b076e18a718eb9ca3d94674);$v5cfe921b204e2c73f8afbec7c4b9ac54 = $permissions->makeSqlWhere($v8e44f0089b076e18a718eb9ca3d94674);$v9b207167e5381c47682c6b4f58a623fb = Array();$vc561c84df7b4640190f8290b973108e1 = ($v7057e8409c7c531a1a6e9ac3df4ed549) ? "= '{$v7057e8409c7c531a1a6e9ac3df4ed549}'" : "IS NULL";$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE hr.child_id, h.rel, cp.level FROM cms3_hierarchy_relations hr, cms3_permissions cp, cms3_hierarchy h WHERE hr.rel_id {$vc561c84df7b4640190f8290b973108e1} AND h.id = hr.child_id {$vee90edc893b714c546b99fe996ebd90d} AND h.lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND h.is_deleted = '0'";if($ve6f9f41f5312cc3f7302c1a2687fc264) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE hr.child_id, h.rel, 2 FROM cms3_hierarchy_relations hr, cms3_hierarchy h WHERE hr.rel_id {$vc561c84df7b4640190f8290b973108e1} AND h.id = hr.child_id {$vee90edc893b714c546b99fe996ebd90d} AND h.lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND h.is_deleted = '0'";}if(!$v69077352f5ac48235305c08dd983bf9f) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.is_active = '1'";if(!$vbdbeb3b037059befbd5195fe4863ac5e) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.is_visible = '1'";if($v0715f6d9497f93911417c9c324265771) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.type_id = '{$v0715f6d9497f93911417c9c324265771}'";if(!$ve6f9f41f5312cc3f7302c1a2687fc264) {$vac5c74b64b4b8352ef2f181affb5ac2a .= " AND (cp.rel_id = h.id AND {$v5cfe921b204e2c73f8afbec7c4b9ac54} AND cp.level IN (1, 2))";}$vac5c74b64b4b8352ef2f181affb5ac2a .= " ORDER BY hr.level, h.ord";if($v12a055bf01a31369fe81ac35d85c7bc1 != 1) {if($v9b207167e5381c47682c6b4f58a623fb = cacheFrontend::getInstance()->loadSql($vac5c74b64b4b8352ef2f181affb5ac2a)) {foreach($v9b207167e5381c47682c6b4f58a623fb[1] as $v7552cd149af7495ee7d8225974e50f80 => $vc9e9a848920877e76685b2e4e76de38d) {$permissions->pushElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d);}return $v9b207167e5381c47682c6b4f58a623fb[0];}}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vd22bbd30e009c5a782250725e19d22f2 = Array();$v4051c8368d6b69eca174681d8daf0bf1 = Array();$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($vf36263a38d7de5cdaa953c1e2b2f79b5, $vd5d4bb9b2c282937ee64b1fb0495ef08, $vc9e9a848920877e76685b2e4e76de38d) = mysql_fetch_row($result)) {$permissions->pushElementPermissions($vf36263a38d7de5cdaa953c1e2b2f79b5, $vc9e9a848920877e76685b2e4e76de38d);$vd22bbd30e009c5a782250725e19d22f2[$vf36263a38d7de5cdaa953c1e2b2f79b5] = Array();if($vd5d4bb9b2c282937ee64b1fb0495ef08 == $v7057e8409c7c531a1a6e9ac3df4ed549) {$v9b207167e5381c47682c6b4f58a623fb[$vf36263a38d7de5cdaa953c1e2b2f79b5] = &$vd22bbd30e009c5a782250725e19d22f2[$vf36263a38d7de5cdaa953c1e2b2f79b5];}if(isset($vd22bbd30e009c5a782250725e19d22f2[$vd5d4bb9b2c282937ee64b1fb0495ef08])) {$vd22bbd30e009c5a782250725e19d22f2[$vd5d4bb9b2c282937ee64b1fb0495ef08][$vf36263a38d7de5cdaa953c1e2b2f79b5] = &$vd22bbd30e009c5a782250725e19d22f2[$vf36263a38d7de5cdaa953c1e2b2f79b5];}$v4051c8368d6b69eca174681d8daf0bf1[$vf36263a38d7de5cdaa953c1e2b2f79b5] = $vc9e9a848920877e76685b2e4e76de38d;}if($v12a055bf01a31369fe81ac35d85c7bc1 != 1) {cacheFrontend::getInstance()->saveSql($vac5c74b64b4b8352ef2f181affb5ac2a, Array($v9b207167e5381c47682c6b4f58a623fb, $v4051c8368d6b69eca174681d8daf0bf1));}return $v9b207167e5381c47682c6b4f58a623fb;}public function getChildsCount($v7057e8409c7c531a1a6e9ac3df4ed549, $v69077352f5ac48235305c08dd983bf9f = true, $vbdbeb3b037059befbd5195fe4863ac5e = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $v0715f6d9497f93911417c9c324265771 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$v69077352f5ac48235305c08dd983bf9f = (int) $v69077352f5ac48235305c08dd983bf9f;$vbdbeb3b037059befbd5195fe4863ac5e = (int) $vbdbeb3b037059befbd5195fe4863ac5e;$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = ($v72ee76c5c29383b7c9f9225c1fa4d10b) ? $v72ee76c5c29383b7c9f9225c1fa4d10b : cmsController::getInstance()->getCurrentDomain()->getId();if($v7057e8409c7c531a1a6e9ac3df4ed549) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();}}$vee90edc893b714c546b99fe996ebd90d = ($v7057e8409c7c531a1a6e9ac3df4ed549 > 0) ? "" : " AND h.domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";$v9b207167e5381c47682c6b4f58a623fb = Array();$vc561c84df7b4640190f8290b973108e1 = ($v7057e8409c7c531a1a6e9ac3df4ed549) ? "= '{$v7057e8409c7c531a1a6e9ac3df4ed549}'" : "IS NULL";$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE COUNT(hr.child_id) FROM cms3_hierarchy_relations hr, cms3_hierarchy h WHERE hr.rel_id {$vc561c84df7b4640190f8290b973108e1} AND h.id = hr.child_id {$vee90edc893b714c546b99fe996ebd90d} AND h.lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND h.is_deleted = '0'";if(!$v69077352f5ac48235305c08dd983bf9f) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.is_active = '1'";if(!$vbdbeb3b037059befbd5195fe4863ac5e) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.is_visible = '1'";if($v0715f6d9497f93911417c9c324265771) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND h.type_id = '{$v0715f6d9497f93911417c9c324265771}'";$vac5c74b64b4b8352ef2f181affb5ac2a .= " ORDER BY hr.level, h.ord";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}if(mysql_num_rows($result)) {list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result);return $ve2942a04780e223b215eb8b663cf5353;}else {return false;}}public function forceAbsolutePath($vf9448cc5666e281bc210298b60567801 = true) {$v8123ef13520d88a438e469cc8a7ab63b = $this->bForceAbsolutePath;$this->bForceAbsolutePath = (bool) $vf9448cc5666e281bc210298b60567801;return $v8123ef13520d88a438e469cc8a7ab63b;}public function getPathById($v7057e8409c7c531a1a6e9ac3df4ed549, $v5cd943c36b800237522c35155d898244 = false, $vbc9ecd0be77ceffa51fc6918c714e5d3 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244])) return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244];$v25173eac47bcd1aa0bb3a146f0595bb7 = cmsController::getInstance()->pre_lang;if($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true)) {$v263deaa64d2e600bed1b85f3303f608e = cmsController::getInstance()->getCurrentDomain();$v3c2d776e82f7716166c1c2183822a04b = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();if(!$this->bForceAbsolutePath && $v263deaa64d2e600bed1b85f3303f608e->getId() == $v3c2d776e82f7716166c1c2183822a04b) {$v37540249ba8b3080e8092c62b08e7d4d = "";}else {$v37540249ba8b3080e8092c62b08e7d4d = "http://" . domainsCollection::getInstance()->getDomain($v3c2d776e82f7716166c1c2183822a04b)->getHost();}$vfb479516754f41871773a666a31026c4 = intval($v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId());$va51d26dd5a799dd184b4093d8cfb8d1b = langsCollection::getInstance()->getLang($vfb479516754f41871773a666a31026c4);$v795e772d23c3965d128d13aa8ee3e1f4 = ($vfb479516754f41871773a666a31026c4 === intval(cmsController::getInstance()->getCurrentDomain()->getDefaultLangId()));if(!$va51d26dd5a799dd184b4093d8cfb8d1b || $v795e772d23c3965d128d13aa8ee3e1f4 || $v5cd943c36b800237522c35155d898244 == true) {$v5a6e3be618e0347ab0766b23ec68d7fc = "";}else {$v5a6e3be618e0347ab0766b23ec68d7fc = "/" . $va51d26dd5a799dd184b4093d8cfb8d1b->getPrefix();}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDefault() && !$vbc9ecd0be77ceffa51fc6918c714e5d3) {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244] = $v37540249ba8b3080e8092c62b08e7d4d . $v5a6e3be618e0347ab0766b23ec68d7fc . "/";}}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244] = "";}if($vc68ad910ed49ac65f21f1bf2c5dbf912 = $this->getAllParents($v7057e8409c7c531a1a6e9ac3df4ed549)) {$vd6fe1d0be6347b8ef2427fa629c04485 = $v37540249ba8b3080e8092c62b08e7d4d . $v5a6e3be618e0347ab0766b23ec68d7fc;$vc68ad910ed49ac65f21f1bf2c5dbf912[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vc68ad910ed49ac65f21f1bf2c5dbf912);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if($vc68ad910ed49ac65f21f1bf2c5dbf912[$v865c0c0b4ab0e063e5caa3387c1a8741] == "") {continue;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE alt_name FROM cms3_hierarchy WHERE id = '{$vc68ad910ed49ac65f21f1bf2c5dbf912[$v865c0c0b4ab0e063e5caa3387c1a8741]}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = false;}if(mysql_num_rows($result)) {list($vd84ff935144e00c3e1d395c2379aca47) = mysql_fetch_row($result);$vd6fe1d0be6347b8ef2427fa629c04485 .= "/" . $vd84ff935144e00c3e1d395c2379aca47;}}$vd6fe1d0be6347b8ef2427fa629c04485 .= "/";return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = $vd6fe1d0be6347b8ef2427fa629c04485;}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = false;}}public function getIdByPath($v84d8c2148d233e7430fceb3f20ae3314, $vda936bf93b2dd512e0554fd9eb7b4120 = false, &$v3dbd53d892aaea70c9f5fefc18fc7e4c = 0) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314])) return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314];if($vb80bb7740288fda1f201890375a60c8f = cacheFrontend::getInstance()->loadSql($v84d8c2148d233e7430fceb3f20ae3314 . "_path")) {return $vb80bb7740288fda1f201890375a60c8f;}if($v84d8c2148d233e7430fceb3f20ae3314 == "/") {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = $this->getDefaultElementId();}$v84d8c2148d233e7430fceb3f20ae3314 = trim($v84d8c2148d233e7430fceb3f20ae3314, "\/ \n");$v13872c0118a4316afd1e99295017d654 = split("/", $v84d8c2148d233e7430fceb3f20ae3314);$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v13872c0118a4316afd1e99295017d654);$vb80bb7740288fda1f201890375a60c8f = 0;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd84ff935144e00c3e1d395c2379aca47 = $v13872c0118a4316afd1e99295017d654[$v865c0c0b4ab0e063e5caa3387c1a8741];$vd84ff935144e00c3e1d395c2379aca47 = mysql_real_escape_string($vd84ff935144e00c3e1d395c2379aca47);if($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) {if($v3c2d776e82f7716166c1c2183822a04b = domainsCollection::getInstance()->getDomainId($vd84ff935144e00c3e1d395c2379aca47)) {$v662cbf1253ac7d8750ed9190c52163e5 = $v3c2d776e82f7716166c1c2183822a04b;continue;}}if($vda936bf93b2dd512e0554fd9eb7b4120) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_hierarchy WHERE rel = '{$vb80bb7740288fda1f201890375a60c8f}' AND alt_name = '{$vd84ff935144e00c3e1d395c2379aca47}' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_hierarchy WHERE rel = '{$vb80bb7740288fda1f201890375a60c8f}' AND alt_name = '{$vd84ff935144e00c3e1d395c2379aca47}' AND is_active='1' AND is_deleted = '0' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(!mysql_num_rows($result)) {if($vda936bf93b2dd512e0554fd9eb7b4120) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, alt_name FROM cms3_hierarchy WHERE rel = '{$vb80bb7740288fda1f201890375a60c8f}' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, alt_name FROM cms3_hierarchy WHERE rel = '{$vb80bb7740288fda1f201890375a60c8f}' AND is_active = '1' AND is_deleted = '0' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v2ffe4e77325d9a7152f7086ea7aa5114 = 0;$vb6b6e66c9db093b3c4c8800ac9365830 = 0;$v1a1cc17b4341344c0ceec516de628da3 = 0;while(list($vb6b6e66c9db093b3c4c8800ac9365830, $v423b21e5932f11b123a1ddb35654b51b) = mysql_fetch_row($result)) {if($this->autocorrectionDisabled) {if($vd84ff935144e00c3e1d395c2379aca47 == $v423b21e5932f11b123a1ddb35654b51b) {$v1a1cc17b4341344c0ceec516de628da3 = $vb6b6e66c9db093b3c4c8800ac9365830;}}else {$v3d801aa532c1cec3ee82d87a99fdf63f = umiHierarchy::compareStrings($vd84ff935144e00c3e1d395c2379aca47, $v423b21e5932f11b123a1ddb35654b51b);if($v3d801aa532c1cec3ee82d87a99fdf63f > $v2ffe4e77325d9a7152f7086ea7aa5114) {$v2ffe4e77325d9a7152f7086ea7aa5114 = $v3d801aa532c1cec3ee82d87a99fdf63f;$v1a1cc17b4341344c0ceec516de628da3 = $vb6b6e66c9db093b3c4c8800ac9365830;++$v3dbd53d892aaea70c9f5fefc18fc7e4c;}}}if($v2ffe4e77325d9a7152f7086ea7aa5114 > 75) {$vb80bb7740288fda1f201890375a60c8f = $v1a1cc17b4341344c0ceec516de628da3;}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = false;}}else {if(!(list($vb80bb7740288fda1f201890375a60c8f) = mysql_fetch_row($result))) {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = false;}}}cacheFrontend::getInstance()->saveSql($v84d8c2148d233e7430fceb3f20ae3314 . "_path", $vb80bb7740288fda1f201890375a60c8f, 3600);return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = $vb80bb7740288fda1f201890375a60c8f;}public function addElement($vd5d4bb9b2c282937ee64b1fb0495ef08, $v0715f6d9497f93911417c9c324265771, $vb068931cc450442b63f5b3d276ea4297, $vd84ff935144e00c3e1d395c2379aca47, $v94757cae63fd3e398c0811a976dd6bbe = false, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $vd02e12eb6d6c3f6ebd763197df01e211 = false) {$this->disableCache();if($v94757cae63fd3e398c0811a976dd6bbe === false) {if($vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v0715f6d9497f93911417c9c324265771)) {$v94757cae63fd3e398c0811a976dd6bbe = umiObjectTypesCollection::getInstance()->getBaseType($vb946c44d711ade3b061653732977d043->getName(), $vb946c44d711ade3b061653732977d043->getExt());if(!$v94757cae63fd3e398c0811a976dd6bbe) {throw new coreException("There is no base object type for hierarchy type #{$v0715f6d9497f93911417c9c324265771}");return false;}}else {throw new coreException("Wrong hierarchy type id given");return false;}}if($v662cbf1253ac7d8750ed9190c52163e5 === false) {$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();}if($v78e6dd7a49f5b0cb2106a3a434dd5c86 === false) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();}if($vd02e12eb6d6c3f6ebd763197df01e211 === false) {$vd02e12eb6d6c3f6ebd763197df01e211 = templatesCollection::getInstance()->getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86)->getId();}if($vd5d4bb9b2c282937ee64b1fb0495ef08) {$this->addUpdatedElementId($vd5d4bb9b2c282937ee64b1fb0495ef08);}else {$this->addUpdatedElementId($this->getDefaultElementId());}if($vaf31437ce61345f416579830a98c91e5 = $this->objects->addObject($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_hierarchy (rel, type_id, domain_id, lang_id, tpl_id, obj_id) VALUES('{$vd5d4bb9b2c282937ee64b1fb0495ef08}', '{$v0715f6d9497f93911417c9c324265771}', '{$v662cbf1253ac7d8750ed9190c52163e5}', '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}', '{$vd02e12eb6d6c3f6ebd763197df01e211}', '{$vaf31437ce61345f416579830a98c91e5}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v7057e8409c7c531a1a6e9ac3df4ed549 = mysql_insert_id();$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true);$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($vd84ff935144e00c3e1d395c2379aca47);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(ord) FROM cms3_hierarchy WHERE rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v8bef1cc20ada3bef55fdf132cb2a1cb9) = mysql_fetch_row($result)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setOrd( ($v8bef1cc20ada3bef55fdf132cb2a1cb9 + 1) );}$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549] = $v8e2dcfd7e7e24b1ca76c1193f645902b;$this->addUpdatedElementId($vd5d4bb9b2c282937ee64b1fb0495ef08);$this->addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549);if($vd5d4bb9b2c282937ee64b1fb0495ef08) {$vc975d8201fe751ebb3429336eeee7d3b = umiHierarchy::getInstance()->getElement($vd5d4bb9b2c282937ee64b1fb0495ef08);if($vc975d8201fe751ebb3429336eeee7d3b instanceof umiHierarchyElement) {$vd011f21d73bbed77facded50f36b9e7d = umiHierarchy::getInstance()->getObjectInstances($vc975d8201fe751ebb3429336eeee7d3b->getObject()->getId());if(sizeof($vd011f21d73bbed77facded50f36b9e7d) > 1) {foreach($vd011f21d73bbed77facded50f36b9e7d as $v249d9032fd2c81de7f755fc06b1c397a) {if($v249d9032fd2c81de7f755fc06b1c397a == $vd5d4bb9b2c282937ee64b1fb0495ef08) continue;$this->symlinks[] = Array($v7057e8409c7c531a1a6e9ac3df4ed549, $v249d9032fd2c81de7f755fc06b1c397a);}}}}$this->misc_elements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$this->buildRelationNewNodes($v7057e8409c7c531a1a6e9ac3df4ed549);return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {throw new coreException("Failed to create new object for hierarchy element");return false;}}public function getDefaultElementId($v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $v662cbf1253ac7d8750ed9190c52163e5 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 === false) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();}if($v662cbf1253ac7d8750ed9190c52163e5 === false) {$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5];}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_hierarchy WHERE is_default = '1' AND is_deleted='0' AND is_active='1' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v7057e8409c7c531a1a6e9ac3df4ed549) = mysql_fetch_row($result)) {return $v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5] = $v7057e8409c7c531a1a6e9ac3df4ed549;}else {return false;}}public static function compareStrings($vd7b5808c3f443eb5a496225468c7e4a5, $v6dc84905d6df841d6f19153bd593e213) {return 100 * (    similar_text($vd7b5808c3f443eb5a496225468c7e4a5, $v6dc84905d6df841d6f19153bd593e213) / (     (strlen($vd7b5808c3f443eb5a496225468c7e4a5) + strlen($v6dc84905d6df841d6f19153bd593e213))    / 2)   );}public static function convertAltName($vd84ff935144e00c3e1d395c2379aca47) {$vd84ff935144e00c3e1d395c2379aca47 = translit::convert($vd84ff935144e00c3e1d395c2379aca47);$vd84ff935144e00c3e1d395c2379aca47 = preg_replace("/[\?\\\\&=]+/", "_", $vd84ff935144e00c3e1d395c2379aca47);$vd84ff935144e00c3e1d395c2379aca47 = preg_replace("/[_\/]+/", "_", $vd84ff935144e00c3e1d395c2379aca47);return $vd84ff935144e00c3e1d395c2379aca47;}public static function getTimeStamp() {return time();}public function moveBefore($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v37b7e5e846e31d9da322c6e743ce3b3c = false) {$this->disableCache();if(!$this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) return false;$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$v41a1470180f8488ba6040c5ff7dc6833 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getRel();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$v8e2dcfd7e7e24b1ca76c1193f645902b->setRel($vd5d4bb9b2c282937ee64b1fb0495ef08);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$v46a8df3f1b0f374830be2497076b9446 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTplId();$v3568678a69e0e639e9c3163b2d10ceba = templatesCollection::getInstance()->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);$vf07440bfac87b2aa38a59a0109b6cd38 = true;foreach($v3568678a69e0e639e9c3163b2d10ceba as $vcfc7e0dcf6883d635b928f1e31f7694d) {if ($vcfc7e0dcf6883d635b928f1e31f7694d->getId() == $v46a8df3f1b0f374830be2497076b9446) {$vf07440bfac87b2aa38a59a0109b6cd38 = false;break;}}if ($vf07440bfac87b2aa38a59a0109b6cd38) {$v84b4de448609c5297d79dbec08101fbd = templatesCollection::getInstance()->getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);if ($v84b4de448609c5297d79dbec08101fbd) {$v8c3112e89e491f40ed057b32883c646c = $v84b4de448609c5297d79dbec08101fbd->getId();$v770c309c1aed0fbfabad24a3d5933129 = new umiSelection;$v770c309c1aed0fbfabad24a3d5933129->setHierarchyFilter();$v770c309c1aed0fbfabad24a3d5933129->addHierarchyFilter($v7057e8409c7c531a1a6e9ac3df4ed549, 100);$v4650086681d0c3d7660463e94b1156a5 = umiSelectionsParser::runSelection($v770c309c1aed0fbfabad24a3d5933129);$v4650086681d0c3d7660463e94b1156a5[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$v18e7588ee516318bc8ae9c8c0ff7c917 = implode(",", $v4650086681d0c3d7660463e94b1156a5);$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET tpl_id = '{$v8c3112e89e491f40ed057b32883c646c}' WHERE id IN (".$v18e7588ee516318bc8ae9c8c0ff7c917.")";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}}if($v37b7e5e846e31d9da322c6e743ce3b3c) {$v37b7e5e846e31d9da322c6e743ce3b3c = (int) $v37b7e5e846e31d9da322c6e743ce3b3c;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT ord FROM cms3_hierarchy WHERE id = '{$v37b7e5e846e31d9da322c6e743ce3b3c}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v8bef1cc20ada3bef55fdf132cb2a1cb9) = mysql_fetch_row($result)) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET ord = (ord + 1) WHERE rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}' AND ord >= {$v8bef1cc20ada3bef55fdf132cb2a1cb9}";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET ord = '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}', rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$this->rewriteElementAltName($v7057e8409c7c531a1a6e9ac3df4ed549);$this->rebuildRelationNodes($v7057e8409c7c531a1a6e9ac3df4ed549);return true;}}else {return false;}}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(ord) FROM cms3_hierarchy WHERE rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v8bef1cc20ada3bef55fdf132cb2a1cb9) = mysql_fetch_row($result)) {++$v8bef1cc20ada3bef55fdf132cb2a1cb9;}else {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = 1;}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_hierarchy SET ord = '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}', rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {$this->rewriteElementAltName($v7057e8409c7c531a1a6e9ac3df4ed549);$this->rebuildRelationNodes($v7057e8409c7c531a1a6e9ac3df4ed549);return true;}}}public function moveFirst($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08) {$this->disableCache();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' ORDER BY ord ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {list($v37b7e5e846e31d9da322c6e743ce3b3c) = mysql_fetch_row($result);return $this->moveBefore($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v37b7e5e846e31d9da322c6e743ce3b3c);}}protected function isAllowed($v7057e8409c7c531a1a6e9ac3df4ed549) {if($va178a6b6ad454764f5d724e7f96e75b7 = cmsController::getInstance()->getModule('users')) {list($v4b43b0aee35624cd95b910189b3dc231, $ve1671797c52e15f763380b45e841ec32) = $va178a6b6ad454764f5d724e7f96e75b7->isAllowedObject($va178a6b6ad454764f5d724e7f96e75b7->user_id, $v7057e8409c7c531a1a6e9ac3df4ed549);return $v4b43b0aee35624cd95b910189b3dc231;}else {return true;}}public function getDominantTypeId($v7057e8409c7c531a1a6e9ac3df4ed549) {if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) || $v7057e8409c7c531a1a6e9ac3df4ed549 === 0) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT o.type_id, COUNT(*) AS c
	FROM cms3_hierarchy h, cms3_objects o
		WHERE h.rel = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' AND h.is_deleted = '0' AND o.id = h.obj_id AND h.lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}' AND h.domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'
			GROUP BY o.type_id
				ORDER BY c DESC
					LIMIT 1
SQL;    if($v94757cae63fd3e398c0811a976dd6bbe = (int) cacheFrontend::getInstance()->loadSql($vac5c74b64b4b8352ef2f181affb5ac2a)) {return $v94757cae63fd3e398c0811a976dd6bbe;}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {trigger_errror($v56bd7107802ebe56c6918992f0608ec6, E_USER_WARNING);return false;}if(mysql_num_rows($result)) {list($v94757cae63fd3e398c0811a976dd6bbe) = mysql_fetch_row($result);$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;cacheFrontend::getInstance()->saveSql($vac5c74b64b4b8352ef2f181affb5ac2a, $v94757cae63fd3e398c0811a976dd6bbe);return $v94757cae63fd3e398c0811a976dd6bbe;}else {return NULL;}}else {return false;}}public function addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549) {if(!in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $this->updatedElements)) {$this->updatedElements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}}public function getUpdatedElements() {return $this->updatedElements;}protected function forceCacheCleanup() {if(sizeof($this->updatedElements)) {if(function_exists("deleteElementsRelatedPages")) {deleteElementsRelatedPages();}}}public function __destruct() {$this->forceCacheCleanup();if(sizeof($this->symlinks)) {foreach($this->symlinks as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v47c80780ab608cc046f2a6e6f071feb6) {list($v7057e8409c7c531a1a6e9ac3df4ed549, $va473047c73202ee9a9ff3648c5aab351) = $v47c80780ab608cc046f2a6e6f071feb6;$this->copyElement($v7057e8409c7c531a1a6e9ac3df4ed549, $va473047c73202ee9a9ff3648c5aab351);unset($this->symlinks[$v865c0c0b4ab0e063e5caa3387c1a8741]);}$this->symlinks = Array();}}public function getCollectedElements() {return array_merge(array_keys($this->elements), $this->misc_elements);}public function unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549) {static $v0db3209e1adc6d67be435a81baf9a66e;if($v0db3209e1adc6d67be435a81baf9a66e === NULL) {$v0db3209e1adc6d67be435a81baf9a66e = cmsController::getInstance()->getCurrentElementId();}if($v0db3209e1adc6d67be435a81baf9a66e == $v7057e8409c7c531a1a6e9ac3df4ed549) return false;if(array_key_exists($v7057e8409c7c531a1a6e9ac3df4ed549, $this->elements)) {unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);}else {return false;}}public function getElementsCount($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = "") {$v0715f6d9497f93911417c9c324265771 = umiHierarchyTypesCollection::getInstance()->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)->getId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_hierarchy WHERE type_id = '{$v0715f6d9497f93911417c9c324265771}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result)) {return $ve2942a04780e223b215eb8b663cf5353;}else {return false;}}private function pushElementsLastUpdateTime($ve0df5a999da22bc6fa9e26b115eb4ae4 = 0) {if($ve0df5a999da22bc6fa9e26b115eb4ae4 > $this->elementsLastUpdateTime) {$this->elementsLastUpdateTime = $ve0df5a999da22bc6fa9e26b115eb4ae4;}}public function getElementsLastUpdateTime() {return $this->elementsLastUpdateTime;}public function getObjectInstances($vaf31437ce61345f416579830a98c91e5, $vfc9bd216c399e5612672290fa3f0cbe2 = false, $v1200c36ada21fb70df10f131f49eaf3d = false) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE obj_id = '{$vaf31437ce61345f416579830a98c91e5}'";if(!$vfc9bd216c399e5612672290fa3f0cbe2) $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND domain_id = '{$v662cbf1253ac7d8750ed9190c52163e5}'";if(!$v1200c36ada21fb70df10f131f49eaf3d)   $vac5c74b64b4b8352ef2f181affb5ac2a .= " AND lang_id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}'" ;$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($v7057e8409c7c531a1a6e9ac3df4ed549) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}return $v9b207167e5381c47682c6b4f58a623fb;}public function getDominantTplId($v7552cd149af7495ee7d8225974e50f80) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT `tpl_id`, COUNT(*) AS `cnt` FROM cms3_hierarchy WHERE rel = '{$v7552cd149af7495ee7d8225974e50f80}' AND is_deleted = '0' GROUP BY tpl_id ORDER BY `cnt` DESC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {list($vd02e12eb6d6c3f6ebd763197df01e211) = $vf1965a857bc285d26fe22023aa5ab50d;return $vd02e12eb6d6c3f6ebd763197df01e211;}else {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7552cd149af7495ee7d8225974e50f80);if(get_class($v8e2dcfd7e7e24b1ca76c1193f645902b) == "umiHierarchyElement") {return $v8e2dcfd7e7e24b1ca76c1193f645902b->getTplId();}}}public function getLastUpdatedElements($vaa9f73eea60a006820d0f8768bc8a3fc, $vd7e6d55ba379a13d08c25d15faf2a23b = 0) {$vaa9f73eea60a006820d0f8768bc8a3fc = (int) $vaa9f73eea60a006820d0f8768bc8a3fc;$vd7e6d55ba379a13d08c25d15faf2a23b = (int) $vd7e6d55ba379a13d08c25d15faf2a23b;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE updatetime >= {$vd7e6d55ba379a13d08c25d15faf2a23b} LIMIT {$vaa9f73eea60a006820d0f8768bc8a3fc}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($vb80bb7740288fda1f201890375a60c8f) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = $vb80bb7740288fda1f201890375a60c8f;}return $v9b207167e5381c47682c6b4f58a623fb;}public function checkIsVirtual($v47c80780ab608cc046f2a6e6f071feb6) {if(sizeof($v47c80780ab608cc046f2a6e6f071feb6) == 0) return $v47c80780ab608cc046f2a6e6f071feb6;foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v7057e8409c7c531a1a6e9ac3df4ed549 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v47c80780ab608cc046f2a6e6f071feb6[$v7057e8409c7c531a1a6e9ac3df4ed549] = (string) $v8e2dcfd7e7e24b1ca76c1193f645902b->getObjectId();}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT obj_id, COUNT(*) FROM cms3_hierarchy WHERE obj_id IN (" . implode(", ", $v47c80780ab608cc046f2a6e6f071feb6) . ") AND is_deleted = '0' GROUP BY obj_id";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($vac5c74b64b4b8352ef2f181affb5ac2a);return false;}while(list($v818ad5ef6588e140ecb9f81e810c028a, $v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result)) {$vcfeadf6a60808e5ffeff8268bec49bb6 = ($v4a8a08f09d37b73795649038408b5f33 > 1) ? true : false;foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if($v9e3669d19b675bd57058fd4664205d2a === $v818ad5ef6588e140ecb9f81e810c028a) {$v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741] = $vcfeadf6a60808e5ffeff8268bec49bb6;}}}return $v47c80780ab608cc046f2a6e6f071feb6;}protected function rewriteElementAltName($v7057e8409c7c531a1a6e9ac3df4ed549) {$this->unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();return true;}else {return false;}}protected function earseRelationNodes($v7057e8409c7c531a1a6e9ac3df4ed549) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_hierarchy_relations WHERE rel_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}' OR child_id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}public function rebuildRelationNodes($v7552cd149af7495ee7d8225974e50f80) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$this->earseRelationNodes($v7552cd149af7495ee7d8225974e50f80);$this->buildRelationNewNodes($v7552cd149af7495ee7d8225974e50f80);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_hierarchy WHERE rel = '{$v7552cd149af7495ee7d8225974e50f80}'";$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}while(list($v6b6fbabcee280415a5bc3e6f99d3a15e) = mysql_fetch_row($result)) {$this->rebuildRelationNodes($v6b6fbabcee280415a5bc3e6f99d3a15e);}}public function buildRelationNewNodes($v7057e8409c7c531a1a6e9ac3df4ed549) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$this->earseRelationNodes($v7057e8409c7c531a1a6e9ac3df4ed549);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT rel FROM cms3_hierarchy WHERE id = '{$v7057e8409c7c531a1a6e9ac3df4ed549}'";$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}if(mysql_num_rows($result)) {list($v6be379826b20cc58475f636e33f4606b) = mysql_fetch_row($result);$v8eeb1538ad4ac95142835550d08f1212 = ($v6be379826b20cc58475f636e33f4606b > 0) ? " = '{$v6be379826b20cc58475f636e33f4606b}'" : " IS NULL";$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_hierarchy_relations (rel_id, child_id, level)
SELECT rel_id, '{$v7057e8409c7c531a1a6e9ac3df4ed549}', (level + 1) FROM cms3_hierarchy_relations WHERE child_id {$v8eeb1538ad4ac95142835550d08f1212}
SQL;    mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vc68ad910ed49ac65f21f1bf2c5dbf912 = $this->getAllParents($v6be379826b20cc58475f636e33f4606b, true);$vc68ad910ed49ac65f21f1bf2c5dbf912 = array_extract_values($vc68ad910ed49ac65f21f1bf2c5dbf912);$vc9e9a848920877e76685b2e4e76de38d = sizeof($vc68ad910ed49ac65f21f1bf2c5dbf912);$v59a040d8f146c76cb91c7f341268d909 = ($v6be379826b20cc58475f636e33f4606b > 0) ? "'{$v6be379826b20cc58475f636e33f4606b}'" : "NULL";$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
INSERT INTO cms3_hierarchy_relations (rel_id, child_id, level)
VALUES ({$v59a040d8f146c76cb91c7f341268d909}, '{$v7057e8409c7c531a1a6e9ac3df4ed549}', '{$vc9e9a848920877e76685b2e4e76de38d}')
SQL;    mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}return true;}else {return false;}}};interface iUmiSelection {public function setObjectTypeFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setElementTypeFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setPropertyFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setLimitFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setHierarchyFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setOrderFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setPermissionsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setNamesFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setActiveFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setOwnerFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setObjectsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setElementsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function forceHierarchyTable($v9a11e4b1e888a4467c1e9cabcd5243c9 = true);public function addObjectType($v6301cee35ea764a1e241978f93f01069);public function addElementType($v94efb9bd8805ffa2a3d248cbe836b6ef);public function addLimit($v46e7bdf0a692b1eca202f0d12b593b1e, $v8a9b81a55f7d809de402f0d2ce9d42af = 0);public function setOrderByProperty($v945100186b119048837b9859c2c46410, $v375a52cb87b22005816fe7a418ec6660 = true);public function setOrderByOrd();public function setOrderByRand();public function setOrderByName($v375a52cb87b22005816fe7a418ec6660 = true);public function setOrderByObjectId($v375a52cb87b22005816fe7a418ec6660 = true);public function addHierarchyFilter($v7552cd149af7495ee7d8225974e50f80, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vabd12ea100a9ec8377e3c7339f056b00 = false);public function addPropertyFilterBetween($v945100186b119048837b9859c2c46410, $vc77a6602bc26923923022914991f7089, $ve728b2d791dd5ba5e95cf932e053ee54);public function addPropertyFilterEqual($v945100186b119048837b9859c2c46410, $vceddaedc8950c06207af818c743f5986, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterNotEqual($v945100186b119048837b9859c2c46410, $vceddaedc8950c06207af818c743f5986, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterLike($v945100186b119048837b9859c2c46410, $ve1099940f96cfb8bb4fbfd8af691553e, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterMore($v945100186b119048837b9859c2c46410, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);public function addPropertyFilterLess($v945100186b119048837b9859c2c46410, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);public function addPropertyFilterIsNull($v945100186b119048837b9859c2c46410);public function addActiveFilter($vc76a5e84e4bdee527e274ea30c680d79);public function addOwnerFilter($v72122ce96bfec66e2396d2e25225d70a);public function addObjectsFilter($v486e8f4c27e77f00e55301bea98709b3);public function addElementsFilter($v8d7953acf74eb79d375a932e111d71a3);public function addNameFilterEquals($vceddaedc8950c06207af818c743f5986);public function addNameFilterLike($ve1099940f96cfb8bb4fbfd8af691553e);public function addPermissions($v8e44f0089b076e18a718eb9ca3d94674 = false);public function setPermissionsLevel($vc9e9a848920877e76685b2e4e76de38d = 1);public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function setLangId($vf585b7f018bb4ced15a03683a733e50b = false);public function getOrderConds();public function getLimitConds();public function getPropertyConds();public function getObjectTypeConds();public function getElementTypeConds();public function getHierarchyConds();public function getPermissionsConds();public function getForceCond();public function getActiveConds();public function getOwnerConds();public function getObjectsConds();public function getElementsConds();public function getDomainId();public function getLangId();public function getRequiredPermissionsLevel();public function getNameConds();public function setConditionModeOR();public function setIsDomainIgnored($vf3e6017a1a6654acd4f621a18cc49878 = false);public function setIsLangIgnored($ve17f508d15b7985bf0f67b6d72c72072 = false);}class umiSelection implements iUmiSelection {private $order = Array(),   $limit = Array(),   $object_type = Array(),   $element_type = Array(),   $props = Array(),   $hierarchy = Array(),   $perms = Array(),   $names = Array(),   $active = Array(),   $owner = Array(),   $objects_ids = Array(),   $elements_ids = Array(),   $is_order = false,  $is_limit = false, $is_object_type = false, $is_element_type = false, $is_props = false, $is_hierarchy = false, $is_permissions = false, $is_forced = false, $is_names = false, $is_active = false,   $condition_mode_or = false, $is_owner = false,   $is_objects_ids = false, $is_elements_ids = false,   $is_domain_ignored = false, $isDomainIgnored = false, $isLangIgnored = false, $langId = false, $domainId = false,   $permissionsLevel = 1,   $searchStrings = Array();public $result = false, $count = false;public $optimize_root_search_query = false;public $sql_part__hierarchy = "";public $sql_part__element_type = "";public $sql_part__owner = "";public $sql_part__objects = "";public $sql_part__elements = "";public $sql_part__perms = "";public $sql_part__perms_tables = "";public $sql_part__content_tables = "";public $sql_part__object_type = "";public $sql_part__props_and_names = "";public $sql_part__lang_cond = "";public $sql_part__domain_cond = "";public $sql_part__unactive_cond = "";public $sql_cond__total_joins = 0;public $sql_cond__content_tables_loaded = 0;public $sql_cond__need_content = false;public $sql_cond__need_hierarchy = false;public $sql_cond__domain_ignored = false;public $sql_cond_auto_domain = false;public $sql_arr_for_mark_used_fields = array();public $sql_arr_for_and_or_part = array();public $sql_kwd_distinct = "";public $sql_kwd_distinct_count = "";public $sql_kwd_straight_join = "";public $sql_select_expr = "";public $sql_table_references = "";public $sql_where_condition_required = "";public $sql_where_condition_common = "";public $sql_where_condition_additional = "";public $sql_order_by = "";public $sql_limit = "";public $objectTableIsRequired = false;public $excludeNestedPages = false;public $usedContentTables = Array();public function setObjectTypeFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_object_type = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->object_type = Array();}public function setElementTypeFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_element_type = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->element_type = Array();}public function setPropertyFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_props = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->props = Array();}public function setLimitFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_limit = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->limit = Array();}public function setHierarchyFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_hierarchy = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->hierarchy = Array();}public function setOrderFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_order = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->order = Array();}public function setPermissionsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_permissions = $v615ed030b41392ae2a69ca39f0d521a3;$ve8701ad48ba05a91604e480dd60899a3 = $this->getCurrentUserId();if(cmsController::getInstance()->getModule("users")->isSv($ve8701ad48ba05a91604e480dd60899a3)) {$this->is_permissions = false;}if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->perms = Array();}public function setActiveFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_active = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_active = Array();}public function setOwnerFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_owner = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_owner = Array();}public function setObjectsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_objects_ids = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_objects_ids = Array();}public function setElementsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_elements_ids = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_elements_ids = Array();}public function setNamesFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_names = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->names = Array();}public function forceHierarchyTable($v9a11e4b1e888a4467c1e9cabcd5243c9 = true) {$this->is_forced = (bool) $v9a11e4b1e888a4467c1e9cabcd5243c9;}public function addObjectType($v87306dd4235ed712ebc07fe169b76f83) {$this->setObjectTypeFilter();if(is_array($v87306dd4235ed712ebc07fe169b76f83)) {foreach($v87306dd4235ed712ebc07fe169b76f83 as $v9191678b4dce60a558a09976502caa71) {if(!$this->addObjectType($v9191678b4dce60a558a09976502caa71)) {return false;}}return true;}if(umiObjectTypesCollection::getInstance()->isExists($v87306dd4235ed712ebc07fe169b76f83)) {if(in_array($v87306dd4235ed712ebc07fe169b76f83, $this->object_type) === false) {$this->object_type[] = $v87306dd4235ed712ebc07fe169b76f83;return true;}else {return false;}}else {return false;}}public function addElementType($v9a0ad81d8ded2798e111f35a942f00e9) {$this->setElementTypeFilter();if(umiHierarchyTypesCollection::getInstance()->isExists($v9a0ad81d8ded2798e111f35a942f00e9)) {if(in_array($v9a0ad81d8ded2798e111f35a942f00e9, $this->element_type) === false) {$this->element_type[] = $v9a0ad81d8ded2798e111f35a942f00e9;return true;}else {return false;}}else {return false;}}public function addLimit($v9d85c254b5062e518a134a61950999c3, $v71860c77c6745379b0d44304d66b6a13 = 0) {$this->setLimitFilter();$v9d85c254b5062e518a134a61950999c3 = (int) $v9d85c254b5062e518a134a61950999c3;$v71860c77c6745379b0d44304d66b6a13 = (int) $v71860c77c6745379b0d44304d66b6a13;if($v71860c77c6745379b0d44304d66b6a13 < 0) {$v71860c77c6745379b0d44304d66b6a13 = 0;}$this->limit = Array($v9d85c254b5062e518a134a61950999c3, $v71860c77c6745379b0d44304d66b6a13);}public function addActiveFilter($vc76a5e84e4bdee527e274ea30c680d79) {$this->setActiveFilter();$this->active = Array($vc76a5e84e4bdee527e274ea30c680d79);}public function addOwnerFilter($vca105ed04a437dfe76422775527d3e83) {$this->setOwnerFilter();$this->owner = $this->toIntsArray($vca105ed04a437dfe76422775527d3e83);}public function addObjectsFilter($v486e8f4c27e77f00e55301bea98709b3) {$this->setObjectsFilter();$this->objects_ids = $this->toIntsArray($v486e8f4c27e77f00e55301bea98709b3);}public function addElementsFilter($v8d7953acf74eb79d375a932e111d71a3) {$this->setElementsFilter();$this->elements_ids = $this->toIntsArray($v8d7953acf74eb79d375a932e111d71a3);}public function setOrderByProperty($v3aabf39f2d943fa886d86dcbbee4d910, $v375a52cb87b22005816fe7a418ec6660 = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setOrderFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "asc" => $v375a52cb87b22005816fe7a418ec6660, "type" => $v17f71d965fe9589ddbd11caf7182243e, "native_field" => false);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByOrd($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "ord", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByRand() {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "rand", "asc" => true);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByName($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "name", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByObjectId($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "object_id", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function addHierarchyFilter($v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vabd12ea100a9ec8377e3c7339f056b00 = true) {$this->setHierarchyFilter();if(is_array($v7057e8409c7c531a1a6e9ac3df4ed549)) {foreach($v7057e8409c7c531a1a6e9ac3df4ed549 as $vb80bb7740288fda1f201890375a60c8f) {$this->addHierarchyFilter($vb80bb7740288fda1f201890375a60c8f, $v12a055bf01a31369fe81ac35d85c7bc1);}return;}if(umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) || (is_numeric($v7057e8409c7c531a1a6e9ac3df4ed549) && $v7057e8409c7c531a1a6e9ac3df4ed549 == 0)) {if($v7057e8409c7c531a1a6e9ac3df4ed549 == umiHierarchy::getInstance()->getDefaultElementId() && $vabd12ea100a9ec8377e3c7339f056b00 == false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = Array(0, 0);}if(in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $this->hierarchy) === false || $v7057e8409c7c531a1a6e9ac3df4ed549 == 0) {$this->hierarchy[] = Array((int) $v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1);}if($v12a055bf01a31369fe81ac35d85c7bc1 > 0) {$this->hierarchy[] = Array($v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1);}}else {return false;}}public function addPropertyFilterBetween($v3aabf39f2d943fa886d86dcbbee4d910, $vd8bd79cc131920d5de426f914d17405a, $v2ffe4e77325d9a7152f7086ea7aa5114) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "between", "min" => $vd8bd79cc131920d5de426f914d17405a, "max" => $v2ffe4e77325d9a7152f7086ea7aa5114);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterEqual($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "equal", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterNotEqual($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "not_equal", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterLike($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "like", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterMore($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "more", "value" => $v2063c1608d6e0baf80249c42e2be5804);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterLess($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "less", "value" => $v2063c1608d6e0baf80249c42e2be5804);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterIsNull($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "null");$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterIsNotNull($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "notnull");$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPermissions($ve8701ad48ba05a91604e480dd60899a3 = false) {$this->setPermissionsFilter();if($ve8701ad48ba05a91604e480dd60899a3 === false) $ve8701ad48ba05a91604e480dd60899a3 = $this->getCurrentUserId();$vb132392a317588e56460e77a8fd74229 = $this->getOwnersByUser($ve8701ad48ba05a91604e480dd60899a3);$this->perms = $vb132392a317588e56460e77a8fd74229;}public function setPermissionsLevel($vc9e9a848920877e76685b2e4e76de38d = 1) {$this->permissionsLevel = (int) $vc9e9a848920877e76685b2e4e76de38d;}public function addNameFilterEquals($v2063c1608d6e0baf80249c42e2be5804) {$this->setNamesFilter();$v2063c1608d6e0baf80249c42e2be5804 = Array("value" => $v2063c1608d6e0baf80249c42e2be5804, "type" => "exact");if(!in_array($v2063c1608d6e0baf80249c42e2be5804, $this->names)) {$this->names[] = $v2063c1608d6e0baf80249c42e2be5804;}}public function addNameFilterLike($v2063c1608d6e0baf80249c42e2be5804) {$this->setNamesFilter();$v2063c1608d6e0baf80249c42e2be5804 = Array("value" => $v2063c1608d6e0baf80249c42e2be5804, "type" => "like");if(!in_array($v2063c1608d6e0baf80249c42e2be5804, $this->names)) {$this->names[] = $v2063c1608d6e0baf80249c42e2be5804;}}public function getOrderConds() {return ($this->is_order) ? $this->order : false;}public function getLimitConds() {return ($this->is_limit) ? $this->limit : false;}public function getActiveConds() {return ($this->is_active) ? $this->active : false;}public function getOwnerConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->owner) && count($this->owner)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->owner);}return ($this->is_owner) ? $va7ea85302605a40475ffd70703779448 : false;}public function getObjectsConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->objects_ids) && count($this->objects_ids)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->objects_ids);}return ($this->is_objects_ids) ? $va7ea85302605a40475ffd70703779448 : false;}public function getElementsConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->elements_ids) && count($this->elements_ids)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->elements_ids);}return ($this->is_elements_ids) ? $va7ea85302605a40475ffd70703779448 : false;}public function getPropertyConds() {return ($this->is_props) ? $this->props : false;}public function getObjectTypeConds() {return ($this->is_object_type) ? $this->object_type : false;}public function getElementTypeConds() {if($this->getObjectTypeConds() !== false) {return false;}if($this->optimize_root_search_query) {if(is_array($this->element_type)) {if(sizeof($this->element_type) > 1) {reset($this->element_type);$this->element_type = Array(current($this->element_type));}}}return ($this->is_element_type) ? $this->element_type : false;}public function getHierarchyConds() {$this->hierarchy = array_unique_arrays($this->hierarchy, 0);return ($this->is_hierarchy && !$this->optimize_root_search_query) ? $this->hierarchy : false;}public function getPermissionsConds() {return ($this->is_permissions) ? $this->perms : false;}public function getForceCond() {return $this->is_forced;}public function getNameConds() {return ($this->is_names) ? $this->names : false;}private function getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910) {if($v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910)) {$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();if($v519504d7d4beb745dac24ccfb6c1d7c9 = umiFieldTypesCollection::getInstance()->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561)) {if($v17f71d965fe9589ddbd11caf7182243e = $v519504d7d4beb745dac24ccfb6c1d7c9->getDataType()) {return umiFieldType::getDataTypeDB($v17f71d965fe9589ddbd11caf7182243e);}else {return false;}}else {return false;}}else {return false;}}private function getCurrentUserId() {if($v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule("users")) {return $v9bc65c2abec141778ffaa729489f3e87->user_id;}else {return false;}}private function getOwnersByUser($ve8701ad48ba05a91604e480dd60899a3) {if($vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3)) {$v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getValue("groups");$v1471e4e05a4db95d353cc867fe317314[] = $ve8701ad48ba05a91604e480dd60899a3;return $v1471e4e05a4db95d353cc867fe317314;}else {return false;}}public function setConditionModeOr() {$this->condition_mode_or = true;}public function getConditionModeOr() {return $this->condition_mode_or;}public function setIsDomainIgnored($vf3e6017a1a6654acd4f621a18cc49878 = false) {$this->isDomainIgnored = (bool) $vf3e6017a1a6654acd4f621a18cc49878;}public function setIsLangIgnored($ve17f508d15b7985bf0f67b6d72c72072 = false) {$this->isLangIgnored = (bool) $ve17f508d15b7985bf0f67b6d72c72072;}public function getIsDomainIgnored() {return $this->isDomainIgnored;}public function getIsLangIgnored() {return $this->isLangIgnored;}public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$this->domainId = ($v72ee76c5c29383b7c9f9225c1fa4d10b === false) ? false : (int) $v72ee76c5c29383b7c9f9225c1fa4d10b;}public function setLangId($vf585b7f018bb4ced15a03683a733e50b = false) {$this->langId = ($vf585b7f018bb4ced15a03683a733e50b === false) ? false : (int) $vf585b7f018bb4ced15a03683a733e50b;}public function searchText($v597a51f04d341eba4ca965899acc10b3) {if(is_string($v597a51f04d341eba4ca965899acc10b3)) {if(strlen($v597a51f04d341eba4ca965899acc10b3) > 0 && !in_array($v597a51f04d341eba4ca965899acc10b3, $this->searchStrings)) {$this->searchStrings[] = $v597a51f04d341eba4ca965899acc10b3;return true;}}return false;}public function getDomainId() {return $this->domainId;}public function getLangId() {return $this->langId;}public function getRequiredPermissionsLevel() {return $this->permissionsLevel;}public function getSearchStrings() {return $this->searchStrings;}private function toIntsArray($vb84684c51768c267eb8836ba206ab734) {$va7ea85302605a40475ffd70703779448 = Array();if (is_string($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = preg_split("/[^\d]/is", $vb84684c51768c267eb8836ba206ab734);}elseif (is_numeric($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = array(intval($vb84684c51768c267eb8836ba206ab734));}elseif (!is_array($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = array();}else {$va7ea85302605a40475ffd70703779448 = $vb84684c51768c267eb8836ba206ab734;}return array_map('intval', $va7ea85302605a40475ffd70703779448);}};interface iUmiSelectionsParser {public static function runSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);public static function runSelectionCounts(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);public static function parseSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);}class umiSelectionsParser implements iUmiSelectionsParser {public static function runSelection(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {static $permissions;if ($vef5714e0519bfaa645cdff7d28843b70->result !== false) return $vef5714e0519bfaa645cdff7d28843b70->result;$v59f8ce5cb01404063bd7eb308df3b7dc = self::parseSelection($vef5714e0519bfaa645cdff7d28843b70);if (!$v59f8ce5cb01404063bd7eb308df3b7dc['result']) return false;$result = l_mysql_query($v59f8ce5cb01404063bd7eb308df3b7dc['result']);if ($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6 . ". Sql query:". $v59f8ce5cb01404063bd7eb308df3b7dc['result']);}$v9b207167e5381c47682c6b4f58a623fb = Array();while ($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {list($v7057e8409c7c531a1a6e9ac3df4ed549) = $vf1965a857bc285d26fe22023aa5ab50d;if(isset($vf1965a857bc285d26fe22023aa5ab50d[1])) {if(!$permissions) {$permissions = permissionsCollection::getInstance();}$permissions->pushElementPermissions($v7057e8409c7c531a1a6e9ac3df4ed549, $vf1965a857bc285d26fe22023aa5ab50d[1]);}$v7057e8409c7c531a1a6e9ac3df4ed549 = intval($v7057e8409c7c531a1a6e9ac3df4ed549);if(in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $v9b207167e5381c47682c6b4f58a623fb) == false) {$v9b207167e5381c47682c6b4f58a623fb[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}}if($vef5714e0519bfaa645cdff7d28843b70->excludeNestedPages) {$v9b207167e5381c47682c6b4f58a623fb = self::excludeNestedPages($v9b207167e5381c47682c6b4f58a623fb);}$vef5714e0519bfaa645cdff7d28843b70->result = $v9b207167e5381c47682c6b4f58a623fb;if(defined("DISABLE_CALC_FOUND_ROWS")) {if(DISABLE_CALC_FOUND_ROWS) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT FOUND_ROWS()";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if ($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}else {list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result);$vef5714e0519bfaa645cdff7d28843b70->count = $ve2942a04780e223b215eb8b663cf5353;}}}if ($vef5714e0519bfaa645cdff7d28843b70->optimize_root_search_query) {$vef5714e0519bfaa645cdff7d28843b70->count = false;}return $vef5714e0519bfaa645cdff7d28843b70->result;}public static function runSelectionCounts(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if ($vef5714e0519bfaa645cdff7d28843b70->count !== false) return $vef5714e0519bfaa645cdff7d28843b70->count;$v59f8ce5cb01404063bd7eb308df3b7dc = self::parseSelection($vef5714e0519bfaa645cdff7d28843b70);if (!$v59f8ce5cb01404063bd7eb308df3b7dc['count']) return false;if ($ve2942a04780e223b215eb8b663cf5353 = cacheFrontend::getInstance()->loadSql($v59f8ce5cb01404063bd7eb308df3b7dc['count'])) {return $ve2942a04780e223b215eb8b663cf5353;}$result = l_mysql_query($v59f8ce5cb01404063bd7eb308df3b7dc['count']);if ($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6 . ". Sql query:". $v59f8ce5cb01404063bd7eb308df3b7dc['count']);}if (list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result)) {$vef5714e0519bfaa645cdff7d28843b70->count = intval($ve2942a04780e223b215eb8b663cf5353);cacheFrontend::getInstance()->saveSql($v59f8ce5cb01404063bd7eb308df3b7dc['count'], $vef5714e0519bfaa645cdff7d28843b70->count);return $vef5714e0519bfaa645cdff7d28843b70->count;}else {return false;}}public static function parseSelection(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content = false;$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy = $vef5714e0519bfaa645cdff7d28843b70->getForceCond();$vef5714e0519bfaa645cdff7d28843b70->sql_cond__domain_ignored = $vef5714e0519bfaa645cdff7d28843b70->getIsDomainIgnored();$vef5714e0519bfaa645cdff7d28843b70->sql_cond__lang_ignored = $vef5714e0519bfaa645cdff7d28843b70->getIsLangIgnored();$vef5714e0519bfaa645cdff7d28843b70->sql_cond__total_joins = 0;$vef5714e0519bfaa645cdff7d28843b70->sql_cond__content_tables_loaded = 0;$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_mark_used_fields = array();$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part = array();$vef5714e0519bfaa645cdff7d28843b70->sql_part__hierarchy = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__element_type = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__object_type = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__owner = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__objects = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__elements = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__props_and_names = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__lang_cond = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__unactive_cond = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms_tables = "";$vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables = "";$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct = "";$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct_count = "";$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_straight_join = "";$vef5714e0519bfaa645cdff7d28843b70->sql_select_expr = "";$vef5714e0519bfaa645cdff7d28843b70->sql_table_references = "";$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required = "";$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_common = "";$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_additional = "";$vef5714e0519bfaa645cdff7d28843b70->sql_order_by = "";$vef5714e0519bfaa645cdff7d28843b70->sql_limit = "";self::makeLimitPart($vef5714e0519bfaa645cdff7d28843b70);self::makeHierarchyPart($vef5714e0519bfaa645cdff7d28843b70);self::makeElementTypePart($vef5714e0519bfaa645cdff7d28843b70);self::makeOwnerPart($vef5714e0519bfaa645cdff7d28843b70);self::makeObjectsPart($vef5714e0519bfaa645cdff7d28843b70);self::makeElementsPart($vef5714e0519bfaa645cdff7d28843b70);self::makePermsParts($vef5714e0519bfaa645cdff7d28843b70);self::makePropPart($vef5714e0519bfaa645cdff7d28843b70);self::makeObjectTypePart($vef5714e0519bfaa645cdff7d28843b70);self::makeOrderPart($vef5714e0519bfaa645cdff7d28843b70);self::makeNamesPart($vef5714e0519bfaa645cdff7d28843b70);self::makePropsAndNames($vef5714e0519bfaa645cdff7d28843b70);self::makeHierarchySpecificConds($vef5714e0519bfaa645cdff7d28843b70);if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__total_joins >= 59) {return Array("result" => false, "count" => false);}self::makeDistinctKeywords($vef5714e0519bfaa645cdff7d28843b70);self::makeStraitJoinKeyword($vef5714e0519bfaa645cdff7d28843b70);self::makeSelectExpr($vef5714e0519bfaa645cdff7d28843b70);self::makeTables($vef5714e0519bfaa645cdff7d28843b70);self::makeWhereConditions($vef5714e0519bfaa645cdff7d28843b70);$v1126b3d9572018ac34b2e234c00dc2c3 = "";$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vef5714e0519bfaa645cdff7d28843b70->usedContentTables);if($v7dabf5c198b0bab2eaa42bb03a113e55 > 1) {for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55 - 1;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v43b5c9175984c071f30b873fdce0a000 = $vef5714e0519bfaa645cdff7d28843b70->usedContentTables[$v865c0c0b4ab0e063e5caa3387c1a8741];$vd0cab90d8d20d57e2f2b9be52f7dd25d = $vef5714e0519bfaa645cdff7d28843b70->usedContentTables[$v865c0c0b4ab0e063e5caa3387c1a8741 + 1];$v1126b3d9572018ac34b2e234c00dc2c3 .= " AND {$v43b5c9175984c071f30b873fdce0a000}.obj_id = {$vd0cab90d8d20d57e2f2b9be52f7dd25d}.obj_id";}}$v16efe07aeec5bc36c29c1116370aaf55 = "";if(defined("DISABLE_CALC_FOUND_ROWS")) {if(DISABLE_CALC_FOUND_ROWS) {$v16efe07aeec5bc36c29c1116370aaf55 = "SQL_CALC_FOUND_ROWS";}}if($vef5714e0519bfaa645cdff7d28843b70->sql_part__perms_tables) {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct = "";$vef5714e0519bfaa645cdff7d28843b70->sql_group_by = " GROUP BY h.id";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_group_by = "";}$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
				SELECT {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_straight_join} {$v16efe07aeec5bc36c29c1116370aaf55} SQL_CACHE {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_select_expr}
				FROM
					{$vef5714e0519bfaa645cdff7d28843b70->sql_table_references}
				WHERE
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_common}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_additional}
					{$v1126b3d9572018ac34b2e234c00dc2c3}
				{$vef5714e0519bfaa645cdff7d28843b70->sql_group_by}
				{$vef5714e0519bfaa645cdff7d28843b70->sql_order_by}
				{$vef5714e0519bfaa645cdff7d28843b70->sql_limit}
SQL;   $vc89ab23398f486d0df6dc8ad44ae1d4c = <<<SQL
				SELECT {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_straight_join} SQL_CACHE 
					COUNT({$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct_count}{$vef5714e0519bfaa645cdff7d28843b70->sql_select_count_expr})
				FROM
					{$vef5714e0519bfaa645cdff7d28843b70->sql_table_references}
				WHERE
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_common}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_additional}
					{$v1126b3d9572018ac34b2e234c00dc2c3}
SQL;   if($vef5714e0519bfaa645cdff7d28843b70->optimize_root_search_query   && sizeof($vef5714e0519bfaa645cdff7d28843b70->getElementTypeConds())   && !sizeof(array_positive_values($vef5714e0519bfaa645cdff7d28843b70->getHierarchyConds()))) {$vca7adb9881c5ed53066501aa82aae638 = implode(", ", $vef5714e0519bfaa645cdff7d28843b70->getElementTypeConds());if($vef5714e0519bfaa645cdff7d28843b70->sql_table_references) {$vef5714e0519bfaa645cdff7d28843b70->sql_table_references = "," . $vef5714e0519bfaa645cdff7d28843b70->sql_table_references;}if($vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required) {$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required = " AND " . $vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required;}$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT DISTINCT h.id 
	FROM cms3_hierarchy hp 
		{$vef5714e0519bfaa645cdff7d28843b70->sql_table_references}
		WHERE h.type_id IN ({$vca7adb9881c5ed53066501aa82aae638}) 
			AND (h.rel = 0 OR (h.rel = hp.id AND hp.type_id NOT IN ({$vca7adb9881c5ed53066501aa82aae638}))) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond} {$vef5714e0519bfaa645cdff7d28843b70->sql_part__lang_cond} 
			AND h.is_deleted = '0' 
			{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required}
			{$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_common}
				{$vef5714e0519bfaa645cdff7d28843b70->sql_order_by}
				{$vef5714e0519bfaa645cdff7d28843b70->sql_limit}
SQL;    $vc89ab23398f486d0df6dc8ad44ae1d4c = <<<SQL
SELECT COUNT(DISTINCT h.id) FROM cms3_hierarchy h, cms3_hierarchy hp WHERE h.type_id IN ({$vca7adb9881c5ed53066501aa82aae638}) AND (h.rel = 0 OR (h.rel = hp.id AND hp.type_id NOT IN ({$vca7adb9881c5ed53066501aa82aae638}))) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond} {$vef5714e0519bfaa645cdff7d28843b70->sql_part__lang_cond} AND h.is_deleted = '0'
SQL;   }return array(    'result' => $vac5c74b64b4b8352ef2f181affb5ac2a,    'count' => $vc89ab23398f486d0df6dc8ad44ae1d4c   );}private static function makeDistinctKeywords(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct = '';$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct_count = '';if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content || ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy && $vef5714e0519bfaa645cdff7d28843b70->sql_part__perms)) {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct = ' DISTINCT';$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_distinct_count = 'DISTINCT ';}}private static function makeStraitJoinKeyword(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__total_joins > 3) {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_straight_join = "STRAIGHT_JOIN";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_kwd_straight_join = "";}}private static function makeSelectExpr(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy) {if($vef5714e0519bfaa645cdff7d28843b70->sql_part__perms_tables) {$vef5714e0519bfaa645cdff7d28843b70->sql_select_expr = "h.id, MAX(c3p.level)";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_select_expr = "h.id";}$vef5714e0519bfaa645cdff7d28843b70->sql_select_count_expr = "h.id";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_select_expr = "o.id";$vef5714e0519bfaa645cdff7d28843b70->sql_select_count_expr = "o.id";}}private static function makeTables(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$v3e4e493f22840daa9ac1724a72ab3e69 = '';if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content) {$v3e4e493f22840daa9ac1724a72ab3e69 = $vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables;}if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy) {if($vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables || $vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired) {$ve73bcc9cfc2941d6e1afe96205af0d0e = "cms3_objects o,";}else {$ve73bcc9cfc2941d6e1afe96205af0d0e = "";}$vef5714e0519bfaa645cdff7d28843b70->sql_table_references .= <<<SQL
					{$ve73bcc9cfc2941d6e1afe96205af0d0e}
					cms3_hierarchy h
					{$v3e4e493f22840daa9ac1724a72ab3e69}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms_tables}
SQL;   }else {$vef5714e0519bfaa645cdff7d28843b70->sql_table_references .= <<<SQL
					cms3_objects o
					{$v3e4e493f22840daa9ac1724a72ab3e69}
SQL;   }}private static function makeWhereConditions(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if($vef5714e0519bfaa645cdff7d28843b70->sql_part__owner) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__owner = " AND " . $vef5714e0519bfaa645cdff7d28843b70->sql_part__owner;}$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_common = <<<SQL
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__object_type}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__props_and_names}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__owner}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__objects}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__elements}
SQL;   if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy) {if($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy     && !$vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables     && !$vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired) {$v0e2dd3565df1bb7b04bb23eee21bef0b = "";}else {$v0e2dd3565df1bb7b04bb23eee21bef0b = "h.obj_id = o.id AND ";}$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required = <<<SQL
					{$v0e2dd3565df1bb7b04bb23eee21bef0b}
					h.is_deleted = '0'
SQL;    $vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_additional = <<<SQL
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__hierarchy}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__unactive_cond}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__element_type}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__lang_cond}
					{$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond}
SQL;   }else {$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_required = "1";$vef5714e0519bfaa645cdff7d28843b70->sql_where_condition_additional = "";}}private static function makeLimitPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vef5714e0519bfaa645cdff7d28843b70->sql_limit = "";$v4db7515c8b18fa48e815e443f5783196 = $vef5714e0519bfaa645cdff7d28843b70->getLimitConds();if ($v4db7515c8b18fa48e815e443f5783196 !== false) {if (is_array($v4db7515c8b18fa48e815e443f5783196) && count($v4db7515c8b18fa48e815e443f5783196) > 1 && is_numeric($v4db7515c8b18fa48e815e443f5783196[0]) && is_numeric($v4db7515c8b18fa48e815e443f5783196[1])) {$vee00b4dd5a72dccc8a3bf821a0854ef9 = intval($v4db7515c8b18fa48e815e443f5783196[0]);$vac588e91956d2ecbac36ea0c4f3dceec = intval($v4db7515c8b18fa48e815e443f5783196[1]);$vf4a0ecf68633a2a8d8bbc8a44a5c8829 = $vac588e91956d2ecbac36ea0c4f3dceec * $vee00b4dd5a72dccc8a3bf821a0854ef9;$vef5714e0519bfaa645cdff7d28843b70->sql_limit = " LIMIT ".$vf4a0ecf68633a2a8d8bbc8a44a5c8829.", ".$vee00b4dd5a72dccc8a3bf821a0854ef9;}}return $vef5714e0519bfaa645cdff7d28843b70->sql_limit;}private static function makeHierarchyPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$v09e7a2bb896092bc4abe376dc931f83e = $vef5714e0519bfaa645cdff7d28843b70->getHierarchyConds();if (!empty($v09e7a2bb896092bc4abe376dc931f83e)) {$v32ba5dc8b093c913a929cf77b2fe5679 = 0;$v71f3d1a6a90fada957aea649a871d420 = 0;$v6b31ca7a6d10b4f4bdf4bcf1d2e27244 = Array();foreach($v09e7a2bb896092bc4abe376dc931f83e as $v50e7514e30aa173cb1278b26505e79bb) {list($vbfa030fe63bacd523dd70a76cfaed98a, $v12a055bf01a31369fe81ac35d85c7bc1) = $v50e7514e30aa173cb1278b26505e79bb;if($vbfa030fe63bacd523dd70a76cfaed98a == 0) {$v32ba5dc8b093c913a929cf77b2fe5679++;--$v12a055bf01a31369fe81ac35d85c7bc1;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT level FROM cms3_hierarchy_relations WHERE child_id = {$vbfa030fe63bacd523dd70a76cfaed98a}";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}list($vc9e9a848920877e76685b2e4e76de38d) = mysql_fetch_row($result);$v131eec2e3a1c0cebac938273907d5290 = ($vbfa030fe63bacd523dd70a76cfaed98a > 0) ? "hr.rel_id = '{$vbfa030fe63bacd523dd70a76cfaed98a}'" : "hr.rel_id IS NULL";if($v71f3d1a6a90fada957aea649a871d420 == 0) {$vef5714e0519bfaa645cdff7d28843b70->sql_table_references .= "cms3_hierarchy_relations hr, ";$v71f3d1a6a90fada957aea649a871d420++;}$vb81e229503292fbbcb3ff39f8fb2ce76 = $v12a055bf01a31369fe81ac35d85c7bc1 + $vc9e9a848920877e76685b2e4e76de38d + 1;$v6b31ca7a6d10b4f4bdf4bcf1d2e27244[] = <<<SQL
hr.child_id = h.id AND ({$v131eec2e3a1c0cebac938273907d5290} AND hr.level <= '{$vb81e229503292fbbcb3ff39f8fb2ce76}')
SQL;    }if(sizeof($v6b31ca7a6d10b4f4bdf4bcf1d2e27244) > 0) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__hierarchy .= " AND ((" . implode(") OR (", $v6b31ca7a6d10b4f4bdf4bcf1d2e27244) . ")) ";}$vef5714e0519bfaa645cdff7d28843b70->sql_cond__domain_ignored = ($v32ba5dc8b093c913a929cf77b2fe5679) ? false : true;$vef5714e0519bfaa645cdff7d28843b70->sql_cond__lang_ignored = ($v32ba5dc8b093c913a929cf77b2fe5679) ? false : true;$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy = true;if(sizeof($v09e7a2bb896092bc4abe376dc931f83e) == 1) {if($v09e7a2bb896092bc4abe376dc931f83e[0] != 0) {$vef5714e0519bfaa645cdff7d28843b70->sql_cond_auto_domain = true;}}else {$vef5714e0519bfaa645cdff7d28843b70->sql_cond_auto_domain = true;}}}private static function makeElementTypePart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vf39b5a31bc0c51db0171da81d3523763 = $vef5714e0519bfaa645cdff7d28843b70->getElementTypeConds();if ($vf39b5a31bc0c51db0171da81d3523763 && count($vf39b5a31bc0c51db0171da81d3523763)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__element_type = " AND h.type_id IN ('".implode("', '", $vf39b5a31bc0c51db0171da81d3523763)."')";$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy = true;}}private static function makeOwnerPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vf14994e23e2f95ddcfe1f7db4b8c2837 = $vef5714e0519bfaa645cdff7d28843b70->getOwnerConds();if (is_array($vf14994e23e2f95ddcfe1f7db4b8c2837) && count($vf14994e23e2f95ddcfe1f7db4b8c2837)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__owner = " o.owner_id IN ('".implode("', '", $vf14994e23e2f95ddcfe1f7db4b8c2837)."')";}}private static function makeObjectsPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vcf7ed7a30bdebabccdfa6099ba7df387 = $vef5714e0519bfaa645cdff7d28843b70->getObjectsConds();if (is_array($vcf7ed7a30bdebabccdfa6099ba7df387) && count($vcf7ed7a30bdebabccdfa6099ba7df387)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__objects = " AND o.id IN ('".implode("', '", $vcf7ed7a30bdebabccdfa6099ba7df387)."')";}}private static function makeElementsPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$v08ad7524bd80c27d5ec900b7d03a0820 = $vef5714e0519bfaa645cdff7d28843b70->getElementsConds();if (is_array($v08ad7524bd80c27d5ec900b7d03a0820) && count($v08ad7524bd80c27d5ec900b7d03a0820)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__elements = " AND h.id IN ('".implode("', '", $v08ad7524bd80c27d5ec900b7d03a0820)."')";$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy = true;}}private static function makePermsParts(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if ($v077e247dd24fb5f2092caa5b6ecd4404 = $vef5714e0519bfaa645cdff7d28843b70->getPermissionsConds()) {$v077e247dd24fb5f2092caa5b6ecd4404[] = 2373;if ($v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v077e247dd24fb5f2092caa5b6ecd4404)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms_tables = ",cms3_permissions c3p";$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy = true;$v61b9295e93e2ba331ea1e6f1b79f459d = $vef5714e0519bfaa645cdff7d28843b70->getRequiredPermissionsLevel();for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms .= ($v865c0c0b4ab0e063e5caa3387c1a8741 === 0 ? " AND (" : "");$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms .= "(c3p.owner_id = '".$v077e247dd24fb5f2092caa5b6ecd4404[$v865c0c0b4ab0e063e5caa3387c1a8741]."' AND c3p.rel_id = h.id AND c3p.level >= '{$v61b9295e93e2ba331ea1e6f1b79f459d}')";$vef5714e0519bfaa645cdff7d28843b70->sql_part__perms .= ($v865c0c0b4ab0e063e5caa3387c1a8741 === ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1) ? ")" : " OR ");}}}}private static function makePropPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if($v23182694bce9f52758fbab174a0b3607 = $vef5714e0519bfaa645cdff7d28843b70->getSearchStrings()) {$v80071f37861c360a27b7327e132c911a = "cms3_object_content";$v6a7f245843454cf4f28ad7c5e2572aa2 = $vef5714e0519bfaa645cdff7d28843b70->getHierarchyConds();$v6a7f245843454cf4f28ad7c5e2572aa2 = array_extract_values($v6a7f245843454cf4f28ad7c5e2572aa2);if(sizeof($v6a7f245843454cf4f28ad7c5e2572aa2)) {$v6301cee35ea764a1e241978f93f01069 = umiHierarchy::getInstance()->getDominantTypeId(array_pop($v6a7f245843454cf4f28ad7c5e2572aa2));$v80071f37861c360a27b7327e132c911a = umiBranch::getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069);}else {$vd14a8022b085f9ef19d479cbdd581127 = $vef5714e0519bfaa645cdff7d28843b70->getElementTypeConds();if(is_array($vd14a8022b085f9ef19d479cbdd581127) && sizeof($vd14a8022b085f9ef19d479cbdd581127)) {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = array_pop($vd14a8022b085f9ef19d479cbdd581127);if($vacf567c9c3d6cf7c6e2cc0ce108e0631 == 21 && sizeof($vd14a8022b085f9ef19d479cbdd581127)) {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = array_pop($vd14a8022b085f9ef19d479cbdd581127);}if(umiBranch::checkIfBranchedByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631)) {$v80071f37861c360a27b7327e132c911a .= "_" . $vacf567c9c3d6cf7c6e2cc0ce108e0631;}}}$v056301054c43f8bbea2090debfec16b1 = "ct";$vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables .= ", {$v80071f37861c360a27b7327e132c911a} {$v056301054c43f8bbea2090debfec16b1}";$vef5714e0519bfaa645cdff7d28843b70->usedContentTables[] = $v056301054c43f8bbea2090debfec16b1;$ve1043d63313a1b59f16fe608277bc9a7 = self::getFileFields();if(sizeof($ve1043d63313a1b59f16fe608277bc9a7) > 0) {$vd60fb1b18e68fb7029b3ef48c9a18834 = " AND ct.field_id NOT IN (" . implode(", ", $ve1043d63313a1b59f16fe608277bc9a7) . ")";}else {$vd60fb1b18e68fb7029b3ef48c9a18834 = "";}$v4ab5dfe1c68b36d1aa7d5f8d9cde73bc = Array();foreach($v23182694bce9f52758fbab174a0b3607 as $v597a51f04d341eba4ca965899acc10b3) {$v597a51f04d341eba4ca965899acc10b3 = mysql_real_escape_string($v597a51f04d341eba4ca965899acc10b3);$v4439237446062bd0268640161c6a6bc3 = (is_numeric($v597a51f04d341eba4ca965899acc10b3)) ? " OR ct.float_val = '{$v597a51f04d341eba4ca965899acc10b3}' OR ct.int_val = '{$v597a51f04d341eba4ca965899acc10b3}'" : "";$v4ab5dfe1c68b36d1aa7d5f8d9cde73bc[] = "o.name LIKE '%{$v597a51f04d341eba4ca965899acc10b3}%' OR ct.varchar_val LIKE '%{$v597a51f04d341eba4ca965899acc10b3}%' OR ct.text_val LIKE '%{$v597a51f04d341eba4ca965899acc10b3}%' {$v4439237446062bd0268640161c6a6bc3}" . $vd60fb1b18e68fb7029b3ef48c9a18834;}$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where'][] = "ct.obj_id = o.id AND (" . implode(" OR ", $v4ab5dfe1c68b36d1aa7d5f8d9cde73bc) . ")";$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content = true;}if ($vc25b09274ac632224f348e21022a7106 = $vef5714e0519bfaa645cdff7d28843b70->getPropertyConds()) {$v47ec37bbecbabe9f73c2d0056e5cb796 = array();foreach ($vc25b09274ac632224f348e21022a7106 as $v7f8b41bdd7c22fc431a0314de4595025) {if ($v7f8b41bdd7c22fc431a0314de4595025['type'] !== false) $v47ec37bbecbabe9f73c2d0056e5cb796[] = $v7f8b41bdd7c22fc431a0314de4595025;}unset($vc25b09274ac632224f348e21022a7106);if ($v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v47ec37bbecbabe9f73c2d0056e5cb796)) {$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if (!$vef5714e0519bfaa645cdff7d28843b70->getConditionModeOr() || $vef5714e0519bfaa645cdff7d28843b70->sql_cond__content_tables_loaded == 0) {$v056301054c43f8bbea2090debfec16b1 = "c" . (++$vef5714e0519bfaa645cdff7d28843b70->sql_cond__content_tables_loaded);$v80071f37861c360a27b7327e132c911a = self::chooseContentTableName($vef5714e0519bfaa645cdff7d28843b70, $v47ec37bbecbabe9f73c2d0056e5cb796[$v865c0c0b4ab0e063e5caa3387c1a8741]['field_id']);$vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables .= ", {$v80071f37861c360a27b7327e132c911a} {$v056301054c43f8bbea2090debfec16b1}";$vef5714e0519bfaa645cdff7d28843b70->usedContentTables[] = $v056301054c43f8bbea2090debfec16b1;}$v5cba202deaa7e9f47bd0317cf014c64b = $v47ec37bbecbabe9f73c2d0056e5cb796[$v865c0c0b4ab0e063e5caa3387c1a8741];$vf642bf0e4102797f994548b9f4ee9e4a = (isset($v5cba202deaa7e9f47bd0317cf014c64b['filter_type']) ? $v5cba202deaa7e9f47bd0317cf014c64b['filter_type'] : '');$v01aaeba75d696598feafcb0226fdb7e9 = (isset($v5cba202deaa7e9f47bd0317cf014c64b['value']) ? $v5cba202deaa7e9f47bd0317cf014c64b['value'] : null);$v0f728ec6147eaec54f5f45e37bce8ddd = (isset($v5cba202deaa7e9f47bd0317cf014c64b['field_id']) ? $v5cba202deaa7e9f47bd0317cf014c64b['field_id'] : 0);$v1abd88b57ac7e290b6c91d26b0909006 = (isset($v5cba202deaa7e9f47bd0317cf014c64b['type']) ? $v5cba202deaa7e9f47bd0317cf014c64b['type'] : '');$v64df937f321ebd648bc77b99cf76cb38 = $v056301054c43f8bbea2090debfec16b1.".obj_id = o.id AND ".$v056301054c43f8bbea2090debfec16b1.".field_id = '".$v0f728ec6147eaec54f5f45e37bce8ddd."'";$v4cdef984848c418ea8a3c646e5852e32 = $v056301054c43f8bbea2090debfec16b1.".".$v1abd88b57ac7e290b6c91d26b0909006;switch ($vf642bf0e4102797f994548b9f4ee9e4a) {case 'equal':         if (!is_array($v01aaeba75d696598feafcb0226fdb7e9)) $v01aaeba75d696598feafcb0226fdb7e9 = array($v01aaeba75d696598feafcb0226fdb7e9);$v3a0317e07571e01889f5f6982960cc2a = "'".(implode("', '", array_map('mysql_real_escape_string', $v01aaeba75d696598feafcb0226fdb7e9)))."'";$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND (".$v4cdef984848c418ea8a3c646e5852e32." IN (".$v3a0317e07571e01889f5f6982960cc2a.")))";break;case 'not_equal':         if (!is_array($v01aaeba75d696598feafcb0226fdb7e9)) $v01aaeba75d696598feafcb0226fdb7e9 = array($v01aaeba75d696598feafcb0226fdb7e9);$v3a0317e07571e01889f5f6982960cc2a = "'".(implode("', '", array_map('mysql_real_escape_string', $v01aaeba75d696598feafcb0226fdb7e9)))."'";$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ((".$v4cdef984848c418ea8a3c646e5852e32." IS NULL) OR (".$v4cdef984848c418ea8a3c646e5852e32." NOT IN (".$v3a0317e07571e01889f5f6982960cc2a."))))";break;case 'like':         $vb6c8416e95a754076b10d65d1afd3fa9 = true;if (substr($v01aaeba75d696598feafcb0226fdb7e9, 0, 1) === '%' || substr($v01aaeba75d696598feafcb0226fdb7e9, -1) === '%') $vb6c8416e95a754076b10d65d1afd3fa9 = false;$vf578b860df8544c8f826f66977b6e908 = mysql_real_escape_string($v01aaeba75d696598feafcb0226fdb7e9);$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." LIKE '".($vb6c8416e95a754076b10d65d1afd3fa9 ? "%" : "").$vf578b860df8544c8f826f66977b6e908.($vb6c8416e95a754076b10d65d1afd3fa9 ? "%" : "")."')";break;case 'between':         $v17fdfd1db155ff501f9553066c50cdab = (isset($v5cba202deaa7e9f47bd0317cf014c64b['min']) ? floatval($v5cba202deaa7e9f47bd0317cf014c64b['min']) : 0);$v3a86ffe4f7adcc1fe1457ada5ec034b0 = (isset($v5cba202deaa7e9f47bd0317cf014c64b['max']) ? floatval($v5cba202deaa7e9f47bd0317cf014c64b['max']) : 0);$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." BETWEEN '".$v17fdfd1db155ff501f9553066c50cdab."' AND '".$v3a86ffe4f7adcc1fe1457ada5ec034b0."')";break;case 'more':         $v6ec037ff2ad4d8e71e8a10efa0ba90ba = floatval($v01aaeba75d696598feafcb0226fdb7e9);$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." >= '".$v6ec037ff2ad4d8e71e8a10efa0ba90ba."')";break;case 'less':         $v6ec037ff2ad4d8e71e8a10efa0ba90ba = floatval($v01aaeba75d696598feafcb0226fdb7e9);$vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." <= '".$v6ec037ff2ad4d8e71e8a10efa0ba90ba."')";break;case 'null':        $vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." IS NULL)";break;case 'notnull':        $vf92fcd26dc4ba92f75934707ad0917d9 = "(".$v64df937f321ebd648bc77b99cf76cb38." AND ".$v4cdef984848c418ea8a3c646e5852e32." IS NOT NULL)";break;default:        $vf92fcd26dc4ba92f75934707ad0917d9 = "";break;}if (strlen($vf92fcd26dc4ba92f75934707ad0917d9)) {$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where'][] = $vf92fcd26dc4ba92f75934707ad0917d9;}}if (count($vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part)) {$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content = true;$vef5714e0519bfaa645cdff7d28843b70->sql_cond__total_joins += $v865c0c0b4ab0e063e5caa3387c1a8741;}}}}private static function makeObjectTypePart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vcc186db1b3286c09fd5b1f61c6b78b8c = $vef5714e0519bfaa645cdff7d28843b70->getObjectTypeConds();if ($vcc186db1b3286c09fd5b1f61c6b78b8c && count($vcc186db1b3286c09fd5b1f61c6b78b8c)) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__object_type = " AND o.type_id IN ('".implode("', '", $vcc186db1b3286c09fd5b1f61c6b78b8c)."')";$vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired = true;}}private static function makeOrderPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vc7f62b660bf9e56e6df63ef3d2540a77 = $vef5714e0519bfaa645cdff7d28843b70->getOrderConds();if ($vc7f62b660bf9e56e6df63ef3d2540a77) {$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$vef5714e0519bfaa645cdff7d28843b70->sql_order_by = " ORDER BY ";$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vc7f62b660bf9e56e6df63ef3d2540a77);for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if ($v11537f7c46ecc6ae45e5497ea0aec6bf = $vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['native_field']) {switch($v11537f7c46ecc6ae45e5497ea0aec6bf) {case "name": {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= "o.name " . (($vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['asc']) ? "ASC" : "DESC");$vef5714e0519bfaa645cdff7d28843b70->sql_need_object_table = true;$vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired = true;break;}case "object_id": {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= "o.id " . (($vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['asc']) ? "ASC" : "DESC");$vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired = true;break;}case "rand": {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= "RAND()";break;}case "ord": {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= "h.ord " . (($vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['asc']) ? "ASC" : "DESC");break;}}if ($v865c0c0b4ab0e063e5caa3387c1a8741 !== ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1)) {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= ", ";}}else {$vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_content = true;$v056301054c43f8bbea2090debfec16b1 = "c" . (++$vef5714e0519bfaa645cdff7d28843b70->sql_cond__content_tables_loaded);$v80071f37861c360a27b7327e132c911a = self::chooseContentTableName($vef5714e0519bfaa645cdff7d28843b70, $vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['field_id']);$vef5714e0519bfaa645cdff7d28843b70->sql_part__content_tables .= ", {$v80071f37861c360a27b7327e132c911a} {$v056301054c43f8bbea2090debfec16b1}";$vef5714e0519bfaa645cdff7d28843b70->usedContentTables[] = $v056301054c43f8bbea2090debfec16b1;$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['order'][] = "{$v056301054c43f8bbea2090debfec16b1}.obj_id = o.id AND {$v056301054c43f8bbea2090debfec16b1}.field_id = '{$vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['field_id']}'";$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= "{$v056301054c43f8bbea2090debfec16b1}.{$vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['type']} " . (($vc7f62b660bf9e56e6df63ef3d2540a77[$v865c0c0b4ab0e063e5caa3387c1a8741]['asc']) ? "ASC" : "DESC");if ($v865c0c0b4ab0e063e5caa3387c1a8741 == ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1)) {}else {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by .= ", ";}}}if ($vef5714e0519bfaa645cdff7d28843b70->sql_order_by == " ORDER BY ") {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by = "";}$vef5714e0519bfaa645cdff7d28843b70->sql_cond__total_joins += $v865c0c0b4ab0e063e5caa3387c1a8741;}elseif ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy == true) {$vef5714e0519bfaa645cdff7d28843b70->sql_order_by = " ORDER BY h.ord";}}private static function makeNamesPart(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$v932238d827b73f9a5329f0ee492a6175 = array();if (($v44c20123a4be1d9cc98c2f1c2470598d = $vef5714e0519bfaa645cdff7d28843b70->getNameConds()) && count($v44c20123a4be1d9cc98c2f1c2470598d)) {foreach ($v44c20123a4be1d9cc98c2f1c2470598d as $ve0f38ebd960676b35b7fda2446bff541) {$v056301054c43f8bbea2090debfec16b1 = $ve0f38ebd960676b35b7fda2446bff541['value'];$vb6c8416e95a754076b10d65d1afd3fa9 = true;if (substr($v056301054c43f8bbea2090debfec16b1, 0, 1) === '%' || substr($v056301054c43f8bbea2090debfec16b1, -1) === '%') $vb6c8416e95a754076b10d65d1afd3fa9 = false;$v056301054c43f8bbea2090debfec16b1 = mysql_real_escape_string($v056301054c43f8bbea2090debfec16b1);if ($ve0f38ebd960676b35b7fda2446bff541['type'] == 'exact') {$v932238d827b73f9a5329f0ee492a6175[] = "o.name = '".$v056301054c43f8bbea2090debfec16b1."'";}else {$v932238d827b73f9a5329f0ee492a6175[] = "o.name LIKE '".($vb6c8416e95a754076b10d65d1afd3fa9 ? "%" : "").$v056301054c43f8bbea2090debfec16b1.($vb6c8416e95a754076b10d65d1afd3fa9 ? "%" : "")."'";}$vef5714e0519bfaa645cdff7d28843b70->objectTableIsRequired = true;}}if (count($v932238d827b73f9a5329f0ee492a6175)) {$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where'][] = "(".implode(' OR ', $v932238d827b73f9a5329f0ee492a6175).")";}}private static function makePropsAndNames(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__props_and_names = "";if($vef5714e0519bfaa645cdff7d28843b70->sql_part__owner) {$vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where'][] = $vef5714e0519bfaa645cdff7d28843b70->sql_part__owner;$vef5714e0519bfaa645cdff7d28843b70->sql_part__owner = "";}if (isset($vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where'])) {$v91119290c889cd919565d8b3e0e39560 = ($vef5714e0519bfaa645cdff7d28843b70->getConditionModeOr() ? ' OR ' : ' AND ');$vef5714e0519bfaa645cdff7d28843b70->sql_part__props_and_names = " AND (" . implode($v91119290c889cd919565d8b3e0e39560, $vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['where']) . ")";}if(isset($vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['order'])) {$vef5714e0519bfaa645cdff7d28843b70->sql_part__props_and_names .= " AND (" . implode(" AND ", $vef5714e0519bfaa645cdff7d28843b70->sql_arr_for_and_or_part['order']) . ")";}}private static function makeHierarchySpecificConds(umiSelection $vef5714e0519bfaa645cdff7d28843b70) {if ($vef5714e0519bfaa645cdff7d28843b70->sql_cond__need_hierarchy == true) {{if(!$vef5714e0519bfaa645cdff7d28843b70->sql_cond__lang_ignored) {if(($vf585b7f018bb4ced15a03683a733e50b = $vef5714e0519bfaa645cdff7d28843b70->getLangId()) == false) {$vf585b7f018bb4ced15a03683a733e50b = (int) cmsController::getInstance()->getCurrentLang()->getId();}$vef5714e0519bfaa645cdff7d28843b70->sql_part__lang_cond = " AND h.lang_id = '" . $vf585b7f018bb4ced15a03683a733e50b . "' ";}}if (!$vef5714e0519bfaa645cdff7d28843b70->sql_cond__domain_ignored) {if(($v72ee76c5c29383b7c9f9225c1fa4d10b = $vef5714e0519bfaa645cdff7d28843b70->getDomainId()) == false) {$v72ee76c5c29383b7c9f9225c1fa4d10b = cmsController::getInstance()->getCurrentDomain()->getId();}$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond = " AND h.domain_id = '" . (int) $v72ee76c5c29383b7c9f9225c1fa4d10b . "' ";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_part__domain_cond = "";}if ($vca47c8f843acba03d8a1ba7138319e58 = $vef5714e0519bfaa645cdff7d28843b70->getActiveConds()) {$v4264c638e0098acb172519b0436db099 = (isset($vca47c8f843acba03d8a1ba7138319e58[0]) && (bool) $vca47c8f843acba03d8a1ba7138319e58[0])? 1 : 0;$vef5714e0519bfaa645cdff7d28843b70->sql_part__unactive_cond = " AND h.is_active = '".$v4264c638e0098acb172519b0436db099."' ";}else {$vef5714e0519bfaa645cdff7d28843b70->sql_part__unactive_cond = (cmsController::getInstance()->getCurrentMode() == "") ? " AND h.is_active = '1' " : "";}}}protected static function chooseContentTableName(umiSelection $vef5714e0519bfaa645cdff7d28843b70, $v945100186b119048837b9859c2c46410) {$v6942e8fa62b3cc9d93881a58210e2fd7 = $vef5714e0519bfaa645cdff7d28843b70->getElementTypeConds();$v0e8133eb006c0f85ed9444ae07a60842 = $vef5714e0519bfaa645cdff7d28843b70->getObjectTypeConds();if(!is_array($v6942e8fa62b3cc9d93881a58210e2fd7)) {$v6942e8fa62b3cc9d93881a58210e2fd7 = Array();}else {$v6942e8fa62b3cc9d93881a58210e2fd7 = array_extract_values($v6942e8fa62b3cc9d93881a58210e2fd7);}if(!is_array($v0e8133eb006c0f85ed9444ae07a60842)) {$v0e8133eb006c0f85ed9444ae07a60842 = Array();}else {$v0e8133eb006c0f85ed9444ae07a60842 = array_extract_values($v0e8133eb006c0f85ed9444ae07a60842);}if(sizeof($v6942e8fa62b3cc9d93881a58210e2fd7) == 1) {reset($v6942e8fa62b3cc9d93881a58210e2fd7);$vacf567c9c3d6cf7c6e2cc0ce108e0631 = current($v6942e8fa62b3cc9d93881a58210e2fd7);$v4aa3988e15afb9618423a0c2961a469f = umiBranch::checkIfBranchedByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631);return $v4aa3988e15afb9618423a0c2961a469f ? "cms3_object_content_{$vacf567c9c3d6cf7c6e2cc0ce108e0631}" : "cms3_object_content";}if(sizeof($v6942e8fa62b3cc9d93881a58210e2fd7) > 1) {$v6301cee35ea764a1e241978f93f01069 = self::getObjectTypeByFieldId($v945100186b119048837b9859c2c46410);return umiBranch::getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069);}if(sizeof($v6942e8fa62b3cc9d93881a58210e2fd7) == 0) {if(sizeof($v0e8133eb006c0f85ed9444ae07a60842) == 1) {reset($v0e8133eb006c0f85ed9444ae07a60842);$v6301cee35ea764a1e241978f93f01069 = current($v0e8133eb006c0f85ed9444ae07a60842);}else {$v6301cee35ea764a1e241978f93f01069 = self::getObjectTypeByFieldId($v945100186b119048837b9859c2c46410);}return umiBranch::getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069);}return "cms3_object_content";}public static function getObjectTypeByFieldId($v945100186b119048837b9859c2c46410) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v945100186b119048837b9859c2c46410 = (int) $v945100186b119048837b9859c2c46410;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v945100186b119048837b9859c2c46410])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v945100186b119048837b9859c2c46410];}$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT SQL_CACHE MIN(fg.type_id)
	FROM cms3_fields_controller fc, cms3_object_field_groups fg
	WHERE fc.field_id = {$v945100186b119048837b9859c2c46410} AND fg.id = fc.group_id
SQL;   if($v6301cee35ea764a1e241978f93f01069 = cacheFrontend::getInstance()->loadSql($vac5c74b64b4b8352ef2f181affb5ac2a)) {return $v0fea6a13c52b4d4725368f24b045ca84[$v945100186b119048837b9859c2c46410] = $v6301cee35ea764a1e241978f93f01069;}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}if(mysql_num_rows($result)) {list($v6301cee35ea764a1e241978f93f01069) = mysql_fetch_row($result);}else {$v6301cee35ea764a1e241978f93f01069 = false;}$v0fea6a13c52b4d4725368f24b045ca84[$v945100186b119048837b9859c2c46410] = $v6301cee35ea764a1e241978f93f01069;cacheFrontend::getInstance()->saveSql($vac5c74b64b4b8352ef2f181affb5ac2a, $v6301cee35ea764a1e241978f93f01069, 60);return $v6301cee35ea764a1e241978f93f01069;}protected static function excludeNestedPages($v47c80780ab608cc046f2a6e6f071feb6) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$result = Array();foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v7552cd149af7495ee7d8225974e50f80) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7552cd149af7495ee7d8225974e50f80);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {if(in_array($v8e2dcfd7e7e24b1ca76c1193f645902b->getRel(), $v47c80780ab608cc046f2a6e6f071feb6)) {continue;}else {$result[] = $v7552cd149af7495ee7d8225974e50f80;}}}return $result;}protected static function getFileFields() {static $v0fea6a13c52b4d4725368f24b045ca84 = false;if($v0fea6a13c52b4d4725368f24b045ca84) return $v0fea6a13c52b4d4725368f24b045ca84;$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT of.id 
	FROM cms3_object_fields of, cms3_object_field_types oft
		WHERE of.field_type_id = oft.id 
		AND oft.data_type IN ('file', 'img_file', 'swf_file')
SQL;   $result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($v945100186b119048837b9859c2c46410) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = $v945100186b119048837b9859c2c46410;}return $v0fea6a13c52b4d4725368f24b045ca84 = $v9b207167e5381c47682c6b4f58a623fb;}};interface iUmiFieldType {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getIsMultiple();public function setIsMultiple($v09ec737a9ab66d1d796304239d3f8a86);public function getIsUnsigned();public function setIsUnsigned($va4e397efa082dcccc62563f1f2d9513b);public function getDataType();public function setDataType($v81a1cd8f514ff6c93ddd4c3cb201130e);public static function getDataTypes();public static function getDataTypeDB($v870b60148237c1452dfb337fdd19c314);public static function isValidDataType($v81a1cd8f514ff6c93ddd4c3cb201130e);}class umiFieldType extends umiEntinty implements iUmiEntinty, iUmiFieldType {private $name, $data_type, $is_multiple = false, $is_unsigned = false;protected $store_type = "field_type";public function getName() {return $this->translateLabel($this->name);}public function getIsMultiple() {return $this->is_multiple;}public function getIsUnsigned() {return $this->is_unsigned;}public function getDataType() {return $this->data_type;}public static function getDataTypes() {return   Array (    "int",    "string",    "text",    "relation",    "file",    "img_file",    "swf_file",    "date",    "boolean",    "wysiwyg",    "password",    "tags",    "symlink",    "price",    "formula",    "float"    );}public static function getDataTypeDB($v17f71d965fe9589ddbd11caf7182243e) {$v48908871a0d20dd2e5bd0a3d634ac745 = Array (    "int"  => "int_val",    "string" => "varchar_val",    "text"  => "text_val",    "relation" => "rel_val",    "file"  => "text_val",    "img_file" => "text_val",    "swf_file" => "text_val",    "date"  => "int_val",    "boolean" => "int_val",    "wysiwyg" => "text_val",    "password" => "varchar_val",    "tags"  => "varchar_val",    "symlink" => "tree_val",    "price"  => "float_val",    "formula" => "varchar_val",    "float"  => "float_val"    );if(array_key_exists($v17f71d965fe9589ddbd11caf7182243e, $v48908871a0d20dd2e5bd0a3d634ac745) === false) {return false;}else {return $v48908871a0d20dd2e5bd0a3d634ac745[$v17f71d965fe9589ddbd11caf7182243e];}}public static function isValidDataType($v17f71d965fe9589ddbd11caf7182243e) {return in_array($v17f71d965fe9589ddbd11caf7182243e, self::getDataTypes());}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297, "field-type-");$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function setIsMultiple($v96a76ec43956dac431b643cbd544dd08) {$this->is_multiple = (bool) $v96a76ec43956dac431b643cbd544dd08;$this->setIsUpdated();}public function setIsUnsigned($vf089d93c2ef0d088edadddb0028d548d) {$this->is_unsigned = (bool) $vf089d93c2ef0d088edadddb0028d548d;$this->setIsUpdated();}public function setDataType($v17f71d965fe9589ddbd11caf7182243e) {if(self::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {$this->data_type = $v17f71d965fe9589ddbd11caf7182243e;$this->setIsUpdated();return true;}else {return false;}}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, data_type, is_multiple, is_unsigned FROM cms3_object_field_types WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $v17f71d965fe9589ddbd11caf7182243e, $v96a76ec43956dac431b643cbd544dd08, $vf089d93c2ef0d088edadddb0028d548d) = $vf1965a857bc285d26fe22023aa5ab50d) {if(!self::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {throw new coreException("Wrong data type given for filed type #{$this->id}");return false;}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->data_type = $v17f71d965fe9589ddbd11caf7182243e;$this->is_multiple= (bool) $v96a76ec43956dac431b643cbd544dd08;$this->is_unsigned = (bool) $vf089d93c2ef0d088edadddb0028d548d;return true;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = mysql_real_escape_string($this->name);$v17f71d965fe9589ddbd11caf7182243e = mysql_real_escape_string($this->data_type);$v96a76ec43956dac431b643cbd544dd08 = (int) $this->is_multiple;$vf089d93c2ef0d088edadddb0028d548d = (int) $this->is_unsigned;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_field_types SET name = '{$vb068931cc450442b63f5b3d276ea4297}', data_type = '{$v17f71d965fe9589ddbd11caf7182243e}', is_multiple = '{$v96a76ec43956dac431b643cbd544dd08}', is_unsigned = '{$vf089d93c2ef0d088edadddb0028d548d}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);cacheFrontend::getInstance()->flush();if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}}interface iUmiField {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getIsInheritable();public function setIsInheritable($v55e0eccc570671ca7ba7f5ef4ded0b96);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024);public function getFieldTypeId();public function setFieldTypeId($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldType();public function getGuideId();public function setGuideId($v52eb29c6d8ea0d3a5bb3654f49bbd7c7);public function getIsInSearch();public function setIsInSearch($va757dc717a4486487d21b4aba6f32740);public function getIsInFilter();public function setIsInFilter($v9a4b912ee7e6ea85cbecbe8fe5994ea2);public function getTip();public function setTip($v6a2139364f96787c8ce1bbb0070b898c);public function getIsRequired();public function setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69 = false);}class umiField extends umiEntinty implements iUmiEntinty, iUmiField {private $name, $title, $is_locked = false, $is_inheritable = false, $is_visible = true, $field_type_id, $guide_id, $isRequired;private $is_in_search = true, $is_in_filter = true, $tip = NULL;protected $store_type = "field";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getIsLocked() {return $this->is_locked;}public function getIsInheritable() {return $this->is_inheritable;}public function getIsVisible() {return $this->is_visible;}public function getFieldTypeId() {return $this->field_type_id;}public function getFieldType() {return umiFieldTypesCollection::getInstance()->getFieldType($this->field_type_id);}public function getGuideId() {return $this->guide_id;}public function getIsInSearch() {return $this->is_in_search;}public function getIsInFilter() {return $this->is_in_filter;}public function getTip() {return $this->tip;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = str_replace("-", "_", $vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 = umiHierarchy::convertAltName($vb068931cc450442b63f5b3d276ea4297);$this->name = umiObjectProperty::filterInputString($vb068931cc450442b63f5b3d276ea4297);if(!strlen($this->name)) $this->name = '_';$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "field-");$this->title = umiObjectProperty::filterInputString($vd5d3db1765287eef77d7927cc956f50a);$this->setIsUpdated();}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}public function setIsInheritable($vd5752333adc3a004f826f2ea2a41273a) {$this->is_inheritable = (bool) $vd5752333adc3a004f826f2ea2a41273a;$this->setIsUpdated();}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}public function setFieldTypeId($v1e3f04102267eaf5e8d0ca424fd5c561) {$this->field_type_id = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$this->setIsUpdated();return true;}public function setGuideId($v051369818a8073bba5feeb0e957eb308) {$this->guide_id = (int) $v051369818a8073bba5feeb0e957eb308;$this->setIsUpdated();}public function setIsInSearch($v26ff9f2281b323db6a9f4fda798fb0dc) {$this->is_in_search = (bool) $v26ff9f2281b323db6a9f4fda798fb0dc;$this->setIsUpdated();}public function setIsInFilter($v8a98dfdd379bf6548fa217678117ce3b) {$this->is_in_filter = (bool) $v8a98dfdd379bf6548fa217678117ce3b;$this->setIsUpdated();}public function setTip($v6a2139364f96787c8ce1bbb0070b898c) {$this->tip = umiObjectProperty::filterInputString($v6a2139364f96787c8ce1bbb0070b898c);$this->setIsUpdated();}public function getIsRequired() {return $this->isRequired;}public function setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69 = false) {$this->isRequired = (bool) $v2a9d32d17ad47ac15c87d2e7c96d0e69;$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, title, is_locked, is_inheritable, is_visible, field_type_id, guide_id, in_search, in_filter, tip, is_required FROM cms3_object_fields WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1945c9a2a5e2ba6133f1db6757a35fcb, $vd5752333adc3a004f826f2ea2a41273a, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1e3f04102267eaf5e8d0ca424fd5c561, $v051369818a8073bba5feeb0e957eb308, $v5fa2ecd1dc485ead330e65903d19650a, $ve4a2ed2dde6e8354ae6f321744843084, $v6a2139364f96787c8ce1bbb0070b898c, $v0d2ac6f3b02c0de484369013b31f2ed7) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->is_inheritable = (bool) $vd5752333adc3a004f826f2ea2a41273a;$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->field_type_id = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$this->guide_id = (int) $v051369818a8073bba5feeb0e957eb308;$this->is_in_search = (bool) $v5fa2ecd1dc485ead330e65903d19650a;$this->is_in_filter = (bool) $ve4a2ed2dde6e8354ae6f321744843084;$this->tip = (string) $v6a2139364f96787c8ce1bbb0070b898c;$this->isRequired = (bool) $v0d2ac6f3b02c0de484369013b31f2ed7;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = mysql_real_escape_string($this->name);$vd5d3db1765287eef77d7927cc956f50a = mysql_real_escape_string($this->title);$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$vd5752333adc3a004f826f2ea2a41273a = (int) $this->is_inheritable;$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = (int) $this->is_visible;$v1e3f04102267eaf5e8d0ca424fd5c561 = (int) $this->field_type_id;$v051369818a8073bba5feeb0e957eb308 = (int) $this->guide_id;$v5fa2ecd1dc485ead330e65903d19650a = (int) $this->is_in_search;$ve4a2ed2dde6e8354ae6f321744843084 = (int) $this->is_in_filter;$v6a2139364f96787c8ce1bbb0070b898c = (string) $this->tip;$v2a9d32d17ad47ac15c87d2e7c96d0e69 = (bool) $this->isRequired;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_fields SET name = '{$vb068931cc450442b63f5b3d276ea4297}', title = '{$vd5d3db1765287eef77d7927cc956f50a}', is_locked = '{$v1945c9a2a5e2ba6133f1db6757a35fcb}', is_inheritable = '{$vd5752333adc3a004f826f2ea2a41273a}', is_visible = '{$ve1c6c9ef2fcbe75f26f815c4ef2e60b4}', field_type_id = '{$v1e3f04102267eaf5e8d0ca424fd5c561}', guide_id = '{$v051369818a8073bba5feeb0e957eb308}', in_search = '{$v5fa2ecd1dc485ead330e65903d19650a}', in_filter = '{$ve4a2ed2dde6e8354ae6f321744843084}', tip = '{$v6a2139364f96787c8ce1bbb0070b898c}', is_required = '{$v2a9d32d17ad47ac15c87d2e7c96d0e69}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);cacheFrontend::getInstance()->flush();if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}}interface iUmiFieldsGroup {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getOrd();public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9);public function getIsActive();public function setIsActive($v367e854225a0810977297b3bedb2f309);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getFields();public function attachField($v945100186b119048837b9859c2c46410);public function detachField($v945100186b119048837b9859c2c46410);public function moveFieldAfter($v945100186b119048837b9859c2c46410, $v7107894721f4771e44b220bc8ab81811, $v0e939a4ffd3aacd724dd3b50147b4353, $v3f84b203eef48e9862ac1ffbe344dffe);}class umiFieldsGroup extends umiEntinty implements iUmiEntinty, iUmiFieldsGroup {private $name, $title,   $type_id, $ord,   $is_active = true, $is_visible = true, $is_locked = false,   $autoload_fields = false,   $fields = Array();protected $store_type = "fields_group";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getTypeId() {return $this->type_id;}public function getOrd() {return $this->ord;}public function getIsActive() {return $this->is_active;}public function getIsVisible() {return $this->is_visible;}public function getIsLocked() {return $this->is_locked;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$this->name = umiObjectProperty::filterInputString($vb068931cc450442b63f5b3d276ea4297);$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "fields-group");$this->title = umiObjectProperty::filterInputString($vd5d3db1765287eef77d7927cc956f50a);$this->setIsUpdated();}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {$vd14a8022b085f9ef19d479cbdd581127 = umiObjectTypesCollection::getInstance();if($vd14a8022b085f9ef19d479cbdd581127->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;return true;}else {return false;}}public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9) {$this->ord = $v8bef1cc20ada3bef55fdf132cb2a1cb9;$this->setIsUpdated();}public function setIsActive($v4264c638e0098acb172519b0436db099) {$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->setIsUpdated();}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, title, type_id, is_active, is_visible, is_locked, ord FROM cms3_object_field_groups WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result);}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v94757cae63fd3e398c0811a976dd6bbe, $v4264c638e0098acb172519b0436db099, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1945c9a2a5e2ba6133f1db6757a35fcb, $v8bef1cc20ada3bef55fdf132cb2a1cb9) = $vf1965a857bc285d26fe22023aa5ab50d) {if(!umiObjectTypesCollection::getInstance()->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {return false;}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->ord = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;if($this->autoload_fields) {return $this->loadFields();}else {return true;}}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = mysql_real_escape_string($this->name);$vd5d3db1765287eef77d7927cc956f50a = mysql_real_escape_string($this->title);$v94757cae63fd3e398c0811a976dd6bbe = (int) $this->type_id;$v4264c638e0098acb172519b0436db099 = (int) $this->is_active;$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = (int) $this->is_visible;$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $this->ord;$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_field_groups SET name = '{$vb068931cc450442b63f5b3d276ea4297}', title = '{$vd5d3db1765287eef77d7927cc956f50a}', type_id = '{$v94757cae63fd3e398c0811a976dd6bbe}', is_active = '{$v4264c638e0098acb172519b0436db099}', is_visible = '{$ve1c6c9ef2fcbe75f26f815c4ef2e60b4}', ord = '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}', is_locked = '{$v1945c9a2a5e2ba6133f1db6757a35fcb}' WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}public function loadFields($vdf347a373b8f92aa0ae3dd920a5ec2f6 = false) {$vd05b6ed7d2345020440df396d6da7f73 = umiFieldsCollection::getInstance();if($vdf347a373b8f92aa0ae3dd920a5ec2f6 === false) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE cof.id, cof.name, cof.title, cof.is_locked, cof.is_inheritable, cof.is_visible, cof.field_type_id, cof.guide_id, cof.in_search, cof.in_filter, cof.tip, cof.is_required FROM cms3_fields_controller cfc, cms3_object_fields cof WHERE cfc.group_id = '{$this->id}' AND cof.id = cfc.field_id ORDER BY cfc.ord ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3aabf39f2d943fa886d86dcbbee4d910) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {if($v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d)) {$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;}}}else {foreach($vdf347a373b8f92aa0ae3dd920a5ec2f6 as $vf1965a857bc285d26fe22023aa5ab50d) {list($v3aabf39f2d943fa886d86dcbbee4d910) = $vf1965a857bc285d26fe22023aa5ab50d;if($v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d)) {$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;}}}}public function getFields() {return $this->fields;}private function isLoaded($v3aabf39f2d943fa886d86dcbbee4d910) {return (bool) array_key_exists($v3aabf39f2d943fa886d86dcbbee4d910, $this->fields);}public function attachField($v3aabf39f2d943fa886d86dcbbee4d910, $vcfc3576cd3c177283e25ebc525a5aece = false) {if($this->isLoaded($v3aabf39f2d943fa886d86dcbbee4d910) && !$vcfc3576cd3c177283e25ebc525a5aece) {return true;}else {$v3aabf39f2d943fa886d86dcbbee4d910 = (int) $v3aabf39f2d943fa886d86dcbbee4d910;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(ord) FROM cms3_fields_controller WHERE group_id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}list($v8bef1cc20ada3bef55fdf132cb2a1cb9) = mysql_fetch_row($result);$v8bef1cc20ada3bef55fdf132cb2a1cb9 += 5;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_fields_controller (field_id, group_id, ord) VALUES('{$v3aabf39f2d943fa886d86dcbbee4d910}', '{$this->id}', '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}cacheFrontend::getInstance()->flush();$vd05b6ed7d2345020440df396d6da7f73 = umiFieldsCollection::getInstance();$v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910);$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;$this->fillInContentTable($v3aabf39f2d943fa886d86dcbbee4d910);}}protected function fillInContentTable($v3aabf39f2d943fa886d86dcbbee4d910) {$v94757cae63fd3e398c0811a976dd6bbe = $this->type_id;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_content (obj_id, field_id, int_val, varchar_val, text_val, rel_val, tree_val, float_val) SELECT id, {$v3aabf39f2d943fa886d86dcbbee4d910}, NULL, NULL, NULL, NULL, NULL, NULL FROM cms3_objects WHERE type_id = {$v94757cae63fd3e398c0811a976dd6bbe}";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}public function detachField($v3aabf39f2d943fa886d86dcbbee4d910) {if($this->isLoaded($v3aabf39f2d943fa886d86dcbbee4d910)) {$v3aabf39f2d943fa886d86dcbbee4d910 = (int) $v3aabf39f2d943fa886d86dcbbee4d910;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_fields_controller WHERE field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' AND group_id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->fields[$v3aabf39f2d943fa886d86dcbbee4d910]);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM cms3_fields_controller WHERE field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}cacheFrontend::getInstance()->flush();if(list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result)) {return ($v4a8a08f09d37b73795649038408b5f33 == 0) ? umiFieldsCollection::getInstance()->delField($v3aabf39f2d943fa886d86dcbbee4d910) : true;}else return false;return true;}else {return false;}}public function moveFieldAfter($v3aabf39f2d943fa886d86dcbbee4d910, $vfcd4b86e12c95a57c24239e8a4125360, $v0e939a4ffd3aacd724dd3b50147b4353, $v3f84b203eef48e9862ac1ffbe344dffe) {if($vfcd4b86e12c95a57c24239e8a4125360 == 0) {$vf2400bf3c8b70283e04af07d6d67fe6a = 0;}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT ord FROM cms3_fields_controller WHERE group_id = '{$v0e939a4ffd3aacd724dd3b50147b4353}' AND field_id = '{$vfcd4b86e12c95a57c24239e8a4125360}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {list($vf2400bf3c8b70283e04af07d6d67fe6a) = mysql_fetch_row($result);}}if($v3f84b203eef48e9862ac1ffbe344dffe) {$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_fields_controller SET ord = (ord + 1) WHERE group_id = '{$this->id}' AND ord >= '{$vf2400bf3c8b70283e04af07d6d67fe6a}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(ord) FROM cms3_fields_controller WHERE group_id = '{$v0e939a4ffd3aacd724dd3b50147b4353}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}list($vf2400bf3c8b70283e04af07d6d67fe6a) = mysql_fetch_row($result);++$vf2400bf3c8b70283e04af07d6d67fe6a;}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_fields_controller SET ord = '{$vf2400bf3c8b70283e04af07d6d67fe6a}', group_id = '$v0e939a4ffd3aacd724dd3b50147b4353' WHERE group_id = '{$this->id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);cacheFrontend::getInstance()->flush();if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}public function commit() {parent::commit();cacheFrontend::getInstance()->flush();}};interface iUmiObjectType {public function addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v367e854225a0810977297b3bedb2f309 = true, $v19fad0416b4b101ab72faccf4c323024 = true);public function delFieldsGroup($v3fdcf94940aa24dc024a819904427035);public function getFieldsGroupByName($v120aafc4d1ddeda208736bcfa6be14cb);public function getFieldsGroup($v3fdcf94940aa24dc024a819904427035);public function getFieldsGroupsList();public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getIsLocked();public function setIsGuidable($va8d6fa79ab1177f254f679f9fe648a3e);public function getIsGuidable();public function setIsPublic($v16995eef256269cfe8804ffaf770cb4b);public function getIsPublic();public function setHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631);public function getHierarchyTypeId();public function getParentId();public function setFieldGroupOrd($v47db2588331bbe530c80dd001fc60aed, $v8437225ef7c926cdd9bc4b9783a3be54, $v4bd439a3ff0fb0e318264d9f579f15f9);public function getFieldId($v972bf3f05d14ffbdb817bef60638ff00);public function getAllFields($v33a8421fb9f5a2636cefaed92ae056c3 = false);public function getModule();public function getMethod();}class umiObjectType extends umiEntinty implements iUmiEntinty, iUmiObjectType {private $name, $parent_id, $is_locked = false,   $field_groups = Array(), $is_guidable = false, $is_public = false, $hierarchy_type_id;protected $store_type = "object_type";public function getName() {return $this->translateLabel($this->name);}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297, "object-type-");$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function getIsLocked() {return $this->is_locked;}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}public function getParentId() {return $this->parent_id;}public function getIsGuidable() {return $this->is_guidable;}public function setIsGuidable($v7617e8d03bb811f5c37135234006b114) {$this->is_guidable = (bool) $v7617e8d03bb811f5c37135234006b114;$this->setIsUpdated();}public function getIsPublic() {return $this->is_public;}public function setIsPublic($v117256556af3bd1a0c9710a593d93814) {$this->is_public = (bool) $v117256556af3bd1a0c9710a593d93814;$this->setIsUpdated();}public function getHierarchyTypeId() {return $this->hierarchy_type_id;}public function setHierarchyTypeId($v0715f6d9497f93911417c9c324265771) {$this->hierarchy_type_id = (int) $v0715f6d9497f93911417c9c324265771;$this->setIsUpdated();}public function addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v4264c638e0098acb172519b0436db099 = true, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true) {if($vdb0f6f37ebeb6ea09489124345af2a45 = $this->getFieldsGroupByName($vb068931cc450442b63f5b3d276ea4297)) {return $vdb0f6f37ebeb6ea09489124345af2a45->getId();}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT MAX(ord) FROM cms3_object_field_groups WHERE type_id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v8bef1cc20ada3bef55fdf132cb2a1cb9) = mysql_fetch_row($result)) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = ((int) $v8bef1cc20ada3bef55fdf132cb2a1cb9) + 5;}else {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = 1;}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_groups (type_id, ord) VALUES('{$this->id}', '{$v8bef1cc20ada3bef55fdf132cb2a1cb9}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v6c26c1979a522c2dd7e76e527aa69ca5 = mysql_insert_id();$v38f582e54454005ec0664831734e1152 = new umiFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5);$v38f582e54454005ec0664831734e1152->setName($vb068931cc450442b63f5b3d276ea4297);$v38f582e54454005ec0664831734e1152->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v38f582e54454005ec0664831734e1152->setIsActive($v4264c638e0098acb172519b0436db099);$v38f582e54454005ec0664831734e1152->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v38f582e54454005ec0664831734e1152->commit();$this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5] = $v38f582e54454005ec0664831734e1152;$v2af1d1812273df0bd0f720da7068f8a6 = umiObjectTypesCollection::getInstance()->getSubTypesList($this->id);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v2af1d1812273df0bd0f720da7068f8a6);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd4fd255f51559df00de5424b64292413 = $v2af1d1812273df0bd0f720da7068f8a6[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($vd4fd255f51559df00de5424b64292413)) {$v599dcce2998a6b40b1e38e8c6006cb0a->addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v4264c638e0098acb172519b0436db099, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4);}else {throw new coreException("Can't load object type #{$vd4fd255f51559df00de5424b64292413}");}}cacheFrontend::getInstance()->flush();return $v6c26c1979a522c2dd7e76e527aa69ca5;}public function delFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5) {if($this->isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5)) {$v6c26c1979a522c2dd7e76e527aa69ca5 = (int) $v6c26c1979a522c2dd7e76e527aa69ca5;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_field_groups WHERE id = '{$v6c26c1979a522c2dd7e76e527aa69ca5}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5]);cacheFrontend::getInstance()->flush();return true;}else {return false;}}public function getFieldsGroupByName($v669198bb876eff07758f68a34b5d21fb) {$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $v0e939a4ffd3aacd724dd3b50147b4353 => $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getName()  == $v669198bb876eff07758f68a34b5d21fb) {return $vdb0f6f37ebeb6ea09489124345af2a45;}}return false;}public function getFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5) {if($this->isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5)) {return $this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5];}else {return false;}}public function getFieldsGroupsList() {return $this->field_groups;}private function isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5) {if(!$v6c26c1979a522c2dd7e76e527aa69ca5) {return false;}else {return (bool) array_key_exists($v6c26c1979a522c2dd7e76e527aa69ca5, $this->field_groups);}}protected function loadInfo() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE name, parent_id, is_locked, is_guidable, is_public, hierarchy_type_id FROM cms3_object_types WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($vb068931cc450442b63f5b3d276ea4297, $v6be379826b20cc58475f636e33f4606b, $v1945c9a2a5e2ba6133f1db6757a35fcb, $v7617e8d03bb811f5c37135234006b114, $v117256556af3bd1a0c9710a593d93814, $v0715f6d9497f93911417c9c324265771) = mysql_fetch_row($result)) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->parent_id = (int) $v6be379826b20cc58475f636e33f4606b;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->is_guidable = (bool) $v7617e8d03bb811f5c37135234006b114;$this->is_public = (bool) $v117256556af3bd1a0c9710a593d93814;$this->hierarchy_type_id = (int) $v0715f6d9497f93911417c9c324265771;return $this->loadFieldsGroups();}else {return false;}}private function loadFieldsGroups() {$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT SQL_CACHE 
   ofg.id as groupId, cof.id, cof.name, cof.title, cof.is_locked, cof.is_inheritable, cof.is_visible, cof.field_type_id, cof.guide_id, cof.in_search, cof.in_filter, cof.tip, cof.is_required 
      FROM cms3_object_field_groups ofg, cms3_fields_controller cfc, cms3_object_fields cof 
         WHERE ofg.type_id = '{$this->id}' AND cfc.group_id = ofg.id AND cof.id = cfc.field_id 
            ORDER BY ofg.ord ASC, cfc.ord ASC
SQL;   $result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$vd05b6ed7d2345020440df396d6da7f73 = Array();while(list($v0e939a4ffd3aacd724dd3b50147b4353, $vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1945c9a2a5e2ba6133f1db6757a35fcb, $vd5752333adc3a004f826f2ea2a41273a, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1e3f04102267eaf5e8d0ca424fd5c561, $v051369818a8073bba5feeb0e957eb308, $v5fa2ecd1dc485ead330e65903d19650a, $ve4a2ed2dde6e8354ae6f321744843084, $v6a2139364f96787c8ce1bbb0070b898c, $v0d2ac6f3b02c0de484369013b31f2ed7) = mysql_fetch_row($result)) {if(!isset($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353]) || !is_array($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353])) {$vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353] = Array();}$vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353][] = Array($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1945c9a2a5e2ba6133f1db6757a35fcb, $vd5752333adc3a004f826f2ea2a41273a, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1e3f04102267eaf5e8d0ca424fd5c561, $v051369818a8073bba5feeb0e957eb308, $v5fa2ecd1dc485ead330e65903d19650a, $ve4a2ed2dde6e8354ae6f321744843084, $v6a2139364f96787c8ce1bbb0070b898c, $v0d2ac6f3b02c0de484369013b31f2ed7);}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, title, type_id, is_active, is_visible, is_locked, ord FROM cms3_object_field_groups WHERE type_id = '{$this->id}' ORDER BY ord ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v6c26c1979a522c2dd7e76e527aa69ca5) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v38f582e54454005ec0664831734e1152 = new umiFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5, $vf1965a857bc285d26fe22023aa5ab50d);if(!isset($vd05b6ed7d2345020440df396d6da7f73[$v6c26c1979a522c2dd7e76e527aa69ca5])) {$vd05b6ed7d2345020440df396d6da7f73[$v6c26c1979a522c2dd7e76e527aa69ca5] = Array();}$v38f582e54454005ec0664831734e1152->loadFields($vd05b6ed7d2345020440df396d6da7f73[$v6c26c1979a522c2dd7e76e527aa69ca5]);$this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5] = $v38f582e54454005ec0664831734e1152;}return true;}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = umiObjectProperty::filterInputString($this->name);$v6be379826b20cc58475f636e33f4606b = (int) $this->parent_id;$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$v7617e8d03bb811f5c37135234006b114 = (int) $this->is_guidable;$v117256556af3bd1a0c9710a593d93814 = (int) $this->is_public;$v0715f6d9497f93911417c9c324265771 = (int) $this->hierarchy_type_id;$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_types SET name = '{$vb068931cc450442b63f5b3d276ea4297}', parent_id = '{$v6be379826b20cc58475f636e33f4606b}', is_locked = '{$v1945c9a2a5e2ba6133f1db6757a35fcb}', is_guidable = '{$v7617e8d03bb811f5c37135234006b114}', is_public = '{$v117256556af3bd1a0c9710a593d93814}', hierarchy_type_id = '{$v0715f6d9497f93911417c9c324265771}' WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);cacheFrontend::getInstance()->flush();if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return false;}}public function setFieldGroupOrd($v0e939a4ffd3aacd724dd3b50147b4353, $vf2400bf3c8b70283e04af07d6d67fe6a, $v3f84b203eef48e9862ac1ffbe344dffe) {$vf2400bf3c8b70283e04af07d6d67fe6a = (int) $vf2400bf3c8b70283e04af07d6d67fe6a;$v0e939a4ffd3aacd724dd3b50147b4353 = (int) $v0e939a4ffd3aacd724dd3b50147b4353;if(!$v3f84b203eef48e9862ac1ffbe344dffe) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT type_id FROM cms3_object_field_groups WHERE id = '{$v0e939a4ffd3aacd724dd3b50147b4353}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(!(list($v94757cae63fd3e398c0811a976dd6bbe) = mysql_fetch_row($result))) {return false;}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_field_groups SET ord = (ord + 1) WHERE type_id = '{$v94757cae63fd3e398c0811a976dd6bbe}' AND ord >= '{$vf2400bf3c8b70283e04af07d6d67fe6a}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_object_field_groups SET ord = '{$vf2400bf3c8b70283e04af07d6d67fe6a}' WHERE id = '{$v0e939a4ffd3aacd724dd3b50147b4353}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);cacheFrontend::getInstance()->flush();if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}return true;}public function getAllFields($v33a8421fb9f5a2636cefaed92ae056c3 = false) {$vd05b6ed7d2345020440df396d6da7f73 = Array();$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $vdb0f6f37ebeb6ea09489124345af2a45) {if($v33a8421fb9f5a2636cefaed92ae056c3) {if(!$vdb0f6f37ebeb6ea09489124345af2a45->getIsVisible()) {continue;}}$vd05b6ed7d2345020440df396d6da7f73 = array_merge($vd05b6ed7d2345020440df396d6da7f73, $vdb0f6f37ebeb6ea09489124345af2a45->getFields());}return $vd05b6ed7d2345020440df396d6da7f73;}public function getFieldId($v73f329f154a663bfda020aadcdd0b775) {$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $v0e939a4ffd3aacd724dd3b50147b4353 => $vdb0f6f37ebeb6ea09489124345af2a45) {if(!$vdb0f6f37ebeb6ea09489124345af2a45->getIsActive()) continue;$vd05b6ed7d2345020440df396d6da7f73 = $vdb0f6f37ebeb6ea09489124345af2a45->getFields();foreach($vd05b6ed7d2345020440df396d6da7f73 as $v3aabf39f2d943fa886d86dcbbee4d910 => $v06e3d36fa30cea095545139854ad1fb9) {if($v06e3d36fa30cea095545139854ad1fb9->getName() == $v73f329f154a663bfda020aadcdd0b775) {return $v06e3d36fa30cea095545139854ad1fb9->getId();}}}return false;}public function getModule() {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $this->getHierarchyTypeId();$v89b0b9deff65f8b9cd1f71bc74ce36ba = umiHierarchyTypesCollection::getInstance()->getType($vacf567c9c3d6cf7c6e2cc0ce108e0631);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof umiHierarchyType) {return $v89b0b9deff65f8b9cd1f71bc74ce36ba->getName();}else {return false;}}public function getMethod() {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $this->getHierarchyTypeId();$v89b0b9deff65f8b9cd1f71bc74ce36ba = umiHierarchyTypesCollection::getInstance()->getType($vacf567c9c3d6cf7c6e2cc0ce108e0631);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof umiHierarchyType) {return $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt();}else {return false;}}};interface iUmiObjectProperty {public function getValue();public function setValue($v2063c1608d6e0baf80249c42e2be5804);public function resetValue();public function getName();public function getTitle();public function getIsMultiple();public function getIsUnsigned();public function getDataType();public function getIsLocked();public function getIsInheritable();public function getIsVisible();public static function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21);public static function filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21);public function getObject();public function getField();}abstract class umiObjectProperty extends umiEntinty implements iUmiEntinty, iUmiObjectProperty {protected $object_id, $field_id, $field, $field_type,   $value = Array(), $tableName = "cms3_object_content", $is_updated = false;public $store_type = "property";public static $USE_FORCE_OBJECTS_CREATION = false;public static $IGNORE_FILTER_INPUT_STRING = false;public function __construct($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe) {$this->tableName = umiBranch::getBranchedTableByTypeId($v94757cae63fd3e398c0811a976dd6bbe);$this->setId($vb80bb7740288fda1f201890375a60c8f);$this->object_id = (int) $vb80bb7740288fda1f201890375a60c8f;$this->field = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$this->field_id = $v3aabf39f2d943fa886d86dcbbee4d910;$this->loadInfo();}public static function getProperty($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe) {$v6f66e878c62db60568a3487869695820 = self::getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);return new $v6f66e878c62db60568a3487869695820($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe);}public function getId() {return $this->id . "." . $this->field_id;}public function getValue() {if($this->getIsMultiple() === false) {if(sizeof($this->value) > 0) {list($v2063c1608d6e0baf80249c42e2be5804) = $this->value;}else {return NULL;}}else {$v2063c1608d6e0baf80249c42e2be5804 = $this->value;}return $v2063c1608d6e0baf80249c42e2be5804;}public function getName() {return $this->field->getName();}public function getTitle() {return $this->field->getTitle();}public function setValue($v2063c1608d6e0baf80249c42e2be5804) {if(!is_array($v2063c1608d6e0baf80249c42e2be5804)) {$v2063c1608d6e0baf80249c42e2be5804 = Array($v2063c1608d6e0baf80249c42e2be5804);}$v17f71d965fe9589ddbd11caf7182243e = $this->getDataType();if ($v17f71d965fe9589ddbd11caf7182243e === 'date') {foreach ($v2063c1608d6e0baf80249c42e2be5804 as $v8dcd0fced6cad049fa9d12a0e56b5bb6=>$ve0c750ab2ba65ff988478860712c5ff2) {if (!($ve0c750ab2ba65ff988478860712c5ff2 instanceof umiDate)) {$v2063c1608d6e0baf80249c42e2be5804[$v8dcd0fced6cad049fa9d12a0e56b5bb6] = new umiDate(intval($ve0c750ab2ba65ff988478860712c5ff2));}}}$this->value = $v2063c1608d6e0baf80249c42e2be5804;return $this->setIsUpdated();}public function resetValue() {$this->value = Array();$this->setIsUpdated();}protected function loadInfo() {$v06e3d36fa30cea095545139854ad1fb9 = $this->field;$v3fa9d6639f24f9bb4bf81ac6bdbdbc8c = umiFieldTypesCollection::getInstance();$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v519504d7d4beb745dac24ccfb6c1d7c9 = $v3fa9d6639f24f9bb4bf81ac6bdbdbc8c->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$this->field_type = $v519504d7d4beb745dac24ccfb6c1d7c9;$this->value = $this->loadValue();}protected function save() {$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($this->id);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {if($va8cfde6331bd59eb2ac96f8911c4b666->checkSelf() == false) {cacheFrontend::getInstance()->del($va8cfde6331bd59eb2ac96f8911c4b666->getId(), "object");return false;}}$result = $this->saveValue();$this->fillNull();return $result;}public function getIsMultiple() {return $this->field_type->getIsMultiple();}public function getIsUnsigned() {return $this->field_type->getIsUnsigned();}public function getDataType() {return $this->field_type->getDataType();}public function getIsLocked() {return $this->field->getIsLocked();}public function getIsInheritable() {return $this->field->getIsInheritable();}public function getIsVisible() {return $this->field->getIsVisible();}public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = mysql_real_escape_string($vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = umiObjectProperty::filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21);if(cmsController::getInstance()->getCurrentMode() != "admin" && !self::$IGNORE_FILTER_INPUT_STRING) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#37;", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {if(cmsController::getInstance()->getCurrentMode() == "admin") {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#037;", $vb45cffe084dd3d20d928bee85e7b0f21);}else {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("&#037;", "%", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("]]>", "]]&gt;", $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function setObjectIsUpdated() {if($va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject()) {$va8cfde6331bd59eb2ac96f8911c4b666->setIsUpdated();return true;}else {return false;}}protected function getPropData() {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(defined("DISABLE_GETVAL_OPT") && DISABLE_GETVAL_OPT) {return false;}$v945100186b119048837b9859c2c46410 = $this->field_id;$v16b2b26000987faccb260b9d39df1269 = $this->object_id;if(!isset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269][$v945100186b119048837b9859c2c46410])) {$v8d777f385d3dfec8815d20f7496026dc = Array();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT field_id, int_val, varchar_val, text_val, rel_val, tree_val, float_val FROM {$this->tableName} WHERE obj_id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);while($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_assoc($result)) {$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['int_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['int_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['varchar_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['varchar_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['text_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['text_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['rel_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['rel_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['tree_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['tree_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['float_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['float_val'];}$v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269] = $v8d777f385d3dfec8815d20f7496026dc;if(sizeof($v0fea6a13c52b4d4725368f24b045ca84) >= 3) {foreach($v0fea6a13c52b4d4725368f24b045ca84 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v8277e0910d750195b448797616e091ad) {unset($v0fea6a13c52b4d4725368f24b045ca84[$v865c0c0b4ab0e063e5caa3387c1a8741]);break;}}}else {$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269];}if(isset($v8d777f385d3dfec8815d20f7496026dc[$v945100186b119048837b9859c2c46410])) {$result = $v8d777f385d3dfec8815d20f7496026dc[$v945100186b119048837b9859c2c46410];unset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269][$v945100186b119048837b9859c2c46410]);if(sizeof($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269]) == 0){unset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269]);}return $result;}else {return false;}}public function getObject() {return umiObjectsCollection::getInstance()->getObject($this->object_id);}public function getObjectId() {return $this->object_id;}public function getField() {return $this->field;}protected static function unescapeFilePath($v6a2a431fe8b621037ea949531c28551d) {return str_replace("\\\\", "/", $v6a2a431fe8b621037ea949531c28551d);}protected function deleteCurrentRows() {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND (field_id = '{$this->field_id}' OR field_id IS NULL)";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}protected function fillNull() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$this->field_id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);}if($v4a8a08f09d37b73795649038408b5f33 == 0) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id) VALUES('{$this->object_id}', '{$this->field_id}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}return true;}protected static function getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910];}$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v833750ac635fcc57dc33ecafe365f9a7 = umiFieldTypesCollection::getInstance()->getFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);$v5fd6df40d7c4dd7f503475344d8c145c = $v833750ac635fcc57dc33ecafe365f9a7->getDataType();$v8f7cd34efac0926458bbd05f62c13001 = Array(    'relation' => 'umiObjectPropertyRelation',    'wysiwyg' => 'umiObjectPropertyWYSIWYG',    'string' => 'umiObjectPropertyString',    'file' => 'umiObjectPropertyFile',    'img_file' => 'umiObjectPropertyImgFile',    'swf_file' => 'umiObjectPropertyImgFile',    'boolean' => 'umiObjectPropertyBoolean',    'int' => 'umiObjectPropertyInt',    'text' => 'umiObjectPropertyText',    'date' => 'umiObjectPropertyDate',    'symlink' => 'umiObjectPropertySymlink',    'price' => 'umiObjectPropertyPrice',    'float' => 'umiObjectPropertyFloat',    'tags' => 'umiObjectPropertyTags',    'password' => 'umiObjectPropertyPassword'   );if(isset($v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910] = $v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c];}else {throw new coreException("Unhandled field of type \"{$v5fd6df40d7c4dd7f503475344d8c145c}\"");}}public static function objectsByValue($v0f728ec6147eaec54f5f45e37bce8ddd, $v2ef4385ee1f18f02679161fef2b094d9 = NULL, $v95fc2db4375309c569794b723adc3972 = false, $vf80384e7987156531edaa3afd549957d = true, $v8ef57923ab3049b18fb75541ff476ff7 = NULL) {$v30a7d3f52b5af853f2a7bba352210a34 = array();if (!(is_null($v2ef4385ee1f18f02679161fef2b094d9) || is_array($v2ef4385ee1f18f02679161fef2b094d9) || intval($v2ef4385ee1f18f02679161fef2b094d9) === -1 || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'all' || strval($v2ef4385ee1f18f02679161fef2b094d9) == 'Все')) {$v2ef4385ee1f18f02679161fef2b094d9 = array($v2ef4385ee1f18f02679161fef2b094d9);}$v9effabcdaed14aab9cb00acddfa00fc9 = NULL;if ($v95fc2db4375309c569794b723adc3972) {if (is_null($v8ef57923ab3049b18fb75541ff476ff7)) {$v9effabcdaed14aab9cb00acddfa00fc9 = array(cmsController::getInstance()->getCurrentDomain()->getId());}elseif (intval($v8ef57923ab3049b18fb75541ff476ff7) === -1 || strval($v8ef57923ab3049b18fb75541ff476ff7) === 'all' || strval($v8ef57923ab3049b18fb75541ff476ff7) == 'Все') {$v9effabcdaed14aab9cb00acddfa00fc9 = array();}elseif (is_array($v8ef57923ab3049b18fb75541ff476ff7)) {$v9effabcdaed14aab9cb00acddfa00fc9 = array_map('intval', $v8ef57923ab3049b18fb75541ff476ff7);}else {$v9effabcdaed14aab9cb00acddfa00fc9 = array(intval($v8ef57923ab3049b18fb75541ff476ff7));}}$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v0f728ec6147eaec54f5f45e37bce8ddd);if($v06e3d36fa30cea095545139854ad1fb9 instanceof umiField) {$v5fd6df40d7c4dd7f503475344d8c145c = $v06e3d36fa30cea095545139854ad1fb9->getFieldType()->getDataType();$v8ae9391858dfdc11dbd8f15cf9b04a26 = umiFieldType::getDataTypeDB($v5fd6df40d7c4dd7f503475344d8c145c);}else {throw new coreException("Field #{$v945100186b119048837b9859c2c46410} not found");}$v6301cee35ea764a1e241978f93f01069 = umiSelectionsParser::getObjectTypeByFieldId($v0f728ec6147eaec54f5f45e37bce8ddd);$v80071f37861c360a27b7327e132c911a = umiBranch::getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069);$v01b41e749613a642fc384ed8af3245fc = "{$v80071f37861c360a27b7327e132c911a} `o`";if ($v95fc2db4375309c569794b723adc3972) $v01b41e749613a642fc384ed8af3245fc .= ", cms3_hierarchy `h`";if ($v95fc2db4375309c569794b723adc3972) {$v7dd0d06edf4c4299ce1a5978eb469fd8 = "h.id";}else {$v7dd0d06edf4c4299ce1a5978eb469fd8 = "o.obj_id";}$vc3a74cf64b6ccb62fa49a21123cbc72f = ($v95fc2db4375309c569794b723adc3972 ? " AND h.obj_id = o.obj_id" : "");if ($v95fc2db4375309c569794b723adc3972 && is_array($v9effabcdaed14aab9cb00acddfa00fc9) && count($v9effabcdaed14aab9cb00acddfa00fc9)) {$vc3a74cf64b6ccb62fa49a21123cbc72f .= " AND h.domain_id IN ('".implode("', '", $v9effabcdaed14aab9cb00acddfa00fc9)."')";}$v86f6d00b1c7dbb44f4cd5edf49c29aa0 = "";if (!(intval($v2ef4385ee1f18f02679161fef2b094d9) === -1 || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'all' || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'Âñå')) {$v86f6d00b1c7dbb44f4cd5edf49c29aa0 = " AND o.{$v8ae9391858dfdc11dbd8f15cf9b04a26} ".(is_null($v2ef4385ee1f18f02679161fef2b094d9) ? "IS NULL" : "IN ('".implode("', '", $v2ef4385ee1f18f02679161fef2b094d9)."')");}if ($vf80384e7987156531edaa3afd549957d) {$vf3e7552257b4e44beacffb073506f43d = "SELECT o.".$v8ae9391858dfdc11dbd8f15cf9b04a26." as `value`, COUNT(".$v7dd0d06edf4c4299ce1a5978eb469fd8.") as `items` FROM ".$v01b41e749613a642fc384ed8af3245fc." WHERE o.field_id = ".$v0f728ec6147eaec54f5f45e37bce8ddd.$v86f6d00b1c7dbb44f4cd5edf49c29aa0.$vc3a74cf64b6ccb62fa49a21123cbc72f." GROUP BY o.".$v8ae9391858dfdc11dbd8f15cf9b04a26." ORDER BY `items`";}else {$vf3e7552257b4e44beacffb073506f43d = "SELECT DISTINCT ".$v7dd0d06edf4c4299ce1a5978eb469fd8." as `item` FROM ".$v01b41e749613a642fc384ed8af3245fc." WHERE o.field_id = ".$v0f728ec6147eaec54f5f45e37bce8ddd.$v86f6d00b1c7dbb44f4cd5edf49c29aa0.$vc3a74cf64b6ccb62fa49a21123cbc72f;}$ve7d010371cfd5717d3d0b7d8e4c87803 = array();$v98291d7af1e21c41194125137e4f90ec = l_mysql_query($vf3e7552257b4e44beacffb073506f43d);$ved05f7aecf3d274bef532a3ade31ad02 = mysql_errno();$v89d8e64b77430ce4f0fe8ead989285bd = mysql_error();if ($v98291d7af1e21c41194125137e4f90ec === false || $ved05f7aecf3d274bef532a3ade31ad02) {throw new coreException("Error executing db query (errno ".$ved05f7aecf3d274bef532a3ade31ad02.", error ".$v89d8e64b77430ce4f0fe8ead989285bd.", query ".$vf3e7552257b4e44beacffb073506f43d.")");}else {while ($v7b93a31f8c7688c32c5a551b0e4937ee = mysql_fetch_assoc($v98291d7af1e21c41194125137e4f90ec)) {$ve7d010371cfd5717d3d0b7d8e4c87803[] = $v7b93a31f8c7688c32c5a551b0e4937ee;}}if ($vf80384e7987156531edaa3afd549957d) {$v30a7d3f52b5af853f2a7bba352210a34['values'] = array();$vae886317ab0305e3e6a1638659ea03fa = 0;$v663ccf380acaf3f549f1612654dc109d = 0;foreach ($ve7d010371cfd5717d3d0b7d8e4c87803 as $vabd12a9143f26fa85e562e69c01c48db) {$v97023380f9705264978115e6ce880ca5 = intval($vabd12a9143f26fa85e562e69c01c48db['items']);$v30a7d3f52b5af853f2a7bba352210a34['values'][] = array('value' => $vabd12a9143f26fa85e562e69c01c48db['value'], 'cnt' => $v97023380f9705264978115e6ce880ca5);if ($v97023380f9705264978115e6ce880ca5 > $vae886317ab0305e3e6a1638659ea03fa) $vae886317ab0305e3e6a1638659ea03fa = $v97023380f9705264978115e6ce880ca5;$v663ccf380acaf3f549f1612654dc109d += $v97023380f9705264978115e6ce880ca5;}$v30a7d3f52b5af853f2a7bba352210a34['max'] = $vae886317ab0305e3e6a1638659ea03fa;$v30a7d3f52b5af853f2a7bba352210a34['sum'] = $v663ccf380acaf3f549f1612654dc109d;}else {foreach ($ve7d010371cfd5717d3d0b7d8e4c87803 as $vabd12a9143f26fa85e562e69c01c48db) $v30a7d3f52b5af853f2a7bba352210a34[] = $vabd12a9143f26fa85e562e69c01c48db['item'];}return $v30a7d3f52b5af853f2a7bba352210a34;}};interface iUmiObject {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getPropGroupId($va2b861d0e7719d9108522aacfd4181bc);public function getPropGroupByName($va2b861d0e7719d9108522aacfd4181bc);public function getPropGroupById($v47db2588331bbe530c80dd001fc60aed);public function getPropByName($v46b9e6004c49d9cc040029c197cab278);public function getPropById($vdfcdd018a7fc531ad77b18e3534bf4ae);public function isPropertyExists($vb80bb7740288fda1f201890375a60c8f);public function getValue($v46b9e6004c49d9cc040029c197cab278);public function setValue($v46b9e6004c49d9cc040029c197cab278, $vafd40dce490ea113be83c89ca7f3052d);public function setOwnerId($vb0ab4f7791b60b1e8ea01057b77873b0);public function getOwnerId();}class umiObject extends umiEntinty implements iUmiEntinty, iUmiObject {private $name, $type_id, $is_locked, $owner_id = false,   $type, $properties = Array(), $prop_groups = Array();protected $store_type = "object";public function getName() {return $this->translateLabel($this->name);}public function getTypeId() {return $this->type_id;}public function getIsLocked() {return $this->is_locked;}public function setName($vb068931cc450442b63f5b3d276ea4297) {if ($this->name !== $vb068931cc450442b63f5b3d276ea4297) {if(($this->translateLabel($this->name) != $this->name)) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297);}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {if ($this->type_id !== $v94757cae63fd3e398c0811a976dd6bbe) {$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;$this->setIsUpdated();}return true;}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {if ($this->is_locked !== ((bool) $v1945c9a2a5e2ba6133f1db6757a35fcb)) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}}public function setOwnerId($vb0ab4f7791b60b1e8ea01057b77873b0) {if(!is_null($vb0ab4f7791b60b1e8ea01057b77873b0) and umiObjectsCollection::getInstance()->isExists($vb0ab4f7791b60b1e8ea01057b77873b0)) {if ($this->owner_id !== $vb0ab4f7791b60b1e8ea01057b77873b0) {$this->owner_id = $vb0ab4f7791b60b1e8ea01057b77873b0;$this->setIsUpdated();}return true;}else {if (!is_null($this->owner_id)) {$this->owner_id = NULL;$this->setIsUpdated();}return false;}}public function getOwnerId() {return $this->owner_id;}protected function save() {if ($this->is_updated) {$vb068931cc450442b63f5b3d276ea4297 = umiObjectProperty::filterInputString($this->name);$v94757cae63fd3e398c0811a976dd6bbe = (int) $this->type_id;$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $this->owner_id;$vac5c74b64b4b8352ef2f181affb5ac2a = "START TRANSACTION /* Updating object #{$this->id} info */";$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$vac5c74b64b4b8352ef2f181affb5ac2a = "UPDATE cms3_objects SET name = '{$vb068931cc450442b63f5b3d276ea4297}', type_id = '{$v94757cae63fd3e398c0811a976dd6bbe}', is_locked = '{$v1945c9a2a5e2ba6133f1db6757a35fcb}', owner_id = '{$v5e7b19364b8de2dedd3aa48cf62706e3}' WHERE id = '{$this->id}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}foreach($this->properties as $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) $v23a5b8ab834cb5140fa6665622eb6417->commit();}$vac5c74b64b4b8352ef2f181affb5ac2a = "COMMIT";mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$this->setIsUpdated(false);}return true;}protected function loadInfo() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE name, type_id, is_locked, owner_id FROM cms3_objects WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {cacheFrontend::getInstance()->del($va8cfde6331bd59eb2ac96f8911c4b666->getId(), "object");throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe, $v1945c9a2a5e2ba6133f1db6757a35fcb, $v5e7b19364b8de2dedd3aa48cf62706e3) = mysql_fetch_row($result)) {if(!$v94757cae63fd3e398c0811a976dd6bbe) {umiObjectsCollection::getInstance()->delObject($this->id);return false;}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->type_id = (int) $v94757cae63fd3e398c0811a976dd6bbe;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->owner_id = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;return $this->loadType();}else {throw new coreException("Object #{$this->id} doesn't exists");return false;}}private function loadType() {$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($this->type_id);if(!$v599dcce2998a6b40b1e38e8c6006cb0a) {throw new coreException("Can't load type in object's init");return false;}$this->type = $v599dcce2998a6b40b1e38e8c6006cb0a;return $this->loadProperties();}private function loadProperties() {$v599dcce2998a6b40b1e38e8c6006cb0a = $this->type;$v041f36f9e13e5473c5b995506bad2aaa = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroupsList();foreach($v041f36f9e13e5473c5b995506bad2aaa as $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getIsActive() == false) continue;$vd05b6ed7d2345020440df396d6da7f73 = $vdb0f6f37ebeb6ea09489124345af2a45->getFields();$this->prop_groups[$vdb0f6f37ebeb6ea09489124345af2a45->getId()] = Array();foreach($vd05b6ed7d2345020440df396d6da7f73 as $v06e3d36fa30cea095545139854ad1fb9) {$this->properties[$v06e3d36fa30cea095545139854ad1fb9->getId()] = $v06e3d36fa30cea095545139854ad1fb9->getName();$this->prop_groups[$vdb0f6f37ebeb6ea09489124345af2a45->getId()][] = $v06e3d36fa30cea095545139854ad1fb9->getId();}}}public function getPropByName($vdfc394bd05a4b48161c790034af522a8) {$vdfc394bd05a4b48161c790034af522a8 = strtolower($vdfc394bd05a4b48161c790034af522a8);foreach($this->properties as $v3aabf39f2d943fa886d86dcbbee4d910 => $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) {if($v23a5b8ab834cb5140fa6665622eb6417->getName() == $vdfc394bd05a4b48161c790034af522a8) {return $v23a5b8ab834cb5140fa6665622eb6417;}}else {if(strtolower($v23a5b8ab834cb5140fa6665622eb6417) == $vdfc394bd05a4b48161c790034af522a8) {$v23a5b8ab834cb5140fa6665622eb6417 = cacheFrontend::getInstance()->load($this->id . "." . $v3aabf39f2d943fa886d86dcbbee4d910, "property");if($v23a5b8ab834cb5140fa6665622eb6417 instanceof umiObjectProperty == false) {$v23a5b8ab834cb5140fa6665622eb6417 = umiObjectProperty::getProperty($this->id, $v3aabf39f2d943fa886d86dcbbee4d910, $this->type_id);cacheFrontend::getInstance()->save($v23a5b8ab834cb5140fa6665622eb6417, "property");}$this->properties[$v3aabf39f2d943fa886d86dcbbee4d910] = $v23a5b8ab834cb5140fa6665622eb6417;return $v23a5b8ab834cb5140fa6665622eb6417;}}}return NULL;}public function getPropById($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$this->isPropertyExists($v3aabf39f2d943fa886d86dcbbee4d910)) {return NULL;}else {if(!is_object($this->properties)) {$this->properties[$v3aabf39f2d943fa886d86dcbbee4d910] = umiObjectProperty::getProperty($this->id, $v3aabf39f2d943fa886d86dcbbee4d910, $this->type_id);}return $this->properties[$v3aabf39f2d943fa886d86dcbbee4d910];}}public function isPropertyExists($v3aabf39f2d943fa886d86dcbbee4d910) {return (bool) array_key_exists($v3aabf39f2d943fa886d86dcbbee4d910, $this->properties);}public function isPropGroupExists($vb78a51df08ebf5c0b87001c180e3c2ab) {return (bool) array_key_exists($vb78a51df08ebf5c0b87001c180e3c2ab, $this->prop_groups);}public function getPropGroupId($v630d7459cbc61bfef50b1a0fff2ea42e) {$v041f36f9e13e5473c5b995506bad2aaa = $this->type->getFieldsGroupsList();foreach($v041f36f9e13e5473c5b995506bad2aaa as $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getName() == $v630d7459cbc61bfef50b1a0fff2ea42e) {return $vdb0f6f37ebeb6ea09489124345af2a45->getId();}}return false;}public function getPropGroupByName($v630d7459cbc61bfef50b1a0fff2ea42e) {$v041f36f9e13e5473c5b995506bad2aaa = $this->type->getFieldsGroupsList();if($v0e939a4ffd3aacd724dd3b50147b4353 = $this->getPropGroupId($v630d7459cbc61bfef50b1a0fff2ea42e)) {return $this->getPropGroupById($v0e939a4ffd3aacd724dd3b50147b4353);}else {return false;}}public function getPropGroupById($vb78a51df08ebf5c0b87001c180e3c2ab) {if($this->isPropGroupExists($vb78a51df08ebf5c0b87001c180e3c2ab)) {return $this->prop_groups[$vb78a51df08ebf5c0b87001c180e3c2ab];}else {return false;}}public function getValue($vdfc394bd05a4b48161c790034af522a8) {if($v23a5b8ab834cb5140fa6665622eb6417 = $this->getPropByName($vdfc394bd05a4b48161c790034af522a8)) {return $v23a5b8ab834cb5140fa6665622eb6417->getValue();}else {return false;}}public function setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e) {if($v23a5b8ab834cb5140fa6665622eb6417 = $this->getPropByName($vdfc394bd05a4b48161c790034af522a8)) {$this->setIsUpdated();return $v23a5b8ab834cb5140fa6665622eb6417->setValue($v2771be291c4a714ca95fd1f45a32403e);}else {return false;}}public function commit() {if($this->checkSelf()) {foreach($this->properties as $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) {$v23a5b8ab834cb5140fa6665622eb6417->commit();}}}parent::commit();}public function checkSelf() {static $v9b207167e5381c47682c6b4f58a623fb;if($v9b207167e5381c47682c6b4f58a623fb !== null) {return $v9b207167e5381c47682c6b4f58a623fb;}if(!cacheFrontend::getInstance()->getIsConnected()) {return $v9b207167e5381c47682c6b4f58a623fb = true;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_objects WHERE id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}$v9b207167e5381c47682c6b4f58a623fb = (bool) mysql_num_rows($result);if(!$v9b207167e5381c47682c6b4f58a623fb) {cacheFrontend::getInstance()->flush();}return $v9b207167e5381c47682c6b4f58a623fb;}public function setIsUpdated($v8de61324edc43f3acb1b73da3c63e89e = true) {umiObjectsCollection::getInstance()->addUpdatedObjectId($this->id);return parent::setIsUpdated($v8de61324edc43f3acb1b73da3c63e89e);}}interface iUmiFieldTypesCollection {public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v870b60148237c1452dfb337fdd19c314 = "string", $v09ec737a9ab66d1d796304239d3f8a86 = false, $va4e397efa082dcccc62563f1f2d9513b = false);public function delFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldTypesList();}class umiFieldTypesCollection extends singleton implements iSingleton, iUmiFieldTypesCollection {private $field_types = Array();protected function __construct() {$this->loadFieldTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v17f71d965fe9589ddbd11caf7182243e = "string", $v96a76ec43956dac431b643cbd544dd08 = false, $vf089d93c2ef0d088edadddb0028d548d = false) {if(!umiFieldType::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {throw new coreException("Not valid data type given");return false;}$this->disableCache();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_types (data_type) VALUES('{$v17f71d965fe9589ddbd11caf7182243e}')";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v1e3f04102267eaf5e8d0ca424fd5c561 = mysql_insert_id();$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v519504d7d4beb745dac24ccfb6c1d7c9->setName($vb068931cc450442b63f5b3d276ea4297);$v519504d7d4beb745dac24ccfb6c1d7c9->setDataType($v17f71d965fe9589ddbd11caf7182243e);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsMultiple($v96a76ec43956dac431b643cbd544dd08);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsUnsigned($vf089d93c2ef0d088edadddb0028d548d);$v519504d7d4beb745dac24ccfb6c1d7c9->commit();$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;return $v1e3f04102267eaf5e8d0ca424fd5c561;}public function delFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {$this->disableCache();if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {$v1e3f04102267eaf5e8d0ca424fd5c561 = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_field_types WHERE id = '{$v1e3f04102267eaf5e8d0ca424fd5c561}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561]);return true;}else {return false;}}public function getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {return $this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561];}else {return true;}}public function isExists($v1e3f04102267eaf5e8d0ca424fd5c561) {return (bool) array_key_exists($v1e3f04102267eaf5e8d0ca424fd5c561, $this->field_types);}private function loadFieldTypes() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name, data_type, is_multiple, is_unsigned FROM cms3_object_field_types ORDER BY name ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return $v56bd7107802ebe56c6918992f0608ec6;}while(list($v1e3f04102267eaf5e8d0ca424fd5c561) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v519504d7d4beb745dac24ccfb6c1d7c9 = cacheFrontend::getInstance()->load($v1e3f04102267eaf5e8d0ca424fd5c561, "field_type");if($v519504d7d4beb745dac24ccfb6c1d7c9 instanceof umiFieldType == false) {try {$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v519504d7d4beb745dac24ccfb6c1d7c9, "field_type");}$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;}return true;}public function getFieldTypesList() {return $this->field_types;}}interface iUmiFieldsCollection {public function addField($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $ve2aeb4e882d60b1eb4b7c8cd97986a28, $v19fad0416b4b101ab72faccf4c323024 = true, $v73b8754d45983f35756b157ea439de8c = false, $v55e0eccc570671ca7ba7f5ef4ded0b96 = false);public function delField($v3aabf39f2d943fa886d86dcbbee4d910);public function getField($v945100186b119048837b9859c2c46410);}class umiFieldsCollection extends singleton implements iSingleton, iUmiFieldsCollection {private $fields = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d = false) {if($this->isExists($v3aabf39f2d943fa886d86dcbbee4d910)) {return $this->fields[$v3aabf39f2d943fa886d86dcbbee4d910];}else {return $this->loadField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d);}}public function delField($v3aabf39f2d943fa886d86dcbbee4d910) {$this->disableCache();if($this->isExists($v3aabf39f2d943fa886d86dcbbee4d910)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_fields WHERE id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->fields[$v3aabf39f2d943fa886d86dcbbee4d910]);return true;}else {return false;}}public function addField($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1e3f04102267eaf5e8d0ca424fd5c561, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true, $v1945c9a2a5e2ba6133f1db6757a35fcb = false, $vd5752333adc3a004f826f2ea2a41273a = false) {$this->disableCache();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_fields VALUES()";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v3aabf39f2d943fa886d86dcbbee4d910 = mysql_insert_id();$v06e3d36fa30cea095545139854ad1fb9 = new umiField($v3aabf39f2d943fa886d86dcbbee4d910);$v06e3d36fa30cea095545139854ad1fb9->setName($vb068931cc450442b63f5b3d276ea4297);$v06e3d36fa30cea095545139854ad1fb9->setTitle($vd5d3db1765287eef77d7927cc956f50a);if(!$v06e3d36fa30cea095545139854ad1fb9->setFieldTypeId($v1e3f04102267eaf5e8d0ca424fd5c561)) return false;$v06e3d36fa30cea095545139854ad1fb9->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v06e3d36fa30cea095545139854ad1fb9->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);$v06e3d36fa30cea095545139854ad1fb9->setIsInheritable($vd5752333adc3a004f826f2ea2a41273a);if(!$v06e3d36fa30cea095545139854ad1fb9->commit()) return false;$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;return $v3aabf39f2d943fa886d86dcbbee4d910;}public function isExists($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;return (bool) array_key_exists($v3aabf39f2d943fa886d86dcbbee4d910, $this->fields);}private function loadField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d) {$v06e3d36fa30cea095545139854ad1fb9 = cacheFrontend::getInstance()->load($v3aabf39f2d943fa886d86dcbbee4d910, "field");if($v06e3d36fa30cea095545139854ad1fb9 instanceof umiField == false) {try {$v06e3d36fa30cea095545139854ad1fb9 = new umiField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($v06e3d36fa30cea095545139854ad1fb9, "field");}if($v06e3d36fa30cea095545139854ad1fb9 instanceof umiField) {$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;return $this->fields[$v3aabf39f2d943fa886d86dcbbee4d910];}else {return false;}}}interface iUmiObjectTypesCollection {public function addType($vbfa030fe63bacd523dd70a76cfaed98a, $vb068931cc450442b63f5b3d276ea4297, $v73b8754d45983f35756b157ea439de8c = false);public function delType($v5f694956811487225d15e973ca38fbab);public function getType($v5f694956811487225d15e973ca38fbab);public function getSubTypesList($v5f694956811487225d15e973ca38fbab);public function getParentClassId($v5f694956811487225d15e973ca38fbab);public function getChildClasses($v5f694956811487225d15e973ca38fbab);public function getGuidesList($v848510e91f02f04fc5edf94f85f248d8 = false);public function getTypesByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631, $v35507ea46d2c0b049d7ed968c449223d = false);public function getTypeByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631, $v35507ea46d2c0b049d7ed968c449223d = false);public function getBaseType($v84aa805a9d919179ab8f8b24376e2ed7, $v4c2f1ec2014300ad2af17410a4adc3e1 = "");}class umiObjectTypesCollection extends singleton implements iSingleton, iUmiObjectTypesCollection {private $types = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getType($v94757cae63fd3e398c0811a976dd6bbe) {if(!$v94757cae63fd3e398c0811a976dd6bbe) {return false;}if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->types[$v94757cae63fd3e398c0811a976dd6bbe];}else {if(true) {$this->loadType($v94757cae63fd3e398c0811a976dd6bbe);return getArrayKey($this->types, $v94757cae63fd3e398c0811a976dd6bbe);}else {return false;}}throw new coreException("Unknow error");}public function addType($v6be379826b20cc58475f636e33f4606b, $vb068931cc450442b63f5b3d276ea4297, $v1945c9a2a5e2ba6133f1db6757a35fcb = false) {$this->disableCache();$v6be379826b20cc58475f636e33f4606b = (int) $v6be379826b20cc58475f636e33f4606b;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_types (parent_id) VALUES('{$v6be379826b20cc58475f636e33f4606b}')";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v94757cae63fd3e398c0811a976dd6bbe = mysql_insert_id();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT * FROM cms3_object_field_groups WHERE type_id = '{$v6be379826b20cc58475f636e33f4606b}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_assoc($result)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_groups (name, title, type_id, is_active, is_visible, ord, is_locked) VALUES ('" . mysql_real_escape_string($vf1965a857bc285d26fe22023aa5ab50d['name']) . "', '" . mysql_real_escape_string($vf1965a857bc285d26fe22023aa5ab50d['title']) . "', '{$v94757cae63fd3e398c0811a976dd6bbe}', '{$vf1965a857bc285d26fe22023aa5ab50d['is_active']}', '{$vf1965a857bc285d26fe22023aa5ab50d['is_visible']}', '{$vf1965a857bc285d26fe22023aa5ab50d['ord']}', '{$vf1965a857bc285d26fe22023aa5ab50d['is_locked']}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v159ce805831f9f42598564e0fbd06f83 = $vf1965a857bc285d26fe22023aa5ab50d['id'];$v5f2444d49c5d43b9cf7a3d7174b983f1 = mysql_insert_id();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_fields_controller SELECT ord, field_id, '{$v5f2444d49c5d43b9cf7a3d7174b983f1}' FROM cms3_fields_controller WHERE group_id = '{$v159ce805831f9f42598564e0fbd06f83}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}$vee085e556579b9a69e64e3eddc559b89 = false;if($v6be379826b20cc58475f636e33f4606b) {$v328a21868fce2b3f8569db40f1aa8a89 = $this->getType($v6be379826b20cc58475f636e33f4606b);if($v328a21868fce2b3f8569db40f1aa8a89) {$vee085e556579b9a69e64e3eddc559b89 = $v328a21868fce2b3f8569db40f1aa8a89->getHierarchyTypeId();}}$v599dcce2998a6b40b1e38e8c6006cb0a = new umiObjectType($v94757cae63fd3e398c0811a976dd6bbe);$v599dcce2998a6b40b1e38e8c6006cb0a->setName($vb068931cc450442b63f5b3d276ea4297);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);if($vee085e556579b9a69e64e3eddc559b89) {$v599dcce2998a6b40b1e38e8c6006cb0a->setHierarchyTypeId($vee085e556579b9a69e64e3eddc559b89);}$v599dcce2998a6b40b1e38e8c6006cb0a->commit();$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return $v94757cae63fd3e398c0811a976dd6bbe;}public function delType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {$v599dcce2998a6b40b1e38e8c6006cb0a = $this->getType($v94757cae63fd3e398c0811a976dd6bbe);if ($v599dcce2998a6b40b1e38e8c6006cb0a->getIsLocked()) throw new publicAdminException (getLabel('error-object-type-locked'));$this->disableCache();$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChildClasses($v94757cae63fd3e398c0811a976dd6bbe);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vadce578d04ed03c31f6ac59451fcf8e4);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd4fd255f51559df00de5424b64292413 = $vadce578d04ed03c31f6ac59451fcf8e4[$v865c0c0b4ab0e063e5caa3387c1a8741];if($this->isExists($vd4fd255f51559df00de5424b64292413)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_objects WHERE type_id = '{$vd4fd255f51559df00de5424b64292413}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_types WHERE id = '{$vd4fd255f51559df00de5424b64292413}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->types[$vd4fd255f51559df00de5424b64292413]);}}$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_objects WHERE type_id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_types WHERE id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->types[$v94757cae63fd3e398c0811a976dd6bbe]);return true;}else {return false;}}public function isExists($v94757cae63fd3e398c0811a976dd6bbe) {return true;}private function isLoaded($v94757cae63fd3e398c0811a976dd6bbe) {if($v94757cae63fd3e398c0811a976dd6bbe === false) return false;return (bool) array_key_exists($v94757cae63fd3e398c0811a976dd6bbe, $this->types);}private function loadType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return true;}else {$v599dcce2998a6b40b1e38e8c6006cb0a = cacheFrontend::getInstance()->load($v94757cae63fd3e398c0811a976dd6bbe, "object_type");if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType == false) {try {$v599dcce2998a6b40b1e38e8c6006cb0a = new umiObjectType($v94757cae63fd3e398c0811a976dd6bbe);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($v599dcce2998a6b40b1e38e8c6006cb0a, "object_type");}if(is_object($v599dcce2998a6b40b1e38e8c6006cb0a)) {$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return true;}else {return false;}}}public function getSubTypesList($v94757cae63fd3e398c0811a976dd6bbe) {if(!is_numeric($v94757cae63fd3e398c0811a976dd6bbe)) {throw new coreException("Type id must be numeric");return false;}$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_object_types WHERE parent_id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($v94757cae63fd3e398c0811a976dd6bbe) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = (int) $v94757cae63fd3e398c0811a976dd6bbe;}return $v9b207167e5381c47682c6b4f58a623fb;}public function getParentClassId($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->getType($v94757cae63fd3e398c0811a976dd6bbe)->getParentId();}else {$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE parent_id FROM cms3_object_types WHERE id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($v2e3c048401582f4247d7ccac43657d2d) = mysql_fetch_row($result)) {return (int) $v2e3c048401582f4247d7ccac43657d2d;}else {return false;}}}public function getChildClasses($v94757cae63fd3e398c0811a976dd6bbe, $vadce578d04ed03c31f6ac59451fcf8e4 = false) {$v9b207167e5381c47682c6b4f58a623fb = Array();if(!$vadce578d04ed03c31f6ac59451fcf8e4) $vadce578d04ed03c31f6ac59451fcf8e4 = Array();$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_object_types WHERE parent_id = '{$v94757cae63fd3e398c0811a976dd6bbe}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vb80bb7740288fda1f201890375a60c8f) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[] = $vb80bb7740288fda1f201890375a60c8f;if(!in_array($vb80bb7740288fda1f201890375a60c8f, $vadce578d04ed03c31f6ac59451fcf8e4)) $v9b207167e5381c47682c6b4f58a623fb = array_merge($v9b207167e5381c47682c6b4f58a623fb, $this->getChildClasses($vb80bb7740288fda1f201890375a60c8f, $v9b207167e5381c47682c6b4f58a623fb));}$v9b207167e5381c47682c6b4f58a623fb = array_unique($v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}public function getGuidesList($v805ab0374f72d8da46502cbb00c05464 = false) {$v9b207167e5381c47682c6b4f58a623fb = Array();if($v805ab0374f72d8da46502cbb00c05464) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name FROM cms3_object_types WHERE is_guidable = '1' AND is_public = '1'";}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name FROM cms3_object_types WHERE is_guidable = '1'";}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[$vb80bb7740288fda1f201890375a60c8f] = $this->translateLabel($vb068931cc450442b63f5b3d276ea4297);}return $v9b207167e5381c47682c6b4f58a623fb;}public function getTypesByHierarchyTypeId($v0715f6d9497f93911417c9c324265771, $v35507ea46d2c0b049d7ed968c449223d = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771]) && $v35507ea46d2c0b049d7ed968c449223d == false) return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771];$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name FROM cms3_object_types WHERE hierarchy_type_id = '{$v0715f6d9497f93911417c9c324265771}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v9b207167e5381c47682c6b4f58a623fb = Array();while(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[$vb80bb7740288fda1f201890375a60c8f] = $this->translateLabel($vb068931cc450442b63f5b3d276ea4297);}return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771] = $v9b207167e5381c47682c6b4f58a623fb;}public function getTypeByHierarchyTypeId($v0715f6d9497f93911417c9c324265771, $v35507ea46d2c0b049d7ed968c449223d = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771]) && $v35507ea46d2c0b049d7ed968c449223d == false) return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771];$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id FROM cms3_object_types WHERE hierarchy_type_id = '{$v0715f6d9497f93911417c9c324265771}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if(list($vb80bb7740288fda1f201890375a60c8f) = mysql_fetch_row($result)) {return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771] = $vb80bb7740288fda1f201890375a60c8f;}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771] = false;}}public function getBaseType($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca = "") {$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca);if($vb946c44d711ade3b061653732977d043) {$v0715f6d9497f93911417c9c324265771 = $vb946c44d711ade3b061653732977d043->getId();$v94757cae63fd3e398c0811a976dd6bbe = $this->getTypeByHierarchyTypeId($v0715f6d9497f93911417c9c324265771);return (int) $v94757cae63fd3e398c0811a976dd6bbe;}else {return false;}}}interface iUmiObjectsCollection {public function getObject($v16b2b26000987faccb260b9d39df1269);public function addObject($vb068931cc450442b63f5b3d276ea4297, $v5f694956811487225d15e973ca38fbab, $v73b8754d45983f35756b157ea439de8c = false);public function delObject($v16b2b26000987faccb260b9d39df1269);public function cloneObject($va77b1053cb200e022574f213c7553d88);public function getGuidedItems($v52eb29c6d8ea0d3a5bb3654f49bbd7c7);public function unloadObject($v16b2b26000987faccb260b9d39df1269);}class umiObjectsCollection extends singleton implements iSingleton, iUmiObjectsCollection {private $objects = Array();private $updatedObjects = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function isLoaded($vaf31437ce61345f416579830a98c91e5) {if(gettype($vaf31437ce61345f416579830a98c91e5) == "object") {throw new coreException("Object given!");}return (bool) array_key_exists($vaf31437ce61345f416579830a98c91e5, $this->objects);}public function isExists($vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;$result = l_mysql_query("SELECT COUNT(*) FROM cms3_objects WHERE id = '{$vaf31437ce61345f416579830a98c91e5}'");if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}else {list($ve2942a04780e223b215eb8b663cf5353) = mysql_fetch_row($result);}return ($ve2942a04780e223b215eb8b663cf5353 > 0);}public function getObject($vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;if(!$vaf31437ce61345f416579830a98c91e5) {return false;}if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {return $this->objects[$vaf31437ce61345f416579830a98c91e5];}$va8cfde6331bd59eb2ac96f8911c4b666 = cacheFrontend::getInstance()->load($vaf31437ce61345f416579830a98c91e5, "object");if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject == false) {try {$va8cfde6331bd59eb2ac96f8911c4b666 = new umiObject($vaf31437ce61345f416579830a98c91e5);}catch (baseException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($va8cfde6331bd59eb2ac96f8911c4b666, "object");}if(is_object($va8cfde6331bd59eb2ac96f8911c4b666)) {$this->objects[$vaf31437ce61345f416579830a98c91e5] = $va8cfde6331bd59eb2ac96f8911c4b666;return $this->objects[$vaf31437ce61345f416579830a98c91e5];}else {return false;}}public function delObject($vaf31437ce61345f416579830a98c91e5) {if($this->isExists($vaf31437ce61345f416579830a98c91e5)) {$this->disableCache();$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;if(defined("SV_USER_ID")) {if($vaf31437ce61345f416579830a98c91e5 == SV_USER_ID || $vaf31437ce61345f416579830a98c91e5 == SV_GROUP_ID || $vaf31437ce61345f416579830a98c91e5 == 2373) {throw new coreException("You are not allowed to delete object #{$vaf31437ce61345f416579830a98c91e5}. Never. Don't even try.");}}$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->commit();$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_objects WHERE id = '{$vaf31437ce61345f416579830a98c91e5}' AND is_locked='0'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {unset($this->objects[$vaf31437ce61345f416579830a98c91e5]);}cacheFrontend::getInstance()->del($vaf31437ce61345f416579830a98c91e5, "object");return true;}else {return false;}}public function addObject($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe, $v1945c9a2a5e2ba6133f1db6757a35fcb = false) {$this->disableCache();$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_objects (type_id) VALUES('$v94757cae63fd3e398c0811a976dd6bbe')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vaf31437ce61345f416579830a98c91e5 = mysql_insert_id();$va8cfde6331bd59eb2ac96f8911c4b666 = new umiObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->setName($vb068931cc450442b63f5b3d276ea4297);$va8cfde6331bd59eb2ac96f8911c4b666->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);if($v5571898aeb5505ee9a9111ddd83598f7 = cmsController::getInstance()->getModule("users")) {if($v5571898aeb5505ee9a9111ddd83598f7->is_auth()) {$ve8701ad48ba05a91604e480dd60899a3 = cmsController::getInstance()->getModule("users")->user_id;$va8cfde6331bd59eb2ac96f8911c4b666->setOwnerId($ve8701ad48ba05a91604e480dd60899a3);}}else {$va8cfde6331bd59eb2ac96f8911c4b666->setOwnerId(NULL);}$va8cfde6331bd59eb2ac96f8911c4b666->commit();$this->objects[$vaf31437ce61345f416579830a98c91e5] = $va8cfde6331bd59eb2ac96f8911c4b666;$this->resetObjectProperties($vaf31437ce61345f416579830a98c91e5);return $vaf31437ce61345f416579830a98c91e5;}public function cloneObject($va77b1053cb200e022574f213c7553d88) {$v25d877efea6783c4bc6117555350c1d3 = false;$vd82f268d5a82fc66260ad083d1a2e5b4 = $this->getObject($va77b1053cb200e022574f213c7553d88);if ($vd82f268d5a82fc66260ad083d1a2e5b4 instanceof umiObject) {$v2ac03ecbbe52ba8d9e62808d586f02aa = "INSERT INTO cms3_objects (name, is_locked, type_id, owner_id) SELECT name, is_locked, type_id, owner_id FROM cms3_objects WHERE id = '{$va77b1053cb200e022574f213c7553d88}'";l_mysql_query($v2ac03ecbbe52ba8d9e62808d586f02aa);if ($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$vadf62911d523a4c7be2611e6b5f23612 = mysql_insert_id();$v2ac03ecbbe52ba8d9e62808d586f02aa = "INSERT INTO cms3_object_content (obj_id, field_id, int_val, varchar_val, text_val, rel_val, tree_val,float_val)  SELECT '{$vadf62911d523a4c7be2611e6b5f23612}' as obj_id, field_id, int_val, varchar_val, text_val, rel_val, tree_val,float_val FROM cms3_object_content WHERE obj_id = '$va77b1053cb200e022574f213c7553d88'";l_mysql_query($v2ac03ecbbe52ba8d9e62808d586f02aa);if ($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v25d877efea6783c4bc6117555350c1d3 = $vadf62911d523a4c7be2611e6b5f23612;}return $v25d877efea6783c4bc6117555350c1d3;}public function getGuidedItems($v051369818a8073bba5feeb0e957eb308) {$v9b207167e5381c47682c6b4f58a623fb = Array();$v051369818a8073bba5feeb0e957eb308 = (int) $v051369818a8073bba5feeb0e957eb308;$v47474f16bc8e08736ec6d8eece4f8c96 = intval(regedit::getInstance()->getVal("//settings/ignore_guides_sort")) ? true : false;if($v47474f16bc8e08736ec6d8eece4f8c96)    $vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name FROM cms3_objects WHERE type_id = '{$v051369818a8073bba5feeb0e957eb308}' ORDER BY id ASC";else    $vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, name FROM cms3_objects WHERE type_id = '{$v051369818a8073bba5feeb0e957eb308}' ORDER BY name ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297) = mysql_fetch_row($result)) {$v9b207167e5381c47682c6b4f58a623fb[$vb80bb7740288fda1f201890375a60c8f] = $this->translateLabel($vb068931cc450442b63f5b3d276ea4297);}if(!$v47474f16bc8e08736ec6d8eece4f8c96)    natsort($v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}protected function resetObjectProperties($vaf31437ce61345f416579830a98c91e5) {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject($vaf31437ce61345f416579830a98c91e5);$v87306dd4235ed712ebc07fe169b76f83 = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$v37c0c66b0de38f0adb05826f136d75f7 = $v7ae7003da59ae71dcc9f8638ef50593d->getAllFields();foreach($v37c0c66b0de38f0adb05826f136d75f7 as $vb8b49ef6bc7c1cfa510520b8a17b9f69) {$va8cfde6331bd59eb2ac96f8911c4b666->setValue($vb8b49ef6bc7c1cfa510520b8a17b9f69->getName(), Array());}if(sizeof($v37c0c66b0de38f0adb05826f136d75f7) == 0) {$v80071f37861c360a27b7327e132c911a = umiBranch::getBranchedTableByTypeId($v87306dd4235ed712ebc07fe169b76f83);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$v80071f37861c360a27b7327e132c911a} (obj_id, field_id) VALUES ('{$vaf31437ce61345f416579830a98c91e5}', NULL)";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}}public function unloadObject($vaf31437ce61345f416579830a98c91e5) {if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {unset($this->objects[$vaf31437ce61345f416579830a98c91e5]);}else {return false;}}public function getCollectedObjects() {return array_keys($this->objects);}public function addUpdatedObjectId($vaf31437ce61345f416579830a98c91e5) {if(!in_array($vaf31437ce61345f416579830a98c91e5, $this->updatedObjects)) {$this->updatedObjects[] = $vaf31437ce61345f416579830a98c91e5;}}public function getUpdatedObjects() {return $this->updatedObjects;}public function __destruct() {if(sizeof($this->updatedObjects)) {if(function_exists("deleteObjectsRelatedPages")) {deleteObjectsRelatedPages();}}}}class umiObjectPropertyBoolean extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['int_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE int_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, int_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyImgFile extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['text_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::unescapeFilePath($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vb798abe6e1b1318ee36b0dcb3fb9e4d3 = new umiImageFile(self::filterOutputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf));if($vb798abe6e1b1318ee36b0dcb3fb9e4d3->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE text_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::unescapeFilePath($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vb798abe6e1b1318ee36b0dcb3fb9e4d3 = new umiImageFile(self::filterOutputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf));if($vb798abe6e1b1318ee36b0dcb3fb9e4d3->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {if(!@is_file($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath())) {continue;}$v3a6d0284e743dc4a9b86f97d6dd1a3bf = mysql_real_escape_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath());}else {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = mysql_real_escape_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::unescapeFilePath($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, text_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyRelation extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['rel_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}if($this->getIsMultiple()) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE rel_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE rel_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}$vfa816edb83e95bf0c8da580bdfd491ef = Array();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && strpos($v3a6d0284e743dc4a9b86f97d6dd1a3bf, "|") !== false) {$v2e3a8d3f3d1c742f7234c3d6dd74cc3c = split("\|", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);foreach($v2e3a8d3f3d1c742f7234c3d6dd74cc3c as $v9e3669d19b675bd57058fd4664205d2a) {$v9e3669d19b675bd57058fd4664205d2a = trim($v9e3669d19b675bd57058fd4664205d2a);if($v9e3669d19b675bd57058fd4664205d2a) $vfa816edb83e95bf0c8da580bdfd491ef[] = $v9e3669d19b675bd57058fd4664205d2a;unset($v9e3669d19b675bd57058fd4664205d2a);}unset($v2e3a8d3f3d1c742f7234c3d6dd74cc3c);$this->getField()->setFieldTypeId(7);}else {$vfa816edb83e95bf0c8da580bdfd491ef[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}$this->value = $vfa816edb83e95bf0c8da580bdfd491ef;unset($vfa816edb83e95bf0c8da580bdfd491ef);$ve23ef6e93b070c8d28adc485c1f13b73 = self::$USE_FORCE_OBJECTS_CREATION;$vbf516925bb37a8544c8ee19a24e15c05 = Array();foreach($this->value as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if($v3a6d0284e743dc4a9b86f97d6dd1a3bf instanceof umiObject) {$vbf516925bb37a8544c8ee19a24e15c05[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf->getId();}else if (is_numeric($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$vbf516925bb37a8544c8ee19a24e15c05[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}foreach($this->value as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $this->value[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf->getId();}else {if(is_numeric($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && umiObjectsCollection::getInstance()->isExists($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && !$ve23ef6e93b070c8d28adc485c1f13b73) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $this->value[$v3c6e0b8a9c15224a8228b9a98ca1531d] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}else {if($v051369818a8073bba5feeb0e957eb308 = $this->field->getGuideId()) {$vbb4744ed1cc7cb81da0e8cdd2e483cba = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_objects WHERE type_id = '{$v051369818a8073bba5feeb0e957eb308}' AND name = '{$vbb4744ed1cc7cb81da0e8cdd2e483cba}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6 . " with sql: \"{$vac5c74b64b4b8352ef2f181affb5ac2a}\"");return false;}if(mysql_num_rows($result)) {list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result);}else {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf = umiObjectsCollection::getInstance()->addObject($v3a6d0284e743dc4a9b86f97d6dd1a3bf, $v051369818a8073bba5feeb0e957eb308)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $this->value[$v3c6e0b8a9c15224a8228b9a98ca1531d] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}else {throw new coreException("Can't create guide item");return false;}}}else {continue;}}}if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, rel_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyTags extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['varchar_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE varchar_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(sizeof($this->value) == 1) {$v2063c1608d6e0baf80249c42e2be5804 =  split(",", preg_replace("/[^\A-z0-9А-я, ]/u", "", trim($this->value[0], ",")));}else {$v2063c1608d6e0baf80249c42e2be5804 = array_map( create_function('$a', " return preg_replace(\"/[^\\A-z0-9А-я,][ ]?/u\", \"\", \$a); ") , $this->value);}foreach($v2063c1608d6e0baf80249c42e2be5804 as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = trim($v3a6d0284e743dc4a9b86f97d6dd1a3bf);if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, varchar_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyDate extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['int_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = new umiDate((int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE int_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = new umiDate((int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") {continue;}else {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) ? (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf->timestamp : (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;if($v3a6d0284e743dc4a9b86f97d6dd1a3bf == false) {continue;}}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, int_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}}};class umiObjectPropertyInt extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['int_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE int_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, int_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyString extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['varchar_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE varchar_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, varchar_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}}class umiObjectPropertyText extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['text_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE text_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf == "<p />" || $v3a6d0284e743dc4a9b86f97d6dd1a3bf == "&nbsp;") $v3a6d0284e743dc4a9b86f97d6dd1a3bf = "";$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, text_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}public function __wakeup() {foreach($this->value as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if(is_string($v9e3669d19b675bd57058fd4664205d2a)) {$this->value[$v865c0c0b4ab0e063e5caa3387c1a8741] = str_replace("&#037;", "%", $v9e3669d19b675bd57058fd4664205d2a);}}}};class umiObjectPropertyFile extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['text_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::unescapeFilePath($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v8c7dd922ad47494fc02c388e12c00eac = new umiFile(self::filterOutputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf));if($v8c7dd922ad47494fc02c388e12c00eac->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8c7dd922ad47494fc02c388e12c00eac;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE text_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v8c7dd922ad47494fc02c388e12c00eac = new umiFile($v3a6d0284e743dc4a9b86f97d6dd1a3bf);if($v8c7dd922ad47494fc02c388e12c00eac->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8c7dd922ad47494fc02c388e12c00eac;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {if(!@is_file($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath())) {continue;}$v3a6d0284e743dc4a9b86f97d6dd1a3bf = mysql_real_escape_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath());}else {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = mysql_real_escape_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, text_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyPassword extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['varchar_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE varchar_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$this->deleteCurrentRows();$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, varchar_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyWYSIWYG extends umiObjectPropertyText {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['text_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;if(str_replace("&nbsp;", "", trim($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) == "") continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE text_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;if(str_replace("&nbsp;", "", trim($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) == "") continue;$v9b207167e5381c47682c6b4f58a623fb[] = self::filterOutputString((string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}};class umiObjectPropertyFloat extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['float_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (float) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE float_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = (float) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(strpos(".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf) === false) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace(",", ".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (float) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, float_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};class umiObjectPropertyPrice extends umiObjectPropertyFloat {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = parent::loadValue();if($v3766293ae0857925595a6f0bf40531a8 = cmsController::getInstance()->getModule("eshop")) {if(isset($v9b207167e5381c47682c6b4f58a623fb[0])) {list($v78a5eb43deef9a7b5b9ce157b9d52ac4) = $v9b207167e5381c47682c6b4f58a623fb;}else {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = 0;}$v78a5eb43deef9a7b5b9ce157b9d52ac4 = $v3766293ae0857925595a6f0bf40531a8->calculateDiscount($this->object_id, $v78a5eb43deef9a7b5b9ce157b9d52ac4);$v9b207167e5381c47682c6b4f58a623fb = Array($v78a5eb43deef9a7b5b9ce157b9d52ac4);}if(is_array($v9b207167e5381c47682c6b4f58a623fb)) {if(isset($v9b207167e5381c47682c6b4f58a623fb[0])) {list($v78a5eb43deef9a7b5b9ce157b9d52ac4) = $v9b207167e5381c47682c6b4f58a623fb;}else {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = 0;}}else {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = 0;}$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("umiObjectProperty_loadPriceValue");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("object_id", $this->object_id);$v161c9aaa4fe035e7b2f465bc59f3ab45->addRef("price", $v78a5eb43deef9a7b5b9ce157b9d52ac4);$v161c9aaa4fe035e7b2f465bc59f3ab45->call();$v9b207167e5381c47682c6b4f58a623fb = Array($v78a5eb43deef9a7b5b9ce157b9d52ac4);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(strpos(".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf) === false) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace(",", ".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v3a6d0284e743dc4a9b86f97d6dd1a3bf = abs((float) $v3a6d0284e743dc4a9b86f97d6dd1a3bf);if($v3a6d0284e743dc4a9b86f97d6dd1a3bf > 999999999.99) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = 999999999.99;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, float_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}public function __wakeup() {$this->value = $this->loadValue();}};class umiObjectPropertySymlink extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['tree_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement( (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf );if($v8e2dcfd7e7e24b1ca76c1193f645902b === false) continue;if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive() == false) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8e2dcfd7e7e24b1ca76c1193f645902b;}return $v9b207167e5381c47682c6b4f58a623fb;}$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE tree_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement( (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf );if($v8e2dcfd7e7e24b1ca76c1193f645902b === false) continue;if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive() == false) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8e2dcfd7e7e24b1ca76c1193f645902b;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();foreach($this->value as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf->getId();}if(is_numeric($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$this->value[$v865c0c0b4ab0e063e5caa3387c1a8741] = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v3a6d0284e743dc4a9b86f97d6dd1a3bf);}if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, tree_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);}}$this->fillNull();}};interface iUmiBaseStream {public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736);public function stream_read($ve2942a04780e223b215eb8b663cf5353);public function stream_write($v8d777f385d3dfec8815d20f7496026dc);public function stream_tell();public function stream_eof();public function stream_seek($v7a86c157ee9713c34fbd7a1ee40f0c5a, $v02c86cc535151887678873a6d0a3c347);public function stream_flush();public function stream_close();public function url_stat();public function getProtocol();public static function getCalledStreams();};abstract class umiBaseStream implements iUmiBaseStream {public static $allowTimeMark = true;protected $position = 0,    $length = 0,    $data = "",    $expire = 0,    $transform = "",    $path, $params = Array();protected $scheme;protected static $callLog = Array();private  $start_time = false;public function __construct() {$this->start_time = microtime(true);}public function stream_flush() {return true;}public function stream_tell() {return $this->position;}public function stream_eof() {return $this->position >= $this->length;}public function stream_seek($v7a86c157ee9713c34fbd7a1ee40f0c5a, $v02c86cc535151887678873a6d0a3c347) {switch($v02c86cc535151887678873a6d0a3c347) {case SEEK_SET: {if($this->isValidOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a)) {$this->position = $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}case SEEK_CUR: {if($v7a86c157ee9713c34fbd7a1ee40f0c5a >= 0) {$this->position += $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}case SEEK_END: {if($this->isValidOffset($this->position + $v7a86c157ee9713c34fbd7a1ee40f0c5a)) {$this->position = $this->length + $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}default: {return false;}}}public function url_stat() {return Array();}public function stream_stat() {return Array();}public function stream_close() {return true;}public function stream_read($ve2942a04780e223b215eb8b663cf5353) {$result = bytes_substr($this->data, $this->position, $ve2942a04780e223b215eb8b663cf5353);$this->position += $ve2942a04780e223b215eb8b663cf5353;return $result;}public function stream_write($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$vfa2a5780ee71a3c906f941f11804346a = bytes_strlen($ve62e4d22f2d8630f6e44e2b7c3f70ddc);$v5db949cee806af8b6998a0b53bc78489 = bytes_substr($this->data, 0, $this->position);$ve2ad64473fdb1836ebaa0dc70299e9a8 = bytes_substr($this->data, $this->position + $vfa2a5780ee71a3c906f941f11804346a);$this->data = $v5db949cee806af8b6998a0b53bc78489 . $ve62e4d22f2d8630f6e44e2b7c3f70ddc . $ve2ad64473fdb1836ebaa0dc70299e9a8;$this->position += $ve62e4d22f2d8630f6e44e2b7c3f70ddc;return $vfa2a5780ee71a3c906f941f11804346a;}public function getProtocol() {return $this->scheme . "://";}protected function isValidOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a) {return ($v7a86c157ee9713c34fbd7a1ee40f0c5a >= 0) && ($v7a86c157ee9713c34fbd7a1ee40f0c5a < $this->length);}protected function translateToXml($v9b207167e5381c47682c6b4f58a623fb = Array()) {$vf9d06f6bf4fdf64ee0d73708c1a94ee1 = number_format(microtime(true) - $this->start_time, 6);self::reportCallTime($this->getProtocol() . $this->path, $vf9d06f6bf4fdf64ee0d73708c1a94ee1);if(isset($v9b207167e5381c47682c6b4f58a623fb['plain:result'])) {return $v9b207167e5381c47682c6b4f58a623fb['plain:result'];}$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument("1.0", "utf-8");$v9119bd388184b01e6237543be6983c6c = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement("udata");$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v9119bd388184b01e6237543be6983c6c);$v9b207167e5381c47682c6b4f58a623fb['attribute:generation-time'] = $vf9d06f6bf4fdf64ee0d73708c1a94ee1;$va9af713c2b2cfe00ff6c77a6a07127ed = new xmlTranslator($vdd988cfd769c9f7fbd795a0f5da8e751);$va9af713c2b2cfe00ff6c77a6a07127ed->translateToXml($v9119bd388184b01e6237543be6983c6c, $v9b207167e5381c47682c6b4f58a623fb);if($this->transform) {return $this->applyXslTransformation($vdd988cfd769c9f7fbd795a0f5da8e751, $this->transform);}return $vdd988cfd769c9f7fbd795a0f5da8e751->saveXml();}protected function applyXslTransformation(DOMDocument $vdd988cfd769c9f7fbd795a0f5da8e751, $v6a559eac8ab38b0b76a6fca32dcb9749) {$vc3aaa7dd2c4cf0305f95e82438b46e82 = DomDocument::load("./xsltTpls/" . $v6a559eac8ab38b0b76a6fca32dcb9749, DOM_LOAD_OPTIONS);checkXmlError($vc3aaa7dd2c4cf0305f95e82438b46e82);$v801f7201346b43f8ee8390a1ef20ddcd = new xsltProcessor;$v801f7201346b43f8ee8390a1ef20ddcd->registerPHPFunctions();$v801f7201346b43f8ee8390a1ef20ddcd->importStyleSheet($vc3aaa7dd2c4cf0305f95e82438b46e82);return $v801f7201346b43f8ee8390a1ef20ddcd->transformToXML($vdd988cfd769c9f7fbd795a0f5da8e751);}protected function parsePath($vd6fe1d0be6347b8ef2427fa629c04485) {$v81788ba0d7d02d81c063dbca621ba11b = $this->getProtocol();$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, strlen($v81788ba0d7d02d81c063dbca621ba11b));$v6d530125c7b0bc91b8b49c9d98795759 = parse_url($vd6fe1d0be6347b8ef2427fa629c04485);$this->path = $v6d530125c7b0bc91b8b49c9d98795759['path'];self::$callLog[] = Array($v81788ba0d7d02d81c063dbca621ba11b . $vd6fe1d0be6347b8ef2427fa629c04485, false);if($v21ffce5b8a6cc8cc6a41448dd69623c9 = getArrayKey($v6d530125c7b0bc91b8b49c9d98795759, 'query')) {parse_str($v21ffce5b8a6cc8cc6a41448dd69623c9, $vd5330079a488b3cac29a84f13a458629);$this->params = $vd5330079a488b3cac29a84f13a458629;$_REQUEST = array_merge($_REQUEST, $vd5330079a488b3cac29a84f13a458629);if(isset($vd5330079a488b3cac29a84f13a458629['expire'])) {$this->expire = getArrayKey($vd5330079a488b3cac29a84f13a458629, 'expire');}if(isset($vd5330079a488b3cac29a84f13a458629['transform'])) {$this->transform = getArrayKey($vd5330079a488b3cac29a84f13a458629, 'transform');}}return $this->path;}protected function normalizeString($v341be97d9aff90c9978347f66f945b77) {$v341be97d9aff90c9978347f66f945b77 = urldecode($v341be97d9aff90c9978347f66f945b77);if(!preg_match("/[\x{0000}-\x{FFFF}]+/u", $v341be97d9aff90c9978347f66f945b77)) {$v341be97d9aff90c9978347f66f945b77 = iconv("CP1251", "UTF-8//IGNORE", $v341be97d9aff90c9978347f66f945b77);}return $v341be97d9aff90c9978347f66f945b77;}protected function setData($v8d777f385d3dfec8815d20f7496026dc) {if(!$v8d777f385d3dfec8815d20f7496026dc) {return false;}$this->data = $v8d777f385d3dfec8815d20f7496026dc;$this->length = bytes_strlen($v8d777f385d3dfec8815d20f7496026dc);return true;}static public function registerStream($v41323917ef8089432959a3c33269debf) {$v6a2a431fe8b621037ea949531c28551d = CURRENT_WORKING_DIR . "/classes/streams/{$v41323917ef8089432959a3c33269debf}/{$v41323917ef8089432959a3c33269debf}Stream.php";if(file_exists($v6a2a431fe8b621037ea949531c28551d)) {include $v6a2a431fe8b621037ea949531c28551d;if(!stream_wrapper_register($v41323917ef8089432959a3c33269debf, "{$v41323917ef8089432959a3c33269debf}Stream")) {throw new coreException("Failed to register stream \"{$v41323917ef8089432959a3c33269debf}\"");}}else {throw new coreException("Can't locate file \"{$v6a2a431fe8b621037ea949531c28551d}\"");}}public static function protectParams($veca07335a33c5aeb5e1bc7c98b4b9d80) {return str_replace("/", "&#2F;", $veca07335a33c5aeb5e1bc7c98b4b9d80);}public static function unprotectParams($veca07335a33c5aeb5e1bc7c98b4b9d80) {return str_replace("&#2F;", "/", $veca07335a33c5aeb5e1bc7c98b4b9d80);}public static function getCalledStreams() {$v058ea00715de566bfe7b13f8e17aaf15 = Array();foreach(self::$callLog as $v3cde413efdb2e8ce17b094592df0334e) {list($v572d4e421e5e6b9bc11d815e8a027112, $v07cc694b9b3fc636710fa08b6922c42b) = $v3cde413efdb2e8ce17b094592df0334e;$v69ba0c89abba8a3e9cc0c5e32be0d35d = Array();$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:generation-time'] = $v07cc694b9b3fc636710fa08b6922c42b;$v69ba0c89abba8a3e9cc0c5e32be0d35d['node:url'] = $v572d4e421e5e6b9bc11d815e8a027112;$v058ea00715de566bfe7b13f8e17aaf15[] = $v69ba0c89abba8a3e9cc0c5e32be0d35d;}$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array('nodes:call' => $v058ea00715de566bfe7b13f8e17aaf15);$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument;$v173a1756d2d82394cb803161f70f9a38 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement("streams-call");$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v173a1756d2d82394cb803161f70f9a38);$vea392050444b5a06a86b8ec9c02d2437 = new xmlTranslator($vdd988cfd769c9f7fbd795a0f5da8e751);$vea392050444b5a06a86b8ec9c02d2437->translateToXml($v173a1756d2d82394cb803161f70f9a38, $vfca1bff8ad8b3a8585abfb0ad523ba42);header("Content-type: text/xml; charset=utf-8");echo $vdd988cfd769c9f7fbd795a0f5da8e751->saveXml();}public static function reportCallTime($vd6fe1d0be6347b8ef2427fa629c04485, $v07cc694b9b3fc636710fa08b6922c42b) {foreach(self::$callLog as &$v3cde413efdb2e8ce17b094592df0334e) {if($v3cde413efdb2e8ce17b094592df0334e[0] == $vd6fe1d0be6347b8ef2427fa629c04485) {$v3cde413efdb2e8ce17b094592df0334e[1] = $v07cc694b9b3fc636710fa08b6922c42b;}}}};$i18n = Array( "header-data-trash"  => "Корзина удаленных страниц", "label-empty-all"  => "Очистить корзину", "label-type-add"  => "Добавить тип данных", "header-data-config"  => "Настройки модуля", "header-data-types"  => "Типы данных", "header-data-type_group_add" => "Добавление группы полей", "header-data-type_edit"  => "Редактирование типа данных", "header-data-type_field_add" => "Добавление поля", "header-data-type_field_edit" => "Редактирование поля", "header-data-type_group_edit" => "Редактирование группы полей", "header-data-guides"  => "Справочники", "header-data-guide_item_edit" => "Редактирование элемента справочника", "label-type-name"  => "Название типа", "label-hierarchy-type"  => "Назначение типа", "label-is-public"  => "Общедоступный", "label-is-guide"  => "Можно использовать как справочник", "label-edit-type-common" => "Свойства типа", "label-add-fields-group" => "Добавить группу полей", "label-group-title"  => "Название группы", "label-group-name"  => "Идентификатор", "label-group-is-visible" => "Видимое", "label-field-title"  => "Название поля", "label-field-name"  => "Идентификатор", "label-field-tip"  => "Подсказка", "label-field-is-visible" => "Видимое", "label-field-in-search"  => "Индексировать", "label-field-in-filter"  => "Использовать в фильтрах", "label-field-type"  => "Тип поля", "label-field-default-guide" => "Использовать справочник", "label-field-is-required"  => "Обязательное", "field-is_active"  => "Активность", "label-guide-add"  => "Добавить справочник", "label-module"          => "Модуль", "label-method"          => "Метод", "field-name"   => "Название", "header-data-guide_items" => "Содержание справочника", 'object-type-blogs-blog_message' => 'Cообщение блога', 'object-type-rss-lenta'   => 'RSS-лента', 'object-type-users-author'  => 'Автор', 'object-type-eshop-address'  => 'Адрес доставки', 'object-type-banners-banner'  => 'Баннер', 'object-type-banners-banner-image'  => 'Баннер с картинкой', 'object-type-banners-banner-swf'  => 'Баннер с флешкой', 'object-type-banners-banner-html'  => 'Баннер с HTML', 'object-type-blogs-blog'  => 'Блог', 'object-type-valyuta'   => 'Валюта', 'object-type-vote-poll_item'  => 'Вариант ответа на опрос', 'object-type-vid_homyachka'  => 'Вид хомячка', 'object-type-faq-question'  => 'Вопрос в FAQ', 'object-type-catalog-question'  => 'Вопрос в матрице подбора', 'object-type-dispatches-release' => 'Выпуск рассылки', 'object-type-users-users'  => 'Группы пользователей', 'object-type-eshop-discount_card' => 'Дисконтная карта', 'object-type-druzhelyubnost_homyachka' => 'Дружелюбность хомячка', 'object-type-eshop-order'  => 'Заказ в интернет-магазине', 'object-type-content-ticket'  => 'Заметка', 'object-type-integriruemost_homyachka_v_koleso'   => 'Интегрируемость хомячка в колесо', 'object-type-faq-category'  => 'Категория в FAQ', 'object-type-kachestvo_fleshki'  => 'Качество флешки', 'object-type-catalog-object'  => 'Объект каталога', 'object-type-catalog-object-good'  => 'Товар в магазине', 'object-type-catalog-object-good-hamster'  => 'Хомячок', 'object-type-catalog-object-good-kolesa'  => 'Колеса для хомячков', 'object-type-catalog-object-good-povodki'  => 'Поводки', 'object-type-comments-comment'  => 'Комментарий', 'object-type-blogs-blog_comment' => 'Комментарий к сообщению блога', 'object-type-forum-conf'  => 'Конференция форума', 'object-type-kulinarnye_predpochteniya_homyachka'   => 'Кулинарные предпочтения хомячка', 'object-type-news-rubric'  => 'Лента новостей', 'object-type-updatesrv-license'  => 'Лицензия UMI.CMS', 'object-type-catalog-matrix'  => 'Матрица подбора', 'object-type-banners-place'  => 'Места показов баннеров', 'object-type-eshop-order_item'  => 'Наименование в заказе', 'object-type-news-item'   => 'Новость', 'object-type-okras_homyachka'  => 'Окрас хомячка', 'object-type-catalog-answer'  => 'Ответ на вопрос в матрице подбора', 'object-type-eshop-payment_transaction' => 'Платежная транзакция', 'object-type-dispatches-subscriber' => 'Подписчик на рассылку', 'object-type-pol'   => 'Пол', 'object-type-pol_homyachka'  => 'Пол хомячка', 'object-type-users-user'  => 'Пользователь', 'object-type-faq-project'  => 'Проект в FAQ', 'object-type-proizvoditeli'  => 'Производители', 'object-type-catalog-category'  => 'Раздел каталога', 'object-type-razdel_sajta'  => 'Раздел сайта', 'object-type-dispatches-dispatch' => 'Рассылка', 'object-type-filemanager-shared_file' => 'Скачиваемый файл', 'object-type-eshop-discount'  => 'Скидка в интернет-магазине', 'object-type-eshop-store'  => 'Склад интернет-магазина', 'object-type-forum-message'  => 'Сообщение в форуме', 'object-type-dispatches-message' => 'Сообщение рассылки', 'object-type-webforms-address'  => 'Список адресов', 'object-type-spisok_gorodov_dlya_geo' => 'Список городов для geo', 'object-type-spravochnik_dlya_polya_gorod' => 'Справочник для поля "Город"', 'object-type-spravochnik_dlya_polya_zhanr' => 'Справочник для поля "Жанр"', 'object-type-spravochnik_dlya_polya_nalichiya_na_skladah' => 'Справочник для поля "Наличия на складах"', 'object-type-spravochnik_dlya_polya_ukazatel_na_sklad'  => 'Справочник для поля "Указатель на склад"', 'object-type-spravochnik_dlya_polya_format_nositelya'  => 'Справочник для поля "Формат носителя"', 'object-type-spravochniki'  => 'Справочники', 'object-type-vote-poll'   => 'Стандартный опрос', 'object-type-eshop-order_status' => 'Статус заказа', 'object-type-eshop-payment_transaction_status' => 'Статус платежной транзакции', 'object-type-blogs-blog_privacy' => 'Степень приватности (блоги)', 'object-type-content-'   => 'Страница контента', 'object-type-strany'   => 'Страны', 'object-type-news-subject'  => 'Сюжет публикации', 'object-type-tip_rss'   => 'Тип RSS', 'object-type-updatesrv-license_type' => 'Тип лицензии UMI.CMS', 'object-type-tip_povodka'  => 'Тип поводка', 'object-type-tip_shersti_homyachka' => 'Тип шерсти хомячка', 'object-type-eshop-store_relation' => 'Товар на складе интернет-магазина', 'object-type-forum-topic'  => 'Топик в форуме', 'object-type-webforms-form'  => 'Форма обратной связи', 'object-type-photoalbum-album'  => 'Фотоальбом', 'object-type-photoalbum-photo'  => 'Фотография', 'object-type-harakter_homyachka' => 'Характер хомячка', 'object-type-cvet'   => 'Цвет', 'object-type-webforms-template'  => 'Шаблон письма', 'object-type-new-data-type'   =>  'Новый тип данных', 'object-type-new-guide'    =>  'Новый справочник', 'hierarchy-type-content-page'  => 'Страницы контента', 'hierarchy-type-users-user'  => 'Пользователи', 'hierarchy-type-catalog-category' => 'Разделы каталога', 'hierarchy-type-catalog-object'  => 'Объекты каталога', 'hierarchy-type-users-users'  => 'Группы пользователей', 'hierarchy-type-news-rubric'  => 'Ленты новостей', 'hierarchy-type-news-item'  => 'Новости', 'hierarchy-type-news-subject'  => 'Сюжет публикации', 'hierarchy-type-vote-poll'  => 'Опрос', 'hierarchy-type-vote-poll_item'  => 'Ответ в опросе', 'hierarchy-type-eshop-order'  => 'Заказ в интернет-магазине', 'hierarchy-type-eshop-order_item' => 'Наименование заказа в интернет-магазине', 'hierarchy-type-eshop-order_status' => 'Статус заказа в интернет-магазине', 'hierarchy-type-eshop-address'  => 'Адрес доставки', 'hierarchy-type-forum-conf'  => 'Конференция форума', 'hierarchy-type-forum-topic'  => 'Топик в форуме', 'hierarchy-type-forum-message'  => 'Сообщение в форуме', 'hierarchy-type-comments-comment' => 'Комментарий', 'hierarchy-type-updatesrv-license' => 'Лицензия UMI.CMS', 'hierarchy-type-updatesrv-license_type' => 'Тип лицензии UMI.CMS', 'hierarchy-type-banners-banner'  => 'Баннер', 'hierarchy-type-banners-place'  => 'Место показа баннера', 'hierarchy-type-dispatches-dispatch' => 'Рассылка', 'hierarchy-type-dispatches-release' => 'Выпуск рассылки', 'hierarchy-type-dispatches-message' => 'Сообщение рассылки', 'hierarchy-type-dispatches-subscriber' => 'Подписчик на рассылку', 'hierarchy-type-catalog-matrix'  => 'Матрица подбора', 'hierarchy-type-catalog-question' => 'Вопрос в матрице подбора', 'hierarchy-type-catalog-answer'  => 'Ответ на вопрос в матрице подбора', 'hierarchy-type-users-author'  => 'Автор', 'hierarchy-type-content-ticket'  => 'Заметка на сайте', 'hierarchy-type-photoalbum-album' => 'Фотоальбом', 'hierarchy-type-photoalbum-photo' => 'Фотография', 'hierarchy-type-faq-project'  => 'Проекты в FAQ', 'hierarchy-type-faq-category'  => 'Категории в FAQ', 'hierarchy-type-faq-question'  => 'Вопросы в FAQ', 'hierarchy-type-filemanager-shared_file' => 'Скачиваемый файл', 'hierarchy-type-eshop-store'  => 'Склад в интернет-магазине', 'hierarchy-type-eshop-store_relation' => 'Товар на складе интернет-магазина', 'hierarchy-type-eshop-discount_card' => 'Дисконтная карта', 'hierarchy-type-eshop-discount'  => 'Скидка в интернет-магазине', 'hierarchy-type-blogs-blog'  => 'Блог', 'hierarchy-type-blogs-blog_privacy' => 'Степень приватности блога', 'hierarchy-type-blogs-blog_comment' => 'Комментарий к сообщению блога', 'hierarchy-type-blogs-blog_message' => 'Сообщение блога', 'hierarchy-type-eshop-payment_transaction' => 'Платежная транзакция', 'hierarchy-type-eshop-payment_transaction_status' => 'Статус платежной транзакции', 'hierarchy-type-webforms-form'  => 'Форма обратной связи', 'hierarchy-type-webforms-template' => 'Шаблон письма', 'hierarchy-type-webforms-address' => 'Список адресов', "hierarchy-type-eshop-global-discount" => "Глобальная скидка в интернет магазине", 'hierarchy-type-eshop-global_discount' => 'Глобальная скидка в интернет магазине', 'hierarchy-type-blogs20-blog' => 'Блог', 'hierarchy-type-blogs20-comment' => 'Комментарий блога', 'field-min_discount_order_total' => 'Минимальный размер заказа', 'field-max_discount_order_total' => 'Максимальный размер заказа', 'field-preffered_currency'   => 'Предпочитаемая валюта', 'field-age'    => 'Возраст', 'field-gender'    => 'Пол', 'field-geo_targeting_is_active'  => 'Гео-таргетинг включен', 'field-avatar'    => 'Аватарка', 'field-url'    => 'Url страницы', 'field-rss_type'   => 'Тип', 'field-news_rubric'   => 'Раздел публикаций', 'field-anons_pic'   => 'Картинка для анонса', 'field-publish_pic'   => 'Картинка для публикации', 'field-customer_comments'  => 'Пометки покупателя', 'field-default_type_id'   => 'default_type_id', 'field-seo_prefix'   => 'seo_prefix', 'field-trans'    => 'Транзитный Id', 'field-proizvoditel'   => 'Производитель', 'field-predyduwaya_cena'  => 'Предыдущая цена', 'field-specialnaya_cena'  => 'Специальная цена', 'field-fiksirovannaya_cena'  => 'Фиксированная цена', 'field-opisanie'   => 'Описание товара', 'field-soputstvuyuwie_tovary'  => 'Сопутствующие товары', 'field-polosa_tehnologij'  => 'Полоса технологий', 'field-izobrazhenie'   => 'Изображение', 'field-bolshoe_izobrazhenie'  => 'Большое изображение', 'field-id_name'    => 'ID статуса', 'field-tip_igrovoj_pristavki'  => 'Тип игровой приставки', 'field-komplekt_postavki'  => 'Комплект поставки', 'field-tip_karty_pamyati'  => 'Тип карты памяти', 'field-razemy_tip'   => 'Разъемы (тип)', 'field-cvet_korpusa'   => 'Цвет корпуса', 'field-garantiya'   => 'Гарантия', 'field-tranzitnyj_id'   => 'Транзитный ID', 'field-special_naya_cena'  => 'Специальная цена', 'field-bol_shoe_izobrazhenie'  => 'Большое изображение', 'field-yes_or_no'   => 'Да или нет?', 'field-country'    => 'Страна', 'field-city'    => 'Город', 'field-post_index'   => 'Почтовый индекс', 'field-address'    => 'Адрес', 'field-phone'    => 'Номер телефона для контрольного звонка', 'field-codename'   => 'Идентефикатор версии', 'field-ot_baldi'   => 'Какое-то поле', 'field-my_house'   => 'Фотка моего дома', 'field-site_link'   => 'Ссылка на сайт', 'field-company_logo'   => 'Логитип фирмы', 'field-elements_links'   => 'Ссылки на элементы', 'field-kartinochka'   => 'Картиночка', 'field-objektiki'   => 'Объектики', 'field-currency_id'   => 'Код валюты', 'field-currency'   => 'Валюта', 'field-rate'    => 'Курс', 'field-model'    => 'Модель товара', 'field-isbn'    => 'ISBN', 'field-author'    => 'Автор', 'field-publisher'   => 'Издатель', 'field-year'    => 'Год', 'field-series'    => 'Серия', 'field-nazvanie'   => 'Название', 'field-media'    => 'Носитель', 'field-starring'   => 'Актеры', 'field-director'   => 'Режиссер', 'field-original_name'   => 'Оригинальное название', 'field-store'    => 'Количество на складе', 'field-quality_value'   => 'Значение', 'field-to_order'   => 'на заказ (при отсутствии на складе)', 'field-typePrefiks'   => 'префикс', 'field-place'    => 'Место показа', 'field-hall'    => 'Зал', 'field-date'    => 'Дата выпуска', 'field-premier'    => 'Премьера', 'field-for-kids'   => 'для детей', 'field-hall_plan'   => 'План зала', 'field-hall_part'   => 'Места', 'field-worldRegion'   => 'Часть света', 'field-region'    => 'Курорт или город', 'field-days'    => 'Количество дней', 'field-dataTour'   => 'Даты заездов', 'field-hotel_stars'   => 'Звезды', 'field-room'    => 'Тип комнаты', 'field-meal'    => 'Тип питания', 'field-included'   => 'Что включено в стоимость тура', 'field-transport'   => 'Транспорт', 'field-plus'    => 'Процент (+)', 'field-is_cbrf'    => 'Использовать CBRF', 'field-deliveryIncluded'  => 'Доставка', 'field-price_min'   => 'Минимальная цена', 'field-price_max'   => 'Максимальная цена', 'field-sales_notes'   => 'Особенности товара', 'field-color'    => 'Цвет', 'field-weight'    => 'Вес', 'field-power'    => 'мощность', 'field-description'   => 'Описание', 'field-'    => 'Продолжительность', 'field-descr'    => 'Описание', 'field-order_price'   => 'Сумма счета', 'field-elements'   => 'Разделы каталога', 'field-hex'    => 'Цветовой код', 'field-zhanr'    => 'Жанр', 'field-kratkoe_opisanie'  => 'Краткое описание', 'field-format_nositelya'  => 'Формат носителя', 'field-god_vypuska'   => 'Год выпуска', 'field-vozrastnoe_ogranichenie_na_prosmotr' => 'Возрастное ограничение на просмотр', 'field-vid'    => 'Вид', 'field-okras'    => 'Окрас', 'field-tip_shersti'   => 'Тип шерсти', 'field-ves'    => 'Вес', 'field-pol'    => 'Пол', 'field-kolichestvo_lap'   => 'Количество лап', 'field-dlina_usov'   => 'Длина усов', 'field-maksimalnaya_skorost'  => 'Максимальная скорость', 'field-obem_legkih'   => 'Объем легких', 'field-razmah_lap_v_bege'  => 'Размах лап в беге', 'field-harakter'   => 'Характер', 'field-druzhelyubnost'   => 'Дружелюбность', 'field-kulinarnye_predpochteniya' => 'Кулинарные предпочтения', 'field-integriruemost_v_koleso'  => 'Интегрируемость в колесо', 'field-photo'    => 'Фотография', 'field-diametr_kolesa'   => 'Диаметр колеса', 'field-type'    => 'Тип', 'field-s_shipami'   => 'С шипами', 'field-recommend'   => 'Рекомендуем', 'field-lock_cancel'   => 'Статус блокирует отмену заказа', 'field-lock_payment'   => 'Статус блокирует оплату заказа', 'field-destination_address'  => 'Адрес доставки', 'field-sender_ip'   => 'IP-адрес отправителя', 'field-from_email_template'  => 'Адрес от', 'field-from_template'   => 'Имя от', 'field-subject_template'  => 'Тема письма', 'field-master_template'   => 'Шаблон тела письма', 'field-autoreply_from_email_template' => 'Адрес получателя', 'field-autoreply_from_template'  => 'Имя получателя', 'field-autoreply_subject_template' => 'Тема', 'field-autoreply_template'  => 'Тело', 'field-form_id'    => 'Идентификатор формы', 'field-address_description'  => 'Описание', 'field-address_list'   => 'Адреса', 'field-fname'    => 'Имя', 'field-father_name'   => 'Отчество', 'field-lname'    => 'Фамилия', 'field-e-mail'    => 'E-mail', 'field-time_targeting_is_active' => 'Time-таргетинг включен', 'field-time_targeting_by_month_days' => 'По числам месяца', 'field-time_targeting_by_month'  => 'По месяцам', 'field-time_targeting_by_week_days' => 'По дням недели', 'field-time_targeting_by_hours'  => 'По времени суток', 'field-title'    => 'Поле TITLE', 'field-h1'    => 'Поле H1', 'field-meta_keywords'   => 'Поле meta KEYWORDS', 'field-meta_descriptions'  => 'Поле meta DESCRIPTIONS', 'field-content'    => 'Контент', 'label-field-content'    => 'Контент', 'field-menu_pic_ua'   => 'Изображение неактивного раздела', 'field-menu_pic_a'   => 'Изображение активного раздела', 'field-header_pic'   => 'Изображение для заголовка', 'field-robots_deny'   => 'Запретить индексацию поисковиками', 'field-show_submenu'   => 'Показывать подменю', 'field-is_expanded'   => 'Меню всегда развернуто', 'field-is_unindexed'   => "Исключить из поиска", 'field-login'    => 'Логин', 'field-password'   => 'Пароль', 'field-groups'    => 'Группы пользователей', 'field-readme'    => 'Описание', 'field-anons'    => 'Анонс', 'label-field-anons'    => 'Анонс', 'field-source'    => 'Источник', 'field-source_url'   => 'URL источника', 'field-publish_time'   => 'Дата публикации', 'field-begin_time'   => 'Дата начала активности', 'field-finish_time'   => 'Дата завершения активности', 'field-end_time'   => 'Дата завершения скидки', 'field-subjects'   => 'Входит в сюжеты', 'field-price_item'   => 'Цена за единицу товара', 'field-price_total'   => 'Цена итоговая', 'field-count'    => 'Количество ответов', 'field-discount_size'   => 'Размер скидки', 'field-catalog_relation'  => 'Ссылка на товар', 'field-items'    => 'Наименования', 'field-status'    => 'Состояние', 'field-order_time'   => 'Дата заказа', 'field-admin_comments'   => 'Пометки администратора', 'field-is_closed'   => 'Голосование закрыто', 'field-question'   => 'Вопрос', 'field-answers'    => 'Ответы', 'field-total_count'   => 'Всего проголосовало', 'field-cena'    => 'Цена', 'field-orders_refs'   => 'Заказы', 'field-delivery_address'  => 'Адрес доставки', 'field-delivery_addresses'  => 'Адреса доставки', 'field-message'    => 'Сообщение', 'field-activate_code'   => 'Код активации', 'field-is_activated'   => 'Активирован', 'field-domain_name'   => 'Домен', 'field-ip'    => 'ip', 'field-license_type'   => 'Тип лицензии', 'field-owner_lname'   => 'Фамилия', 'field-owner_fname'   => 'Имя', 'field-owner_mname'   => 'Отчество', 'field-owner_email'   => 'E-mail', 'field-keycode'    => 'Лицензионный ключ', 'field-gen_time'   => 'Дата создания', 'field-id'    => 'ID', 'field-views_count'   => 'Количество показов', 'field-clicks_count'   => 'Количество переходов', 'field-max_views'   => 'Максимальное количество показов', 'field-tags'    => 'Теги', 'field-is_active'   => 'Активен', 'field-view_pages'   => 'Страницы, на которых показывать баннер', 'field-image'    => 'Изображение', 'field-open_in_new_window'  => 'Открывать в новом окне', 'field-width'    => 'Ширина', 'field-height'    => 'Высота', 'field-alt'    => 'Альтернативный текст', 'field-swf'    => 'Флеш-ролик', 'field-swf_quality'   => 'Качество ролика', 'field-html_content'   => 'HTML-содержание', 'field-show_till_date'   => 'Дата окончания показа', 'field-poll_rel'   => 'Указатель на опрос', 'field-is_show_rand_banner'  => 'Показ случайного баннера', 'field-show_start_date'   => 'Дата начала показа', 'field-disp_last_release'  => 'Дата последнего выпуска', 'field-disp_description'  => 'Описание', 'field-disp_reference'   => 'Ссылка на рассылку', 'field-header'    => 'Заголовок', 'field-body'    => 'Тело сообщения', 'field-attach_file'   => 'Прикрепленный файл', 'field-release_reference'  => 'Ссылка на выпуск', 'field-uid'     => 'Пользователь', 'field-subscriber_dispatches'  => 'Подписан на рассылки', 'field-subscribe_date'   => 'Дата подписки', 'field-related_items'   => 'Подходящие товары', 'field-question_txt'   => 'Текст вопроса', 'field-answers_rel'   => 'Список ответов', 'field-per_page'   => 'Количество выводимых результатов', 'field-goods'    => 'Товары', 'field-questions_rel'   => 'Список вопросов', 'field-is_registrated'   => 'Зарегистрирован', 'field-user_id'    => 'Владелец', 'field-nickname'   => 'Ник', 'field-email'    => 'E-mail', 'field-author_id'   => 'Автор', 'field-x'    => 'X', 'field-y'    => 'Y', 'field-create_time'   => 'Дата создания', 'field-answer'    => 'Ответ на вопрос', 'field-fs_file'    => 'Скачиваемый файл', 'field-downloads_counter'  => 'Количество загрузок', 'field-user_dock'   => 'Пользовательская панель', 'field-user_tags'   => 'Показывать пользователям с тэгами', 'field-rate_voters'   => 'Количество проголосовавших', 'field-rate_sum'   => 'Сумма баллов', 'field-amount'    => 'Количество на складе', 'field-store_id'   => 'Указатель на склад', 'field-store_amounts'   => 'Наличия на складах', 'field-proc'    => 'Процент скидки', 'field-start_time'   => 'Дата начала действия скидки', 'field-code'    => 'Код', 'field-price'    => 'Цена', 'field-ignore_discounts'  => 'Игнорировать скидки', 'field-subscribed_pages'  => 'Подписки на изменения', 'field-is_online'   => 'Пользователь on-line', 'field-privacy'    => 'Приватность', 'field-sid'    => 'sid', 'field-prvlist_friends'   => 'Мои друзья', 'field-lmessage_time'   => 'Дата добавления последнего сообщения', 'field-lcomment_time'   => 'Дата добавления последнего комментария', 'field-privacy_forpostonly'  => 'Приватность действует только на комментирование (не на просмотр)', 'field-topics_count'   => 'Количество топиков', 'field-messages_count'   => 'Количество сообщений', 'field-last_post_time'   => 'Дата последнего добавления', 'field-last_request_time'  => 'Время последнего обращения', 'field-rated_pages'   => 'Рейтингованные страницы', 'field-sid_transaction'   => 'Строковый идентификатор', 'field-sid_eshoporder_status'  => 'Соотнесенный статус заказа', 'field-rel_transactionstatus'  => 'Статус транзакции', 'field-date_created'   => 'Дата создания', 'field-inited_whom'   => 'Инициализатор транзакции', 'field-rel_eshoporder'   => 'Оплачиваемый заказ', 'field-initprice'   => 'Сумма заказа', 'field-text_request'   => 'Подробности запроса', 'field-method_engine'   => 'Transaction engine', 'field-date_answered'   => 'Дата получения результата', 'field-text_answer'   => 'Подробности получения результата', 'field-date_validated'   => 'Дата проверки результата', 'field-text_validated'   => 'Подробности проверки результата', 'field-date_conseq'   => 'Дата проверки', 'field-text_conseq'   => 'Подробности проверки', 'field-city_targeting_city'  => 'Город', 'field-city_targeting_is_active' => 'Геотаргетинг включен', 'field-news_relation'   => 'Связано с лентой новостей', 'field-ignore-banner-subpages' => 'Игнорировать подстраницы', 'field-publish-status'  => 'Статус публикации', 'fields-group-short_info'  => 'Краткая информация', 'fields-group-more_info'  => 'Дополнительная информация', 'fields-group-common'   => 'Основные', 'fields-group-view_params'  => 'Параметры показа', 'fields-group-time_targeting'  => 'Time-таргетинг', 'fields-group-menu_view'  => 'Отображение в меню', 'fields-group-more_params'  => 'Дополнительные параметры', 'fields-group-idetntify_data'  => 'Идентификационные данные', 'fields-group-item_props'  => 'Свойства публикации', 'fields-group-subjects_block'  => 'Сюжеты', 'fields-group-order_item_props'  => 'Свойства наименования', 'fields-group-order_props'  => 'Свойства заказа', 'fields-group-comments'   => 'Пометки', 'fields-group-common_props'  => 'Общие свойства', 'fields-group-poll_props'  => 'Свойства опроса', 'fields-group-status_props'  => 'Свойства статусы', 'fields-group-delivery_address'  => 'Адрес для доставки', 'fields-group-topic_props'  => 'Свойства топика',    'fields-group-message_props'        =>    'Свойства сообщения', 'fields-group-comment_props'  => 'Свойства комментария', 'fields-group-license_info'  => 'Свойства лицензии', 'fields-group-owner_info'  => 'Информация о клиенте', 'fields-group-currency_props'  => 'Свойства валюты', 'fields-group-view_pages'  => 'Разделы отображения', 'fields-group-banner_custom_props' => 'Индивидуальные параметры баннера', 'fields-group-redirect_props'  => 'Параметры перехода', 'fields-group-props'   => 'Свойства', 'fields-group-grp_disp_props'  => 'Свойства рассылки', 'fields-group-grp_disp_release_props' => 'Свойства выпуска рассылки', 'fields-group-grp_disp_msg_props' => 'Свойства сообщения рассылки', 'fields-group-grp_sbs_props'  => 'Информация о подписчике', 'fields-group-grp_disp_msg_extended' => 'Дополнительные свойства', 'fields-group-grp_sbs_extended'  => 'Параметры подписки', 'fields-group-matrix_props'  => 'Свойства матрицы', 'fields-group-photo_props'  => 'Свойства фотографии', 'fields-group-album_props'  => 'Свойства фотоальбома', 'fields-group-svojstva_gruppy_polzovatelej'  => 'Свойства группы пользователей', 'fields-group-fs_file_props'  => 'Свойства файла', 'fields-group-news_images'  => 'Изображения новости', 'fields-group-dopolnitelno'  => 'Дополнительно', 'fields-group-rate_props'  => 'Свойства рейтинга', 'fields-group-rate_voters'  => 'Количество проголосовавших', 'fields-group-store_props'  => 'Свойства склада', 'fields-group-cenovye_svojstva'  => 'Ценовые свойства', 'fields-group-other_proerties'  => 'Характеристики хомячка', 'fields-group-pictures'   => 'Изображения', 'fields-group-descr_grp'  => 'Описание товара', 'fields-group-parametry_aksessuara' => 'Параметры аксессуара', 'fields-group-recommend'  => 'Рекомендуем', 'fields-group-common_group'  => 'Общие параметры', 'fields-group-privatnost'  => 'Приватность', 'fields-group-identity'   => 'identity', 'fields-group-transaction_status_props' => 'Свойства', 'fields-group-transaction_props' => 'Свойства транзакции', 'fields-group-trans_init'  => 'Инициализация', 'fields-group-trans_deliver'  => 'Доставка', 'fields-group-prelim'   => 'Результат', 'fields-group-final'   => 'Подтверждение', 'fields-group-consequences'  => 'Послесловие', 'fields-group-city_targeting'  => 'Геотаргетинг', 'fields-group-SendingData'  => 'Данные для отправки', 'fields-group-Templates'  => 'Письмо', 'fields-group-Binding'   => 'Привязка', 'fields-group-list'   => 'Список', 'fields-group-short_user_info'  => 'Краткая информация', 'field-type-int'   => 'Число', 'field-type-string'   => 'Строка', 'field-type-text'   => 'Простой текст', 'field-type-relation'   => 'Выпадающий список', 'field-type-relation-multiple'  => 'Выпадающий список с множественным выбором', 'field-type-file'   => 'Файл', 'field-type-img_file'   => 'Изображение', 'field-type-swf_file'   => 'Флеш-ролик', 'field-type-date'   => 'Дата', 'field-type-boolean'   => 'Кнопка-флажок', 'field-type-wysiwyg'   => 'HTML-текст', 'field-type-password'   => 'Пароль', 'field-type-tags-multiple'  => 'Теги', 'field-type-symlink-multiple'  => 'Ссылка на дерево', 'field-type-price'   => 'Цена', 'field-type-float'   => 'Число с точкой', 'field-expiration-date'  => 'Дата окончания актуальности', 'field-notification-date' => 'Дата предупреждения об окончании актуальности', 'field-publish_comments' => 'Комментарий к публикации', 'field-date-empty'   => 'Никогда', 'object-samka'    => 'Самка', 'object-samec'    => 'Самец', 'object-v_korzine'   => 'В корзине', 'object-ozhidaet_proverki'  => 'Ожидает проверки', 'object-prinyat'   => 'Принят', 'object-otklonen'   => 'Отклонен', 'object-otmenen'   => 'Отменен', 'object-gotov'    => 'Готов', 'object-v_processe_oplaty'  => 'В процессе оплаты', 'object-oplachen_uspeshno'  => 'Оплачен успешно', 'object-oshibki_v_oplate'  => 'Ошибки в оплате', 'object-proveren_mozhno_oplachivat' => 'Проверен, можно оплачивать', 'object-proverka_oplaty'  => 'Проверка оплаты', 'object-1_inicializirovana'  => '1. Инициализирована', 'object-2_dostavlena'   => '2. Доставлена', 'object-3_ne_dostavlena'  => '3. Не доставлена', 'object-4_predvaritel_no_prinyata_ozhidaetsya_podtverzhdenie'   => '4. Предварительно принята (ожидается подтверждение)', 'object-5_predvaritel_no_prinyata_podtverzhdenie_ne_trebuetsya'   => '5. Предварительно принята (подтверждение не требуется)', 'object-6_predvaritel_no_otklonena_ozhidaetsya_podtverzhdenie'   => '6. Предварительно отклонена (ожидается подтверждение)', 'object-7_predvaritel_no_otklonena_podtverzhdenie_ne_trebuetsya'  => '7. Предварительно отклонена (подтверждение не требуется)', 'object-8_prinyata_s_podtverzhdeniem' => '8. Принята с подтверждением', 'object-9_otklonena_s_podtverzhdeniem' => '9. Отклонена с подтверждением', 'object-moya_zhzh-lenta'  => 'Моя ЖЖ-лента', 'object-rss'    => 'RSS', 'object-atom'    => 'ATOM', 'object-dlya_vseh'   => 'Для всех', 'object-dlya_vladel_ca_i_druzej' => 'Для владельца и друзей', 'object-tol_ko_dlya_vladel_ca_bloga' => 'Только для владельца блога', 'object-height'    => 'Высокое', 'object-low'    => 'Низкое', 'object-medium'    => 'Среднее', 'object-status-preunpublish' => 'Готовится к снятию с публикации', 'object-status-publish'  => 'Опубликован', 'object-status-unpublish' => 'Снят с публикации', 'perms-data-main' => 'Просмотр объектов', 'perms-data-guides' => 'Управление справочниками', 'perms-data-trash' => 'Мусорная корзина', 'perms-data-types' => 'Управление шаблонами данных', 'field-form_sending_time' => 'Время отправки', 'field-auto_reply'   => 'Автоответ', 'js-data-add-field'   => 'Добавить поле', 'js-view-guide-items'  => 'Содержимое справочника', 'group-currency-props'  => 'Свойства валюты', 'min-discount-order-total' => 'Минимальная сумма заказа', 'max-discount-order-total' => 'Максимальная сумма заказа', 'global-discount-order-size' => 'Сумма глобальной скидки', 'global-discount-end'  => 'Дата окончания действия', 'global-discount-start'  => 'Дата начала действия', 'global-discount-active-time' => 'Время действия скидки', 'order-total-range'  =>  'Диапазон суммы заказа', 'eshop-order-currency' => 'Валюта в интернет магазине', 'eshop-currency' => 'Валюта в интернет магазине', 'eshop-currency-letter-code' => 'Буквенный код', 'eshop-currency-digit-code'  => 'Цифровой код', 'eshop-currency-exchange-rate' => 'Курс обмена', 'eshop-order-currency-id'  => 'Идентификатор валюты', 'locktime'      => 'Время начала блокировки', 'lockuser'      => 'Пользователь заблокировавший страницу', 'label-section-description'     => 'Описание раздела', "eshop-order-currency-exchange_rate" => "Курс обмена", "eshop-order-currency-total"  => "Сумма в валюте заказа", "date-empty-field"    => "Никогда", 'object-type-users-avatar'   => 'Аватара', 'object-type-blogs20-blog'   => 'Блог 2.0', 'object-type-eshop-currency'   => 'Валюта в интернет магазине', 'object-type-blogs20-comment'   => 'Комментарий блога 2.0', 'object-type-blogs20-post'   => 'Пост блога 2.0', 'object-type-status_stranicy'   => 'Статус страницы', 'object-type-webforms-page'   => 'Страница с формой обратной связи', 'hierarchy-type-users-avatar'   => 'Аватар пользователя', 'hierarchy-type-blogs20-post'   => 'Пост блога', 'hierarchy-type-eshop-currency'   => 'Валюта в интернет магазине', 'hierarchy-type-webforms-page'   => 'Страница с формой обратной связи', 'field-body'   => 'Текст сообщения', 'field-userpic'   => 'Загрузить свой', 'field-picture'   => 'Картинка', 'field-is_hidden'   => 'Скрытая', 'field-forced_subscribers'   => 'Принудительно подписанные пользователи:', 'field-msg_date'   => 'Дата сообщения', 'field-short_body'   => 'Краткий текст сообщения', 'field-new_relation'   => 'Ссылка на новость', 'field-publish_status_id'   => 'id статуса', 'field-locktime'   => 'Время блокировки', 'field-lockuser'   => 'Блокирующий пользователь', 'field-last_message'   => 'Последнее сообщение', 'field-friendlist'   => 'Список друзей', 'field-only_for_friends'   => 'Видимо только друзьям', 'field-user_settings_data'   => 'Настройки пользователя', 'field-opinion'   => 'Как вам сайт?', 'fields-group-userpic'   => 'Юзерпик', 'fields-group-auto_reply'   => 'Автоответ', 'fields-group-svojstva_statusa_stranicy'   => 'Свойства статуса страницы', 'fields-group-locks'   => 'Блокировка', 'fields-group-privacy'   => 'Настройки отображения', 'fields-group-osnovnoe'   => 'Основное', 'object-supervajzery'   => 'Супервайзеры', 'object-zaregistrirovannye_pol_zovateli'   => 'Зарегистрированные пользователи', 'fields-group-svojstva_publikacii' => 'Свойства публикации', 'field-expiration_date' => 'Дата снятия с публикации', 'field-notification_date' => 'Дата уведомления', 'field-publish_status' => 'Статус публикации', 'field-global-discount-size'  => 'Сумма глобальной скидки', 'field-eshop_order_currency'  => 'Валюта в интернет магазине', 'field-currency_exchange_rate'  => 'Курс обмена', 'field-eshop_order_currency_total' => 'Сумма в валюте заказа', 'field-sending_time'    => 'Дата отправки', 'js-trash-confirm-title'   => 'Очистка корзины', 'js-trash-confirm-text'    => 'Вы собираетесь очистить корзину. Это означает, что все страницы в корзине будут безвозвратно удалены.', 'js-trash-confirm-cancel'   => 'Отменить', 'js-trash-confirm-ok'    => 'Очистить', 'eshop-global-discount-proc'  => 'Процент глобальной скидки',  'fields-group-currency-props'  => 'Свойства валюты', 'field-use_in_eshop'    => 'Использовать в интернет-магазине', 'field-eshop_currency_letter_code' => 'Код валюты', 'field-eshop_currency_exchange_rate' => 'Курс обмена', 'field-eshop-currency-symbol'    => 'Сокращенное название валюты' );class ulangStream extends umiBaseStream {protected $scheme = "ulang", $prop_name = NULL;protected static $i18nCache = Array();public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");if(substr($vd6fe1d0be6347b8ef2427fa629c04485, -3) == ".js" || substr($vd6fe1d0be6347b8ef2427fa629c04485, -3) == "?js") {$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($vd6fe1d0be6347b8ef2427fa629c04485) - 3);$v8d777f385d3dfec8815d20f7496026dc = $this->generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485);$this->setData($v8d777f385d3dfec8815d20f7496026dc);return true;}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485])) {$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485] = $this->translateToDTD($v11cc313f766c5d93e6b73ba8439ade0f);}$this->setData($v8d777f385d3dfec8815d20f7496026dc);return true;}protected function translateToDTD($v5a1969515ab7b523d913732d256e644a) {$v6a87284914054e1ba5d1d288c1b09f43 = "<!ENTITY quote '&#34;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY nbsp '&#160;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY middot '&#183;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY reg '&#174;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY copy '&#169;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY raquo '&#187;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY laquo '&#171;'>\n";$v156577e912dd9b1be50a671edc17c4a0 = getServer('REQUEST_URI');$v156577e912dd9b1be50a671edc17c4a0 = htmlspecialchars($v156577e912dd9b1be50a671edc17c4a0);foreach($v5a1969515ab7b523d913732d256e644a as $v18389a4a9ad5795744699cff0ba66c15 => $v385aa5385e83efc5d83c7588ee5fb7e8) {if($this->isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15)) continue;$v385aa5385e83efc5d83c7588ee5fb7e8 = $this->protectEntityValue($v385aa5385e83efc5d83c7588ee5fb7e8);$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY {$v18389a4a9ad5795744699cff0ba66c15} \"{$v385aa5385e83efc5d83c7588ee5fb7e8}\">\n";}return $v6a87284914054e1ba5d1d288c1b09f43;}protected function isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15) {$v47c80780ab608cc046f2a6e6f071feb6 = Array('field-', 'object-type-', 'hierarchy-type-', 'fields-group-', 'field-type-');for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < sizeof($v47c80780ab608cc046f2a6e6f071feb6);$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(bytes_substr($v18389a4a9ad5795744699cff0ba66c15, 0, bytes_strlen($v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741])) == $v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741]) {return true;}}return false;}protected function protectEntityValue($v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$vd98a07f84921b24ee30f86fd8cd85c3c = Array('&', '"');$v01b6e20344b68835c5ed1ddedf20d531 = Array('&amp;', '&quote;');$v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);return $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}protected static function parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485) {$v81788ba0d7d02d81c063dbca621ba11b = "ulang://";if(substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($v81788ba0d7d02d81c063dbca621ba11b)) == $v81788ba0d7d02d81c063dbca621ba11b) {$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, strlen($v81788ba0d7d02d81c063dbca621ba11b));}$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");return split("\/", $vd6fe1d0be6347b8ef2427fa629c04485);}protected static function loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485) {global $i18n;static $v7abdda3251de25a51bf5fb15d7c3391d = "content", $v4a8a08f09d37b73795649038408b5f33 = 0;if(!$v7abdda3251de25a51bf5fb15d7c3391d) {$v594c103f2c6e04c3d8ab059f031e0c1a = cmsController::getInstance();$v7abdda3251de25a51bf5fb15d7c3391d = $v594c103f2c6e04c3d8ab059f031e0c1a->getCurrentModule();}$ve6451b27d4123951dfd29d32a18b3919 = self::$i18nCache;$ve8723cd5a634e83ba1d810e6584f3e59 = self::parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485);$v753527be46567ad90a4203cf4b40d70e = self::getLangPrefix();$v11cc313f766c5d93e6b73ba8439ade0f = Array();if(!in_array($v7abdda3251de25a51bf5fb15d7c3391d, $ve8723cd5a634e83ba1d810e6584f3e59)) {$ve8723cd5a634e83ba1d810e6584f3e59[] = $v7abdda3251de25a51bf5fb15d7c3391d;}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve8723cd5a634e83ba1d810e6584f3e59);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vdff9a6fde59e8dfc96361ffa7b52426a = $ve8723cd5a634e83ba1d810e6584f3e59[$v865c0c0b4ab0e063e5caa3387c1a8741];if($vdff9a6fde59e8dfc96361ffa7b52426a == false) continue;$v797a70c0592f1ea67c7f63d456de20fd = "i18n." . $v753527be46567ad90a4203cf4b40d70e . ".php";$vfe3c2e38a8d7e5bca55ebb32d6733fc0 = "i18n.php";$v851148b4fd8fd7ae74bd9100c5c0c898 = ($vdff9a6fde59e8dfc96361ffa7b52426a == "common") ? "/classes/modules/" : "/classes/modules/" . $vdff9a6fde59e8dfc96361ffa7b52426a . "/";$v851148b4fd8fd7ae74bd9100c5c0c898 = CURRENT_WORKING_DIR . $v851148b4fd8fd7ae74bd9100c5c0c898;$vcd5aac9b508ee14d7ec74cfaf518c07d = $v851148b4fd8fd7ae74bd9100c5c0c898 . $v797a70c0592f1ea67c7f63d456de20fd;$v71bc9962768a0cfd271153976203c648 = $v851148b4fd8fd7ae74bd9100c5c0c898 . $vfe3c2e38a8d7e5bca55ebb32d6733fc0;if(array_key_exists($vdff9a6fde59e8dfc96361ffa7b52426a, $ve6451b27d4123951dfd29d32a18b3919)) {$i18n = $ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a];}else {if(file_exists($vcd5aac9b508ee14d7ec74cfaf518c07d)) {include $vcd5aac9b508ee14d7ec74cfaf518c07d;}else if (file_exists($v71bc9962768a0cfd271153976203c648)) {include $v71bc9962768a0cfd271153976203c648;}}if(isset($i18n) && is_array($i18n)) {$ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a] = $i18n;$v11cc313f766c5d93e6b73ba8439ade0f = $i18n + $v11cc313f766c5d93e6b73ba8439ade0f;unset($i18n);}}self::$i18nCache = $ve6451b27d4123951dfd29d32a18b3919;return $v11cc313f766c5d93e6b73ba8439ade0f;}public static function getLabel($vd304ba20e96d87411588eeabac850e34, $vd6fe1d0be6347b8ef2427fa629c04485 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();static $v535d02e594853266d2db02ff178dd7f7 = false;if($v535d02e594853266d2db02ff178dd7f7 === false) {$v535d02e594853266d2db02ff178dd7f7 = self::getLangPrefix();}if($v9b207167e5381c47682c6b4f58a623fb = cacheFrontend::getInstance()->loadSql($vd304ba20e96d87411588eeabac850e34 . "_ulang_label_" . $v535d02e594853266d2db02ff178dd7f7)) {}if($vd6fe1d0be6347b8ef2427fa629c04485 == false) {$v9a4a6f6ee974a928a90c9152a674b141 = "common/data";}else {$v9a4a6f6ee974a928a90c9152a674b141 = $vd6fe1d0be6347b8ef2427fa629c04485;}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = &$v11cc313f766c5d93e6b73ba8439ade0f;}if(isset($v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34])) {$v9b207167e5381c47682c6b4f58a623fb = $v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34];}else {$v9b207167e5381c47682c6b4f58a623fb = "{$vd304ba20e96d87411588eeabac850e34}";};cacheFrontend::getInstance()->saveSql($vd304ba20e96d87411588eeabac850e34 . "_ulang_label", $v9b207167e5381c47682c6b4f58a623fb, 180);return $v9b207167e5381c47682c6b4f58a623fb;}public static function getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(!$v3c6e0b8a9c15224a8228b9a98ca1531d) {return $v3c6e0b8a9c15224a8228b9a98ca1531d;}$v9a4a6f6ee974a928a90c9152a674b141 = "common/data";$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = $v11cc313f766c5d93e6b73ba8439ade0f;}$result = NULL;foreach($v11cc313f766c5d93e6b73ba8439ade0f as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if($v9e3669d19b675bd57058fd4664205d2a == $v3c6e0b8a9c15224a8228b9a98ca1531d) {if($v240bf022e685b0ee30ad9fe9e1fb5d5b) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}else {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}}if(!is_null($result)) {$v61aa67e6eaba94628806fae66b03cc2c = Array(     'object-type-',     'hierarchy-type-',     'field-',     'fields-group-',     'field-type-',     'object-'    );$v22ee71e9dcc9ca12fc313c6e1ce3f806 = false;$vf663bcefae644ae5f8a16deb6b2fd115 = str_replace("i18n::", "", $v240bf022e685b0ee30ad9fe9e1fb5d5b);foreach($v61aa67e6eaba94628806fae66b03cc2c as $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$v240bf022e685b0ee30ad9fe9e1fb5d5b = $v240bf022e685b0ee30ad9fe9e1fb5d5b;if(substr($vf663bcefae644ae5f8a16deb6b2fd115, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $vf663bcefae644ae5f8a16deb6b2fd115) {$v22ee71e9dcc9ca12fc313c6e1ce3f806 = true;}}if($v22ee71e9dcc9ca12fc313c6e1ce3f806 == false) {return NULL;}}return $result;}public static function getLangPrefix() {return "ru";static $vc105c08af1d0d83b729e22ecb887f52a;if(!is_null($vc105c08af1d0d83b729e22ecb887f52a)) {return $vc105c08af1d0d83b729e22ecb887f52a;}$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v851f5ac9941d720844d143ed9cfcf60a = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getPrefix();if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() != "admin" && !defined('VIA_HTTP_SCHEME')) {return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_POST, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_GET, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getCookie('ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}public function __construct() {parent::__construct();}public function __destruct() {}protected function generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485) {header("Content-type: text/javascript; charset=utf-8");$i18n = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$result = <<<INITJS
function getLabel(key, str) {if(setLabel.langLabels[key]) {var res = setLabel.langLabels[key];if(str) {res = res.replace("%s", str);}return res;} else {return "[" + key + "]";}}
function setLabel(key, label) {setLabel.langLabels[key] = label;}setLabel.langLabels = new Array();


INITJS;   foreach($i18n as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, 3) != "js-") {continue;}$v865c0c0b4ab0e063e5caa3387c1a8741 = self::filterOutputString($v865c0c0b4ab0e063e5caa3387c1a8741);$v9e3669d19b675bd57058fd4664205d2a = self::filterOutputString($v9e3669d19b675bd57058fd4664205d2a);$result .= "setLabel('{$v865c0c0b4ab0e063e5caa3387c1a8741}', '{$v9e3669d19b675bd57058fd4664205d2a}');\n";}umiBaseStream::$allowTimeMark = false;return $result;}protected function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("\r\n", "\\r\\n", $vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("\n", "\\n", $vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("'", "\\'", $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}};class cacheFrontend extends singleton implements iSingleton {public static $cacheMode = false;public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getIsConnected() {return false;}protected function __construct() {}public function load() {return false;}public function save() {return false;}public function loadSql() {return false;}public function saveSql() {return false;}public function flush() {return false;}};class umiBranch {public static function checkIfBranchedByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631) {return false;}public static function getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069) {return "cms3_object_content";}};class umiEventPoint {public function setParam() {}public function addRef() {}public function call() {}};?>