<?php
 abstract class __register_users {public function settings($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if($this->breakMe()) return;if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";list($v364f9b183bd2dd9e0beb45c754830a6c) = def_module::loadTemplates("tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "settings_block");$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$vfca1bff8ad8b3a8585abfb0ad523ba42['xlink:href'] = "udata://data/getEditForm/" . $this->user_id;$vfca1bff8ad8b3a8585abfb0ad523ba42['user_id'] = $this->user_id;return def_module::parseTemplate($v364f9b183bd2dd9e0beb45c754830a6c, $vfca1bff8ad8b3a8585abfb0ad523ba42, false, $this->user_id);}public function settings_do($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {$vaf31437ce61345f416579830a98c91e5 = $this->user_id;$v5f4dcc3b5aa765d61d8327deb882cf99 = (string) getRequest('password');$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("users_settings_do");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("before");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("user_id", $vaf31437ce61345f416579830a98c91e5);$this->setEventPoint($v161c9aaa4fe035e7b2f465bc59f3ab45);$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($vaf31437ce61345f416579830a98c91e5);if($v5f4dcc3b5aa765d61d8327deb882cf99) {if(strlen($v5f4dcc3b5aa765d61d8327deb882cf99) < 3) {$this->errorNewMessage("%errors_too_short_password%");$this->errorPanic();}if($vd56b699830e77ba53855679cb1d252da == $v5f4dcc3b5aa765d61d8327deb882cf99) {$this->errorNewMessage("%errors_login_equals_password%");$this->errorPanic();}if(!is_null($v9102d1318ba9a756d1f4c4aab9356d86 = getRequest('password_confirm'))) {if($v5f4dcc3b5aa765d61d8327deb882cf99 != $v9102d1318ba9a756d1f4c4aab9356d86) {$this->errorNewMessage("%errors_wrong_password_confirm%");$this->errorPanic();}}$va8cfde6331bd59eb2ac96f8911c4b666->setValue("password", (($v5f4dcc3b5aa765d61d8327deb882cf99) ? md5($v5f4dcc3b5aa765d61d8327deb882cf99) : ""));$_SESSION['cms_pass'] = md5($v5f4dcc3b5aa765d61d8327deb882cf99);}if (isset($_REQUEST['email'])) {if(!preg_match("/.+@.+\..+/", getRequest('email'))) {$this->errorNewMessage("%errors_wrong_email_format%");$this->errorPanic();}if(!$this->checkIsUniqueEmail(getRequest('email'), $vaf31437ce61345f416579830a98c91e5)) {$this->errorNewMessage("%error_users_non_unique_email%");$this->errorPanic();}$va8cfde6331bd59eb2ac96f8911c4b666->setValue("e-mail", $_REQUEST['email']);}cmsController::getInstance()->getModule('data');$ve98bb545c87bd6f12f14ce797342ef54 = cmsController::getInstance()->getModule('data');$ve98bb545c87bd6f12f14ce797342ef54->saveEditedObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->commit();if ($v2d9754b699edc7a7ac4daac7d5a0a5d8 = cmsController::getInstance()->getModule('eshop')) {$v2d9754b699edc7a7ac4daac7d5a0a5d8->discountCardSave($vaf31437ce61345f416579830a98c91e5);}$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("users_settings_do");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("after");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("user_id", $vaf31437ce61345f416579830a98c91e5);$this->setEventPoint($v161c9aaa4fe035e7b2f465bc59f3ab45);$v572d4e421e5e6b9bc11d815e8a027112 = getRequest("from_page");if (!$v572d4e421e5e6b9bc11d815e8a027112) {$v572d4e421e5e6b9bc11d815e8a027112 = ($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : $this->pre_lang . "/users/settings/";}$this->redirect($v572d4e421e5e6b9bc11d815e8a027112);}public function registrate($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if($this->breakMe()) return;if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v9bc65c2abec141778ffaa729489f3e87 = $v8b1dc169bf460ee884fceef66c6607d6->getModule("users");if($v9bc65c2abec141778ffaa729489f3e87 instanceof def_module) {if($v9bc65c2abec141778ffaa729489f3e87->is_auth()) {$this->redirect($this->pre_lang . "/users/settings/");}}$v87306dd4235ed712ebc07fe169b76f83 = umiObjectTypesCollection::getInstance()->getBaseType("users", "user");list($v364f9b183bd2dd9e0beb45c754830a6c) = def_module::loadTemplates("tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "registrate_block");$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$vfca1bff8ad8b3a8585abfb0ad523ba42['xlink:href'] = "udata://data/getCreateForm/" . $v87306dd4235ed712ebc07fe169b76f83;$vfca1bff8ad8b3a8585abfb0ad523ba42['type_id'] = $v87306dd4235ed712ebc07fe169b76f83;return def_module::parseTemplate($v364f9b183bd2dd9e0beb45c754830a6c, $vfca1bff8ad8b3a8585abfb0ad523ba42);}public function registrate_do($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if ($this->is_auth()) {$this->redirect($this->pre_lang . "/");}if(!($v66f6181bcb4cff4cd38fbc804a036db6 = getRequest('template'))) $v66f6181bcb4cff4cd38fbc804a036db6 = 'default';$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$v12b29cd4a546ab7c02774080f819f7dc = getServer('HTTP_REFERER');$vb56a862f58c661af1a91f1ba483d8585 = (bool) $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/users/without_act");$this->errorRegisterFailPage($v12b29cd4a546ab7c02774080f819f7dc);$v6301cee35ea764a1e241978f93f01069 = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType("users", "user");if($v77f1f804a22b0bf1b573d9d73b4c6c90 = getRequest('type-id')) {$v762f183ca61b68f86003eae304b5c39d = $v0e8133eb006c0f85ed9444ae07a60842->getChildClasses($v6301cee35ea764a1e241978f93f01069);if(in_array($v77f1f804a22b0bf1b573d9d73b4c6c90, $v762f183ca61b68f86003eae304b5c39d)) {$v6301cee35ea764a1e241978f93f01069 = $v77f1f804a22b0bf1b573d9d73b4c6c90;}}$v726e8e4809d4c1b28a6549d86436a124 = $v0e8133eb006c0f85ed9444ae07a60842->getType($v6301cee35ea764a1e241978f93f01069);$vd56b699830e77ba53855679cb1d252da = (string) getRequest('login');$v5f4dcc3b5aa765d61d8327deb882cf99 = (string) getRequest('password');$v0c83f57c786a0b4a39efab23731c7ebc = (string) getRequest('email');if(strlen($vd56b699830e77ba53855679cb1d252da) < 3) {$this->errorNewMessage("%errors_too_short_login%");$this->errorPanic();}if(strlen($vd56b699830e77ba53855679cb1d252da) > 40) {$this->errorNewMessage("%errors_too_long_login%");$this->errorPanic();}if(strlen($v5f4dcc3b5aa765d61d8327deb882cf99) < 3) {$this->errorNewMessage("%errors_too_short_password%");$this->errorPanic();}if($vd56b699830e77ba53855679cb1d252da == $v5f4dcc3b5aa765d61d8327deb882cf99) {$this->errorNewMessage("%errors_login_equals_password%");$this->errorPanic();}if(!is_null($v9102d1318ba9a756d1f4c4aab9356d86 = getRequest('password_confirm'))) {if($v5f4dcc3b5aa765d61d8327deb882cf99 != $v9102d1318ba9a756d1f4c4aab9356d86) {$this->errorNewMessage("%errors_wrong_password_confirm%");$this->errorPanic();}}if(!preg_match("/.+@.+\..+/", $v0c83f57c786a0b4a39efab23731c7ebc)) {$this->errorNewMessage("%errors_wrong_email_format%");$this->errorPanic();}if(!$this->checkIsUniqueEmail($v0c83f57c786a0b4a39efab23731c7ebc)) {$this->errorNewMessage("%error_users_non_unique_email%");$this->errorPanic();}$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("users_registrate");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("before");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("login", $vd56b699830e77ba53855679cb1d252da);$v161c9aaa4fe035e7b2f465bc59f3ab45->addRef("password", $v5f4dcc3b5aa765d61d8327deb882cf99);$v161c9aaa4fe035e7b2f465bc59f3ab45->addRef("email", $v0c83f57c786a0b4a39efab23731c7ebc);$this->setEventPoint($v161c9aaa4fe035e7b2f465bc59f3ab45);if(!$vb56a862f58c661af1a91f1ba483d8585 && ($v0c83f57c786a0b4a39efab23731c7ebc===false || !strlen($v0c83f57c786a0b4a39efab23731c7ebc))) {$this->redirect($this->pre_lang . "/users/registrate_done/?result=error");}$v8e2ef84e859894740680432fe7d5f3d3 = $v726e8e4809d4c1b28a6549d86436a124->getFieldId("login");if (isset($_REQUEST['captcha'])) {$_SESSION['user_captcha'] = md5((int) getRequest('captcha'));}if (!umiCaptcha::checkCaptcha()) {$this->errorNewMessage("%errors_wrong_captcha%");$this->errorPanic();}$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->addLimit(1);$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v6301cee35ea764a1e241978f93f01069);$v8be74552df93e31bbdd6b36ed74bdb6a->addPropertyFilterEqual($v8e2ef84e859894740680432fe7d5f3d3, $vd56b699830e77ba53855679cb1d252da);$vcc0ff9b516dc30d929b1cd8f77653fb4 = (bool) umiSelectionsParser::runSelectionCounts($v8be74552df93e31bbdd6b36ed74bdb6a);if($vcc0ff9b516dc30d929b1cd8f77653fb4) {$this->errorNewMessage("%err_users_user_exists%");$this->errorPanic();}$vaf31437ce61345f416579830a98c91e5 = umiObjectsCollection::getInstance()->addObject($vd56b699830e77ba53855679cb1d252da, $v6301cee35ea764a1e241978f93f01069);$v3bc9aac1b3cb905dc3114c8375110b27 = md5($vd56b699830e77ba53855679cb1d252da . time());$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->setValue("login", $vd56b699830e77ba53855679cb1d252da);$va8cfde6331bd59eb2ac96f8911c4b666->setValue("password", md5($v5f4dcc3b5aa765d61d8327deb882cf99));$va8cfde6331bd59eb2ac96f8911c4b666->setValue("e-mail", $v0c83f57c786a0b4a39efab23731c7ebc);$va8cfde6331bd59eb2ac96f8911c4b666->setValue("is_activated", $vb56a862f58c661af1a91f1ba483d8585);$va8cfde6331bd59eb2ac96f8911c4b666->setValue("activate_code", $v3bc9aac1b3cb905dc3114c8375110b27);if ($vb56a862f58c661af1a91f1ba483d8585) {$_SESSION['cms_login'] = $vd56b699830e77ba53855679cb1d252da;$_SESSION['cms_pass'] = md5($v5f4dcc3b5aa765d61d8327deb882cf99);$_SESSION['user_id'] = $vaf31437ce61345f416579830a98c91e5;session_commit();}$v0e939a4ffd3aacd724dd3b50147b4353 = regedit::getInstance()->getVal("//modules/users/def_group");$va8cfde6331bd59eb2ac96f8911c4b666->setValue("groups", Array($v0e939a4ffd3aacd724dd3b50147b4353));cmsController::getInstance()->getModule('data');$ve98bb545c87bd6f12f14ce797342ef54 = cmsController::getInstance()->getModule('data');$ve98bb545c87bd6f12f14ce797342ef54->saveEditedObject($vaf31437ce61345f416579830a98c91e5, true);$va8cfde6331bd59eb2ac96f8911c4b666->commit();if ($v2d9754b699edc7a7ac4daac7d5a0a5d8 = cmsController::getInstance()->getModule('eshop')) {$v2d9754b699edc7a7ac4daac7d5a0a5d8->discountCardSave($vaf31437ce61345f416579830a98c91e5);}$v65b002304ab8df0d8ac6327c5d9d545a = xslTemplater::getInstance()->setIsInited(false);list($v8b5f7e4b8a1abaf7bf783c0e8a17c994, $v8259dd59caa73f2978ea0faae5af1ac9, $v7b344a34b6fd01e23dcd994ae09b4434, $vf05eabd72fff41517f897d3a92145f38) = def_module::loadTemplates("tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "mail_registrated", "mail_registrated_subject", "mail_registrated_noactivation", "mail_registrated_subject_noactivation");if($vb56a862f58c661af1a91f1ba483d8585 && $v7b344a34b6fd01e23dcd994ae09b4434 && $vf05eabd72fff41517f897d3a92145f38) {$v8b5f7e4b8a1abaf7bf783c0e8a17c994 = $v7b344a34b6fd01e23dcd994ae09b4434;$v8259dd59caa73f2978ea0faae5af1ac9 = $vf05eabd72fff41517f897d3a92145f38;}$v49c6eb74fa1dacbaae83a9c8bd397ebd = Array();$v49c6eb74fa1dacbaae83a9c8bd397ebd['user_id'] = $vaf31437ce61345f416579830a98c91e5;$v49c6eb74fa1dacbaae83a9c8bd397ebd['domain'] = $vad5f82e879a9c5d6b5b442eb37e50551 = $_SERVER['HTTP_HOST'];$v49c6eb74fa1dacbaae83a9c8bd397ebd['activate_link'] = "http://" . $vad5f82e879a9c5d6b5b442eb37e50551 . $this->pre_lang . "/users/activate/" . $v3bc9aac1b3cb905dc3114c8375110b27 . "/";$v49c6eb74fa1dacbaae83a9c8bd397ebd['password'] = $v5f4dcc3b5aa765d61d8327deb882cf99;$v49c6eb74fa1dacbaae83a9c8bd397ebd['lname'] = $va8cfde6331bd59eb2ac96f8911c4b666->getValue("lname");$v49c6eb74fa1dacbaae83a9c8bd397ebd['fname'] = $va8cfde6331bd59eb2ac96f8911c4b666->getValue("fname");$v49c6eb74fa1dacbaae83a9c8bd397ebd['father_name'] = $va8cfde6331bd59eb2ac96f8911c4b666->getValue("father_name");$ve7ade27667e6c2f068e2491ecab3190c = def_module::parseTemplate($v8b5f7e4b8a1abaf7bf783c0e8a17c994, $v49c6eb74fa1dacbaae83a9c8bd397ebd, false, $vaf31437ce61345f416579830a98c91e5);$v8259dd59caa73f2978ea0faae5af1ac9 = def_module::parseTemplate($v8259dd59caa73f2978ea0faae5af1ac9, $v49c6eb74fa1dacbaae83a9c8bd397ebd, false, $vaf31437ce61345f416579830a98c91e5);$vf003984af6466a03625ae1b386ad8977 = $va8cfde6331bd59eb2ac96f8911c4b666->getValue("lname") . " " . $va8cfde6331bd59eb2ac96f8911c4b666->getValue("fname") . " " . $va8cfde6331bd59eb2ac96f8911c4b666->getValue("father_name");$v6fa2ba59a01c45393ecd8c38f23bbd8b = regedit::getInstance()->getVal("//settings/email_from");$vf37ad7f8402a0da3486eda71efc5f9db = regedit::getInstance()->getVal("//settings/fio_from");$vac1db94df04db3fa46dbf716425be42f = new umiMail();$vac1db94df04db3fa46dbf716425be42f->addRecipient($v0c83f57c786a0b4a39efab23731c7ebc, $vf003984af6466a03625ae1b386ad8977);$vac1db94df04db3fa46dbf716425be42f->setFrom($v6fa2ba59a01c45393ecd8c38f23bbd8b, $vf37ad7f8402a0da3486eda71efc5f9db);$vac1db94df04db3fa46dbf716425be42f->setSubject($v8259dd59caa73f2978ea0faae5af1ac9);$vac1db94df04db3fa46dbf716425be42f->setContent($ve7ade27667e6c2f068e2491ecab3190c);$vac1db94df04db3fa46dbf716425be42f->commit();$vac1db94df04db3fa46dbf716425be42f->send();xslTemplater::getInstance()->setIsInited($v65b002304ab8df0d8ac6327c5d9d545a);$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("users_registrate");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("after");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("user_id", $vaf31437ce61345f416579830a98c91e5);$this->setEventPoint($v161c9aaa4fe035e7b2f465bc59f3ab45);if ($vb56a862f58c661af1a91f1ba483d8585) {$this->redirect($this->pre_lang . "/users/registrate_done/?result=without_activation");}else {$this->redirect($this->pre_lang . "/users/registrate_done/");}}public function registrate_done($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if($this->breakMe()) return;if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";$v4ec1b477cd0232b832c1899905ec51a4 = '';switch(getRequest('result')) {case 'without_activation': $v4ec1b477cd0232b832c1899905ec51a4='_without_activation';break;case 'error'             : $v4ec1b477cd0232b832c1899905ec51a4='_error';break;case 'error_user_exists' : $v4ec1b477cd0232b832c1899905ec51a4='_user_exists';break;}list($v364f9b183bd2dd9e0beb45c754830a6c) = def_module::loadTemplates("./tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "registrate_done_block".$v4ec1b477cd0232b832c1899905ec51a4);$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();return def_module::parseTemplate($v364f9b183bd2dd9e0beb45c754830a6c, $vfca1bff8ad8b3a8585abfb0ad523ba42);}public function activate($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if($this->breakMe()) return;if ($this->is_auth()) $this->redirect("/");if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";list($v364f9b183bd2dd9e0beb45c754830a6c, $v961f9a063172c60d95b4ba7a3128aafb) = def_module::loadTemplates("./tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "activate_block", "activate_block_failed");$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$v3bc9aac1b3cb905dc3114c8375110b27 = (string) getRequest('param0');$v87306dd4235ed712ebc07fe169b76f83 = umiObjectTypesCollection::getInstance()->getBaseType("users", "user");$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$v9aacd922ddfbcaf92a10ca077689f460 = $v7ae7003da59ae71dcc9f8638ef50593d->getFieldId("activate_code");$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->addLimit(1);$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v87306dd4235ed712ebc07fe169b76f83);$v8be74552df93e31bbdd6b36ed74bdb6a->addPropertyFilterEqual($v9aacd922ddfbcaf92a10ca077689f460, $v3bc9aac1b3cb905dc3114c8375110b27);$result = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);if($result) {list($ve8701ad48ba05a91604e480dd60899a3) = $result;$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3);$vee11cbb19052e40b07aac0ca060c23ee->setValue("is_activated", 1);$vee11cbb19052e40b07aac0ca060c23ee->setValue("activate_code", md5(uniqid(rand(), true)));$vee11cbb19052e40b07aac0ca060c23ee->commit();permissionsCollection::getInstance()->loginAsUser($result);$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("users_activate");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("after");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("user_id", $ve8701ad48ba05a91604e480dd60899a3);$this->setEventPoint($v161c9aaa4fe035e7b2f465bc59f3ab45);$v66f6181bcb4cff4cd38fbc804a036db6 = $v364f9b183bd2dd9e0beb45c754830a6c;}else {throw new publicException("%error_activation_code_failed%");$v66f6181bcb4cff4cd38fbc804a036db6 = $v961f9a063172c60d95b4ba7a3128aafb;}return def_module::parseTemplate($v66f6181bcb4cff4cd38fbc804a036db6, $vfca1bff8ad8b3a8585abfb0ad523ba42);}public function onAutoCreateAvatar(iUmiEventPoint $v161c9aaa4fe035e7b2f465bc59f3ab45) {$ve8701ad48ba05a91604e480dd60899a3 = $v161c9aaa4fe035e7b2f465bc59f3ab45->getParam("user_id");$ve1375e86218fa8e8d959a5953b1331dd = $v87306dd4235ed712ebc07fe169b76f83 = umiObjectTypesCollection::getInstance()->getBaseType("users", "avatar");if($v161c9aaa4fe035e7b2f465bc59f3ab45->getMode() != "after") {return;}if($v78805a221a988e79ef3f42d7c5bfd418 = umiImageFile::upload("avatar", "user_avatar_file", "./images/cms/data/picture/")) {$v1b119da6d1702a0537a67584b7ceacad = umiObjectsCollection::getInstance()->addObject("Avatar for user {$ve8701ad48ba05a91604e480dd60899a3}", $ve1375e86218fa8e8d959a5953b1331dd);$vaaca0f5eb4d2d98a6ce6dffa99f8254b = umiObjectsCollection::getInstance()->getObject($v1b119da6d1702a0537a67584b7ceacad);$vaaca0f5eb4d2d98a6ce6dffa99f8254b->setValue("picture", $v78805a221a988e79ef3f42d7c5bfd418);$vaaca0f5eb4d2d98a6ce6dffa99f8254b->setValue("is_hidden", true);$vaaca0f5eb4d2d98a6ce6dffa99f8254b->commit();$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3);$vee11cbb19052e40b07aac0ca060c23ee->setValue("avatar", $v1b119da6d1702a0537a67584b7ceacad);$vee11cbb19052e40b07aac0ca060c23ee->commit();return true;}else {return false;}}public function onRegisterAdminMail(iUmiEventPoint $v161c9aaa4fe035e7b2f465bc59f3ab45) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$v66f6181bcb4cff4cd38fbc804a036db6 = "default";if($v161c9aaa4fe035e7b2f465bc59f3ab45->getMode() == "after") {$v65b002304ab8df0d8ac6327c5d9d545a = xslTemplater::getInstance()->setIsInited(false);list($v8b5f7e4b8a1abaf7bf783c0e8a17c994, $v8259dd59caa73f2978ea0faae5af1ac9) = def_module::loadTemplates("tpls/users/register/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "mail_admin_registrated", "mail_admin_registrated_subject");$ve02619363a01764566a59db17ff071a9 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/admin_email");$v6fa2ba59a01c45393ecd8c38f23bbd8b = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/email_from");$vf37ad7f8402a0da3486eda71efc5f9db = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/fio_from");$vaf31437ce61345f416579830a98c91e5 = $v161c9aaa4fe035e7b2f465bc59f3ab45->getParam('user_id');$vd56b699830e77ba53855679cb1d252da = $v161c9aaa4fe035e7b2f465bc59f3ab45->getParam('login');$v49c6eb74fa1dacbaae83a9c8bd397ebd = Array();$v49c6eb74fa1dacbaae83a9c8bd397ebd['user_id'] = $vaf31437ce61345f416579830a98c91e5;if($vd56b699830e77ba53855679cb1d252da) {$v49c6eb74fa1dacbaae83a9c8bd397ebd['login'] = $vd56b699830e77ba53855679cb1d252da;}$ve7ade27667e6c2f068e2491ecab3190c = def_module::parseTemplate($v8b5f7e4b8a1abaf7bf783c0e8a17c994, $v49c6eb74fa1dacbaae83a9c8bd397ebd, false, $vaf31437ce61345f416579830a98c91e5);$vac1db94df04db3fa46dbf716425be42f = new umiMail();$vac1db94df04db3fa46dbf716425be42f->addRecipient($ve02619363a01764566a59db17ff071a9, $vf37ad7f8402a0da3486eda71efc5f9db);$vac1db94df04db3fa46dbf716425be42f->setFrom($v6fa2ba59a01c45393ecd8c38f23bbd8b, $vf37ad7f8402a0da3486eda71efc5f9db);$vac1db94df04db3fa46dbf716425be42f->setSubject($v8259dd59caa73f2978ea0faae5af1ac9);$vac1db94df04db3fa46dbf716425be42f->setContent($ve7ade27667e6c2f068e2491ecab3190c);$vac1db94df04db3fa46dbf716425be42f->commit();$vac1db94df04db3fa46dbf716425be42f->send();xslTemplater::getInstance()->setIsInited($v65b002304ab8df0d8ac6327c5d9d545a);}}};?>