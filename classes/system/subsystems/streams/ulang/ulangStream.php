<?php
 class ulangStream extends umiBaseStream {protected $scheme = "ulang", $prop_name = NULL;protected static $i18nCache = Array();public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736) {static $v0fea6a13c52b4d4725368f24b045ca84 = array();$vcaf9b6b99962bf5c2264824231d7a40c = parse_url($vd6fe1d0be6347b8ef2427fa629c04485);$vd6fe1d0be6347b8ef2427fa629c04485 = trim(getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'host') . getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'path'), "/");$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();if(substr($vd6fe1d0be6347b8ef2427fa629c04485, -5, 5) == ':file') {$vbc45423e1780f4dbda64608a76f2e05b = $this->getExternalDTD(substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($vd6fe1d0be6347b8ef2427fa629c04485) - 5));return $this->setData($vbc45423e1780f4dbda64608a76f2e05b);}if(strpos(getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'query'), 'js') !== false) {$v15d61712450a686a7f365adf4fef581f = 'js';}else if(strpos($vd6fe1d0be6347b8ef2427fa629c04485, 'js') !== false) {$v15d61712450a686a7f365adf4fef581f = 'js';$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($vd6fe1d0be6347b8ef2427fa629c04485) - 3);}else $v15d61712450a686a7f365adf4fef581f = 'dtd';if($v15d61712450a686a7f365adf4fef581f == 'js') {$v7f2db423a49b305459147332fb01cf87->contentType('text/javascript');$v8d777f385d3dfec8815d20f7496026dc = $this->generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485);return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485])) {$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485] = $this->translateToDTD($v11cc313f766c5d93e6b73ba8439ade0f);}return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}protected function translateToDTD($v5a1969515ab7b523d913732d256e644a) {$v6a87284914054e1ba5d1d288c1b09f43 = "<!ENTITY quote '&#34;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY nbsp '&#160;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY middot '&#183;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY reg '&#174;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY copy '&#169;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY raquo '&#187;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY laquo '&#171;'>\n";$v156577e912dd9b1be50a671edc17c4a0 = getServer('REQUEST_URI');$v156577e912dd9b1be50a671edc17c4a0 = htmlspecialchars($v156577e912dd9b1be50a671edc17c4a0);foreach($v5a1969515ab7b523d913732d256e644a as $v18389a4a9ad5795744699cff0ba66c15 => $v385aa5385e83efc5d83c7588ee5fb7e8) {if($this->isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15)) continue;$v385aa5385e83efc5d83c7588ee5fb7e8 = $this->protectEntityValue($v385aa5385e83efc5d83c7588ee5fb7e8);$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY {$v18389a4a9ad5795744699cff0ba66c15} \"{$v385aa5385e83efc5d83c7588ee5fb7e8}\">\n";}return $v6a87284914054e1ba5d1d288c1b09f43;}protected function isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15) {$v47c80780ab608cc046f2a6e6f071feb6 = Array('field-', 'object-type-', 'hierarchy-type-', 'fields-group-', 'field-type-');for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < sizeof($v47c80780ab608cc046f2a6e6f071feb6);$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(bytes_substr($v18389a4a9ad5795744699cff0ba66c15, 0, bytes_strlen($v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741])) == $v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741]) {return true;}}return false;}protected function protectEntityValue($v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$vd98a07f84921b24ee30f86fd8cd85c3c = array('&', '"', '%');$v01b6e20344b68835c5ed1ddedf20d531 = array('&amp;', '&quote;', '&#037;');$v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);return $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}protected static function parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485) {$v81788ba0d7d02d81c063dbca621ba11b = "ulang://";if(substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($v81788ba0d7d02d81c063dbca621ba11b)) == $v81788ba0d7d02d81c063dbca621ba11b) {$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, strlen($v81788ba0d7d02d81c063dbca621ba11b));}$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");return split("\/", $vd6fe1d0be6347b8ef2427fa629c04485);}protected static function loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485) {static $v7abdda3251de25a51bf5fb15d7c3391d, $v4a8a08f09d37b73795649038408b5f33 = 0;if(!$v7abdda3251de25a51bf5fb15d7c3391d) {$v594c103f2c6e04c3d8ab059f031e0c1a = cmsController::getInstance();$v7abdda3251de25a51bf5fb15d7c3391d = $v594c103f2c6e04c3d8ab059f031e0c1a->getCurrentModule();}$ve6451b27d4123951dfd29d32a18b3919 = self::$i18nCache;$ve8723cd5a634e83ba1d810e6584f3e59 = self::parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485);$v753527be46567ad90a4203cf4b40d70e = self::getLangPrefix();$v11cc313f766c5d93e6b73ba8439ade0f = Array();if(!in_array($v7abdda3251de25a51bf5fb15d7c3391d, $ve8723cd5a634e83ba1d810e6584f3e59)) {$ve8723cd5a634e83ba1d810e6584f3e59[] = $v7abdda3251de25a51bf5fb15d7c3391d;}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve8723cd5a634e83ba1d810e6584f3e59);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vdff9a6fde59e8dfc96361ffa7b52426a = $ve8723cd5a634e83ba1d810e6584f3e59[$v865c0c0b4ab0e063e5caa3387c1a8741];if($vdff9a6fde59e8dfc96361ffa7b52426a == false) continue;$v797a70c0592f1ea67c7f63d456de20fd = "i18n." . $v753527be46567ad90a4203cf4b40d70e . ".php";$vfe3c2e38a8d7e5bca55ebb32d6733fc0 = "i18n.php";$v851148b4fd8fd7ae74bd9100c5c0c898 = ($vdff9a6fde59e8dfc96361ffa7b52426a == "common") ? "/classes/modules/" : "/classes/modules/" . $vdff9a6fde59e8dfc96361ffa7b52426a . "/";$v851148b4fd8fd7ae74bd9100c5c0c898 = CURRENT_WORKING_DIR . $v851148b4fd8fd7ae74bd9100c5c0c898;$vcd5aac9b508ee14d7ec74cfaf518c07d = $v851148b4fd8fd7ae74bd9100c5c0c898 . $v797a70c0592f1ea67c7f63d456de20fd;$v71bc9962768a0cfd271153976203c648 = $v851148b4fd8fd7ae74bd9100c5c0c898 . $vfe3c2e38a8d7e5bca55ebb32d6733fc0;if(array_key_exists($vdff9a6fde59e8dfc96361ffa7b52426a, $ve6451b27d4123951dfd29d32a18b3919)) {$i18n = $ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a];}else {if(file_exists($vcd5aac9b508ee14d7ec74cfaf518c07d)) {include $vcd5aac9b508ee14d7ec74cfaf518c07d;}else if (file_exists($v71bc9962768a0cfd271153976203c648)) {include $v71bc9962768a0cfd271153976203c648;}}if(isset($i18n) && is_array($i18n)) {$ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a] = $i18n;$v11cc313f766c5d93e6b73ba8439ade0f = $i18n + $v11cc313f766c5d93e6b73ba8439ade0f;unset($i18n);}}self::$i18nCache = $ve6451b27d4123951dfd29d32a18b3919;return $v11cc313f766c5d93e6b73ba8439ade0f;}public static function getLabel($vd304ba20e96d87411588eeabac850e34, $vd6fe1d0be6347b8ef2427fa629c04485 = false, $args = null) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();static $v535d02e594853266d2db02ff178dd7f7 = false;if($v535d02e594853266d2db02ff178dd7f7 === false) {$v535d02e594853266d2db02ff178dd7f7 = self::getLangPrefix();}$v9a4a6f6ee974a928a90c9152a674b141 = ($vd6fe1d0be6347b8ef2427fa629c04485 == false) ? "common/data" : $vd6fe1d0be6347b8ef2427fa629c04485;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = &$v11cc313f766c5d93e6b73ba8439ade0f;}if(isset($v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34])) {$v9b207167e5381c47682c6b4f58a623fb = $v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34];}else {$v9b207167e5381c47682c6b4f58a623fb = "{$vd304ba20e96d87411588eeabac850e34}";}if(is_array($args) && sizeof($args) > 2) {$v9b207167e5381c47682c6b4f58a623fb = vsprintf($v9b207167e5381c47682c6b4f58a623fb, array_slice($args, 2));}return $v9b207167e5381c47682c6b4f58a623fb;}public static function getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(!$v3c6e0b8a9c15224a8228b9a98ca1531d) {return $v3c6e0b8a9c15224a8228b9a98ca1531d;}$v9a4a6f6ee974a928a90c9152a674b141 = "common/data";$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = $v11cc313f766c5d93e6b73ba8439ade0f;}$result = NULL;foreach($v11cc313f766c5d93e6b73ba8439ade0f as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if($v9e3669d19b675bd57058fd4664205d2a == $v3c6e0b8a9c15224a8228b9a98ca1531d) {if($v240bf022e685b0ee30ad9fe9e1fb5d5b) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}else {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}}if(!is_null($result)) {$v61aa67e6eaba94628806fae66b03cc2c = Array(     'object-type-',     'hierarchy-type-',     'field-',     'fields-group-',     'field-type-',     'object-'    );$v22ee71e9dcc9ca12fc313c6e1ce3f806 = false;$vf663bcefae644ae5f8a16deb6b2fd115 = str_replace("i18n::", "", $v240bf022e685b0ee30ad9fe9e1fb5d5b);foreach($v61aa67e6eaba94628806fae66b03cc2c as $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$v240bf022e685b0ee30ad9fe9e1fb5d5b = $v240bf022e685b0ee30ad9fe9e1fb5d5b;if(substr($vf663bcefae644ae5f8a16deb6b2fd115, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $vf663bcefae644ae5f8a16deb6b2fd115) {$v22ee71e9dcc9ca12fc313c6e1ce3f806 = true;}}if($v22ee71e9dcc9ca12fc313c6e1ce3f806 == false) {return NULL;}}return $result;}public static function getLangPrefix() {static $vc105c08af1d0d83b729e22ecb887f52a;if(!is_null($vc105c08af1d0d83b729e22ecb887f52a)) {return $vc105c08af1d0d83b729e22ecb887f52a;}$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v851f5ac9941d720844d143ed9cfcf60a = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getPrefix();if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() != "admin" && !defined('VIA_HTTP_SCHEME')) {return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_POST, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_GET, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getCookie('ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}public function __construct() {parent::__construct();}public function __destruct() {}protected function generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485) {$i18n = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$result = <<<INITJS
function getLabel(key, str) {if(setLabel.langLabels[key]) {var res = setLabel.langLabels[key];if(str) {res = res.replace("%s", str);}return res;} else {return "[" + key + "]";}}
function setLabel(key, label) {setLabel.langLabels[key] = label;}setLabel.langLabels = new Array();


INITJS;   foreach($i18n as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, 3) == "js-" || strpos($v865c0c0b4ab0e063e5caa3387c1a8741, "module-") === 0) {$v865c0c0b4ab0e063e5caa3387c1a8741 = self::filterOutputString($v865c0c0b4ab0e063e5caa3387c1a8741);$v9e3669d19b675bd57058fd4664205d2a = self::filterOutputString($v9e3669d19b675bd57058fd4664205d2a);$result .= "setLabel('{$v865c0c0b4ab0e063e5caa3387c1a8741}', '{$v9e3669d19b675bd57058fd4664205d2a}');\n";}}umiBaseStream::$allowTimeMark = false;return $result;}protected function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vd98a07f84921b24ee30f86fd8cd85c3c = array("\r\n", "\n", "'");$v01b6e20344b68835c5ed1ddedf20d531 = array("\\r\\n", "\\n", "\\'");$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function getExternalDTD($vd6fe1d0be6347b8ef2427fa629c04485) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v851f5ac9941d720844d143ed9cfcf60a = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getPrefix();$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo(SYS_XSLT_PATH . $vd6fe1d0be6347b8ef2427fa629c04485);$v811882fecd5c7618d7099ebbd39ea254 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'dirname') . '/' . getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'filename');$v7c4f29407893c334a6cb7a87bf045c0d = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'extension');$v867391a2d5bc1e52a2b08ddf5e7fb4ae = $v811882fecd5c7618d7099ebbd39ea254 . '.' . $v851f5ac9941d720844d143ed9cfcf60a . '.' . $v7c4f29407893c334a6cb7a87bf045c0d;$vf61b46d4bf30fc38e029dee2db5aa417 = $v811882fecd5c7618d7099ebbd39ea254 . '.' . $v7c4f29407893c334a6cb7a87bf045c0d;if(is_file($v867391a2d5bc1e52a2b08ddf5e7fb4ae)) {return file_get_contents($v867391a2d5bc1e52a2b08ddf5e7fb4ae);}if(is_file($vf61b46d4bf30fc38e029dee2db5aa417)) {return file_get_contents($vf61b46d4bf30fc38e029dee2db5aa417);}return '';}};?>