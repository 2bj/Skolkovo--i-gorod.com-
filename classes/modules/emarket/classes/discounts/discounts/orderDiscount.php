<?php
 class orderDiscount extends discount {public function validate(order $v70a17ffa722a3985b86d30b034ad06d7) {$va4f86f7bfc24194b276c22e0ef158197 = $this->getDiscountRules();foreach($va4f86f7bfc24194b276c22e0ef158197 as $v981c1e7b3795da18687613fbd66d4954) {if($v981c1e7b3795da18687613fbd66d4954 instanceof orderDiscountRule == false) {continue;}if($v981c1e7b3795da18687613fbd66d4954->validateOrder($v70a17ffa722a3985b86d30b034ad06d7) == false) {return false;}}return true;}public static function search(order $v70a17ffa722a3985b86d30b034ad06d7) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vfcaea7edd270964cc145ea48e4367d43 = $v8b1dc169bf460ee884fceef66c6607d6->getModule('emarket');if($vfcaea7edd270964cc145ea48e4367d43 instanceof def_module == false) {throw new coreException('Emarket module must be installed in order to calculate discounts');}$vb0da66a18c79bb89bab185ee6d476ad4 = $vfcaea7edd270964cc145ea48e4367d43->getAllDiscounts('order');$v9544fa2fae515081e7fc27ef2d268642 = array();foreach($vb0da66a18c79bb89bab185ee6d476ad4 as $v4c3e3e50c8ef3b2a481767d59ccbc0b8) {$ve2dc6c48c56de466f6d13781796abf3d = discount::get($v4c3e3e50c8ef3b2a481767d59ccbc0b8->id);if($ve2dc6c48c56de466f6d13781796abf3d instanceof orderDiscount == false) continue;if($ve2dc6c48c56de466f6d13781796abf3d->validate($v70a17ffa722a3985b86d30b034ad06d7)) $v9544fa2fae515081e7fc27ef2d268642[] = $ve2dc6c48c56de466f6d13781796abf3d;}switch(sizeof($v9544fa2fae515081e7fc27ef2d268642)) {case 0: return null;default:     $v25446c4f944226558d332b92e66a5e56 = $v70a17ffa722a3985b86d30b034ad06d7->getOriginalPrice();$va2deda85c9dbefb340d40b13a5121a79 = null;$va642c4b864a2b19d3d979321bc21f831 = null;foreach($v9544fa2fae515081e7fc27ef2d268642 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $ve2dc6c48c56de466f6d13781796abf3d) {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = $ve2dc6c48c56de466f6d13781796abf3d->recalcPrice($v25446c4f944226558d332b92e66a5e56);if($v78a5eb43deef9a7b5b9ce157b9d52ac4 <= 0) continue;if(is_null($va642c4b864a2b19d3d979321bc21f831) || $va642c4b864a2b19d3d979321bc21f831 > $v78a5eb43deef9a7b5b9ce157b9d52ac4) {$va642c4b864a2b19d3d979321bc21f831 = $v78a5eb43deef9a7b5b9ce157b9d52ac4;$va2deda85c9dbefb340d40b13a5121a79 = $ve2dc6c48c56de466f6d13781796abf3d;}}return $va2deda85c9dbefb340d40b13a5121a79;}}};?>