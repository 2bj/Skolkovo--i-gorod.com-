<?php
abstract class def_module {public static  $templates_cache = array(), $noRedirectOnPanic = false, $defaultTemplateName = 'default';public $max_pages = 10, $isSelectionFiltered = false;public $pid, $FORMS_CACHE = array(), $FORMS = array(), $per_page = 20;public $dataType, $actionType, $currentEditedElementId = false;public $__classes = array(), $libsCalled = array();public $common_tabs = null, $config_tabs = null;protected function __implement($v38c9bd9e6690779c49b5cea2617fa07c) {$this->__classes[] = $v38c9bd9e6690779c49b5cea2617fa07c;$v820eb5b696ea2a657c0db1e258dc7d81 = get_class_methods($v38c9bd9e6690779c49b5cea2617fa07c);if(is_null($v820eb5b696ea2a657c0db1e258dc7d81)) return;$v4d9d6c17eeae2754c9b49171261b93bd = "onInit";if(in_array($v4d9d6c17eeae2754c9b49171261b93bd, $v820eb5b696ea2a657c0db1e258dc7d81)) $this->$v4d9d6c17eeae2754c9b49171261b93bd();$v4d9d6c17eeae2754c9b49171261b93bd = "onImplement";if (in_array($v4d9d6c17eeae2754c9b49171261b93bd, $v820eb5b696ea2a657c0db1e258dc7d81) && class_exists('ReflectionClass')   && class_exists('ReflectionMethod') && class_exists('ReflectionException')) {try {$v209979537b932c207f8179bb76c93890 = new ReflectionClass($v38c9bd9e6690779c49b5cea2617fa07c);$vc31f8bdacd6556cf4c183aae689075a1 = $v209979537b932c207f8179bb76c93890->getMethod($v4d9d6c17eeae2754c9b49171261b93bd);if ($vc31f8bdacd6556cf4c183aae689075a1 instanceof ReflectionMethod) {if ($vc31f8bdacd6556cf4c183aae689075a1->isPublic()) {eval('$res = ' . $v38c9bd9e6690779c49b5cea2617fa07c . '::' . $v4d9d6c17eeae2754c9b49171261b93bd . '();');}}}catch (ReflectionException $ve1671797c52e15f763380b45e841ec32) {}}}public function __admin() {if(cmsController::getInstance()->getCurrentMode() == "admin" && !class_exists("__" . get_class($this))) {$this->__loadLib("__admin.php");$this->__implement("__" . get_class($this));}}public function __call($vea9f6aca279138c58f705c8d4cb4b8ce, $args) {foreach($this->__classes as $v6f66e878c62db60568a3487869695820) {$v9cf2b355321721c32cf156db7683c382 = get_class_methods($v6f66e878c62db60568a3487869695820);if(is_null($v9cf2b355321721c32cf156db7683c382)) continue;if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $v9cf2b355321721c32cf156db7683c382)) {$v21ffce5b8a6cc8cc6a41448dd69623c9 = "";if(is_array($args)) {$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($args);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v21ffce5b8a6cc8cc6a41448dd69623c9 .= '$args[' . $v865c0c0b4ab0e063e5caa3387c1a8741 . ']';if($v865c0c0b4ab0e063e5caa3387c1a8741 != $v7dabf5c198b0bab2eaa42bb03a113e55-1) $v21ffce5b8a6cc8cc6a41448dd69623c9 .= ", ";}}eval('$result = ' . $v6f66e878c62db60568a3487869695820 . '::' . $vea9f6aca279138c58f705c8d4cb4b8ce . '(' . $v21ffce5b8a6cc8cc6a41448dd69623c9 . ');');return $result;}}$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v8b1dc169bf460ee884fceef66c6607d6->langs[get_class($this)][$vea9f6aca279138c58f705c8d4cb4b8ce] = "Ошибка";if($v8b1dc169bf460ee884fceef66c6607d6->getModule("content")) {if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() == "admin") {return "Вызов несуществующего метода.";}else {if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentModule() == get_class($this) && $v8b1dc169bf460ee884fceef66c6607d6->getCurrentMethod() == $vea9f6aca279138c58f705c8d4cb4b8ce) {return $v8b1dc169bf460ee884fceef66c6607d6->getModule("content")->gen404();}else {return "";}}}}public function __construct() {$this->lang = cmsController::getInstance()->getCurrentLang()->getPrefix();$this->init();}public function getCommonTabs() {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v7b975dff6c0134c6f231fd13895c2349 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentModule();$vd0be0d735c5faa2c934694eb004edf15 = get_class($this);if (($v7b975dff6c0134c6f231fd13895c2349 != $vd0be0d735c5faa2c934694eb004edf15) && ($v7b975dff6c0134c6f231fd13895c2349 != false && $vd0be0d735c5faa2c934694eb004edf15 != 'users')) return false;if (!$this->common_tabs instanceof adminModuleTabs) {$this->common_tabs = new adminModuleTabs("common");}return $this->common_tabs;}public function getConfigTabs() {if (cmsController::getInstance()->getCurrentModule() != get_class($this)) return false;if (!$this->config_tabs instanceof adminModuleTabs) {$this->config_tabs = new adminModuleTabs("config");}return $this->config_tabs;}public function cms_callMethod($v2fa70149e2a7e75da2b0303d0a36a944, $args) {if(!$v2fa70149e2a7e75da2b0303d0a36a944) return;$v3f55633ad6a2b78c9c4f9787fecbf3bc = array();if(USE_REFLECTION_EXT && class_exists('ReflectionMethod')) {try {$va29fd518fa2a9b10f0cdaa6311ae9112   = new ReflectionMethod($this, $v2fa70149e2a7e75da2b0303d0a36a944);$v857375480bae137bd20938aafadc9163 = max($va29fd518fa2a9b10f0cdaa6311ae9112->getNumberOfRequiredParameters(), count($args));if($v857375480bae137bd20938aafadc9163) $v3f55633ad6a2b78c9c4f9787fecbf3bc = array_fill(0, $v857375480bae137bd20938aafadc9163, 0);}catch(Exception $ve1671797c52e15f763380b45e841ec32) {}}for($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<count($args);$v865c0c0b4ab0e063e5caa3387c1a8741++) $v3f55633ad6a2b78c9c4f9787fecbf3bc[$v865c0c0b4ab0e063e5caa3387c1a8741] = $args[$v865c0c0b4ab0e063e5caa3387c1a8741];if(count($v3f55633ad6a2b78c9c4f9787fecbf3bc) && !(empty($args[0]) && sizeof($args) == 1)) {return call_user_func_array(array($this, $v2fa70149e2a7e75da2b0303d0a36a944), $v3f55633ad6a2b78c9c4f9787fecbf3bc);}else {return $this->$v2fa70149e2a7e75da2b0303d0a36a944();}}public function init() {$vd4a32ede0a2c8f57c66072f681f21196 = CURRENT_WORKING_DIR . '/classes/modules/' . get_class($this) . '/includes.php';if(is_file($vd4a32ede0a2c8f57c66072f681f21196) && !defined('SKIP_MODULES_INCLUDES')) {require_once $vd4a32ede0a2c8f57c66072f681f21196;}}public function install($v551b723eafd6a31d444fcb2f5920fbd3) {$v3d788fa62d7c185a1bee4c9147ee1091 = '//modules/' . $v551b723eafd6a31d444fcb2f5920fbd3['name'];$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$vb1444fb0c07653567ad325aa25d4e37a->setVar($v3d788fa62d7c185a1bee4c9147ee1091, $v551b723eafd6a31d444fcb2f5920fbd3['name']);if(is_array($v551b723eafd6a31d444fcb2f5920fbd3)) {foreach($v551b723eafd6a31d444fcb2f5920fbd3 as $vb2145aac704ce76dbe1ac7adac535b23 => $v64e4aa9627156d16045e98476d0cb2df) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v64e4aa9627156d16045e98476d0cb2df;$vb1444fb0c07653567ad325aa25d4e37a->setVar($v3d788fa62d7c185a1bee4c9147ee1091 . "/" . $vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}}}public function uninstall() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$v6f66e878c62db60568a3487869695820 = get_class($this);$v8ce4b16b22b58894aa86c421e8759df3 = $vb1444fb0c07653567ad325aa25d4e37a->getKey('//modules/' . $v6f66e878c62db60568a3487869695820);$vb1444fb0c07653567ad325aa25d4e37a->delVar('//modules/' . $v6f66e878c62db60568a3487869695820);}public function redirect($v572d4e421e5e6b9bc11d815e8a027112, $v4b600907378cf5f500d3eccfb74d7f87 = true) {if(getRequest('redirect_disallow')) return;if(!$v572d4e421e5e6b9bc11d815e8a027112) $v572d4e421e5e6b9bc11d815e8a027112 = $this->pre_lang . "/";if($v4b600907378cf5f500d3eccfb74d7f87 && ($this instanceof def_module)) $v572d4e421e5e6b9bc11d815e8a027112 = $this->removeErrorParam($v572d4e421e5e6b9bc11d815e8a027112);umiHierarchy::getInstance()->__destruct();outputBuffer::current()->redirect($v572d4e421e5e6b9bc11d815e8a027112);}public function requireSlashEnding() {if(getRequest('xmlMode') == "force" || sizeof($_POST) > 0) {return;}$v9305b73d359bd06734fee0b3638079e1 = getServer('REQUEST_URI');$vbef65933acbed511ed4f607e97852f2b = parse_url($v9305b73d359bd06734fee0b3638079e1);if(substr($vbef65933acbed511ed4f607e97852f2b['path'], -1, 1) != "/") {$v9305b73d359bd06734fee0b3638079e1 = $vbef65933acbed511ed4f607e97852f2b['path'] . "/";if(isset($vbef65933acbed511ed4f607e97852f2b['query']) && $vbef65933acbed511ed4f607e97852f2b['query']) {$v9305b73d359bd06734fee0b3638079e1 .= "?" . $vbef65933acbed511ed4f607e97852f2b['query'];}self::redirect($v9305b73d359bd06734fee0b3638079e1);}}public function __loadLib($ve8acc63b1e238f3255c900eed37254b8, $vd6fe1d0be6347b8ef2427fa629c04485 = "", $vdc3c99bb4e249a95567a2bf7d5f327ed = false) {$v9f8629bce6f6014f7ffecc272843c09f = ($vd6fe1d0be6347b8ef2427fa629c04485) ? $vd6fe1d0be6347b8ef2427fa629c04485 . $ve8acc63b1e238f3255c900eed37254b8 : "classes/modules/" . get_class($this) . "/" . $ve8acc63b1e238f3255c900eed37254b8;$v9f8629bce6f6014f7ffecc272843c09f = CURRENT_WORKING_DIR . "/" . $v9f8629bce6f6014f7ffecc272843c09f;if(isset($this->FORMS_CACHE[$v9f8629bce6f6014f7ffecc272843c09f])) {$FORMS = $this->FORMS_CACHE[$v9f8629bce6f6014f7ffecc272843c09f];}else {if(file_exists($v9f8629bce6f6014f7ffecc272843c09f)) {require $v9f8629bce6f6014f7ffecc272843c09f;}}if($vdc3c99bb4e249a95567a2bf7d5f327ed) {$this->FORMS = $FORMS;$this->FORMS_CACHE[$v9f8629bce6f6014f7ffecc272843c09f] = $FORMS;}return true;}public function setHeader($v099fb995346f31c749f6e40db0f395e3) {$v4d424a5679c0aa6e84a0235ec1949c43 = cmsController::getInstance();$v4d424a5679c0aa6e84a0235ec1949c43->currentHeader = $v099fb995346f31c749f6e40db0f395e3;}protected function setTitle($vd5d3db1765287eef77d7927cc956f50a = "", $v15d61712450a686a7f365adf4fef581f = 0) {$v4d424a5679c0aa6e84a0235ec1949c43 = cmsController::getInstance();if($vd5d3db1765287eef77d7927cc956f50a) {if($v15d61712450a686a7f365adf4fef581f)    $v4d424a5679c0aa6e84a0235ec1949c43->currentTitle = regedit::getInstance()->getVal('//domains/' . $_REQUEST['domain'] . '/title_pref_' . $_REQUEST['lang']) . $vd5d3db1765287eef77d7927cc956f50a;else    $v4d424a5679c0aa6e84a0235ec1949c43->currentTitle = $vd5d3db1765287eef77d7927cc956f50a;}else   $v4d424a5679c0aa6e84a0235ec1949c43->currentTitle = cmsController::getInstance()->currentHeader;}protected function setH1($v346b81a32e7007eccadf60252bb599f0) {$this->setHeader($v346b81a32e7007eccadf60252bb599f0);}public function flush($v78e6221f6393d1356681db398f14ce6d = "", $v0cc9cc73ee8fb2aca47ef76287572fdd = false) {if($v0cc9cc73ee8fb2aca47ef76287572fdd !== false) {header("Content-type: " . $v0cc9cc73ee8fb2aca47ef76287572fdd);}echo $v78e6221f6393d1356681db398f14ce6d;exit();}public static function loadTemplates($v6a2a431fe8b621037ea949531c28551d = "") {$v4a8a08f09d37b73795649038408b5f33 = func_num_args();$args = func_get_args();$v8ce1a19060c7f3777242272261830ee1 = xslTemplater::getInstance();if($v8ce1a19060c7f3777242272261830ee1->getIsInited()) {return $v8ce1a19060c7f3777242272261830ee1->loadTemplates($v6a2a431fe8b621037ea949531c28551d, $v4a8a08f09d37b73795649038408b5f33, $args);}$v6a2a431fe8b621037ea949531c28551d = realpath($v6a2a431fe8b621037ea949531c28551d);$v6a2a431fe8b621037ea949531c28551d = getPrintableTpl($v6a2a431fe8b621037ea949531c28551d);if(!file_exists($v6a2a431fe8b621037ea949531c28551d)) {$v358c83fd5c37d4fa17aef77a9b848c15 = substr($v6a2a431fe8b621037ea949531c28551d, 0, strlen($v6a2a431fe8b621037ea949531c28551d) - 3) . cmsController::getInstance()->getCurrentLang()->getPrefix() . ".tpl";$v358c83fd5c37d4fa17aef77a9b848c15 = getPrintableTpl($v358c83fd5c37d4fa17aef77a9b848c15);if(file_exists($v358c83fd5c37d4fa17aef77a9b848c15)) {$v6a2a431fe8b621037ea949531c28551d = $v358c83fd5c37d4fa17aef77a9b848c15;}else {throw new publicException("Невозможно подключить шаблон {$v6a2a431fe8b621037ea949531c28551d}");return false;}}if(!array_key_exists($v6a2a431fe8b621037ea949531c28551d, def_module::$templates_cache)) {include $v6a2a431fe8b621037ea949531c28551d;def_module::$templates_cache[$v6a2a431fe8b621037ea949531c28551d] = $FORMS;}$vfed36e93a0509e20f2dc96cbbd85b678 = def_module::$templates_cache[$v6a2a431fe8b621037ea949531c28551d];$va30213b9143057f685bf94753e4265e8 = Array();for($v865c0c0b4ab0e063e5caa3387c1a8741 = 1;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v4a8a08f09d37b73795649038408b5f33;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v4f2afc9c4099ee1f39c9f551123e54bd = "";if(array_key_exists($args[$v865c0c0b4ab0e063e5caa3387c1a8741], $vfed36e93a0509e20f2dc96cbbd85b678)) {$v4f2afc9c4099ee1f39c9f551123e54bd = $vfed36e93a0509e20f2dc96cbbd85b678[$args[$v865c0c0b4ab0e063e5caa3387c1a8741]];}$va30213b9143057f685bf94753e4265e8[] = $v4f2afc9c4099ee1f39c9f551123e54bd;}return $va30213b9143057f685bf94753e4265e8;}public static function parseTemplate($v66f6181bcb4cff4cd38fbc804a036db6, $v47c80780ab608cc046f2a6e6f071feb6, $vfb7ab9257f439d2f8d60f02aff686db4 = false, $vf82387093c2d547d55f1c4ad7b8b4e16 = false) {$v8ce1a19060c7f3777242272261830ee1 = xslTemplater::getInstance();if($v8ce1a19060c7f3777242272261830ee1->getIsInited()) {return $v8ce1a19060c7f3777242272261830ee1->parseTemplate($v47c80780ab608cc046f2a6e6f071feb6);}if(is_array($v47c80780ab608cc046f2a6e6f071feb6)) {foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v6f8f57715090da2632453988d9a1501b => $v9e3669d19b675bd57058fd4664205d2a) {$v6f8f57715090da2632453988d9a1501b = self::getRealKey($v6f8f57715090da2632453988d9a1501b);if(is_array($v9e3669d19b675bd57058fd4664205d2a)) {$v9b207167e5381c47682c6b4f58a623fb = "";$v9e3669d19b675bd57058fd4664205d2a = array_values($v9e3669d19b675bd57058fd4664205d2a);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v9e3669d19b675bd57058fd4664205d2a);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v341be97d9aff90c9978347f66f945b77 = $v9e3669d19b675bd57058fd4664205d2a[$v865c0c0b4ab0e063e5caa3387c1a8741];$va19373d8cf7848b7a7a64585a21e588f = ($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) ? "first" : "";$v3fc83eb3fa31aa67931bfa8bc28d226b = ($v865c0c0b4ab0e063e5caa3387c1a8741 == $v7dabf5c198b0bab2eaa42bb03a113e55-1) ? "last" : "";$vde52846838c8fd48e802d9bbd5c16dfb = (($v865c0c0b4ab0e063e5caa3387c1a8741+1) % 2 == 0) ? "odd" : "";$v9fecaef75a60788aa9752fdba935e8f7 = $vde52846838c8fd48e802d9bbd5c16dfb ? "" : "even";$vdfe9983b41f9b6b0cc15c0910cb78687 = ($v865c0c0b4ab0e063e5caa3387c1a8741 + 1);$v1980437b4ed46cecf41a68f16dd59311 = $v3fc83eb3fa31aa67931bfa8bc28d226b ? '' : ', ';$vd98a07f84921b24ee30f86fd8cd85c3c = Array(       '%list-class-first%', '%list-class-last%', '%list-class-odd%', '%list-class-even%', '%list-position%',       '%list-comma%'      );$v01b6e20344b68835c5ed1ddedf20d531 = Array(       $va19373d8cf7848b7a7a64585a21e588f, $v3fc83eb3fa31aa67931bfa8bc28d226b, $vde52846838c8fd48e802d9bbd5c16dfb, $v9fecaef75a60788aa9752fdba935e8f7, $vdfe9983b41f9b6b0cc15c0910cb78687, $v1980437b4ed46cecf41a68f16dd59311      );$v9b207167e5381c47682c6b4f58a623fb .= str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $v341be97d9aff90c9978347f66f945b77);}$v9e3669d19b675bd57058fd4664205d2a = $v9b207167e5381c47682c6b4f58a623fb;}if(!is_object($v9e3669d19b675bd57058fd4664205d2a)) {$v66f6181bcb4cff4cd38fbc804a036db6 = str_replace("%" . $v6f8f57715090da2632453988d9a1501b . "%", $v9e3669d19b675bd57058fd4664205d2a, $v66f6181bcb4cff4cd38fbc804a036db6);}}}if($vfb7ab9257f439d2f8d60f02aff686db4 !== false || $vf82387093c2d547d55f1c4ad7b8b4e16 != false) {if($vfb7ab9257f439d2f8d60f02aff686db4) {$v66f6181bcb4cff4cd38fbc804a036db6 = str_replace("%block-element-id%", $vfb7ab9257f439d2f8d60f02aff686db4, $v66f6181bcb4cff4cd38fbc804a036db6);}if($vf82387093c2d547d55f1c4ad7b8b4e16) {$v66f6181bcb4cff4cd38fbc804a036db6 = str_replace("%block-object-id%", $vf82387093c2d547d55f1c4ad7b8b4e16, $v66f6181bcb4cff4cd38fbc804a036db6);}$v66f6181bcb4cff4cd38fbc804a036db6 = system_parse_short_calls($v66f6181bcb4cff4cd38fbc804a036db6, $vfb7ab9257f439d2f8d60f02aff686db4, $vf82387093c2d547d55f1c4ad7b8b4e16);$v640eac53ad75db5c49a9ec86390d8530 = templater::getInstance();if(!is_object($v640eac53ad75db5c49a9ec86390d8530)) {return $v66f6181bcb4cff4cd38fbc804a036db6;}$v66f6181bcb4cff4cd38fbc804a036db6 = $v640eac53ad75db5c49a9ec86390d8530->parseInput($v66f6181bcb4cff4cd38fbc804a036db6);$v66f6181bcb4cff4cd38fbc804a036db6 = system_parse_short_calls($v66f6181bcb4cff4cd38fbc804a036db6, $vfb7ab9257f439d2f8d60f02aff686db4, $vf82387093c2d547d55f1c4ad7b8b4e16);}return $v66f6181bcb4cff4cd38fbc804a036db6;}static public function getRealKey($v3c6e0b8a9c15224a8228b9a98ca1531d, $v4d9c2073afa3c2abb817dceb22c34de6 = false) {if($v5e0bdcbddccca4d66d74ba8c1cee1a68 = strpos($v3c6e0b8a9c15224a8228b9a98ca1531d, ":")) {++$v5e0bdcbddccca4d66d74ba8c1cee1a68;}else {$v5e0bdcbddccca4d66d74ba8c1cee1a68 = 0;}return $v4d9c2073afa3c2abb817dceb22c34de6 ? substr($v3c6e0b8a9c15224a8228b9a98ca1531d, 0, $v5e0bdcbddccca4d66d74ba8c1cee1a68 - 1) : substr($v3c6e0b8a9c15224a8228b9a98ca1531d, $v5e0bdcbddccca4d66d74ba8c1cee1a68);}public function formatMessage($v78e731027d8fd50ed642340b7c9a63b3, $v53ba30e62ebd73a4c463bf0f89122428 = 0) {static $v07bc986ba2309c96bfee8ab44fcd7a7b;static $vbcffce8c435eab26326994a1a20de892;try {list($va63684ca0122549cf2f21d0b2e40871e, $v909d9619443130093af575e7f221a15d) = $this->loadTemplates(SYS_TPLS_PATH . '/quote/default.tpl', 'quote_begin', 'quote_end');}catch (publicException $ve1671797c52e15f763380b45e841ec32) {$va63684ca0122549cf2f21d0b2e40871e = "<div class='quote'>";$v909d9619443130093af575e7f221a15d = "</div>";}if(xslTemplater::getInstance()->getIsInited()) {$va63684ca0122549cf2f21d0b2e40871e = "<div class='quote'>";$v909d9619443130093af575e7f221a15d = "</div>";}if (!(is_array($v07bc986ba2309c96bfee8ab44fcd7a7b) && is_array($vbcffce8c435eab26326994a1a20de892) && count($v07bc986ba2309c96bfee8ab44fcd7a7b) === count($vbcffce8c435eab26326994a1a20de892))) {try {list($v07bc986ba2309c96bfee8ab44fcd7a7b, $vbcffce8c435eab26326994a1a20de892) = $this->loadTemplates(SYS_TPLS_PATH . '/bb/default.tpl', 'bb_from', 'bb_to');if (!(is_array($v07bc986ba2309c96bfee8ab44fcd7a7b) && is_array($vbcffce8c435eab26326994a1a20de892) && count($v07bc986ba2309c96bfee8ab44fcd7a7b) === count($vbcffce8c435eab26326994a1a20de892) && count($vbcffce8c435eab26326994a1a20de892))) {$v07bc986ba2309c96bfee8ab44fcd7a7b = Array("[b]", "[i]", "[/b]", "[/i]",      "[quote]", "[/quote]", "[u]", "[/u]", "\r\n"     );$vbcffce8c435eab26326994a1a20de892   = Array("<strong>", "<em>", "</strong>", "</em>",      $va63684ca0122549cf2f21d0b2e40871e, $v909d9619443130093af575e7f221a15d, "<u>", "</u>", "<br />"     );}}catch (publicException $ve1671797c52e15f763380b45e841ec32) {$v07bc986ba2309c96bfee8ab44fcd7a7b = Array("[b]", "[i]", "[/b]", "[/i]",     "[quote]", "[/quote]", "[u]", "[/u]", "\r\n"    );$vbcffce8c435eab26326994a1a20de892   = Array("<strong>", "<em>", "</strong>", "</em>",     $va63684ca0122549cf2f21d0b2e40871e, $v909d9619443130093af575e7f221a15d, "<u>", "</u>", "<br />"    );}}$v6d65d06366b15d5773bba936bb9e7b0c = substr_count(wa_strtolower($v78e731027d8fd50ed642340b7c9a63b3), "[quote]");$v8671c37a8592584b608e129b2b08a126 = substr_count(wa_strtolower($v78e731027d8fd50ed642340b7c9a63b3), "[/quote]");if($v6d65d06366b15d5773bba936bb9e7b0c > $v8671c37a8592584b608e129b2b08a126) {$v78e731027d8fd50ed642340b7c9a63b3 .= str_repeat("[/quote]", $v6d65d06366b15d5773bba936bb9e7b0c - $v8671c37a8592584b608e129b2b08a126);}if($v6d65d06366b15d5773bba936bb9e7b0c < $v8671c37a8592584b608e129b2b08a126) {$v78e731027d8fd50ed642340b7c9a63b3 = str_repeat("[quote]", $v8671c37a8592584b608e129b2b08a126 - $v6d65d06366b15d5773bba936bb9e7b0c) . $v78e731027d8fd50ed642340b7c9a63b3;}$v78e731027d8fd50ed642340b7c9a63b3 = preg_replace("`((http)+(s)?:(//)|(www\.))((\w|\.|\-|_)+)(/)?([/|#|?|&|=|\w|\.|\-|_]+)?`i", "[url]http\\3://\\5\\6\\8\\9[/url]", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_ireplace($v07bc986ba2309c96bfee8ab44fcd7a7b, $vbcffce8c435eab26326994a1a20de892, $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_ireplace("</h4>", "</h4><p>", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_ireplace("</div>", "</p></div>", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace(".[/url]", "[/url].", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace(",[/url]", "[/url],", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace(Array("[url][url]", "[/url][/url]"), Array("[url]", "[/url]"), $v78e731027d8fd50ed642340b7c9a63b3);if ($v53ba30e62ebd73a4c463bf0f89122428 === 0) {$v812c342988bda380c1d0c3f65c76ff21 = array();$v9200dff13536775b0403786f82503726 = preg_match_all("/[^\s^<^>]{70,}/u", $v78e731027d8fd50ed642340b7c9a63b3, $v812c342988bda380c1d0c3f65c76ff21);if ($v9200dff13536775b0403786f82503726 && isset($v812c342988bda380c1d0c3f65c76ff21[0]) && is_array($v812c342988bda380c1d0c3f65c76ff21[0])) {foreach ($v812c342988bda380c1d0c3f65c76ff21[0] as $v341be97d9aff90c9978347f66f945b77) {$v03c7c0ace395d80182db07ae2c30f034 = "";if (strpos($v341be97d9aff90c9978347f66f945b77, "[url]") === false) {for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741<wa_strlen($v341be97d9aff90c9978347f66f945b77);$v865c0c0b4ab0e063e5caa3387c1a8741++) $v03c7c0ace395d80182db07ae2c30f034 .= wa_substr($v341be97d9aff90c9978347f66f945b77, $v865c0c0b4ab0e063e5caa3387c1a8741, 1).(($v865c0c0b4ab0e063e5caa3387c1a8741 % 30) === 0 ? " " : "");$v78e731027d8fd50ed642340b7c9a63b3 = str_replace($v341be97d9aff90c9978347f66f945b77, $v03c7c0ace395d80182db07ae2c30f034, $v78e731027d8fd50ed642340b7c9a63b3);}}}}elseif ($v53ba30e62ebd73a4c463bf0f89122428 === 1) {}if (preg_match_all("/\[url\]([^А-я^\r^\n^\t]*)\[\/url\]/U", $v78e731027d8fd50ed642340b7c9a63b3, $v9c28d32df234037773be184dbdafc274, PREG_SET_ORDER)) {for ($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<count($v9c28d32df234037773be184dbdafc274);$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vb430fbd4502a780e07e51efa94a18c4a = $v9c28d32df234037773be184dbdafc274[$v865c0c0b4ab0e063e5caa3387c1a8741][1];$v6e024da3f968bfc66443732ff044e5c5 = strlen($vb430fbd4502a780e07e51efa94a18c4a);if ($v6e024da3f968bfc66443732ff044e5c5>40) {$v147d56ae8d4429cac2dedef6bbf357b2 = ceil(($v6e024da3f968bfc66443732ff044e5c5-40)/2);$vfdddf6054c314b389468409e95f9a490 = ceil($v6e024da3f968bfc66443732ff044e5c5/2);$vb430fbd4502a780e07e51efa94a18c4a = substr_replace($vb430fbd4502a780e07e51efa94a18c4a, "...", $vfdddf6054c314b389468409e95f9a490-$v147d56ae8d4429cac2dedef6bbf357b2, $v147d56ae8d4429cac2dedef6bbf357b2*2);}$v78e731027d8fd50ed642340b7c9a63b3 = str_replace($v9c28d32df234037773be184dbdafc274[$v865c0c0b4ab0e063e5caa3387c1a8741][0], "<a href='".$v9c28d32df234037773be184dbdafc274[$v865c0c0b4ab0e063e5caa3387c1a8741][1]."' rel='nofollow' target='_blank' title='Ссылка откроется в новом окне'>".$vb430fbd4502a780e07e51efa94a18c4a."</a>", $v78e731027d8fd50ed642340b7c9a63b3);}}$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("&", "&amp;", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_ireplace("[QUOTE][QUOTE]", "", $v78e731027d8fd50ed642340b7c9a63b3);if(preg_match_all("/\[smile:([^\]]+)\]/im", $v78e731027d8fd50ed642340b7c9a63b3, $vc68271a63ddbc431c307beb7d2918275)) {foreach($vc68271a63ddbc431c307beb7d2918275[1] as $v61f8faa3b914efa0084edfaf8444fb7e) {$v03c7c0ace395d80182db07ae2c30f034 = $v61f8faa3b914efa0084edfaf8444fb7e;$v61f8faa3b914efa0084edfaf8444fb7e = "images/forum/smiles/" . $v61f8faa3b914efa0084edfaf8444fb7e . ".gif";if(file_exists($v61f8faa3b914efa0084edfaf8444fb7e)) {$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("[smile:" . $v03c7c0ace395d80182db07ae2c30f034 . "]", "<img src='/{$v61f8faa3b914efa0084edfaf8444fb7e}' />", $v78e731027d8fd50ed642340b7c9a63b3);}}}$v78e731027d8fd50ed642340b7c9a63b3 = preg_replace("/<p>(<br \/>)+/", "<p>", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = nl2br($v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("<<br />br /><br />", "", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("<p<br />>", "<p>", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("&amp;quot;", "\"", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("&amp;quote;", "\"", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = html_entity_decode($v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = str_replace("%", "&#37;", $v78e731027d8fd50ed642340b7c9a63b3);$v78e731027d8fd50ed642340b7c9a63b3 = templater::getInstance()->parseInput($v78e731027d8fd50ed642340b7c9a63b3);return $v78e731027d8fd50ed642340b7c9a63b3;}public function autoDetectAttributes() {if($v7057e8409c7c531a1a6e9ac3df4ed549 = cmsController::getInstance()->getCurrentElementId()) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if(!$v8e2dcfd7e7e24b1ca76c1193f645902b) return false;if($v346b81a32e7007eccadf60252bb599f0 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getValue("h1")) {$this->setHeader($v346b81a32e7007eccadf60252bb599f0);}else {$this->setHeader($v8e2dcfd7e7e24b1ca76c1193f645902b->getName());}if($vd5d3db1765287eef77d7927cc956f50a = $v8e2dcfd7e7e24b1ca76c1193f645902b->getValue("title")) {$this->setTitle($vd5d3db1765287eef77d7927cc956f50a);}}}public function autoDetectOrders(umiSelection $v8be74552df93e31bbdd6b36ed74bdb6a, $v87306dd4235ed712ebc07fe169b76f83) {if(array_key_exists("order_filter", $_REQUEST)) {$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderFilter();$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$vdb64cd49d22f58e2d5fc26108f11b181 = getRequest('order_filter');foreach($vdb64cd49d22f58e2d5fc26108f11b181 as $v73f329f154a663bfda020aadcdd0b775 => $vef72c37be9d1b9e6e5bbd6ef09448abe) {if($vef72c37be9d1b9e6e5bbd6ef09448abe === "asc") $vef72c37be9d1b9e6e5bbd6ef09448abe = true;if($vef72c37be9d1b9e6e5bbd6ef09448abe === "desc") $vef72c37be9d1b9e6e5bbd6ef09448abe = false;if($v73f329f154a663bfda020aadcdd0b775 == "name") {$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByName((bool) $vef72c37be9d1b9e6e5bbd6ef09448abe);continue;}if($v73f329f154a663bfda020aadcdd0b775 == "ord") {$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByOrd((bool) $vef72c37be9d1b9e6e5bbd6ef09448abe);continue;}if($v599dcce2998a6b40b1e38e8c6006cb0a) {if($v3aabf39f2d943fa886d86dcbbee4d910 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId($v73f329f154a663bfda020aadcdd0b775)) {$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByProperty($v3aabf39f2d943fa886d86dcbbee4d910, (bool) $vef72c37be9d1b9e6e5bbd6ef09448abe);}else {continue;}}}}else {return false;}}public function autoDetectFilters(umiSelection $v8be74552df93e31bbdd6b36ed74bdb6a, $v87306dd4235ed712ebc07fe169b76f83) {if(is_null(getRequest('search-all-text')) == false) {$v23182694bce9f52758fbab174a0b3607 = getRequest('search-all-text');if(is_array($v23182694bce9f52758fbab174a0b3607)) {foreach($v23182694bce9f52758fbab174a0b3607 as $v597a51f04d341eba4ca965899acc10b3) {if($v597a51f04d341eba4ca965899acc10b3) {$v8be74552df93e31bbdd6b36ed74bdb6a->searchText($v597a51f04d341eba4ca965899acc10b3);}}}}if(array_key_exists("fields_filter", $_REQUEST)) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$ve98bb545c87bd6f12f14ce797342ef54 = $v8b1dc169bf460ee884fceef66c6607d6->getModule("data");if(!$ve98bb545c87bd6f12f14ce797342ef54) {throw publicException("Need data module installed to use dynamic filters");}$v8be74552df93e31bbdd6b36ed74bdb6a->setPropertyFilter();$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$vdb64cd49d22f58e2d5fc26108f11b181 = getRequest('fields_filter');if(!is_array($vdb64cd49d22f58e2d5fc26108f11b181)) {return false;}foreach($vdb64cd49d22f58e2d5fc26108f11b181 as $v73f329f154a663bfda020aadcdd0b775 => $v2063c1608d6e0baf80249c42e2be5804) {if($v73f329f154a663bfda020aadcdd0b775 == "name") {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterName($v8be74552df93e31bbdd6b36ed74bdb6a, $v2063c1608d6e0baf80249c42e2be5804);continue;}if($v3aabf39f2d943fa886d86dcbbee4d910 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId($v73f329f154a663bfda020aadcdd0b775)) {$this->isSelectionFiltered = true;$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v519504d7d4beb745dac24ccfb6c1d7c9 = umiFieldTypesCollection::getInstance()->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v17f71d965fe9589ddbd11caf7182243e = $v519504d7d4beb745dac24ccfb6c1d7c9->getDataType();switch($v17f71d965fe9589ddbd11caf7182243e) {case "text": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterText($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "wysiwyg": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterText($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "string": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterText($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "tags": {$vfa816edb83e95bf0c8da580bdfd491ef = array_extract_values($v2063c1608d6e0baf80249c42e2be5804);if(empty($vfa816edb83e95bf0c8da580bdfd491ef)) {break;}}case "boolean":      case "int": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterInt($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "relation": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterRelation($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "float": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterFloat($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "price": {$vfcaea7edd270964cc145ea48e4367d43 = $v8b1dc169bf460ee884fceef66c6607d6->getModule('emarket');if($vfcaea7edd270964cc145ea48e4367d43 instanceof def_module) {$ve7f82a9e3265341d89499a8a0efaa995 = $vfcaea7edd270964cc145ea48e4367d43->getDefaultCurrency();$v5a045cb6d112451dfef1f1d4c97978aa = $vfcaea7edd270964cc145ea48e4367d43->getCurrentCurrency();$vafae32efe0f84fece3f96b377b768b33 = $vfcaea7edd270964cc145ea48e4367d43->formatCurrencyPrice($v2063c1608d6e0baf80249c42e2be5804, $ve7f82a9e3265341d89499a8a0efaa995, $v5a045cb6d112451dfef1f1d4c97978aa);foreach($v2063c1608d6e0baf80249c42e2be5804 as $v6a992d5529f459a44fee58c733255e86 => $vcab8111fd0b710a336c898e539090e34) {$v2063c1608d6e0baf80249c42e2be5804[$v6a992d5529f459a44fee58c733255e86] = getArrayKey($vafae32efe0f84fece3f96b377b768b33, $v6a992d5529f459a44fee58c733255e86);}}$ve98bb545c87bd6f12f14ce797342ef54->applyFilterPrice($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "file":      case "img_file":      case "swf_file":      case "boolean": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterInt($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}case "date": {$ve98bb545c87bd6f12f14ce797342ef54->applyFilterDate($v8be74552df93e31bbdd6b36ed74bdb6a, $v06e3d36fa30cea095545139854ad1fb9, $v2063c1608d6e0baf80249c42e2be5804);break;}default: {break;}}}else {continue;}}}else {return false;}}public function analyzeRequiredPath($vd8f372e47e93e598b92f6e78cb0c9c9f, $v3959c77e55e5cb592d53424d5a5f33ac = true) {if(is_numeric($vd8f372e47e93e598b92f6e78cb0c9c9f)) {return (umiHierarchy::getInstance()->isExists((int) $vd8f372e47e93e598b92f6e78cb0c9c9f)) ? (int) $vd8f372e47e93e598b92f6e78cb0c9c9f : false;}else {$vd8f372e47e93e598b92f6e78cb0c9c9f = trim($vd8f372e47e93e598b92f6e78cb0c9c9f);if($vd8f372e47e93e598b92f6e78cb0c9c9f) {if(strpos($vd8f372e47e93e598b92f6e78cb0c9c9f, " ") === false) {return umiHierarchy::getInstance()->getIdByPath($vd8f372e47e93e598b92f6e78cb0c9c9f);}else {$v627c8d7be6cef603f74903d960f48057 = split(" ", $vd8f372e47e93e598b92f6e78cb0c9c9f);$vbf516925bb37a8544c8ee19a24e15c05 = Array();foreach($v627c8d7be6cef603f74903d960f48057 as $vc3dafca664a9ef955b76fe1271859e3d) {$vb80bb7740288fda1f201890375a60c8f = $this->analyzeRequiredPath($vc3dafca664a9ef955b76fe1271859e3d, false);if($vb80bb7740288fda1f201890375a60c8f === false) {continue;}else {$vbf516925bb37a8544c8ee19a24e15c05[] = $vb80bb7740288fda1f201890375a60c8f;}}if(sizeof($vbf516925bb37a8544c8ee19a24e15c05) > 0) {return $vbf516925bb37a8544c8ee19a24e15c05;}else {return false;}}}else {if($v3959c77e55e5cb592d53424d5a5f33ac) {return cmsController::getInstance()->getCurrentElementId();}else {return false;}}}}public function checkPostIsEmpty($va190997ca73ac4c36ddff1a28647cec7 = true) {$v9f735923585d489d8baaf23faba610bc = !is_array($_POST) || (is_array($_POST) && !count($_POST));if ($v9f735923585d489d8baaf23faba610bc && $va190997ca73ac4c36ddff1a28647cec7) {header("Location: ".$_REQUEST['pre_lang']."/admin/");exit();}else {return $v9f735923585d489d8baaf23faba610bc;}}public static function setEventPoint(umiEventPoint $v70e8822b2e035fa3777d666207aeafa8) {umiEventsController::getInstance()->callEvent($v70e8822b2e035fa3777d666207aeafa8);}public function breakMe() {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() == "admin") {return false;}if(xslTemplater::getInstance()->getIsInited()) {if($v8b1dc169bf460ee884fceef66c6607d6->isContentMode) {return true;}}return false;}public function errorRegisterFailPage($vc4f822e3b833533bd91a9ccae200a611) {cmsController::getInstance()->errorUrl = $vc4f822e3b833533bd91a9ccae200a611;}public function errorNewMessage($vd83a5a8080de341e6551f42e0feece88, $v807faf30a1af1d06cf395929b750354c = true, $v0279985cdca9ad2836b5dc949af215c8 = false, $v936118f3c9a8cbff715043c515139eb7 = false) {$v510ff634fce407eea1763854519fd3ce = 'errors_' . cmsController::getInstance()->getRequestId();if(!isset($_SESSION[$v510ff634fce407eea1763854519fd3ce])) {$_SESSION[$v510ff634fce407eea1763854519fd3ce] = Array();}$vd83a5a8080de341e6551f42e0feece88 = templater::getInstance()->putLangs($vd83a5a8080de341e6551f42e0feece88);$_SESSION[$v510ff634fce407eea1763854519fd3ce][] = Array("message" => $vd83a5a8080de341e6551f42e0feece88,      "code" => $v0279985cdca9ad2836b5dc949af215c8,      "strcode" => $v936118f3c9a8cbff715043c515139eb7);if($v807faf30a1af1d06cf395929b750354c) {$this->errorPanic();}}public function errorPanic() {if(is_null(getRequest('_err')) == false) {return false;}if(self::$noRedirectOnPanic) {$v510ff634fce407eea1763854519fd3ce = 'errors_' . cmsController::getInstance()->getRequestId();if(!isset($_SESSION[$v510ff634fce407eea1763854519fd3ce])) {$_SESSION[$v510ff634fce407eea1763854519fd3ce] = Array();}$vd83a5a8080de341e6551f42e0feece88 = "";foreach($_SESSION[$v510ff634fce407eea1763854519fd3ce] as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v6b3e9cdfd9fd6b6f313d7dd4526c9ceb) {unset($_SESSION[$v510ff634fce407eea1763854519fd3ce][$v865c0c0b4ab0e063e5caa3387c1a8741]);$vd83a5a8080de341e6551f42e0feece88 .= $v6b3e9cdfd9fd6b6f313d7dd4526c9ceb['message'];}throw new errorPanicException($vd83a5a8080de341e6551f42e0feece88);}if($vc4f822e3b833533bd91a9ccae200a611 = cmsController::getInstance()->errorUrl) {$vc4f822e3b833533bd91a9ccae200a611 = preg_replace("/_err=\d+/is", '', $vc4f822e3b833533bd91a9ccae200a611);while (strpos($vc4f822e3b833533bd91a9ccae200a611, '&&') !== false || strpos($vc4f822e3b833533bd91a9ccae200a611, '??') !== false || strpos($vc4f822e3b833533bd91a9ccae200a611, '?&') !== false) {$vc4f822e3b833533bd91a9ccae200a611 = str_replace('&&', '&', $vc4f822e3b833533bd91a9ccae200a611);$vc4f822e3b833533bd91a9ccae200a611 = str_replace('??', '?', $vc4f822e3b833533bd91a9ccae200a611);$vc4f822e3b833533bd91a9ccae200a611 = str_replace('?&', '?', $vc4f822e3b833533bd91a9ccae200a611);}if (strlen($vc4f822e3b833533bd91a9ccae200a611) && (substr($vc4f822e3b833533bd91a9ccae200a611, -1) === '?' || substr($vc4f822e3b833533bd91a9ccae200a611, -1) === '&')) $vc4f822e3b833533bd91a9ccae200a611 = substr($vc4f822e3b833533bd91a9ccae200a611, 0, strlen($vc4f822e3b833533bd91a9ccae200a611)-1);$v10eaf019ae9a34467652d52158eae042 = (strpos($vc4f822e3b833533bd91a9ccae200a611, '?') === false ? '?' : '&');$vc4f822e3b833533bd91a9ccae200a611 .= $v10eaf019ae9a34467652d52158eae042 . "_err=" . cmsController::getInstance()->getRequestId();$this->redirect($vc4f822e3b833533bd91a9ccae200a611, false);}else {throw new privateException("Can't find error redirect string");}}public function importDataTypes() {$v4898220f0b67da1137954c79f361f57f = dirname(__FILE__)."/".get_class($this)."/types.xml";$ve2592cf92e2fae115a396849ff39f8ad = new umiModuleDataImporter();$v6da648158add0c53655351ff6ac29a12 = $ve2592cf92e2fae115a396849ff39f8ad->loadXmlFile($v4898220f0b67da1137954c79f361f57f);if ($v6da648158add0c53655351ff6ac29a12) {$ve2592cf92e2fae115a396849ff39f8ad->import();return "data types imported ok";}else {return "can not import data from file '".$v4898220f0b67da1137954c79f361f57f."'";}}public function exportDataTypes() {$v4898220f0b67da1137954c79f361f57f = dirname(__FILE__)."/".get_class($this)."/types.xml";$ve94eaa63103b9ede00e3c5ff5a778f56 = new umiModuleDataExporter(get_class($this));$v00d8ecaf9351b32f104d83c400f6d181 = $ve94eaa63103b9ede00e3c5ff5a778f56->getXml();$ve3230b4db6a8e43553feaab2def2ccb3 = file_put_contents($v4898220f0b67da1137954c79f361f57f, $v00d8ecaf9351b32f104d83c400f6d181);if ($ve3230b4db6a8e43553feaab2def2ccb3 === false) {return "can not write to file '".$v4898220f0b67da1137954c79f361f57f."'";}else {@chmod($v4898220f0b67da1137954c79f361f57f, 0777);return $ve3230b4db6a8e43553feaab2def2ccb3." bytes exported to the file '".$v4898220f0b67da1137954c79f361f57f."' successfully";}}public function guessDomain() {$v9b207167e5381c47682c6b4f58a623fb = false;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;($veca07335a33c5aeb5e1bc7c98b4b9d80 = getRequest("param" . $v865c0c0b4ab0e063e5caa3387c1a8741)) || $v865c0c0b4ab0e063e5caa3387c1a8741 <= 3;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_numeric($veca07335a33c5aeb5e1bc7c98b4b9d80)) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($veca07335a33c5aeb5e1bc7c98b4b9d80);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();if($v662cbf1253ac7d8750ed9190c52163e5) $v9b207167e5381c47682c6b4f58a623fb = $v662cbf1253ac7d8750ed9190c52163e5;}else {continue;}}else {continue;}}$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDomain($v9b207167e5381c47682c6b4f58a623fb);if($vad5f82e879a9c5d6b5b442eb37e50551 instanceof iDomain) {return $vad5f82e879a9c5d6b5b442eb37e50551->getHost();}else {return false;}}public function isMethodExists($_sMethodName) {if(class_exists('ReflectionClass')) {$va29fd518fa2a9b10f0cdaa6311ae9112 = new ReflectionClass($this);if($va29fd518fa2a9b10f0cdaa6311ae9112->hasMethod($_sMethodName)) {return true;}foreach($this->__classes as $v26b2a720f7b8c9bd8d3999c52da409d0) {$va29fd518fa2a9b10f0cdaa6311ae9112 = new ReflectionClass($v26b2a720f7b8c9bd8d3999c52da409d0);if($va29fd518fa2a9b10f0cdaa6311ae9112->hasMethod($_sMethodName)) {return true;}}return false;}else {$vd3a52c495071e7fbfb7dbdbfcd302b47 = get_class_methods($this);if(in_array($_sMethodName, $vd3a52c495071e7fbfb7dbdbfcd302b47)) {return true;}foreach($this->__classes as $v26b2a720f7b8c9bd8d3999c52da409d0) {$vd3a52c495071e7fbfb7dbdbfcd302b47 = get_class_methods($this);if(in_array($_sMethodName, $vd3a52c495071e7fbfb7dbdbfcd302b47)) {return true;}}return false;}}public function flushAsXML($vddaa6e8c8c412299272e183087b8f7b6) {static $v4a8a08f09d37b73795649038408b5f33 = 0;if($v4a8a08f09d37b73795649038408b5f33++ == 0) {$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();$v7f2db423a49b305459147332fb01cf87->contentType('text/xml');$v7f2db423a49b305459147332fb01cf87->charset('utf-8');$v7f2db423a49b305459147332fb01cf87->clear();$v7f2db423a49b305459147332fb01cf87->push(file_get_contents("udata://" . get_class($this) . "/" . $vddaa6e8c8c412299272e183087b8f7b6));$v7f2db423a49b305459147332fb01cf87->end();}}public function ifNotXmlMode() {if(getRequest('xmlMode') != 'force') {$this->setData(array('message' => 'This method returns result only by direct xml call'));return true;}}public function removeErrorParam($v572d4e421e5e6b9bc11d815e8a027112) {return preg_replace("/_err=\d+/", "", $v572d4e421e5e6b9bc11d815e8a027112);}public function getObjectEditLink() {return false;}public static function validateTemplate(&$v918d83c715c19dd93ff49f87e2fae0b3) {if(!$v918d83c715c19dd93ff49f87e2fae0b3 && $v918d83c715c19dd93ff49f87e2fae0b3 == 'default' && self::$defaultTemplateName != 'default') {$v918d83c715c19dd93ff49f87e2fae0b3 = self::$defaultTemplateName;}}public function templatesMode($v15d61712450a686a7f365adf4fef581f) {$vb0efae39904aed41aca525e2d7ccb04f = xslTemplater::getInstance()->getIsInited();if($v15d61712450a686a7f365adf4fef581f == 'xslt' && !$vb0efae39904aed41aca525e2d7ccb04f) {throw new xsltOnlyException;}if($v15d61712450a686a7f365adf4fef581f == 'tpl' && $vb0efae39904aed41aca525e2d7ccb04f) {throw new tplOnlyException;}}public function validateEntityByTypes($vf5e638cc78dd325906c1298a0c21fb6b, $vd14a8022b085f9ef19d479cbdd581127) {if($vf5e638cc78dd325906c1298a0c21fb6b instanceof iUmiHierarchyElement) {$v22884db148f0ffb0d830ba431102b0b5 = $vf5e638cc78dd325906c1298a0c21fb6b->getModule();$vea9f6aca279138c58f705c8d4cb4b8ce = $vf5e638cc78dd325906c1298a0c21fb6b->getMethod();}else if($vf5e638cc78dd325906c1298a0c21fb6b instanceof iUmiObject) {$v726e8e4809d4c1b28a6549d86436a124 = selector::get('object-type')->id($vf5e638cc78dd325906c1298a0c21fb6b->getTypeId());if($vacf567c9c3d6cf7c6e2cc0ce108e0631 = $v726e8e4809d4c1b28a6549d86436a124->getHierarchyTypeId()) {$v89b0b9deff65f8b9cd1f71bc74ce36ba = selector::get('hierarchy-type')->id($vacf567c9c3d6cf7c6e2cc0ce108e0631);$v22884db148f0ffb0d830ba431102b0b5 = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getModule();$vea9f6aca279138c58f705c8d4cb4b8ce = $v89b0b9deff65f8b9cd1f71bc74ce36ba->getMethod();}else {$v22884db148f0ffb0d830ba431102b0b5 = null;$vea9f6aca279138c58f705c8d4cb4b8ce = null;}}else {throw new publicException("Page or object must be given");}if(is_null($v22884db148f0ffb0d830ba431102b0b5) && is_null($vea9f6aca279138c58f705c8d4cb4b8ce) && is_null($vd14a8022b085f9ef19d479cbdd581127)) {return true;}if($v22884db148f0ffb0d830ba431102b0b5 == 'content' && $vea9f6aca279138c58f705c8d4cb4b8ce == '') {$vea9f6aca279138c58f705c8d4cb4b8ce = 'page';}if(getArrayKey($vd14a8022b085f9ef19d479cbdd581127, 'module')) {$vd14a8022b085f9ef19d479cbdd581127 = array($vd14a8022b085f9ef19d479cbdd581127);}foreach($vd14a8022b085f9ef19d479cbdd581127 as $v599dcce2998a6b40b1e38e8c6006cb0a) {$v34fcf34df8c8ba155d0eaed678a799d7 = getArrayKey($v599dcce2998a6b40b1e38e8c6006cb0a, 'module');$ve0ffc5711775f5b9d18ed1235050612f = getArrayKey($v599dcce2998a6b40b1e38e8c6006cb0a, 'method');if($v34fcf34df8c8ba155d0eaed678a799d7 == 'content' && $ve0ffc5711775f5b9d18ed1235050612f == '') {$ve0ffc5711775f5b9d18ed1235050612f = 'page';}if($v34fcf34df8c8ba155d0eaed678a799d7 == $v22884db148f0ffb0d830ba431102b0b5) {if(is_null($ve0ffc5711775f5b9d18ed1235050612f)) return;if($ve0ffc5711775f5b9d18ed1235050612f == $vea9f6aca279138c58f705c8d4cb4b8ce) return;}}throw new publicException(getLabel('error-common-type-mismatch'));}};?>