<?php
 abstract class __author_users {public function createAuthorUser($ve8701ad48ba05a91604e480dd60899a3) {$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();if($v5891da2d64975cae48d175d1e001f5da->isExists($ve8701ad48ba05a91604e480dd60899a3) === false) {return false;}$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('objects');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->name('users', 'author');$v8be74552df93e31bbdd6b36ed74bdb6a->where('user_id')->equals($ve8701ad48ba05a91604e480dd60899a3);$v8be74552df93e31bbdd6b36ed74bdb6a->limit(0, 1);if($v8be74552df93e31bbdd6b36ed74bdb6a->first) {return $v8be74552df93e31bbdd6b36ed74bdb6a->first->id;}else {$v7473dc8595a67e35fb56479108c76190 = $v5891da2d64975cae48d175d1e001f5da->getObject($ve8701ad48ba05a91604e480dd60899a3);$vc56f5648d4c0e137f9de3dfc7a54d55b = $v7473dc8595a67e35fb56479108c76190->getName();$v87306dd4235ed712ebc07fe169b76f83 = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType("users", "author");$v4f331e2fa932c4f9b933388ce1df675f = $v5891da2d64975cae48d175d1e001f5da->addObject($vc56f5648d4c0e137f9de3dfc7a54d55b, $v87306dd4235ed712ebc07fe169b76f83);$v02bd92faa38aaa6cc0ea75e59937a1ef = $v5891da2d64975cae48d175d1e001f5da->getObject($v4f331e2fa932c4f9b933388ce1df675f);$v02bd92faa38aaa6cc0ea75e59937a1ef->is_registrated = true;$v02bd92faa38aaa6cc0ea75e59937a1ef->user_id = $ve8701ad48ba05a91604e480dd60899a3;$v02bd92faa38aaa6cc0ea75e59937a1ef->commit();return $v4f331e2fa932c4f9b933388ce1df675f;}}public function createAuthorGuest($ve2e42a07550863f8b67f5eb252581f6d, $v0c83f57c786a0b4a39efab23731c7ebc, $v957b527bcfbad2e80f58d20683931435) {$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$ve2e42a07550863f8b67f5eb252581f6d = trim($ve2e42a07550863f8b67f5eb252581f6d);$v0c83f57c786a0b4a39efab23731c7ebc = trim($v0c83f57c786a0b4a39efab23731c7ebc);if(!$ve2e42a07550863f8b67f5eb252581f6d) $ve2e42a07550863f8b67f5eb252581f6d = getLabel('author-anonymous');if(!$v0c83f57c786a0b4a39efab23731c7ebc) $v0c83f57c786a0b4a39efab23731c7ebc = getServer('REMOTE_ADDR');$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('objects');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->name('users', 'author');$v8be74552df93e31bbdd6b36ed74bdb6a->where('email')->equals($v0c83f57c786a0b4a39efab23731c7ebc);$v8be74552df93e31bbdd6b36ed74bdb6a->where('nickname')->equals($ve2e42a07550863f8b67f5eb252581f6d);$v8be74552df93e31bbdd6b36ed74bdb6a->where('ip')->equals($v957b527bcfbad2e80f58d20683931435);$v8be74552df93e31bbdd6b36ed74bdb6a->limit(0, 1);if($v8be74552df93e31bbdd6b36ed74bdb6a->first) {return $v8be74552df93e31bbdd6b36ed74bdb6a->first->id;}else {$vc56f5648d4c0e137f9de3dfc7a54d55b = $ve2e42a07550863f8b67f5eb252581f6d . " ({$v0c83f57c786a0b4a39efab23731c7ebc})";$v87306dd4235ed712ebc07fe169b76f83 = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType("users", "author");$v4f331e2fa932c4f9b933388ce1df675f = $v5891da2d64975cae48d175d1e001f5da->addObject($vc56f5648d4c0e137f9de3dfc7a54d55b, $v87306dd4235ed712ebc07fe169b76f83);$v02bd92faa38aaa6cc0ea75e59937a1ef = $v5891da2d64975cae48d175d1e001f5da->getObject($v4f331e2fa932c4f9b933388ce1df675f);$v02bd92faa38aaa6cc0ea75e59937a1ef->name = $vc56f5648d4c0e137f9de3dfc7a54d55b;$v02bd92faa38aaa6cc0ea75e59937a1ef->is_registrated = false;$v02bd92faa38aaa6cc0ea75e59937a1ef->nickname = $ve2e42a07550863f8b67f5eb252581f6d;$v02bd92faa38aaa6cc0ea75e59937a1ef->email = $v0c83f57c786a0b4a39efab23731c7ebc;$v02bd92faa38aaa6cc0ea75e59937a1ef->ip = $v957b527bcfbad2e80f58d20683931435;$v02bd92faa38aaa6cc0ea75e59937a1ef->commit();return $v4f331e2fa932c4f9b933388ce1df675f;}}public function viewAuthor($v4f331e2fa932c4f9b933388ce1df675f = false, $v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if($v4f331e2fa932c4f9b933388ce1df675f === false) {throw new publicException(getLabel('error-object-does-not-exist', null, $v4f331e2fa932c4f9b933388ce1df675f));}if(!($v02bd92faa38aaa6cc0ea75e59937a1ef = umiObjectsCollection::getInstance()->getObject($v4f331e2fa932c4f9b933388ce1df675f))) {throw new publicException(getLabel('error-object-does-not-exist', null, $v4f331e2fa932c4f9b933388ce1df675f));}if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";list($v5869a339704c0330d43c45b78eabaccf, $v0039b8b36ea2ec94951257d4dee08a7f, $vf3ef7c2e1269d42577fabcd06bfff59c) = def_module::loadTemplates("./tpls/users/author/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "user_block", "guest_block", "sv_block");$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();if($v02bd92faa38aaa6cc0ea75e59937a1ef->getTypeId() == umiObjectTypesCollection::getInstance()->getBaseType('users', 'user')) {$v66f6181bcb4cff4cd38fbc804a036db6 = $v5869a339704c0330d43c45b78eabaccf;$vfca1bff8ad8b3a8585abfb0ad523ba42['user_id'] = $v4f331e2fa932c4f9b933388ce1df675f;$vee11cbb19052e40b07aac0ca060c23ee = $v02bd92faa38aaa6cc0ea75e59937a1ef;$vfca1bff8ad8b3a8585abfb0ad523ba42['nickname'] = $vee11cbb19052e40b07aac0ca060c23ee->getValue("login");$vfca1bff8ad8b3a8585abfb0ad523ba42['email']    = $vee11cbb19052e40b07aac0ca060c23ee->getValue("e-mail");$vfca1bff8ad8b3a8585abfb0ad523ba42['fname']    = $vee11cbb19052e40b07aac0ca060c23ee->getValue("fname");$vfca1bff8ad8b3a8585abfb0ad523ba42['lname']    = $vee11cbb19052e40b07aac0ca060c23ee->getValue("lname");$vfca1bff8ad8b3a8585abfb0ad523ba42['subnodes:groups'] = $v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getValue("groups");if(in_array(SV_GROUP_ID, $v1471e4e05a4db95d353cc867fe317314)) {if($vf3ef7c2e1269d42577fabcd06bfff59c) {$v66f6181bcb4cff4cd38fbc804a036db6 = $vf3ef7c2e1269d42577fabcd06bfff59c;}}if($v5571898aeb5505ee9a9111ddd83598f7 = cmsController::getInstance()->getModule("users")) {$v66f6181bcb4cff4cd38fbc804a036db6 = $v5571898aeb5505ee9a9111ddd83598f7->get_user_info($v4f331e2fa932c4f9b933388ce1df675f, $v66f6181bcb4cff4cd38fbc804a036db6);}}else if($v02bd92faa38aaa6cc0ea75e59937a1ef->getValue("is_registrated")) {$v66f6181bcb4cff4cd38fbc804a036db6 = $v5869a339704c0330d43c45b78eabaccf;$vfca1bff8ad8b3a8585abfb0ad523ba42['user_id'] = $ve8701ad48ba05a91604e480dd60899a3 = $v02bd92faa38aaa6cc0ea75e59937a1ef->getValue("user_id");$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3);if (!$vee11cbb19052e40b07aac0ca060c23ee instanceof umiObject) {$vfca1bff8ad8b3a8585abfb0ad523ba42['user_id'] = $ve8701ad48ba05a91604e480dd60899a3 = intval(regedit::getInstance()->getVal("//modules/users/guest_id"));$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3);}if (!$vee11cbb19052e40b07aac0ca060c23ee instanceof umiObject) return false;$vfca1bff8ad8b3a8585abfb0ad523ba42['nickname'] = $vee11cbb19052e40b07aac0ca060c23ee->getValue("login");$vfca1bff8ad8b3a8585abfb0ad523ba42['email'] = $vee11cbb19052e40b07aac0ca060c23ee->getValue("e-mail");$vfca1bff8ad8b3a8585abfb0ad523ba42['fname'] = $vee11cbb19052e40b07aac0ca060c23ee->getValue("fname");$vfca1bff8ad8b3a8585abfb0ad523ba42['lname'] = $vee11cbb19052e40b07aac0ca060c23ee->getValue("lname");$vfca1bff8ad8b3a8585abfb0ad523ba42['subnodes:groups'] = $v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getValue("groups");if(in_array(SV_GROUP_ID, $v1471e4e05a4db95d353cc867fe317314)) {if($vf3ef7c2e1269d42577fabcd06bfff59c) {$v66f6181bcb4cff4cd38fbc804a036db6 = $vf3ef7c2e1269d42577fabcd06bfff59c;}}if($v5571898aeb5505ee9a9111ddd83598f7 = cmsController::getInstance()->getModule("users")) {$v66f6181bcb4cff4cd38fbc804a036db6 = $v5571898aeb5505ee9a9111ddd83598f7->get_user_info($ve8701ad48ba05a91604e480dd60899a3, $v66f6181bcb4cff4cd38fbc804a036db6);}}else {$v66f6181bcb4cff4cd38fbc804a036db6 = $v0039b8b36ea2ec94951257d4dee08a7f;$vfca1bff8ad8b3a8585abfb0ad523ba42['nickname'] = $v02bd92faa38aaa6cc0ea75e59937a1ef->getValue("nickname");$vfca1bff8ad8b3a8585abfb0ad523ba42['email'] = $v02bd92faa38aaa6cc0ea75e59937a1ef->getValue("email");}return def_module::parseTemplate($v66f6181bcb4cff4cd38fbc804a036db6, $vfca1bff8ad8b3a8585abfb0ad523ba42, false, $v4f331e2fa932c4f9b933388ce1df675f);}};?>