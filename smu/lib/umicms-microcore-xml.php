<?php
 if(!defined("CURRENT_VERSION_LINE")) define("CURRENT_VERSION_LINE", "");if(!defined("CURRENT_WORKING_DIR")) define("CURRENT_WORKING_DIR", "/tmp/non-existing-directory");$vd2962d9ba1823a204aa406e3fe3f906b = Array('ru');if(isset($_REQUEST['p'])) {$v83878c91171338902e0fe0fb97a8c47a = (int) $_REQUEST['p'];if($v83878c91171338902e0fe0fb97a8c47a < 0) $v83878c91171338902e0fe0fb97a8c47a = 0;$_REQUEST['p'] = $v83878c91171338902e0fe0fb97a8c47a;unset($v83878c91171338902e0fe0fb97a8c47a);}function wa_strtolower($v341be97d9aff90c9978347f66f945b77) {$vafd513cd02b262cb9f984eabad9764d9 = function_exists("mb_strtolower") ? "mb_strtolower" : "strtolower";return $vafd513cd02b262cb9f984eabad9764d9($v341be97d9aff90c9978347f66f945b77);}function wa_substr($v341be97d9aff90c9978347f66f945b77, $v5e0bdcbddccca4d66d74ba8c1cee1a68, $v7a86c157ee9713c34fbd7a1ee40f0c5a) {$vbb8e741b6ff17aedde9db8832684e175 = function_exists("mb_strtolower") ? "mb_substr" : "substr";return $vbb8e741b6ff17aedde9db8832684e175($v341be97d9aff90c9978347f66f945b77, $v5e0bdcbddccca4d66d74ba8c1cee1a68, $v7a86c157ee9713c34fbd7a1ee40f0c5a);}function wa_strlen($v341be97d9aff90c9978347f66f945b77) {$ve534965e4b07f2d84ec5ee19506ee2e3 = function_exists("mb_strlen") ? "mb_strlen" : "strlen";return $ve534965e4b07f2d84ec5ee19506ee2e3($v341be97d9aff90c9978347f66f945b77);}function getArrayKey($vf1f713c9e000f5d3f280adbd124df4f5, $v3c6e0b8a9c15224a8228b9a98ca1531d) {if(!is_array($vf1f713c9e000f5d3f280adbd124df4f5)) {return false;}if($v3c6e0b8a9c15224a8228b9a98ca1531d === false) return NULL;if(array_key_exists($v3c6e0b8a9c15224a8228b9a98ca1531d, $vf1f713c9e000f5d3f280adbd124df4f5)) {return $vf1f713c9e000f5d3f280adbd124df4f5[$v3c6e0b8a9c15224a8228b9a98ca1531d];}else {return NULL;}}function getRequest($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_REQUEST, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getSession($v3c6e0b8a9c15224a8228b9a98ca1531d) {if(!isset($_SESSION)) return NULL;return getArrayKey($_SESSION, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getServer($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_SERVER, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getCookie($v3c6e0b8a9c15224a8228b9a98ca1531d) {return getArrayKey($_COOKIE, $v3c6e0b8a9c15224a8228b9a98ca1531d);}function getLabel($v3c6e0b8a9c15224a8228b9a98ca1531d, $vd6fe1d0be6347b8ef2427fa629c04485 = false) {return ulangStream::getLabel($v3c6e0b8a9c15224a8228b9a98ca1531d, $vd6fe1d0be6347b8ef2427fa629c04485);}function getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {return ulangStream::getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b);}function getMaxValue($v47c80780ab608cc046f2a6e6f071feb6) {$v9b207167e5381c47682c6b4f58a623fb = false;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v47c80780ab608cc046f2a6e6f071feb6);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vfa816edb83e95bf0c8da580bdfd491ef = $v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741];if($vfa816edb83e95bf0c8da580bdfd491ef > $v9b207167e5381c47682c6b4f58a623fb) {$v9b207167e5381c47682c6b4f58a623fb = $vfa816edb83e95bf0c8da580bdfd491ef;}}return $v9b207167e5381c47682c6b4f58a623fb;}function l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, $va7eb3552b40c56df3241c1b4b523dae5 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array(), $v865c0c0b4ab0e063e5caa3387c1a8741 = 0;if(substr($vac5c74b64b4b8352ef2f181affb5ac2a, 0, 1) == "\t") {$vac5c74b64b4b8352ef2f181affb5ac2a = trim($vac5c74b64b4b8352ef2f181affb5ac2a, " \t\n");}if(strtoupper(substr($vac5c74b64b4b8352ef2f181affb5ac2a, 0, 6)) != "SELECT" || defined('MYSQL_DISABLE_CACHE')) return mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v0800fc577294c34e0b28ad2839435945 = md5($vac5c74b64b4b8352ef2f181affb5ac2a);if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945]) && $va7eb3552b40c56df3241c1b4b523dae5 == false) {$result = $v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945][0];if($v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945][1]) {mysql_data_seek($result, 0);}}else {$result = mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if(mysql_error()) {$v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945] = false;}else {$v0fea6a13c52b4d4725368f24b045ca84[$v0800fc577294c34e0b28ad2839435945] = Array($result, mysql_num_rows($result));}}return $result;}function bytes_strlen($vb45cffe084dd3d20d928bee85e7b0f21) {if(function_exists('mb_internal_encoding')) {$vf36ec1ca57a6e572e8fa65316520437b  = mb_internal_encoding();mb_internal_encoding("latin1");$va5a928b6b6b19de8a18398c7b29f47d7 = strlen($vb45cffe084dd3d20d928bee85e7b0f21);mb_internal_encoding($vf36ec1ca57a6e572e8fa65316520437b);}else {return strlen($vb45cffe084dd3d20d928bee85e7b0f21);}}function bytes_substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844 = false) {if(function_exists('mb_internal_encoding')) {$vf36ec1ca57a6e572e8fa65316520437b = mb_internal_encoding();mb_internal_encoding("latin1");$vdccc8c8d061984a56d899361b4934477 = '';if($v2fa47f7c65fec19cc163b195725e3844 !== false) {$vdccc8c8d061984a56d899361b4934477 = substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844);}else {$vdccc8c8d061984a56d899361b4934477 = substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92);}mb_internal_encoding($vf36ec1ca57a6e572e8fa65316520437b);return $vdccc8c8d061984a56d899361b4934477;}else {if($v2fa47f7c65fec19cc163b195725e3844 !== false)    return substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92, $v2fa47f7c65fec19cc163b195725e3844);else    return substr($vb45cffe084dd3d20d928bee85e7b0f21, $vea2b2676c28c0db26d39331a336c6b92);}}function removeDirectory($v736007832d2167baaae763fd3a3f3cf1) {if(!$v700f6fa0edb608ee5cc3cfa63f1c94cc = @opendir($v736007832d2167baaae763fd3a3f3cf1)) {return false;}while (($vbe8f80182e0c983916da7338c2c1c040 = readdir($v700f6fa0edb608ee5cc3cfa63f1c94cc)) !== false) {if($vbe8f80182e0c983916da7338c2c1c040=='.' || $vbe8f80182e0c983916da7338c2c1c040=='..') continue;if (!@unlink($v736007832d2167baaae763fd3a3f3cf1.'/'.$vbe8f80182e0c983916da7338c2c1c040)) {removeDirectory($v736007832d2167baaae763fd3a3f3cf1.'/'.$vbe8f80182e0c983916da7338c2c1c040);}}@rmdir($v736007832d2167baaae763fd3a3f3cf1);return true;}function getInterfaceLangs() {global $vd2962d9ba1823a204aa406e3fe3f906b;return $vd2962d9ba1823a204aa406e3fe3f906b;}function checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a) {$v5a05866850c28651fe234659f6c92ada = getInterfaceLangs();if(in_array($v851f5ac9941d720844d143ed9cfcf60a, $v5a05866850c28651fe234659f6c92ada)) {return $v851f5ac9941d720844d143ed9cfcf60a;}else {return "ru";}}function check_session() {$v957b527bcfbad2e80f58d20683931435 = getServer('REMOTE_ADDR');if(is_null(getSession('session-owner-ip'))) {$_SESSION['session-owner-ip'] = $v957b527bcfbad2e80f58d20683931435;return true;}if(!session_id()) {session_start();}if(getSession('session-owner-ip') == $v957b527bcfbad2e80f58d20683931435) {return true;}else {session_destroy();session_start();return false;}}function makeThumbnailFullUnsharpMask($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $ve9f40e1f1d1658681dad2dac4ae0971e, $vfc021d54683383e5078ab9fefc4d53c8, $vf0598264a691a8f62272aca0e79af374) {if (function_exists('UnsharpMask')){return UnsharpMask($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $ve9f40e1f1d1658681dad2dac4ae0971e, $vfc021d54683383e5078ab9fefc4d53c8, $vf0598264a691a8f62272aca0e79af374);}else{if ($ve9f40e1f1d1658681dad2dac4ae0971e > 500) $ve9f40e1f1d1658681dad2dac4ae0971e = 500;$ve9f40e1f1d1658681dad2dac4ae0971e = $ve9f40e1f1d1658681dad2dac4ae0971e * 0.016;if ($vfc021d54683383e5078ab9fefc4d53c8 > 50) $vfc021d54683383e5078ab9fefc4d53c8 = 50;$vfc021d54683383e5078ab9fefc4d53c8 = $vfc021d54683383e5078ab9fefc4d53c8 * 2;if ($vf0598264a691a8f62272aca0e79af374 > 255) $vf0598264a691a8f62272aca0e79af374 = 255;$vfc021d54683383e5078ab9fefc4d53c8 = abs(round($vfc021d54683383e5078ab9fefc4d53c8));if ($vfc021d54683383e5078ab9fefc4d53c8 == 0) {return $vb798abe6e1b1318ee36b0dcb3fb9e4d3;imagedestroy($vb798abe6e1b1318ee36b0dcb3fb9e4d3);break;}$vf1290186a5d0b1ceab27f4e77c0c5d68 = imagesx($vb798abe6e1b1318ee36b0dcb3fb9e4d3);$v2510c39011c5be704182423e3a695e91 = imagesy($vb798abe6e1b1318ee36b0dcb3fb9e4d3);$vdd2b9c2d0f89eb88267d945e852649e1 = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;$v731eea25c6c42b949dd8b33e55cb622e = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;$v0912bfe735bcb6f63b4dc49ae3833df8 = imagecreatetruecolor($vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91);for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $vfc021d54683383e5078ab9fefc4d53c8;$v865c0c0b4ab0e063e5caa3387c1a8741++)    {imagecopy   ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 1, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91 - 1);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 1, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 50);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 1, 1, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91, 33.33333);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 0, 0, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91 - 1, 25);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 1, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68 - 1, $v2510c39011c5be704182423e3a695e91, 33.33333);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 1, 0, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 25);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 0, 1, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91 - 1, 20 );imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 1, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 16.666667);imagecopymerge ($v0912bfe735bcb6f63b4dc49ae3833df8, $vdd2b9c2d0f89eb88267d945e852649e1, 0, 0, 0, 0, $vf1290186a5d0b1ceab27f4e77c0c5d68, $v2510c39011c5be704182423e3a695e91, 50);}$vdd2b9c2d0f89eb88267d945e852649e1 = $v0912bfe735bcb6f63b4dc49ae3833df8;for ($v9dd4e461268c8034f5c8564e155c67a6 = 0;$v9dd4e461268c8034f5c8564e155c67a6 < $vf1290186a5d0b1ceab27f4e77c0c5d68;$v9dd4e461268c8034f5c8564e155c67a6++)    {for ($v415290769594460e2e485922904f345d = 0;$v415290769594460e2e485922904f345d < $v2510c39011c5be704182423e3a695e91;$v415290769594460e2e485922904f345d++)     {$ve7ee80f9d3ee77a07b7e0e40911d4b85 = ImageColorAt($v731eea25c6c42b949dd8b33e55cb622e, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d);$vcd8a4c8c79b1ff2c064026bb7cefe760 = (($ve7ee80f9d3ee77a07b7e0e40911d4b85 >> 16) & 0xFF);$vd7fd33dc47e7db31c2bdd232804331bf = (($ve7ee80f9d3ee77a07b7e0e40911d4b85 >> 8) & 0xFF);$v62f533cdf0bda50d31d41662bbe16e8e = ($ve7ee80f9d3ee77a07b7e0e40911d4b85 & 0xFF);$v82d175da0ae7901210ea5d63914f5212 = ImageColorAt($vdd2b9c2d0f89eb88267d945e852649e1, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d);$v56dc21b41aac91a611402ee281442e54 = (($v82d175da0ae7901210ea5d63914f5212 >> 16) & 0xFF);$vab27a9c8dd988ea5d32cd8f3e763b1b1 = (($v82d175da0ae7901210ea5d63914f5212 >> 8) & 0xFF);$vfbdaa5229703cc85625873f73f1ef573 = ($v82d175da0ae7901210ea5d63914f5212 & 0xFF);$v6c99f2ac4dbbc9ac99a83340dacd50cb = (abs($vcd8a4c8c79b1ff2c064026bb7cefe760 - $v56dc21b41aac91a611402ee281442e54) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($vcd8a4c8c79b1ff2c064026bb7cefe760 - $v56dc21b41aac91a611402ee281442e54)) + $vcd8a4c8c79b1ff2c064026bb7cefe760)) : $vcd8a4c8c79b1ff2c064026bb7cefe760;$v8f3e420d187de004189e440099d8e9b8 = (abs($vd7fd33dc47e7db31c2bdd232804331bf - $vab27a9c8dd988ea5d32cd8f3e763b1b1) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($vd7fd33dc47e7db31c2bdd232804331bf - $vab27a9c8dd988ea5d32cd8f3e763b1b1)) + $vd7fd33dc47e7db31c2bdd232804331bf)) : $vd7fd33dc47e7db31c2bdd232804331bf;$v4798968467b4ab45ea7902a5084666b8 = (abs($v62f533cdf0bda50d31d41662bbe16e8e - $vfbdaa5229703cc85625873f73f1ef573) >= $vf0598264a691a8f62272aca0e79af374) ? max(0, min(255, ($ve9f40e1f1d1658681dad2dac4ae0971e * ($v62f533cdf0bda50d31d41662bbe16e8e - $vfbdaa5229703cc85625873f73f1ef573)) + $v62f533cdf0bda50d31d41662bbe16e8e)) : $v62f533cdf0bda50d31d41662bbe16e8e;if (($vcd8a4c8c79b1ff2c064026bb7cefe760 != $v6c99f2ac4dbbc9ac99a83340dacd50cb) || ($vd7fd33dc47e7db31c2bdd232804331bf != $v8f3e420d187de004189e440099d8e9b8) || ($v62f533cdf0bda50d31d41662bbe16e8e != $v4798968467b4ab45ea7902a5084666b8))      {$vfbfe459f582d8ac5384527d6aaadb670 = ImageColorAllocate($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $v6c99f2ac4dbbc9ac99a83340dacd50cb, $v8f3e420d187de004189e440099d8e9b8, $v4798968467b4ab45ea7902a5084666b8);ImageSetPixel($vb798abe6e1b1318ee36b0dcb3fb9e4d3, $v9dd4e461268c8034f5c8564e155c67a6, $v415290769594460e2e485922904f345d, $vfbfe459f582d8ac5384527d6aaadb670);}}}return $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}}function makeThumbnailFullPlaceLogo($v78805a221a988e79ef3f42d7c5bfd418) {$vf021103e5dbf3bd28654d514602d5f2c="./images/cms/thumbs_logo.png";$v2a09903bdaa62517a021343b515d5661=3;$v9dd4e461268c8034f5c8564e155c67a6=5;$v415290769594460e2e485922904f345d=5;$v322bee9d252d58cb28c88282610ce462=imagesx($v78805a221a988e79ef3f42d7c5bfd418);$vf307c0e7396c8251b0c15f231deb4c81=imagesy($v78805a221a988e79ef3f42d7c5bfd418);if (file_exists($vf021103e5dbf3bd28654d514602d5f2c)) {$vf090fa7c4d8ad01ab02cf08039a139ca = new umiImageFile($vf021103e5dbf3bd28654d514602d5f2c);if(($v322bee9d252d58cb28c88282610ce462 < ($vf090fa7c4d8ad01ab02cf08039a139ca->getWidth()+$v9dd4e461268c8034f5c8564e155c67a6)) || ($vf307c0e7396c8251b0c15f231deb4c81 < ($vf090fa7c4d8ad01ab02cf08039a139ca->getHeight()+$v415290769594460e2e485922904f345d)) ){return $v78805a221a988e79ef3f42d7c5bfd418;}$v96d6f2e7e1f705ab5e59c84a6dc009b2=@imagecreatefrompng($vf021103e5dbf3bd28654d514602d5f2c);if ($v96d6f2e7e1f705ab5e59c84a6dc009b2) {$v52a052e1889e293183cfb19c8ba46cfe=imagesx($v96d6f2e7e1f705ab5e59c84a6dc009b2);$vb7b422b08bdd1848f0238602b511a5e4=imagesy($v96d6f2e7e1f705ab5e59c84a6dc009b2);switch ($v2a09903bdaa62517a021343b515d5661) {case 2:      $v9dd4e461268c8034f5c8564e155c67a6=$v322bee9d252d58cb28c88282610ce462-$v9dd4e461268c8034f5c8564e155c67a6-$v52a052e1889e293183cfb19c8ba46cfe;break;case 3:      $v9dd4e461268c8034f5c8564e155c67a6=$v322bee9d252d58cb28c88282610ce462-$v9dd4e461268c8034f5c8564e155c67a6-$v52a052e1889e293183cfb19c8ba46cfe;$v415290769594460e2e485922904f345d=$vf307c0e7396c8251b0c15f231deb4c81-$v415290769594460e2e485922904f345d-$vb7b422b08bdd1848f0238602b511a5e4;break;case 4:      $v415290769594460e2e485922904f345d=$vf307c0e7396c8251b0c15f231deb4c81-$v415290769594460e2e485922904f345d-$vb7b422b08bdd1848f0238602b511a5e4;break;case 5:      $v9dd4e461268c8034f5c8564e155c67a6=floor($v322bee9d252d58cb28c88282610ce462/2-$v52a052e1889e293183cfb19c8ba46cfe/2);$v415290769594460e2e485922904f345d=floor($vf307c0e7396c8251b0c15f231deb4c81/2-$vb7b422b08bdd1848f0238602b511a5e4/2);break;default:    }imagecopy($v78805a221a988e79ef3f42d7c5bfd418,$v96d6f2e7e1f705ab5e59c84a6dc009b2,$v9dd4e461268c8034f5c8564e155c67a6,$v415290769594460e2e485922904f345d,0,0,$v52a052e1889e293183cfb19c8ba46cfe,$vb7b422b08bdd1848f0238602b511a5e4);}}return $v78805a221a988e79ef3f42d7c5bfd418;}function makeThumbnailFull($vd6fe1d0be6347b8ef2427fa629c04485, $vf09cbf63485d929911164e808f84423b, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $va634e7960e04b1633c103382004fe526 = true, $v70c8b4c146f72fc2a6a1886dae113831 = 5, $vb5db1323df6de62d5bda823c63ad4cbe = false) {$vd66636b253cb346dbb6240e30def3618 = 80;$vf711798e436a77f680a1070c008a2a66=true;$v78805a221a988e79ef3f42d7c5bfd418 = new umiImageFile($vd6fe1d0be6347b8ef2427fa629c04485);$v3090ad88ff7c9ca191579b709069fe64 = $v78805a221a988e79ef3f42d7c5bfd418->getFileName();$veb9f74e698fbb6e2897b3791bc406cbf = $v78805a221a988e79ef3f42d7c5bfd418->getExt();$veb9f74e698fbb6e2897b3791bc406cbf = strtolower($veb9f74e698fbb6e2897b3791bc406cbf);$v107703932395f334896434b598ccdc55 = Array('gif', 'jpeg', 'jpg', 'png', 'bmp');if(!in_array($veb9f74e698fbb6e2897b3791bc406cbf, $v107703932395f334896434b598ccdc55)) return "";$v9184e69b9ad79d5076c912710a99e551  = filemtime($vd6fe1d0be6347b8ef2427fa629c04485);$vddc9a97c07cfa1f9fe744dbc63143e5c = md5($vd6fe1d0be6347b8ef2427fa629c04485.$veaae26a6fb20ed3ef54fb23bfa0b1fcc.$vb435e227d5dd201e1768b2bcb2e0aa81.$va634e7960e04b1633c103382004fe526.$v70c8b4c146f72fc2a6a1886dae113831.$vb5db1323df6de62d5bda823c63ad4cbe)."." . $veb9f74e698fbb6e2897b3791bc406cbf;$vf38211e4c6839893265bcda112b63f80 = $vf09cbf63485d929911164e808f84423b . $vddc9a97c07cfa1f9fe744dbc63143e5c;if(!is_file($vf38211e4c6839893265bcda112b63f80)) {$v3a8d65a128a22de38fe374a76974161c = $v78805a221a988e79ef3f42d7c5bfd418->getWidth();$v427c23061461a4b29c5d39dd32b7f2c6 = $v78805a221a988e79ef3f42d7c5bfd418->getHeight();if($vb435e227d5dd201e1768b2bcb2e0aa81 == "auto") {$v3c10300988ff410c7f7181d43214229e = (int) round($v427c23061461a4b29c5d39dd32b7f2c6 * ($veaae26a6fb20ed3ef54fb23bfa0b1fcc / $v3a8d65a128a22de38fe374a76974161c));$vb435e227d5dd201e1768b2bcb2e0aa81=$v3c10300988ff410c7f7181d43214229e;$v6f81aaeb51b38cddc8851000851e9c98 = (int) $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}else {if($veaae26a6fb20ed3ef54fb23bfa0b1fcc == "auto") {$v6f81aaeb51b38cddc8851000851e9c98 = (int) round($v3a8d65a128a22de38fe374a76974161c * ($vb435e227d5dd201e1768b2bcb2e0aa81 / $v427c23061461a4b29c5d39dd32b7f2c6));$veaae26a6fb20ed3ef54fb23bfa0b1fcc=$v6f81aaeb51b38cddc8851000851e9c98;}else {$v6f81aaeb51b38cddc8851000851e9c98 = (int) $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}$v3c10300988ff410c7f7181d43214229e = (int) $vb435e227d5dd201e1768b2bcb2e0aa81;}$va13a7d0465adabf0bc59a5a26873cc4d=0;$v6918e386f5cdd77edf37c6f42cdad6a2=0;if (!intval($veaae26a6fb20ed3ef54fb23bfa0b1fcc) || !intval($vb435e227d5dd201e1768b2bcb2e0aa81)) {$va634e7960e04b1633c103382004fe526 = false;}if($va634e7960e04b1633c103382004fe526)     {$v17370b9bf2bb4af83eba44b15e2315b9 = $v3a8d65a128a22de38fe374a76974161c/$veaae26a6fb20ed3ef54fb23bfa0b1fcc;$v205a8652407c62be13889d94c91f49e8 = $v427c23061461a4b29c5d39dd32b7f2c6/$vb435e227d5dd201e1768b2bcb2e0aa81;if ($v17370b9bf2bb4af83eba44b15e2315b9 > $v205a8652407c62be13889d94c91f49e8)      {$v6918e386f5cdd77edf37c6f42cdad6a2 = round(($v3a8d65a128a22de38fe374a76974161c-$veaae26a6fb20ed3ef54fb23bfa0b1fcc*$v205a8652407c62be13889d94c91f49e8)/2);$v3a8d65a128a22de38fe374a76974161c = round($veaae26a6fb20ed3ef54fb23bfa0b1fcc*$v205a8652407c62be13889d94c91f49e8);}elseif ($v17370b9bf2bb4af83eba44b15e2315b9 < $v205a8652407c62be13889d94c91f49e8)      {$va13a7d0465adabf0bc59a5a26873cc4d = round(($v427c23061461a4b29c5d39dd32b7f2c6-$vb435e227d5dd201e1768b2bcb2e0aa81*$v17370b9bf2bb4af83eba44b15e2315b9)/2);$v427c23061461a4b29c5d39dd32b7f2c6 = round($vb435e227d5dd201e1768b2bcb2e0aa81*$v17370b9bf2bb4af83eba44b15e2315b9);}if($v70c8b4c146f72fc2a6a1886dae113831)     {switch ($v70c8b4c146f72fc2a6a1886dae113831):       case 1:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 2:        $va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 3:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;$va13a7d0465adabf0bc59a5a26873cc4d = 0;break;case 4:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;break;case 5:        break;case 6:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;break;case 7:        $v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;case 8:        $va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;case 9:        $v6918e386f5cdd77edf37c6f42cdad6a2 += $v6918e386f5cdd77edf37c6f42cdad6a2;$va13a7d0465adabf0bc59a5a26873cc4d += $va13a7d0465adabf0bc59a5a26873cc4d;break;endswitch;}}$vf12105146129696d6a7e0ed521db2e48 = imagecreatetruecolor($v6f81aaeb51b38cddc8851000851e9c98, $v3c10300988ff410c7f7181d43214229e);if ($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromgif($vd6fe1d0be6347b8ef2427fa629c04485);}else if ($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefrompng($vd6fe1d0be6347b8ef2427fa629c04485);}else {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromjpeg($vd6fe1d0be6347b8ef2427fa629c04485);}if ($veaae26a6fb20ed3ef54fb23bfa0b1fcc*4 < $v3a8d65a128a22de38fe374a76974161c AND $vb435e227d5dd201e1768b2bcb2e0aa81*4 < $v427c23061461a4b29c5d39dd32b7f2c6) {$_TMP=array();$_TMP['width'] = round($veaae26a6fb20ed3ef54fb23bfa0b1fcc*4);$_TMP['height'] = round($vb435e227d5dd201e1768b2bcb2e0aa81*4);$_TMP['image'] = imagecreatetruecolor($_TMP['width'], $_TMP['height']);imagecopyresized($_TMP['image'], $v36cd38f49b9afa08222c0dc9ebfe35eb, 0, 0, $v6918e386f5cdd77edf37c6f42cdad6a2, $va13a7d0465adabf0bc59a5a26873cc4d, $_TMP['width'], $_TMP['height'], $v3a8d65a128a22de38fe374a76974161c, $v427c23061461a4b29c5d39dd32b7f2c6);$v36cd38f49b9afa08222c0dc9ebfe35eb = $_TMP['image'];$v3a8d65a128a22de38fe374a76974161c = $_TMP['width'];$v427c23061461a4b29c5d39dd32b7f2c6 = $_TMP['height'];$v6918e386f5cdd77edf37c6f42cdad6a2 = 0;$va13a7d0465adabf0bc59a5a26873cc4d = 0;unset($_TMP);}imagecopyresampled($vf12105146129696d6a7e0ed521db2e48, $v36cd38f49b9afa08222c0dc9ebfe35eb, 0, 0, $v6918e386f5cdd77edf37c6f42cdad6a2, $va13a7d0465adabf0bc59a5a26873cc4d, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $v3a8d65a128a22de38fe374a76974161c, $v427c23061461a4b29c5d39dd32b7f2c6);if($vb5db1323df6de62d5bda823c63ad4cbe) {$vf12105146129696d6a7e0ed521db2e48 = makeThumbnailFullPlaceLogo($vf12105146129696d6a7e0ed521db2e48);}if($vf711798e436a77f680a1070c008a2a66) $vf12105146129696d6a7e0ed521db2e48 = makeThumbnailFullUnsharpMask($vf12105146129696d6a7e0ed521db2e48,80,.5,3);if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {imagepng($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {imagegif($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else {imagejpeg($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80, $vd66636b253cb346dbb6240e30def3618);}}$v2063c1608d6e0baf80249c42e2be5804 = new umiImageFile($vf38211e4c6839893265bcda112b63f80);$v47c80780ab608cc046f2a6e6f071feb6 = Array();$v47c80780ab608cc046f2a6e6f071feb6['size'] = $v2063c1608d6e0baf80249c42e2be5804->getSize();$v47c80780ab608cc046f2a6e6f071feb6['filename'] = $v2063c1608d6e0baf80249c42e2be5804->getFileName();$v47c80780ab608cc046f2a6e6f071feb6['filepath'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath();$v47c80780ab608cc046f2a6e6f071feb6['src'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath(true);$v47c80780ab608cc046f2a6e6f071feb6['ext'] = $v2063c1608d6e0baf80249c42e2be5804->getExt();$v47c80780ab608cc046f2a6e6f071feb6['width'] = $v2063c1608d6e0baf80249c42e2be5804->getWidth();$v47c80780ab608cc046f2a6e6f071feb6['height'] = $v2063c1608d6e0baf80249c42e2be5804->getHeight();if(cmsController::getInstance()->getCurrentMode() == "admin") {$v47c80780ab608cc046f2a6e6f071feb6['src'] = str_replace("&", "&amp;", $v47c80780ab608cc046f2a6e6f071feb6['src']);}return $v47c80780ab608cc046f2a6e6f071feb6;}function array_extract_values($vf1f713c9e000f5d3f280adbd124df4f5, &$result = NULL, $v19358374f34dd2c9d2dc34952227664a = false) {if(is_array($vf1f713c9e000f5d3f280adbd124df4f5) == false) {return Array();}if(is_array($result) == false) {$result = Array();}foreach($vf1f713c9e000f5d3f280adbd124df4f5 as $v2063c1608d6e0baf80249c42e2be5804) {if(is_array($v2063c1608d6e0baf80249c42e2be5804) == false) {if($v2063c1608d6e0baf80249c42e2be5804 || $v19358374f34dd2c9d2dc34952227664a == true) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}}else {array_extract_values($v2063c1608d6e0baf80249c42e2be5804, $result, $v19358374f34dd2c9d2dc34952227664a);}}return $result;}function array_positive_values($v47c80780ab608cc046f2a6e6f071feb6, $vf8532b6380228945d474f37fb6cdac27 = true) {if(is_array($v47c80780ab608cc046f2a6e6f071feb6) == false) {return Array();}$result = Array();foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {if($v2063c1608d6e0baf80249c42e2be5804) {if(is_array($v2063c1608d6e0baf80249c42e2be5804)) {if($vf8532b6380228945d474f37fb6cdac27) {$v2063c1608d6e0baf80249c42e2be5804 = array_positive_values($v2063c1608d6e0baf80249c42e2be5804, $vf8532b6380228945d474f37fb6cdac27);if(sizeof($v2063c1608d6e0baf80249c42e2be5804) == 0) {continue;}}}$result[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v2063c1608d6e0baf80249c42e2be5804;}}return $result;}function enableOutputCompression() {if(extension_loaded('zlib')) {ob_start('ob_gzhandler');}}function disableOutputCompression() {static $v4f33252742282f871b0617168156fd55 = false;if($v4f33252742282f871b0617168156fd55) {return false;}ob_end_clean();ob_start();header("Content-Encoding:");header("Content-Length:");header("Vary:");$v4f33252742282f871b0617168156fd55 = true;return true;}function natsort2d(&$v0b7b66da920976f738db754a6716a9e8, $v6af2d999a15a64f0b143bbfa790c2f37 = 0) {if(is_array($v0b7b66da920976f738db754a6716a9e8) == false) {return;}$v3d801aa532c1cec3ee82d87a99fdf63f = $v26b75b176d665f24a5fd22a2ad815763 = Array();foreach ($v0b7b66da920976f738db754a6716a9e8 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {$v3d801aa532c1cec3ee82d87a99fdf63f[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v2063c1608d6e0baf80249c42e2be5804[$v6af2d999a15a64f0b143bbfa790c2f37];}natsort($v3d801aa532c1cec3ee82d87a99fdf63f);foreach ($v3d801aa532c1cec3ee82d87a99fdf63f as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {$v26b75b176d665f24a5fd22a2ad815763[] = $v0b7b66da920976f738db754a6716a9e8[$v3c6e0b8a9c15224a8228b9a98ca1531d];}$v0b7b66da920976f738db754a6716a9e8 = $v26b75b176d665f24a5fd22a2ad815763;}function array_unique_arrays($vf1f713c9e000f5d3f280adbd124df4f5, $v3c6e0b8a9c15224a8228b9a98ca1531d) {$result = Array();$v14f802e1fba977727845e8872c1743a7 = Array();foreach($vf1f713c9e000f5d3f280adbd124df4f5 as $v47c80780ab608cc046f2a6e6f071feb6) {$v33e588420461dec019f1b83ed3119030 = isset($v47c80780ab608cc046f2a6e6f071feb6[$v3c6e0b8a9c15224a8228b9a98ca1531d]) ? $v47c80780ab608cc046f2a6e6f071feb6[$v3c6e0b8a9c15224a8228b9a98ca1531d] : NULL;if(in_array($v33e588420461dec019f1b83ed3119030, $v14f802e1fba977727845e8872c1743a7)) {continue;}else {$v14f802e1fba977727845e8872c1743a7[] = $v33e588420461dec019f1b83ed3119030;$result[] = $v47c80780ab608cc046f2a6e6f071feb6;}}return $result;}abstract class baseException extends Exception {protected $strcode;public static $catchedExceptions = Array();public function __construct ($v78e731027d8fd50ed642340b7c9a63b3, $vc13367945d5d4c91047b3b50234aa7ab = 0, $vd6ccd2379d1965a49b998d0f4207337d = "") {$v78e731027d8fd50ed642340b7c9a63b3 = templater::putLangs($v78e731027d8fd50ed642340b7c9a63b3);baseException::$catchedExceptions[] = $this;$this->strcode = $vd6ccd2379d1965a49b998d0f4207337d;parent::__construct($v78e731027d8fd50ed642340b7c9a63b3, $vc13367945d5d4c91047b3b50234aa7ab);}public function getStrCode() {return (string) $this->strcode;}};class coreException extends baseException {};class coreBreakEventsException extends coreException {};class privateException extends baseException {};class wrongParamException extends privateException {};class errorPanicException extends Exception {};class publicException extends baseException {};class publicAdminException extends publicException {};class expectElementException extends publicAdminException {};class expectObjectException extends publicAdminException {};class expectObjectTypeException extends publicAdminException {};class requireAdminPermissionsException extends publicAdminException {};class requreMoreAdminPermissionsException extends publicAdminException {};class requireAdminParamException extends publicAdminException {};class wrongElementTypeAdminException extends publicAdminException {};class publicAdminPageLimitException extends publicAdminException {};class publicAdminLicenseLimitException extends publicAdminException {};class maxIterationsExeededException extends publicException {};class umiRemoteFileGetterException extends publicException {};class XMLFactory {const DATA_STORE = "/xmldb/";private static $oInstance   = NULL;private $aOpenedList = array();private function __construct() {return;}public function __destruct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {if (!isset(self::$oInstance)) {$vaef4af7c9418e25ce18477ef1a73086d       = __CLASS__;self::$oInstance  = new $vaef4af7c9418e25ce18477ef1a73086d;}return self::$oInstance;}public function getProxy($_sFileName, $_bReopen=false) {if($_bReopen || !array_key_exists($_sFileName, $this->aOpenedList)) {if($_bReopen)                unset($this->aOpenedList[$_sFileName]);$this->aOpenedList[$_sFileName] = new XMLProxy($_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sFileName);}return $this->aOpenedList[$_sFileName];}public function createFile($_sFileName, $_sContent) {$ve95709fdc9ddd63d139dcf5ec0d77d51 = $_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sFileName;if( file_exists($ve95709fdc9ddd63d139dcf5ec0d77d51) ) return false;return (file_put_contents($ve95709fdc9ddd63d139dcf5ec0d77d51, $_sContent) == strlen($_sContent));}public function removeFile($_sFileName) {$ve95709fdc9ddd63d139dcf5ec0d77d51 = $_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sFileName;if( file_exists($ve95709fdc9ddd63d139dcf5ec0d77d51) ) return unlink($ve95709fdc9ddd63d139dcf5ec0d77d51);return false;}public function copyFile($_sSource, $_sDest) {if( !file_exists($_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sSource) ) return false;return copy($_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sSource,                    $_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sDest);}public function listFiles($_sFolder) {return glob($_SERVER['DOCUMENT_ROOT'] . XMLFactory::DATA_STORE . $_sFolder . '*.xml', GLOB_NOSORT);}}class XMLProxy {private $oXMLDocument    = NULL;private $oXPath          = NULL;private $sSourcePath     = NULL;private $aElementPool    = array();protected static $bCanLock = true;protected static $filesCache = Array();private $bFileLocked     = false;private $sLockPath       = NULL;private $iModifyTime     = 0;private $aCacheStore     = array();private $bDisableLocks   = false;public function __construct($_sFileName = NULL) {$this->oXMLDocument = new DOMDocument;$this->oXPath       = new DOMXPath($this->oXMLDocument);$this->loadFile($_sFileName);$this->bDisableLocks = defined('XMLDRV_DISABLE_LOCKS') && XMLDRV_DISABLE_LOCKS;}public function __destruct() {self::$bCanLock = false;$this->saveFile();$this->aElementPool = array();}public function __wakeup() {$this->loadFile($this->sSourcePath);}public function __toString() {return $this->toString();}public function loadFile($_sFileName) {if(isset(self::$filesCache[$_sFileName])) {$v93ed592a6cbad7c93ef560d637e9ec73 = self::$filesCache[$_sFileName];}else {if(!file_exists($_sFileName)) {if(file_exists($_sFileName.'.lock')) {if(!copy($_sFileName.'.lock', $_sFileName))       return false;}else {if(strstr($_sFileName, 'objectcontent') !== false) {file_put_contents($_sFileName, "<"."?xml version=\"1.0\" encoding=\"utf-8\"?".">\n<umi>\n<values />\n</umi>");}else {return false;}}}$v93ed592a6cbad7c93ef560d637e9ec73 = Array(    'mtime' => filemtime($_sFileName),    'sourcePath' => $_sFileName,    'dom' => DOMDocument::load($_sFileName)   );$v93ed592a6cbad7c93ef560d637e9ec73['xpath'] = new DOMXPath($v93ed592a6cbad7c93ef560d637e9ec73['dom']);self::$filesCache[$_sFileName] = $v93ed592a6cbad7c93ef560d637e9ec73;}$this->iModifyTime = $v93ed592a6cbad7c93ef560d637e9ec73['mtime'];$this->sSourcePath = $v93ed592a6cbad7c93ef560d637e9ec73['sourcePath'];$this->oXMLDocument = $v93ed592a6cbad7c93ef560d637e9ec73['dom'];$this->oXPath      = $v93ed592a6cbad7c93ef560d637e9ec73['xpath'];$this->aCacheStore = array();return true;}public function loadString($_sXML = NULL) {if($_sXML) {$this->sSourcePath = NULL;@$this->oXMLDocument->loadXML($_sXML);$this->oXPath      = new DOMXPath($this->oXMLDocument);$this->aCacheStore = array();return true;}else {return false;}}public function saveFile($_sFileName = NULL) {if($_sFileName) {$this->sSourcePath = $_sFileName;}else {if(!$this->bFileLocked) return false;}if(!$this->sSourcePath) return false;$this->oXMLDocument->save($this->sSourcePath);$this->releaseLock();return true;}public function toString() {return $this->oXMLDocument->saveXML();}public function getLock() {if($this->bDisableLocks) return $this->bFileLocked = true;if($this->bFileLocked)   return true;if(!self::$bCanLock)     return true;$v9feebdfe9379f425ae775d702cb78d3c     = $this->sSourcePath . '.lock';$v887b495547e4280614edd376f07c3248 = time() + 10;$v6c34d4b5f1bf45e1a0aab4ac49715792   = false;while(file_exists($v9feebdfe9379f425ae775d702cb78d3c) && (time() < $v887b495547e4280614edd376f07c3248)) {$v6c34d4b5f1bf45e1a0aab4ac49715792 = true;}if(!$v6c34d4b5f1bf45e1a0aab4ac49715792 && (filemtime($this->sSourcePath) != $this->iModifyTime)) {$v6c34d4b5f1bf45e1a0aab4ac49715792 = true;}file_put_contents($v9feebdfe9379f425ae775d702cb78d3c, '');chmod($v9feebdfe9379f425ae775d702cb78d3c, 0777);copy($this->sSourcePath, $v9feebdfe9379f425ae775d702cb78d3c);clearstatcache();if(filesize($v9feebdfe9379f425ae775d702cb78d3c) != 0) {$this->sLockPath   = $this->sSourcePath;$this->sSourcePath = $v9feebdfe9379f425ae775d702cb78d3c;$this->bFileLocked = true;}else {unlink($v9feebdfe9379f425ae775d702cb78d3c);}if($v6c34d4b5f1bf45e1a0aab4ac49715792) {$this->aCacheStore = array();$this->loadFile($this->sLockPath);foreach($this->aElementPool as $v266dfb6190a3ce57973bce176a01701e)    $v266dfb6190a3ce57973bce176a01701e->restore($this->oXMLDocument);}return true;}public function releaseLock() {if(!$this->bFileLocked) return true;if(substr($this->sSourcePath,strrpos($this->sSourcePath, '.')) != '.lock') return true;if(!is_writable($this->sLockPath)) {trigger_error("Can't release lock on \"{$this->sLockPath}\"", E_USER_ERROR);}copy($this->sSourcePath, $this->sLockPath);unlink($this->sSourcePath);$this->sSourcePath = $this->sLockPath;$this->sLockPath   = NULL;$this->bFileLocked = false;return true;}public function getCount($_sXPath) {$vadf9fa5dcd5317dc5c9c8e250c028872 = $this->oXPath->evaluate($_sXPath);return $vadf9fa5dcd5317dc5c9c8e250c028872->length;}public function getChildCount($_sXPath) {$v8bda073aa4882f83df53cdd4b45cc0a7 = $this->oXPath->evaluate($_sXPath.'/*');return $v8bda073aa4882f83df53cdd4b45cc0a7->length;}public function getAttributeCount($_sXPath) {$vc90101bd6942422cc4bcf1632858e2a4 = $this->getNode($_sXPath);if(!$vc90101bd6942422cc4bcf1632858e2a4->hasAttributes()) return 0;return $vc90101bd6942422cc4bcf1632858e2a4->attributes->length;}public function getNodeTree($_sXPath, $_bFlat = false) {$v260e8b71052a73a8d5a6b162135fe851 = $this->getNode($_sXPath, true);$v3b327947953e2b1c3d06a3a7c09a64cd  = array();foreach($v260e8b71052a73a8d5a6b162135fe851 as $vc90101bd6942422cc4bcf1632858e2a4) {$ve3d483f1564bbd550b8bb93a56acb13b                = $this->getTree($vc90101bd6942422cc4bcf1632858e2a4, true, $_bFlat);$ve3d483f1564bbd550b8bb93a56acb13b['@attributes'] = $this->getAttributeList($vc90101bd6942422cc4bcf1632858e2a4);$ve3d483f1564bbd550b8bb93a56acb13b['@value']      = $vc90101bd6942422cc4bcf1632858e2a4->nodeValue;$v3b327947953e2b1c3d06a3a7c09a64cd[$vc90101bd6942422cc4bcf1632858e2a4->nodeName][] = $ve3d483f1564bbd550b8bb93a56acb13b;}return $v3b327947953e2b1c3d06a3a7c09a64cd;}public function getElementValue($_sXPath, $_bMultiple=false) {$vc90101bd6942422cc4bcf1632858e2a4 = $this->getNode($_sXPath, $_bMultiple);if($_bMultiple) {$v44b09c0a4f0bbe932cce0cea40ccba35 = array();foreach($vc90101bd6942422cc4bcf1632858e2a4 as $vd95679752134a2d9eb61dbd7b91c4bcc)    if(is_object($vd95679752134a2d9eb61dbd7b91c4bcc) &&           $vd95679752134a2d9eb61dbd7b91c4bcc->childNodes->length == 1 &&           in_array($vd95679752134a2d9eb61dbd7b91c4bcc->firstChild->nodeType, array(XML_TEXT_NODE, XML_CDATA_SECTION_NODE))) $v44b09c0a4f0bbe932cce0cea40ccba35[] = $vd95679752134a2d9eb61dbd7b91c4bcc->nodeValue;return $v44b09c0a4f0bbe932cce0cea40ccba35;}else {return ( is_object($vc90101bd6942422cc4bcf1632858e2a4) &&             $vc90101bd6942422cc4bcf1632858e2a4->childNodes->length == 1 &&             in_array($vc90101bd6942422cc4bcf1632858e2a4->firstChild->nodeType, array(XML_TEXT_NODE, XML_CDATA_SECTION_NODE))  ) ? $vc90101bd6942422cc4bcf1632858e2a4->nodeValue : "";}}public function setElementValue($_sXPath, $_sValue) {$this->getLock();$vc90101bd6942422cc4bcf1632858e2a4 = $this->getNode($_sXPath);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $vc90101bd6942422cc4bcf1632858e2a4->childNodes->length;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(!in_array($vc90101bd6942422cc4bcf1632858e2a4->childNodes->item($v865c0c0b4ab0e063e5caa3387c1a8741)->nodeType, array(XML_TEXT_NODE, XML_CDATA_SECTION_NODE))) return false;}$vad60bb3f28ba5963c995c2e9500d6e1e = $this->oXMLDocument->createCDATASection($_sValue);while($vc90101bd6942422cc4bcf1632858e2a4->childNodes->length) {$vc90101bd6942422cc4bcf1632858e2a4->removeChild( $vc90101bd6942422cc4bcf1632858e2a4->firstChild );}$vc90101bd6942422cc4bcf1632858e2a4->appendChild($vad60bb3f28ba5963c995c2e9500d6e1e);return true;}public function getAttributeValue($_sXPath, $_sName, $_bMultiple=false) {$vc90101bd6942422cc4bcf1632858e2a4     = $this->getNode($_sXPath, $_bMultiple);if($_bMultiple) {$v287234a1ff35a314b5b6bc4e5828e745 = array();if(!empty($vc90101bd6942422cc4bcf1632858e2a4))   foreach($vc90101bd6942422cc4bcf1632858e2a4 as $vd95679752134a2d9eb61dbd7b91c4bcc) {$v8529523d0345b5635339865d9a7f48d2 = $vd95679752134a2d9eb61dbd7b91c4bcc->attributes->getNamedItem($_sName);if(is_object($v8529523d0345b5635339865d9a7f48d2)) $v287234a1ff35a314b5b6bc4e5828e745[] = $v8529523d0345b5635339865d9a7f48d2->nodeValue;}return $v287234a1ff35a314b5b6bc4e5828e745;}else {if(!is_object($vc90101bd6942422cc4bcf1632858e2a4)) return false;$v8529523d0345b5635339865d9a7f48d2 = $vc90101bd6942422cc4bcf1632858e2a4->attributes->getNamedItem($_sName);return (is_object($v8529523d0345b5635339865d9a7f48d2))?$v8529523d0345b5635339865d9a7f48d2->nodeValue:false;}}public function setAttributeValue($_sXPath, $_sName, $_sValue = '') {$this->getLock();$v260e8b71052a73a8d5a6b162135fe851 = $this->getNode($_sXPath, true);if(is_array($_sName)&&empty($_sName)) return false;foreach($v260e8b71052a73a8d5a6b162135fe851 as $vc90101bd6942422cc4bcf1632858e2a4) {if(is_array($_sName)) {foreach($_sName as $v8b198d10cc1aa453b2110a6a2f779eb3=>$v6a829a2da7beae30dac16439c7839916)     $vc90101bd6942422cc4bcf1632858e2a4->attributes->getNamedItem($v8b198d10cc1aa453b2110a6a2f779eb3)->nodeValue = $v6a829a2da7beae30dac16439c7839916;}else {$vc90101bd6942422cc4bcf1632858e2a4->attributes->getNamedItem($_sName)->nodeValue = $_sValue;}}return true;}public function getElement($_sXPath) {return new ElementProxy($this->oXMLDocument, $this->getNode($_sXPath), $this);}public function getElementsArray($_sXPath, $_sConvAttr = false) {$v260e8b71052a73a8d5a6b162135fe851   = $this->getNode($_sXPath, true);$v782b2c89b84dba8241ff6da02d18fdcb = array();if(!empty($v260e8b71052a73a8d5a6b162135fe851))    foreach($v260e8b71052a73a8d5a6b162135fe851 as $vc90101bd6942422cc4bcf1632858e2a4)   $v782b2c89b84dba8241ff6da02d18fdcb[] = new ElementProxy($this->oXMLDocument, $vc90101bd6942422cc4bcf1632858e2a4, $this, $_sConvAttr);return $v782b2c89b84dba8241ff6da02d18fdcb;}public function addElement($_sXPath, $_sName, $_sValue="") {$this->getLock();$vc90101bd6942422cc4bcf1632858e2a4          = $this->getNode($_sXPath, false, true);if(!is_object($vc90101bd6942422cc4bcf1632858e2a4)) return new ElementProxy(null, null);$v40798c648aa215ab60a0be13aaec99fc = $this->oXMLDocument->createElement($_sName, "");$vad60bb3f28ba5963c995c2e9500d6e1e       = $this->oXMLDocument->createCDATASection($_sValue);$v40798c648aa215ab60a0be13aaec99fc->appendChild($vad60bb3f28ba5963c995c2e9500d6e1e);$vc90101bd6942422cc4bcf1632858e2a4->appendChild($v40798c648aa215ab60a0be13aaec99fc);return new ElementProxy($this->oXMLDocument, $v40798c648aa215ab60a0be13aaec99fc, $this);}public function removeElement($_sXPath) {$this->getLock();$vc8899c281e09b5ee08d45d79e8e50567    = $this->getNode($_sXPath, true, true);foreach($vc8899c281e09b5ee08d45d79e8e50567 as $vc90101bd6942422cc4bcf1632858e2a4) {$vad4c1c88437f1c3ced8e0f0725ceea0e = $vc90101bd6942422cc4bcf1632858e2a4->parentNode;$vad4c1c88437f1c3ced8e0f0725ceea0e->removeChild($vc90101bd6942422cc4bcf1632858e2a4);}return true;}public function addAttribute($_sXPath, $_sName, $_sValue="") {$this->getLock();$vc90101bd6942422cc4bcf1632858e2a4          = $this->getNode($_sXPath, false, true);$v40798c648aa215ab60a0be13aaec99fc = $this->oXMLDocument->createAttribute($_sName);$v40798c648aa215ab60a0be13aaec99fc->nodeValue = $_sValue;$vc90101bd6942422cc4bcf1632858e2a4->appendChild($v40798c648aa215ab60a0be13aaec99fc);return true;}public function removeAttribute($_sXPath, $_sName) {$this->getLock();$vc90101bd6942422cc4bcf1632858e2a4 = $this->getNode($_sXPath, false, true);$vc90101bd6942422cc4bcf1632858e2a4->removeAttribute($_sName);return true;}public function registerElement(ElementProxy &$_Element) {return true;if($this->bFileLocked) return false;if(!($_Element->exists() && $_Element->valid())) return false;$this->aElementPool[] = $_Element;$vb7e464ee9bef296333ff6c507fd16f9d    = array_keys($this->aElementPool);$v9e98884e6af26a45b4e165fe0e800873 = array_reverse($vb7e464ee9bef296333ff6c507fd16f9d);return $v9e98884e6af26a45b4e165fe0e800873[0];}public function unregisterElement($_iElementDescriptor) {return true;if(!self::$bCanLock) return;if(array_key_exists($_iElementDescriptor, $this->aElementPool))   unset($this->aElementPool[$_iElementDescriptor]);}private function getNode($_sXPath, $_bReturnList = false, $_bClearCache = false) {$v34a69e371238ce97959dc430eb56eef5  = false;if($_bClearCache) $this->aCacheStore = array();if(isset($this->aCacheStore[$_sXPath]) ) {$v92127ad4c236cbbcceaf93ec5889a226 = $this->aCacheStore[$_sXPath];$v34a69e371238ce97959dc430eb56eef5 = true;}else {$v92127ad4c236cbbcceaf93ec5889a226 = $this->oXPath->evaluate($_sXPath);$this->aCacheStore[$_sXPath] = $v92127ad4c236cbbcceaf93ec5889a226;}if(!is_object($v92127ad4c236cbbcceaf93ec5889a226)) return ($_bReturnList) ? array() : NULL;if($v92127ad4c236cbbcceaf93ec5889a226->length == 0) return ($_bReturnList) ? array() : NULL;if($_bReturnList) {$v5a5ee9d34dea6c675324a7bb46462694 = array();$vebb9639568218ed404aa24c55d7510c2 = $v92127ad4c236cbbcceaf93ec5889a226->length;for($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<$vebb9639568218ed404aa24c55d7510c2;$v865c0c0b4ab0e063e5caa3387c1a8741++)      $v5a5ee9d34dea6c675324a7bb46462694[] = $v92127ad4c236cbbcceaf93ec5889a226->item($v865c0c0b4ab0e063e5caa3387c1a8741);return $v5a5ee9d34dea6c675324a7bb46462694;}else {return $v92127ad4c236cbbcceaf93ec5889a226->item(0);}}private function getTree($_oRoot, $_bParseAttrib = true, $_bFlat = false) {$v04a3e77753d77649469d0893d04a0fb1 = array();$v8bda073aa4882f83df53cdd4b45cc0a7  = $_oRoot->childNodes;if(!is_object($v8bda073aa4882f83df53cdd4b45cc0a7)) {return Array();}if($v8bda073aa4882f83df53cdd4b45cc0a7->length)    for($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<$v8bda073aa4882f83df53cdd4b45cc0a7->length;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v63eac7c6b49b939dc44db8259b0420af   = $v8bda073aa4882f83df53cdd4b45cc0a7->item($v865c0c0b4ab0e063e5caa3387c1a8741);if($v63eac7c6b49b939dc44db8259b0420af->nodeName == "#text") continue;$v6b57fe9b59a5af10383e888668b4ba7c = array();if(!$_bFlat)      $v6b57fe9b59a5af10383e888668b4ba7c = $this->getTree($v63eac7c6b49b939dc44db8259b0420af, $_bParseAttrib, $_bFlat);if($_bParseAttrib)     $v6b57fe9b59a5af10383e888668b4ba7c['@attributes'] = $this->getAttributeList($v63eac7c6b49b939dc44db8259b0420af);$v6b57fe9b59a5af10383e888668b4ba7c['@value'] = $v63eac7c6b49b939dc44db8259b0420af->nodeValue;$v04a3e77753d77649469d0893d04a0fb1[$v63eac7c6b49b939dc44db8259b0420af->nodeName][] = $v6b57fe9b59a5af10383e888668b4ba7c;}return $v04a3e77753d77649469d0893d04a0fb1;}private function getAttributeList($_oNode) {$v7afec742bd9e0ffe1c577d6f355dd513 = array();if(!is_object($_oNode->attributes)) {return Array();}if($_oNode->attributes->length > 0)    foreach($_oNode->attributes as $vb1fac834129c75a8ce9601011f17cca1)   $v7afec742bd9e0ffe1c577d6f355dd513[$vb1fac834129c75a8ce9601011f17cca1->nodeName] = $vb1fac834129c75a8ce9601011f17cca1->nodeValue;return $v7afec742bd9e0ffe1c577d6f355dd513;}}class ElementProxy {private $iDescriptor  = false;private $oDocument    = NULL;private $oElementNode = NULL;private $oParentProxy = NULL;private $isValid      = false;private $sConvAttrib  = false;private $node_type = NULL;public function __construct($_oDocument, $_oElementNode, $_oParentProxy = NULL, $_sConvAttr = false) {if(is_object($_oDocument)&&is_object($_oElementNode)) $this->isValid = true;$this->oDocument    = $_oDocument;$this->oElementNode = $_oElementNode;$this->oParentProxy = $_oParentProxy;$this->sConvAttrib  = $_sConvAttr;if($this->oParentProxy && $this->iDescriptor === false)            $this->iDescriptor  = $this->oParentProxy->registerElement( $this );}public function __destruct() {if($this->oParentProxy && $this->iDescriptor !== false)            $this->oParentProxy->unregisterElement($this->iDescriptor);}public function __get($_sAttibuteName) {return $this->getAttribute($_sAttibuteName);}public function getAttribute($_sAttibuteName) {if(!$this->isValid) return false;$v092489629e98122acf7751b51871ff80 = $this->oElementNode->attributes->getNamedItem($_sAttibuteName);if($v092489629e98122acf7751b51871ff80)            return $v092489629e98122acf7751b51871ff80->nodeValue;else            return "";}public function __set($_sAttributeName, $_AttributeValue) {$this->setAttribute($_sAttributeName, $_AttributeValue);}public function setAttribute($_sAttributeName, $_AttributeValue) {if(!$this->isValid) return false;if($this->oParentProxy) $this->oParentProxy->getLock();if($this->oElementNode->hasAttribute($_sAttributeName)) {$this->oElementNode->attributes->getNamedItem($_sAttributeName)->nodeValue = $_AttributeValue;}else {$v092489629e98122acf7751b51871ff80 = $this->oDocument->createAttribute($_sAttributeName);$v092489629e98122acf7751b51871ff80->nodeValue = $_AttributeValue;$this->oElementNode->appendChild($v092489629e98122acf7751b51871ff80);}}public function getName() {if(!$this->isValid) return false;return $this->oElementNode->nodeName;}public function getValue() {if(!$this->isValid) return false;return $this->oElementNode->nodeValue;}public function setValue($_NewValue) {if(!$this->isValid) return false;if($this->oParentProxy) $this->oParentProxy->getLock();while($this->oElementNode->childNodes->length) {$this->oElementNode->removeChild( $this->oElementNode->childNodes->item(0) );}$vad60bb3f28ba5963c995c2e9500d6e1e = $this->oElementNode->ownerDocument->createCDATASection($_NewValue);$this->oElementNode->appendChild($vad60bb3f28ba5963c995c2e9500d6e1e);}public function getAttributesCount() {if(!$this->isValid) return false;return $this->oElementNode->attributes->length;}public function getAttributesList() {if(!$this->isValid) return false;$vb258acb7138dd6caa36ea7108040bc99  = array();$v2fa47f7c65fec19cc163b195725e3844 = $this->oElementNode->attributes->length;for($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<$v2fa47f7c65fec19cc163b195725e3844;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v092489629e98122acf7751b51871ff80 = $this->oElementNode->attributes->item($v865c0c0b4ab0e063e5caa3387c1a8741);$vb258acb7138dd6caa36ea7108040bc99[$v092489629e98122acf7751b51871ff80->nodeName] = $v092489629e98122acf7751b51871ff80->nodeValue;}return $vb258acb7138dd6caa36ea7108040bc99;}public function Remove() {if(!$this->isValid) return false;if($this->oParentProxy) $this->oParentProxy->getLock();$vad4c1c88437f1c3ced8e0f0725ceea0e = $this->oElementNode->parentNode;$vad4c1c88437f1c3ced8e0f0725ceea0e->removeChild($this->oElementNode);}public function getChildCount() {if(!$this->isValid) return false;$vb98a3646c9f6949a53366357ee3284a1 = new DOMXPath($this->oDocument);return $vb98a3646c9f6949a53366357ee3284a1->evaluate("descendant::*", $this->oElementNode)->length;}public function getChild($_iNumber, $_sName=""){if(!$this->isValid) return false;if(($_sName == "")||($_sName==NULL)) $_sName = "*";$vb98a3646c9f6949a53366357ee3284a1 = new DOMXPath($this->oDocument);return new ElementProxy($this->oDocument,                                 $vb98a3646c9f6949a53366357ee3284a1->evaluate("descendant::".$_sName."[".$_iNumber."]", $this->oElementNode)->item(0),                                $this->oParentProxy);}public function getParent() {return new ElementProxy($this->oDocument, $this->oElementNode->parentNode, $this->oParentProxy);}public function addChild($_sName) {if(!$this->isValid) return false;if($this->oParentProxy) $this->oParentProxy->getLock();$v40798c648aa215ab60a0be13aaec99fc = $this->oDocument->createElement($_sName);$this->oElementNode->appendChild($v40798c648aa215ab60a0be13aaec99fc);return new ElementProxy($this->oDocument, $v40798c648aa215ab60a0be13aaec99fc, $this->oParentProxy);}public function cloneSelf($_bDeep = false) {if(!$this->isValid) return false;if($this->oParentProxy) $this->oParentProxy->getLock();$v40798c648aa215ab60a0be13aaec99fc = $this->oElementNode->cloneNode($_bDeep);$this->oElementNode->parentNode->appendChild($v40798c648aa215ab60a0be13aaec99fc);return new ElementProxy($this->oDocument, $v40798c648aa215ab60a0be13aaec99fc, $this->oParentProxy);}public function setToStringAttribute($_sName) {$this->sConvAttrib = $_sName;}public function __toString() {if($this->sConvAttrib === false) {$vdccc8c8d061984a56d899361b4934477   = '<' . $this->getName();$v7afec742bd9e0ffe1c577d6f355dd513 = $this->getAttributesList();if(!empty($v7afec742bd9e0ffe1c577d6f355dd513))            foreach($v7afec742bd9e0ffe1c577d6f355dd513 as $vfc19ae0e7cb9076cc4077381bbe0b168 => $v3288421a9d18689376a59ae6a38cd186)                $vdccc8c8d061984a56d899361b4934477 .= ' ' . $vfc19ae0e7cb9076cc4077381bbe0b168 . '="' . $v3288421a9d18689376a59ae6a38cd186 . '"';$v3288421a9d18689376a59ae6a38cd186    = $this->getValue();if(strlen($v3288421a9d18689376a59ae6a38cd186))                $vdccc8c8d061984a56d899361b4934477 .= '>' . $v3288421a9d18689376a59ae6a38cd186 . '</' . $this->getName() . '>';else                $vdccc8c8d061984a56d899361b4934477 .= ' />';return $vdccc8c8d061984a56d899361b4934477;}if($this->sConvAttrib == '#text' || strlen($this->sConvAttrib) == 0) {return $this->getValue();}else {return $this->getAttribute($this->sConvAttrib);}}public function exists() {return $this->isValid;}public function valid() {return $this->isValid;}public function restore(DOMDocument $_oDocument) {$vbeebfd51d771de35c59fbdc719c81181             = self::getXPath( $this->oElementNode );$this->oDocument    = $_oDocument;$v7921a282c0085abbb11253ceaa4a6475       = new DOMXPath( $this->oDocument );$vadf9fa5dcd5317dc5c9c8e250c028872          = $v7921a282c0085abbb11253ceaa4a6475->evaluate( $vbeebfd51d771de35c59fbdc719c81181 );if($vadf9fa5dcd5317dc5c9c8e250c028872->length == 0) return $this->isValid = false;$this->oElementNode = $vadf9fa5dcd5317dc5c9c8e250c028872->item(0);if(is_object($_oDocument)&&is_object($_oElementNode)) {$this->isValid = true;}else {$this->isValid = false;}return $this->isValid;}private static function getXPath(DOMNode $_oNode) {switch($_oNode->nodeType) {case XML_ELEMENT_NODE:                $vdccc8c8d061984a56d899361b4934477 = (($_oNode->parentNode) ? self::getXPath($_oNode->parentNode) : '' ) . '/' . $_oNode->nodeName;$vebb9639568218ed404aa24c55d7510c2 = $_oNode->attributes->length;if($vebb9639568218ed404aa24c55d7510c2) $vdccc8c8d061984a56d899361b4934477 .= '[';for($v865c0c0b4ab0e063e5caa3387c1a8741=0;$v865c0c0b4ab0e063e5caa3387c1a8741<$vebb9639568218ed404aa24c55d7510c2;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v092489629e98122acf7751b51871ff80 = $_oNode->attributes->item($v865c0c0b4ab0e063e5caa3387c1a8741);$vdccc8c8d061984a56d899361b4934477 .= (($v865c0c0b4ab0e063e5caa3387c1a8741>0)?' and ':'') . $v092489629e98122acf7751b51871ff80->nodeName . '="' . $v092489629e98122acf7751b51871ff80->nodeValue . '"';}if($vebb9639568218ed404aa24c55d7510c2) $vdccc8c8d061984a56d899361b4934477 .= ']';return $vdccc8c8d061984a56d899361b4934477;break;default:                return '';}return '';}}interface iSingleton {public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL);};abstract class singleton {private static $instances = Array();abstract protected function __construct();public static function getInstance($v4a8a08f09d37b73795649038408b5f33) {if (!isset(singleton::$instances[$v4a8a08f09d37b73795649038408b5f33])) {singleton::$instances[$v4a8a08f09d37b73795649038408b5f33] = new $v4a8a08f09d37b73795649038408b5f33;}return singleton::$instances[$v4a8a08f09d37b73795649038408b5f33];}public function __clone() {throw new coreException('Singletone clonning is not permitted. Just becase it\'s non-sense.');}protected function disableCache() {if(!defined('MYSQL_DISABLE_CACHE')) {define('MYSQL_DISABLE_CACHE', '1');}}protected function translateLabel($vd304ba20e96d87411588eeabac850e34) {$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(substr($vd304ba20e96d87411588eeabac850e34, 0, strlen($v851f5ac9941d720844d143ed9cfcf60a)) == $v851f5ac9941d720844d143ed9cfcf60a) {$v341be97d9aff90c9978347f66f945b77 = getLabel(substr($vd304ba20e96d87411588eeabac850e34, strlen($v851f5ac9941d720844d143ed9cfcf60a)));}else {$v341be97d9aff90c9978347f66f945b77 = getLabel($vd304ba20e96d87411588eeabac850e34);}return (is_null($v341be97d9aff90c9978347f66f945b77)) ? $vd304ba20e96d87411588eeabac850e34 : $v341be97d9aff90c9978347f66f945b77;}};interface iUmiEntinty {public function getId();public function commit();public function update();public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21);};abstract class umiEntinty {protected $id, $is_updated = false;protected $bNeedUpdateCache = false;public function __construct($vb80bb7740288fda1f201890375a60c8f, $vf1965a857bc285d26fe22023aa5ab50d = false) {$this->setId($vb80bb7740288fda1f201890375a60c8f);$this->is_updated = false;if($this->loadInfo($vf1965a857bc285d26fe22023aa5ab50d) === false) {throw new privateException("Failed to load info for {$this->store_type} with id {$vb80bb7740288fda1f201890375a60c8f}");}}public function __clone() {throw new coreException('umiEntinty must not be cloned');}public function __destruct() {if ($this->is_updated) {$this->save();$this->setIsUpdated(false);$this->updateCache();}elseif ($this->bNeedUpdateCache) {$this->updateCache();}}public function getId() {return $this->id;}protected function setId($vb80bb7740288fda1f201890375a60c8f) {$this->id = (int) $vb80bb7740288fda1f201890375a60c8f;}public function getIsUpdated() {return $this->is_updated;}public function setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f = true) {$this->is_updated      = (bool) $v50e544b8aa9b48fae6d78fb7574d402f;$this->bNeedUpdateCache = $this->is_updated;}abstract protected function loadInfo();abstract protected function save();public function commit() {if ($this->is_updated) {$this->disableCache();$v9b207167e5381c47682c6b4f58a623fb = $this->save();if (cacheFrontend::getInstance()->getIsConnected()) {$this->update();$this->updateCache();}else {$this->setIsUpdated(false);}return $v9b207167e5381c47682c6b4f58a623fb;}else {return false;}}public function update() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadInfo();$this->setIsUpdated(false);return $v9b207167e5381c47682c6b4f58a623fb;}public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = mysql_real_escape_string($vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function updateCache() {cacheFrontend::getInstance()->save($this, $this->store_type);}protected function disableCache() {if(!defined('MYSQL_DISABLE_CACHE')) {if(get_class($this) === "umiObjectProperty") {return;}define('MYSQL_DISABLE_CACHE', '1');}}protected function translateLabel($vd304ba20e96d87411588eeabac850e34) {$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(substr($vd304ba20e96d87411588eeabac850e34, 0, strlen($v851f5ac9941d720844d143ed9cfcf60a)) == $v851f5ac9941d720844d143ed9cfcf60a) {$v341be97d9aff90c9978347f66f945b77 = getLabel(substr($vd304ba20e96d87411588eeabac850e34, strlen($v851f5ac9941d720844d143ed9cfcf60a)));}else {$v341be97d9aff90c9978347f66f945b77 = getLabel($vd304ba20e96d87411588eeabac850e34);}return (is_null($v341be97d9aff90c9978347f66f945b77)) ? $vd304ba20e96d87411588eeabac850e34 : $v341be97d9aff90c9978347f66f945b77;}protected function translateI18n($v341be97d9aff90c9978347f66f945b77, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {$vd304ba20e96d87411588eeabac850e34 = getI18n($v341be97d9aff90c9978347f66f945b77, $v240bf022e685b0ee30ad9fe9e1fb5d5b);return (is_null($vd304ba20e96d87411588eeabac850e34)) ? $v341be97d9aff90c9978347f66f945b77 : $vd304ba20e96d87411588eeabac850e34;}};interface iRegedit {public function getKey($vd4c18838d606531e28b9f694e066b003, $v5809e03a3657bacd238321e736b9e85d = 0);public function getVal($vd4c18838d606531e28b9f694e066b003);public function setVar($vd4c18838d606531e28b9f694e066b003, $v2063c1608d6e0baf80249c42e2be5804);public function setVal($vd4c18838d606531e28b9f694e066b003, $v2063c1608d6e0baf80249c42e2be5804);public function delVar($vd4c18838d606531e28b9f694e066b003);public function getList($vd4c18838d606531e28b9f694e066b003);};class regedit extends singleton implements iRegedit {public $cacheFolder = "cache/";private $useFileCache;private $needUpdate = false;private $is_updated = false;private $cache = Array();private function serPath($v32ccc0cae34a3c09a6d4f238c7482652) {$v32ccc0cae34a3c09a6d4f238c7482652 = strtolower($v32ccc0cae34a3c09a6d4f238c7482652);if(substr($v32ccc0cae34a3c09a6d4f238c7482652, 0, 2) != "//")   $v32ccc0cae34a3c09a6d4f238c7482652 = "//" . $v32ccc0cae34a3c09a6d4f238c7482652;}protected function __construct($v9653ebde680c960d8a380931dee94ce7 = true) {$this->useFileCache = $v9653ebde680c960d8a380931dee94ce7;$this->cacheFolder = CURRENT_WORKING_DIR . '/' . $this->cacheFolder;$this->readCache();$v4d9d6c17eeae2754c9b49171261b93bd = "./files/umisubscribers.csv";if(file_exists($v4d9d6c17eeae2754c9b49171261b93bd)) {if(is_writable($v4d9d6c17eeae2754c9b49171261b93bd)) {unlink($v4d9d6c17eeae2754c9b49171261b93bd);}}$this->removeStatModule();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function __destruct() {$this->saveCache();}public function __toString() {return "umi.__regedit";}public function getKey($v32ccc0cae34a3c09a6d4f238c7482652, $v5fed46abf8a40a5518f17807286700eb = 0) {$this->serPath($v32ccc0cae34a3c09a6d4f238c7482652);if(substr($v32ccc0cae34a3c09a6d4f238c7482652, 0, 2) == "//") $v32ccc0cae34a3c09a6d4f238c7482652 = substr($v32ccc0cae34a3c09a6d4f238c7482652, 2, strlen($v32ccc0cae34a3c09a6d4f238c7482652) - 2);if(isset($this->cache['key://' . $v32ccc0cae34a3c09a6d4f238c7482652]))   return $this->cache['key://' . $v32ccc0cae34a3c09a6d4f238c7482652];$v1952a01898073d1e561b9b4f2e42cbd7 = split("/", $v32ccc0cae34a3c09a6d4f238c7482652);$v3c6e0b8a9c15224a8228b9a98ca1531d = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach($v1952a01898073d1e561b9b4f2e42cbd7 as $v9c95319bf274672d6eae7eb97c3dfda5) {if(sizeof($v1952a01898073d1e561b9b4f2e42cbd7) < ++$v865c0c0b4ab0e063e5caa3387c1a8741 + $v5fed46abf8a40a5518f17807286700eb) {$this->need_update = true;return $this->cache['key://' . $v32ccc0cae34a3c09a6d4f238c7482652] = $v3c6e0b8a9c15224a8228b9a98ca1531d;}$v3c6e0b8a9c15224a8228b9a98ca1531d = XMLFactory::getInstance()->getProxy('registry.xml')->getAttributeValue('//key[@rel='.$v3c6e0b8a9c15224a8228b9a98ca1531d.' and @var="'.($v9c95319bf274672d6eae7eb97c3dfda5).'"]', 'id');if($v3c6e0b8a9c15224a8228b9a98ca1531d === false) {$this->need_update = true;return false;}}$this->need_update = true;if($v3c6e0b8a9c15224a8228b9a98ca1531d) {$this->cache['key://' . $v32ccc0cae34a3c09a6d4f238c7482652] = $v3c6e0b8a9c15224a8228b9a98ca1531d;}return $v3c6e0b8a9c15224a8228b9a98ca1531d;}public function getVal($v32ccc0cae34a3c09a6d4f238c7482652) {$this->serPath($v32ccc0cae34a3c09a6d4f238c7482652);if(isset($this->cache[$v32ccc0cae34a3c09a6d4f238c7482652])) {return $v1fb1a060534164a18a99494122825190 = $this->cache[$v32ccc0cae34a3c09a6d4f238c7482652];}$v30f691262e9d6bd7b23c0bfb1d4b2040 = (int) $this->getKey($v32ccc0cae34a3c09a6d4f238c7482652);if($v30f691262e9d6bd7b23c0bfb1d4b2040 == 0)   return false;$this->needUpdate = true;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = XMLFactory::getInstance()->getProxy('registry.xml')->getAttributeValue('//key[@id='.$v30f691262e9d6bd7b23c0bfb1d4b2040.']','val');if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false) return false;if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = "";}return $this->cache[$v32ccc0cae34a3c09a6d4f238c7482652] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}public function getList($v32ccc0cae34a3c09a6d4f238c7482652) {$this->serPath($v32ccc0cae34a3c09a6d4f238c7482652);if(isset($this->cache['list:' . $v32ccc0cae34a3c09a6d4f238c7482652])) {return $this->cache['list:' . $v32ccc0cae34a3c09a6d4f238c7482652];}if($v30f691262e9d6bd7b23c0bfb1d4b2040 = (int) $this->getKey($v32ccc0cae34a3c09a6d4f238c7482652)) {$v9b207167e5381c47682c6b4f58a623fb = Array();$v0fea6a13c52b4d4725368f24b045ca84 = $this->cache;$ve26e1ef304a83aa9247a7074c0d9246e = XMLFactory::getInstance()->getProxy('registry.xml')->getElementsArray('//key[@rel='.$v30f691262e9d6bd7b23c0bfb1d4b2040.']');foreach($ve26e1ef304a83aa9247a7074c0d9246e as $v897356954c2cd3d41b221e3f24f99bba) {$vb2145aac704ce76dbe1ac7adac535b23 = $v897356954c2cd3d41b221e3f24f99bba->getAttribute('var');$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v897356954c2cd3d41b221e3f24f99bba->getAttribute('val');$v0fea6a13c52b4d4725368f24b045ca84[$v32ccc0cae34a3c09a6d4f238c7482652 . "/" . $vb2145aac704ce76dbe1ac7adac535b23] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$v9b207167e5381c47682c6b4f58a623fb[] = Array($vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->cache['list:' . $v32ccc0cae34a3c09a6d4f238c7482652] = $v9b207167e5381c47682c6b4f58a623fb;$this->needUpdate = true;return $v9b207167e5381c47682c6b4f58a623fb;}else   return false;}public function setVar($v32ccc0cae34a3c09a6d4f238c7482652, $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$this->serPath($v32ccc0cae34a3c09a6d4f238c7482652);$this->is_updated = true;$this->needUpdate = true;$this->cache = Array();unset($this->cache[$v32ccc0cae34a3c09a6d4f238c7482652]);unset($this->cache['list:' . $v32ccc0cae34a3c09a6d4f238c7482652]);$v41df293c1a158f27e42eae1544dce564 = preg_replace("/(.*)\/[A-z0-9]*/i", "\\1", $v32ccc0cae34a3c09a6d4f238c7482652);unset($this->cache['list:' . $v41df293c1a158f27e42eae1544dce564]);$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('registry.xml');if($v30f691262e9d6bd7b23c0bfb1d4b2040 = (int) $this->getKey($v32ccc0cae34a3c09a6d4f238c7482652)) {$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/registry/key[@id='.$v30f691262e9d6bd7b23c0bfb1d4b2040.']', 'val', str_replace("'", "\\'", $v3a6d0284e743dc4a9b86f97d6dd1a3bf) );return true;}else {$v30f691262e9d6bd7b23c0bfb1d4b2040 = (int) $this->getKey($v32ccc0cae34a3c09a6d4f238c7482652, 1);$v1952a01898073d1e561b9b4f2e42cbd7 = split("/", $v32ccc0cae34a3c09a6d4f238c7482652);$vb2145aac704ce76dbe1ac7adac535b23 = array_pop($v1952a01898073d1e561b9b4f2e42cbd7);$vb9ee5c126eb9ab912ea511cfa6ee80f7 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/registry/key[not(@id <= preceding-sibling::key/@id) and not(@id <=following-sibling::key/@id)]','id') + 1;$vd1cc33a86435555a7bdf88a21077316d     = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/registry', 'key', '');$vd1cc33a86435555a7bdf88a21077316d->setAttribute('id', $vb9ee5c126eb9ab912ea511cfa6ee80f7);$vd1cc33a86435555a7bdf88a21077316d->setAttribute('var', ($vb2145aac704ce76dbe1ac7adac535b23) );$vd1cc33a86435555a7bdf88a21077316d->setAttribute('val', str_replace("'", "\\'", ($v3a6d0284e743dc4a9b86f97d6dd1a3bf)));$vd1cc33a86435555a7bdf88a21077316d->setAttribute('rel', $v30f691262e9d6bd7b23c0bfb1d4b2040);return true;}}public function delVar($v32ccc0cae34a3c09a6d4f238c7482652) {$this->serPath($v32ccc0cae34a3c09a6d4f238c7482652);unset($this->cache[$v32ccc0cae34a3c09a6d4f238c7482652]);unset($this->cache['key:' . $v32ccc0cae34a3c09a6d4f238c7482652]);unset($this->cache['list:' . $v32ccc0cae34a3c09a6d4f238c7482652]);$v41df293c1a158f27e42eae1544dce564 = preg_replace("/(.*)\/[A-z0-9]*/i", "\\1", $v32ccc0cae34a3c09a6d4f238c7482652);unset($this->cache['list:' . $v41df293c1a158f27e42eae1544dce564]);$this->needUpdate = true;if($v30f691262e9d6bd7b23c0bfb1d4b2040 = (int) $this->getKey($v32ccc0cae34a3c09a6d4f238c7482652)) {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('registry.xml');$v48b8e11252203b3b99c58dd5a07776c1->removeElement('//key[@id='.$v30f691262e9d6bd7b23c0bfb1d4b2040.']');$v48b8e11252203b3b99c58dd5a07776c1->removeElement('//key[@rel='.$v30f691262e9d6bd7b23c0bfb1d4b2040.']');return true;}else   return false;}public function saveCache() {if($this->is_updated) {$v6a2a431fe8b621037ea949531c28551d = $this->cacheFolder . "reg";if(file_exists($v6a2a431fe8b621037ea949531c28551d)) {unlink($v6a2a431fe8b621037ea949531c28551d);}return false;}if((!$this->useFileCache || !$this->needUpdate) && file_exists($this->cacheFolder . "reg"))   return false;@file_put_contents($this->cacheFolder . "reg", serialize($this->cache));@chmod($this->cacheFolder . "reg", 0777);}public function readCache() {if(!$this->useFileCache)   return false;if(!file_exists($this->cacheFolder . "reg"))   return false;$this->cache = unserialize(file_get_contents($this->cacheFolder . "reg"));}final public static function checkSomething($v0cc175b9c0f1b6a831c399e269772661, $v92eb5ffee6ae2fec3ad71c777531578f) {$vd06146603244a6f9c3a69f88c7e4ac2e = 3600*24*45;if(($_SERVER['HTTP_HOST'] == 'localhost' || $_SERVER['HTTP_HOST'] == 'subdomain.localhost') && $_SERVER['SERVER_ADDR'] == '127.0.0.1') {return true;}if(substr($_SERVER['HTTP_HOST'], strlen($_SERVER['HTTP_HOST']) - 4, 4) == "cvs5") {return true;}foreach($v92eb5ffee6ae2fec3ad71c777531578f as $v0f4153145310ca3a80263d772ccd01d4 => $v0a3d72134fb3d6c024db4c510bc1605b) {$vf1825f6bb156dc954f46bde74ca2f841 = (bool) (substr($v0cc175b9c0f1b6a831c399e269772661, 12, strlen($v0cc175b9c0f1b6a831c399e269772661) - 12) == $v0a3d72134fb3d6c024db4c510bc1605b);if($vf1825f6bb156dc954f46bde74ca2f841 === true) {define("CURRENT_VERSION_LINE", $v0f4153145310ca3a80263d772ccd01d4);if($v0f4153145310ca3a80263d772ccd01d4 == "trial") {$vb16a626598674ad426e4b885017906d7 = filectime(__FILE__);$v95f1cf7766ccd7c57cede3b85f3a5685 = time();if(($v95f1cf7766ccd7c57cede3b85f3a5685 - $vb16a626598674ad426e4b885017906d7) > $vd06146603244a6f9c3a69f88c7e4ac2e){include "./errors/trial_expired.html";exit();}}return true;}}}public function setVal($vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {return $this->setVar($vb2145aac704ce76dbe1ac7adac535b23, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}protected function removeStatModule() {if($this->getVal("//modules/stat")) {$this->delVar("//modules/stat");}}};interface iSearchModel {public function runSearch($v597a51f04d341eba4ca965899acc10b3, $vb393233f792f2e0472c964ea8ddbd1f5 = NULL);public function getContext($v7552cd149af7495ee7d8225974e50f80, $v597a51f04d341eba4ca965899acc10b3);public function getIndexPages();public function getIndexWords();public function getIndexWordsUniq();public function getIndexLast();public function truncate_index();public function index_all($vaa9f73eea60a006820d0f8768bc8a3fc = false);public function index_item($v7552cd149af7495ee7d8225974e50f80);public function index_items($v7552cd149af7495ee7d8225974e50f80);public function unindex_items($v7552cd149af7495ee7d8225974e50f80);};class searchModel extends singleton implements iSingleton, iSearchModel {public function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function index_all($vaa9f73eea60a006820d0f8768bc8a3fc = false) {$vfbb44b4487415b134bce9c790a27fe5e = 0;$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element');foreach($v654cafcea1dd8607f71dbea324fdb96a as $v231afe47f3f37d3808096b36c28b4ded) {$v7057e8409c7c531a1a6e9ac3df4ed549 = $v231afe47f3f37d3808096b36c28b4ded->id;$v3e04dc2abd929a9d02e2e0fa41d24bf9 = $v231afe47f3f37d3808096b36c28b4ded->updatetime;if(!$this->elementIsReindexed($v7057e8409c7c531a1a6e9ac3df4ed549, $v3e04dc2abd929a9d02e2e0fa41d24bf9)) {$this->index_item($v7057e8409c7c531a1a6e9ac3df4ed549, true);++$vfbb44b4487415b134bce9c790a27fe5e;if(($vaa9f73eea60a006820d0f8768bc8a3fc !== false) && (--$vaa9f73eea60a006820d0f8768bc8a3fc == 0)) {break;}}}return $vfbb44b4487415b134bce9c790a27fe5e;}public function index_item($v7057e8409c7c531a1a6e9ac3df4ed549, $v887c6b9b516fdd344e1f03a0786c90e8 = false) {if(!$v887c6b9b516fdd344e1f03a0786c90e8) {if(getServer("HTTP_HOST") == "localhost") {return false;}}if(defined("UMICMS_CLI_MODE")) {return false;}$vec5463c0e508eaa43548444d87ab2e83 = $this->parseItem($v7057e8409c7c531a1a6e9ac3df4ed549);}public function elementIsReindexed($v7057e8409c7c531a1a6e9ac3df4ed549, $v3e04dc2abd929a9d02e2e0fa41d24bf9) {return true;}public function parseItem($v7057e8409c7c531a1a6e9ac3df4ed549) {return true;}public function buildIndexImage($v9d1be7b20c9b43741bbda33a93ae2597) {return array();}public static function splitString($v341be97d9aff90c9978347f66f945b77) {return null;}public function updateSearchIndex($v7057e8409c7c531a1a6e9ac3df4ed549, $v9f1c8757350ffe06fffc7cc4b03150af) {return true;}public static function getWordId($vc47d187067c6cf953245f128b5fde62a) {return 0;}public function getIndexPages() {return 0;}public function getIndexWords() {return 0;}public function getIndexWordsUniq() {return 0;}public function getIndexLast() {return 0;}public function truncate_index () {return true;}public function runSearch($v341be97d9aff90c9978347f66f945b77, $vb934cdf74d9a078a5654bd8b129741d9 = NULL, $v06eba0c81e2c853a3850d7d920570edb = NULL) {return array();}public function buildQueries($v89759e1284e2479b991d2669de104942, $vb934cdf74d9a078a5654bd8b129741d9 = NULL, $v06eba0c81e2c853a3850d7d920570edb = NULL) {return null;}public function prepareContext($v7057e8409c7c531a1a6e9ac3df4ed549) {return null;}public function getContext($v7057e8409c7c531a1a6e9ac3df4ed549, $va3dbaf37ab12f39c3cd19c0f04a360a0) {return null;}public function unindex_items($v7057e8409c7c531a1a6e9ac3df4ed549) {return true;}public function index_items($v7057e8409c7c531a1a6e9ac3df4ed549) {return true;}private function expandArray($v47c80780ab608cc046f2a6e6f071feb6, &$result) {return true;}};interface iPermissionsCollection {public function getOwnerType($vb0ab4f7791b60b1e8ea01057b77873b0);public function makeSqlWhere($vb0ab4f7791b60b1e8ea01057b77873b0);public function isAllowedModule($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5);public function isAllowedMethod($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);public function isAllowedObject($vb0ab4f7791b60b1e8ea01057b77873b0, $v16b2b26000987faccb260b9d39df1269);public function isSv($v8e44f0089b076e18a718eb9ca3d94674 = false);public function isAdmin($v8e44f0089b076e18a718eb9ca3d94674 = false);public function isOwnerOfObject($v16b2b26000987faccb260b9d39df1269, $v8e44f0089b076e18a718eb9ca3d94674);public function resetElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vb0ab4f7791b60b1e8ea01057b77873b0 = false);public function resetModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function setElementPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d);public function setModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = false);public function setDefaultPermissions($v7552cd149af7495ee7d8225974e50f80);public function hasUserPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function copyHierarchyPermissions($vd716f7168cd6371e0d98414d7951f602, $v804b661fe297600e2dbf54048bc56753);public function getUserId();public function setAllElementsDefaultPermissions($vb0ab4f7791b60b1e8ea01057b77873b0);public function getUsersByElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1);public function pushElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1);};class permissionsCollection extends singleton implements iSingleton, iPermissionsCollection {protected $methodsPermissions = Array(), $tempElementPermissions = Array();private   $user_id = 0;public function __construct() {$v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule("users");if($v9bc65c2abec141778ffaa729489f3e87 instanceof def_module) {$this->user_id = $v9bc65c2abec141778ffaa729489f3e87->user_id;}}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getOwnerType($v5e7b19364b8de2dedd3aa48cf62706e3) {if($v41064781857b29db62b319b579676852 = umiObjectsCollection::getInstance()->getObject($v5e7b19364b8de2dedd3aa48cf62706e3)) {if($v1471e4e05a4db95d353cc867fe317314 = $v41064781857b29db62b319b579676852->getPropByName("groups")) {return $v1471e4e05a4db95d353cc867fe317314->getValue();}else {return $v5e7b19364b8de2dedd3aa48cf62706e3;}}else {return false;}}public function makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3])) return $v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3];$v72122ce96bfec66e2396d2e25225d70a = $this->getOwnerType($v5e7b19364b8de2dedd3aa48cf62706e3);if(is_numeric($v72122ce96bfec66e2396d2e25225d70a)) {$v72122ce96bfec66e2396d2e25225d70a = Array($v72122ce96bfec66e2396d2e25225d70a);}if(!in_array(2373, $v72122ce96bfec66e2396d2e25225d70a)) {$v72122ce96bfec66e2396d2e25225d70a[] = 2373;}if(is_numeric($v72122ce96bfec66e2396d2e25225d70a)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "(@owner=".$v5e7b19364b8de2dedd3aa48cf62706e3.")";}else {$v72122ce96bfec66e2396d2e25225d70a[] = $v5e7b19364b8de2dedd3aa48cf62706e3;$vac5c74b64b4b8352ef2f181affb5ac2a = "";$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v72122ce96bfec66e2396d2e25225d70a);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "@owner=".$v72122ce96bfec66e2396d2e25225d70a[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v865c0c0b4ab0e063e5caa3387c1a8741 < ($v7dabf5c198b0bab2eaa42bb03a113e55 - 1)) {$vac5c74b64b4b8352ef2f181affb5ac2a .= " or ";}}$vac5c74b64b4b8352ef2f181affb5ac2a = "({$vac5c74b64b4b8352ef2f181affb5ac2a})";}return $v0fea6a13c52b4d4725368f24b045ca84[$v5e7b19364b8de2dedd3aa48cf62706e3] = $vac5c74b64b4b8352ef2f181affb5ac2a;}public function isAllowedModule($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5) {if($v5e7b19364b8de2dedd3aa48cf62706e3 == false) {$v5e7b19364b8de2dedd3aa48cf62706e3 = $this->getUserId();}if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) return true;$v22884db148f0ffb0d830ba431102b0b5    = ($v22884db148f0ffb0d830ba431102b0b5);if(substr($v22884db148f0ffb0d830ba431102b0b5, 0, 7) == "macros_") return false;$vb394126a0e52e75f1e3d535d0fb0d33c = XMLFactory::getInstance()->getProxy('mperms/'.$v5e7b19364b8de2dedd3aa48cf62706e3.'.xml')->getCount("/umi/mperms/perm[@module='".$v22884db148f0ffb0d830ba431102b0b5."' and @method='']");return (bool)($vb394126a0e52e75f1e3d535d0fb0d33c > 0);}public function isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {if($v22884db148f0ffb0d830ba431102b0b5 == "content" && $vea9f6aca279138c58f705c8d4cb4b8ce == "") return 1;if($v22884db148f0ffb0d830ba431102b0b5 == "config" && $vea9f6aca279138c58f705c8d4cb4b8ce == "menu") return 1;if($v22884db148f0ffb0d830ba431102b0b5 == "backup" && $vea9f6aca279138c58f705c8d4cb4b8ce == "backup_panel") return 1;if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) {return true;}$vea9f6aca279138c58f705c8d4cb4b8ce = $this->getBaseMethodName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);$vcb69789460f93042a787f8d250ca26dc = &$this->methodsPermissions;if(!isset($vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3]) || !is_array($vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3])) {$vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3] = Array();}$v0fea6a13c52b4d4725368f24b045ca84 = &$vcb69789460f93042a787f8d250ca26dc[$v5e7b19364b8de2dedd3aa48cf62706e3];if($v22884db148f0ffb0d830ba431102b0b5 == "backup" && $vea9f6aca279138c58f705c8d4cb4b8ce == "rollback") return true;if($v22884db148f0ffb0d830ba431102b0b5 == "config" && ($vea9f6aca279138c58f705c8d4cb4b8ce == "lang_list" || $vea9f6aca279138c58f705c8d4cb4b8ce == "lang_phrases")) return true;if($v22884db148f0ffb0d830ba431102b0b5 == "users" && ($vea9f6aca279138c58f705c8d4cb4b8ce == "auth" || $vea9f6aca279138c58f705c8d4cb4b8ce == "login_do" || $vea9f6aca279138c58f705c8d4cb4b8ce == "login")) return true;$v0a42907b589a309ad94f8874eacbc63f = $v22884db148f0ffb0d830ba431102b0b5;if(!array_key_exists($v0a42907b589a309ad94f8874eacbc63f, $v0fea6a13c52b4d4725368f24b045ca84)) {$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('mperms/'.$v5e7b19364b8de2dedd3aa48cf62706e3.'.xml')->getElementsArray("/umi/mperms/perm[@module='".$v22884db148f0ffb0d830ba431102b0b5."']");foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f][] = $v231afe47f3f37d3808096b36c28b4ded->method;}if($v5e7b19364b8de2dedd3aa48cf62706e3 != 2373) {$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('mperms/2373.xml')->getElementsArray("/umi/mperms/perm[@module='".$v22884db148f0ffb0d830ba431102b0b5."']");foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f][] = $v231afe47f3f37d3808096b36c28b4ded->method;}}}if(!isset($v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {return false;}if (in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f]) || in_array(strtolower($vea9f6aca279138c58f705c8d4cb4b8ce), $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {return true;}else {return false;}}public function isAllowedObject($v5e7b19364b8de2dedd3aa48cf62706e3, $vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;if($vaf31437ce61345f416579830a98c91e5 == 0) return Array(0, 0);if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) {return Array(true, true);}static $v0fea6a13c52b4d4725368f24b045ca84;if(!is_array($v0fea6a13c52b4d4725368f24b045ca84)) {$v0fea6a13c52b4d4725368f24b045ca84 = Array();}$v0a42907b589a309ad94f8874eacbc63f = $v5e7b19364b8de2dedd3aa48cf62706e3 . "." . $vaf31437ce61345f416579830a98c91e5;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {if(is_array($v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f];}}$v7a310d89a58d8189e31d766fb1fb745a = $this->makeSqlWhere($v5e7b19364b8de2dedd3aa48cf62706e3);$vc9e9a848920877e76685b2e4e76de38d = XMLFactory::getInstance()->getProxy('eperms/'.$vaf31437ce61345f416579830a98c91e5.'.xml')->getElementValue('/umi/eperms/perm['.$v7a310d89a58d8189e31d766fb1fb745a.']', true);$vc9e9a848920877e76685b2e4e76de38d = is_array($vc9e9a848920877e76685b2e4e76de38d)&&!empty($vc9e9a848920877e76685b2e4e76de38d) ? max( array_map('intval', $vc9e9a848920877e76685b2e4e76de38d) ) : 0;$v4b43b0aee35624cd95b910189b3dc231 = false;$ve1671797c52e15f763380b45e841ec32 = false;if($vc9e9a848920877e76685b2e4e76de38d >= 1) {$v4b43b0aee35624cd95b910189b3dc231 = true;}if($vc9e9a848920877e76685b2e4e76de38d >= 2) {$ve1671797c52e15f763380b45e841ec32 = true;}$v9b207167e5381c47682c6b4f58a623fb = Array($v4b43b0aee35624cd95b910189b3dc231, $ve1671797c52e15f763380b45e841ec32);$v0fea6a13c52b4d4725368f24b045ca84[$v0a42907b589a309ad94f8874eacbc63f] = $v9b207167e5381c47682c6b4f58a623fb;return $v9b207167e5381c47682c6b4f58a623fb;}public function isAllowedDomain($v5e7b19364b8de2dedd3aa48cf62706e3, $v662cbf1253ac7d8750ed9190c52163e5) {$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $v662cbf1253ac7d8750ed9190c52163e5;if($this->isSv($v5e7b19364b8de2dedd3aa48cf62706e3)) {return 1;}$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('mperms/'.$v5e7b19364b8de2dedd3aa48cf62706e3.'.xml')->getElementsArray("/umi/mperms/perm[@module='domain' and @method=".$v662cbf1253ac7d8750ed9190c52163e5."]");return count($v5bf8bee33eed7e4b21708827159ec8b4) > 0;}public function isSv($ve8701ad48ba05a91604e480dd60899a3 = false) {static $v1b747442de0fb075fcdc59af978fa41b;if($vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3)) {if($v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getPropByName("groups")) {if(in_array(15, $v1471e4e05a4db95d353cc867fe317314->getValue())) {$v1b747442de0fb075fcdc59af978fa41b = true;return true;}else {return false;}}else {return false;}}else {return false;}}public function isAdmin($ve8701ad48ba05a91604e480dd60899a3 = false) {static $vc60879c6b41321704ee88fbc7b9a73e4 = Array();if($ve8701ad48ba05a91604e480dd60899a3 === false) {$ve8701ad48ba05a91604e480dd60899a3 = $this->getUserId();}if(isset($vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3])) {return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3];}if($this->isSv($ve8701ad48ba05a91604e480dd60899a3)) {return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3] = true;}$v2817f701d5e1a1181e657251363295fd = XMLFactory::getInstance()->getProxy('mperms/'.$ve8701ad48ba05a91604e480dd60899a3.'.xml')->getCount("/umi/mperms/perm[@method='']");return $vc60879c6b41321704ee88fbc7b9a73e4[$ve8701ad48ba05a91604e480dd60899a3] = (bool) $v2817f701d5e1a1181e657251363295fd;}public function isOwnerOfObject($vaf31437ce61345f416579830a98c91e5, $ve8701ad48ba05a91604e480dd60899a3) {if($ve8701ad48ba05a91604e480dd60899a3 == $vaf31437ce61345f416579830a98c91e5) {return true;}else {$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($vaf31437ce61345f416579830a98c91e5);$v5e7b19364b8de2dedd3aa48cf62706e3 = $va8cfde6331bd59eb2ac96f8911c4b666->getOwnerId();if($v5e7b19364b8de2dedd3aa48cf62706e3 == 0 || $v5e7b19364b8de2dedd3aa48cf62706e3 == $ve8701ad48ba05a91604e480dd60899a3) {return true;}else {return false;}}}public function setDefaultPermissions($v7057e8409c7c531a1a6e9ac3df4ed549) {if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return false;}XMLFactory::createFile('eperms/'.$v7057e8409c7c531a1a6e9ac3df4ed549.'.xml', '<?xml	version="1.0" encoding="utf-8" ?><umi><eperms /></umi>');$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('eperms/'.$v7057e8409c7c531a1a6e9ac3df4ed549.'.xml', true);$v48b8e11252203b3b99c58dd5a07776c1->removeElement('/umi/eperms/perm');$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true);$v0715f6d9497f93911417c9c324265771 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v0715f6d9497f93911417c9c324265771);$v22884db148f0ffb0d830ba431102b0b5 = $vb946c44d711ade3b061653732977d043->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $vb946c44d711ade3b061653732977d043->getExt();$v94757cae63fd3e398c0811a976dd6bbe = umiObjectTypesCollection::getInstance()->getBaseType("users", "user");$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->setObjectTypeFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v94757cae63fd3e398c0811a976dd6bbe);$v31b536969506cd993ffe6c80f210b435 = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe)->getFieldId("groups");$v8be74552df93e31bbdd6b36ed74bdb6a->setPropertyFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addPropertyFilterIsNull($v31b536969506cd993ffe6c80f210b435);$v9bc65c2abec141778ffaa729489f3e87 = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);$v87306dd4235ed712ebc07fe169b76f83 = umiObjectTypesCollection::getInstance()->getBaseType("users", "users");$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->setObjectTypeFilter();$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v87306dd4235ed712ebc07fe169b76f83);$v1471e4e05a4db95d353cc867fe317314 = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);$v5891da2d64975cae48d175d1e001f5da = array_merge($v9bc65c2abec141778ffaa729489f3e87, $v1471e4e05a4db95d353cc867fe317314);$v5e7b19364b8de2dedd3aa48cf62706e3 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getOwnerId();if($v72122ce96bfec66e2396d2e25225d70a = umiObjectsCollection::getInstance()->getObject($v5e7b19364b8de2dedd3aa48cf62706e3)) {if($va8ba6ec990d9c7eeadb629f342dbab1e = $v72122ce96bfec66e2396d2e25225d70a->getValue("groups")) {$vd7be1bb48db472fbda8dbc2e05e98083 = $va8ba6ec990d9c7eeadb629f342dbab1e;}else {$vd7be1bb48db472fbda8dbc2e05e98083 = Array($v5e7b19364b8de2dedd3aa48cf62706e3);}}else {$vd7be1bb48db472fbda8dbc2e05e98083 = Array();}foreach($v5891da2d64975cae48d175d1e001f5da as $v8a0462e9b477e23253ef0cd29b0e7ab7) {if($v22884db148f0ffb0d830ba431102b0b5 == "content") $vea9f6aca279138c58f705c8d4cb4b8ce == "page";if($this->isAllowedMethod($v8a0462e9b477e23253ef0cd29b0e7ab7, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {if(in_array($v8a0462e9b477e23253ef0cd29b0e7ab7, $vd7be1bb48db472fbda8dbc2e05e98083) || $v8a0462e9b477e23253ef0cd29b0e7ab7 == SV_GROUP_ID) {$vc9e9a848920877e76685b2e4e76de38d = 2;}else {$vc9e9a848920877e76685b2e4e76de38d = 1;}$v9630200cdb590835f07f37b889a7e484    = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/eperms', 'perm', $vc9e9a848920877e76685b2e4e76de38d);$v9630200cdb590835f07f37b889a7e484->owner = $v8a0462e9b477e23253ef0cd29b0e7ab7;}}$v0a42907b589a309ad94f8874eacbc63f = $this->user_id . "." . $v7057e8409c7c531a1a6e9ac3df4ed549;cacheFrontend::getInstance()->saveSql($v0a42907b589a309ad94f8874eacbc63f, Array(true, true));}public function setDefaultElementPermissions(iUmiHierarchyElement $v8e2dcfd7e7e24b1ca76c1193f645902b, $v5e7b19364b8de2dedd3aa48cf62706e3) {$v22884db148f0ffb0d830ba431102b0b5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$vea9f6aca279138c58f705c8d4cb4b8ce = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();$vc9e9a848920877e76685b2e4e76de38d = 0;if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {$vc9e9a848920877e76685b2e4e76de38d = 1;}if($this->isAllowedMethod($v5e7b19364b8de2dedd3aa48cf62706e3, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce . ".edit")) {$vc9e9a848920877e76685b2e4e76de38d = 2;}$this->setElementPermissions($v5e7b19364b8de2dedd3aa48cf62706e3, $v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), $vc9e9a848920877e76685b2e4e76de38d);return $vc9e9a848920877e76685b2e4e76de38d;}public function resetElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vb0ab4f7791b60b1e8ea01057b77873b0 = false) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;if($vb0ab4f7791b60b1e8ea01057b77873b0 === false) {XMLFactory::getInstance()->getProxy('eperms/'.$v7552cd149af7495ee7d8225974e50f80.'.xml')->removeElement('/umi/eperms/perm');}else {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;XMLFactory::getInstance()->getProxy('eperms/'.$v7552cd149af7495ee7d8225974e50f80.'.xml')->removeElement('/umi/eperms/perm[@owner='.$vb0ab4f7791b60b1e8ea01057b77873b0.']');}}public function resetModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;XMLFactory::getInstance()->getProxy('mperms/'.$vb0ab4f7791b60b1e8ea01057b77873b0.'.xml')->removeElement('/umi/mperms/perm');return true;}public function setElementPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$vc9e9a848920877e76685b2e4e76de38d  = (int) $vc9e9a848920877e76685b2e4e76de38d;$v9630200cdb590835f07f37b889a7e484 = XMLFactory::getInstance()->getProxy('eperms/'.$v7552cd149af7495ee7d8225974e50f80.'.xml')->addElement('/umi/eperms', 'perm', $vc9e9a848920877e76685b2e4e76de38d);$v9630200cdb590835f07f37b889a7e484->owner = $vb0ab4f7791b60b1e8ea01057b77873b0;return true;}public function setAllowedDomain($v5e7b19364b8de2dedd3aa48cf62706e3, $v662cbf1253ac7d8750ed9190c52163e5, $vb394126a0e52e75f1e3d535d0fb0d33c = 1) {$v5e7b19364b8de2dedd3aa48cf62706e3 = (int) $v5e7b19364b8de2dedd3aa48cf62706e3;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $v662cbf1253ac7d8750ed9190c52163e5;$vb394126a0e52e75f1e3d535d0fb0d33c = (int) $vb394126a0e52e75f1e3d535d0fb0d33c;if ($vb394126a0e52e75f1e3d535d0fb0d33c) {$v9630200cdb590835f07f37b889a7e484 = XMLFactory::getInstance()->getProxy('mperms/'.$v5e7b19364b8de2dedd3aa48cf62706e3.'.xml')->addElement('/umi/mperms', 'perm');$v9630200cdb590835f07f37b889a7e484->module = 'domain';$v9630200cdb590835f07f37b889a7e484->method = $v662cbf1253ac7d8750ed9190c52163e5;}else {XMLFactory::getInstance()->getProxy('mperms/'.$v5e7b19364b8de2dedd3aa48cf62706e3.'.xml')->removeElement('/umi/mperms/perm[@module="domain" and method="'.$v662cbf1253ac7d8750ed9190c52163e5.'"]');}return true;}public function setModulesPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = false) {$vb0ab4f7791b60b1e8ea01057b77873b0 = (int) $vb0ab4f7791b60b1e8ea01057b77873b0;$v22884db148f0ffb0d830ba431102b0b5 = ($v22884db148f0ffb0d830ba431102b0b5);if($vea9f6aca279138c58f705c8d4cb4b8ce !== false) {return $this->setMethodPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}else {$vdcbc41c6e0eba0848633d07b6535460a = 'mperms/'.$vb0ab4f7791b60b1e8ea01057b77873b0.'.xml';XMLFactory::createFile($vdcbc41c6e0eba0848633d07b6535460a, '<?xml version="1.0" encoding="utf-8"?><umi><mperms /></umi>');$v9630200cdb590835f07f37b889a7e484 = XMLFactory::getInstance()->getProxy($vdcbc41c6e0eba0848633d07b6535460a)->addElement('/umi/mperms', 'perm');$v9630200cdb590835f07f37b889a7e484->module = $v22884db148f0ffb0d830ba431102b0b5;$v9630200cdb590835f07f37b889a7e484->method = "";return true;}}protected function setMethodPermissions($vb0ab4f7791b60b1e8ea01057b77873b0, $v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {$vea9f6aca279138c58f705c8d4cb4b8ce = ($vea9f6aca279138c58f705c8d4cb4b8ce);$vdcbc41c6e0eba0848633d07b6535460a = 'mperms/'.$vb0ab4f7791b60b1e8ea01057b77873b0.'.xml';XMLFactory::createFile($vdcbc41c6e0eba0848633d07b6535460a, '<?xml version="1.0" encoding="utf-8"?><umi><mperms /></umi>');$v9630200cdb590835f07f37b889a7e484 = XMLFactory::getInstance()->getProxy($vdcbc41c6e0eba0848633d07b6535460a)->addElement('/umi/mperms', 'perm');$v9630200cdb590835f07f37b889a7e484->module = $v22884db148f0ffb0d830ba431102b0b5;$v9630200cdb590835f07f37b889a7e484->method = $vea9f6aca279138c58f705c8d4cb4b8ce;return true;}public function hasUserPermissions($vb0ab4f7791b60b1e8ea01057b77873b0) {$v2817f701d5e1a1181e657251363295fd = 0;$vebbd92b37578b3bbfe35f19e4ee110fc = XMLFactory::getInstance();$v7b83f36020f3da6fb8698cb117e8195e     = XMLFactory::listFiles('eperms/');foreach($v7b83f36020f3da6fb8698cb117e8195e as $v455023b47067adcd938d2581a0dbdf20) {$v2817f701d5e1a1181e657251363295fd += $vebbd92b37578b3bbfe35f19e4ee110fc->getProxy('eperms/'.$v455023b47067adcd938d2581a0dbdf20)->getCount('/umi/eperms/perm[@owner='.$vb0ab4f7791b60b1e8ea01057b77873b0.']');}return $v2817f701d5e1a1181e657251363295fd;}public function copyHierarchyPermissions($v1fa96cda79d6a13e7abbc85448084fcf, $v3504006854d4e51b5c97e94f19baba29) {$v1fa96cda79d6a13e7abbc85448084fcf = (int) $v1fa96cda79d6a13e7abbc85448084fcf;$v3504006854d4e51b5c97e94f19baba29 = (int) $v3504006854d4e51b5c97e94f19baba29;$vebbd92b37578b3bbfe35f19e4ee110fc = XMLFactory::getInstance();$v7b83f36020f3da6fb8698cb117e8195e     = XMLFactory::listFiles('eperms/');foreach($v7b83f36020f3da6fb8698cb117e8195e as $v455023b47067adcd938d2581a0dbdf20) {$vf0fb6207a1f528537158dd231033bb94 = $vebbd92b37578b3bbfe35f19e4ee110fc->getProxy('eperms/'.$v455023b47067adcd938d2581a0dbdf20)->getElementsArray('/umi/eperms/perm[@owner='.$v1fa96cda79d6a13e7abbc85448084fcf.']');foreach($vf0fb6207a1f528537158dd231033bb94 as $vf263a995390567b6ba090d0a4fb067d2) {$v89964ed48bb0933da0290e8ec85d7cd1 = $vf263a995390567b6ba090d0a4fb067d2->cloneSelf(true);$v89964ed48bb0933da0290e8ec85d7cd1->owner = $v3504006854d4e51b5c97e94f19baba29;}}return true;}public function getUserId() {return $this->user_id;}public function setAllElementsDefaultPermissions($v5e7b19364b8de2dedd3aa48cf62706e3) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v8de46b2f593ad51a1333185911c6d23d = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getAttributeValue('/umi/elements/element', 'id', true);foreach($v8de46b2f593ad51a1333185911c6d23d as $v7057e8409c7c531a1a6e9ac3df4ed549) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$this->setDefaultElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b, $v5e7b19364b8de2dedd3aa48cf62706e3);$vb81ca7c0ccaa77e7aa91936ab0070695->unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549, $v5e7b19364b8de2dedd3aa48cf62706e3);}}}protected function getBaseMethodName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce) {$va9ac5a6cc3cbe84f9c18323af2b9007f = $this->getStaticPermissions($v22884db148f0ffb0d830ba431102b0b5);if(is_array($va9ac5a6cc3cbe84f9c18323af2b9007f)) {if(array_key_exists($vea9f6aca279138c58f705c8d4cb4b8ce, $va9ac5a6cc3cbe84f9c18323af2b9007f)) {return $vea9f6aca279138c58f705c8d4cb4b8ce;}else {foreach($va9ac5a6cc3cbe84f9c18323af2b9007f as $va85c62c99bf80aeffb74914fb56a1942 => $v568356dafd7353c803edafa5eb5d438f) {if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $v568356dafd7353c803edafa5eb5d438f) || in_array(strtolower($vea9f6aca279138c58f705c8d4cb4b8ce), $v568356dafd7353c803edafa5eb5d438f)) {return $va85c62c99bf80aeffb74914fb56a1942;}}return $vea9f6aca279138c58f705c8d4cb4b8ce;}}else {return $vea9f6aca279138c58f705c8d4cb4b8ce;}}protected function getStaticPermissions($v22884db148f0ffb0d830ba431102b0b5) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v8e0891fe51dd9fe334c902144be6bd90 = "./classes/modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/permissions.php";if(file_exists($v8e0891fe51dd9fe334c902144be6bd90)) {include $v8e0891fe51dd9fe334c902144be6bd90;if(isset($permissions)) {$v31bdd6780dad16b675b3e57ffb3f2272 = $permissions;$v9645b439bd2d770beb425162e180d91c = "./classes/modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/permissions.custom.php";if(file_exists($v9645b439bd2d770beb425162e180d91c)) {unset($permissions);include $v9645b439bd2d770beb425162e180d91c;if(isset($permissions)) {$v31bdd6780dad16b675b3e57ffb3f2272 = array_merge($v31bdd6780dad16b675b3e57ffb3f2272, $permissions);}}$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = $v31bdd6780dad16b675b3e57ffb3f2272;unset($v31bdd6780dad16b675b3e57ffb3f2272);unset($permissions);}else {$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = false;}}else {$v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5] = false;}return $v0fea6a13c52b4d4725368f24b045ca84[$v22884db148f0ffb0d830ba431102b0b5];}public function getUsersByElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1) {return XMLFactory::getInstance()->getProxy('eperms/'.$v7552cd149af7495ee7d8225974e50f80.'.xml')->getAttributeValue('number(/umi/eperms/perm/text())>='.$vc9e9a848920877e76685b2e4e76de38d, 'owner', true);}public function pushElementPermissions($v7552cd149af7495ee7d8225974e50f80, $vc9e9a848920877e76685b2e4e76de38d = 1) {if(array_key_exists($v7552cd149af7495ee7d8225974e50f80, $this->tempElementPermissions) == false) {$this->tempElementPermissions[$v7552cd149af7495ee7d8225974e50f80] = (int) $vc9e9a848920877e76685b2e4e76de38d;}}};interface iCifi {public function __construct($v76ff0c075d2de8d9ce2bb3361bb114c3, $vb9d3d046443cf690c6e6e502a0944706, $vf2accb3510f76a78979768c29f95a9d7 = true);public function read_files();public function make_element($v16830a58e1e33a4163524366ba7b701b = "");public function make_div();public function make_upload();public function getUpdatedValue($v8c1e38676c728849ec6620527345fcc7 = false);};class cifi implements iCifi {private $name, $dir;private $exts = Array('gif', 'jpg', 'jpeg', 'bmp', 'png', 'swf', 'GIF', 'JPG', 'JPEG', 'BMP', 'PNG', 'SWF');private $image_only;public $maxFilesPerFolder = 150;public function __construct($vb068931cc450442b63f5b3d276ea4297, $v736007832d2167baaae763fd3a3f3cf1, $ve2a3c99961f7b9cb0c3949c325166430 = true) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->dir = $v736007832d2167baaae763fd3a3f3cf1;$this->image_only = $ve2a3c99961f7b9cb0c3949c325166430;}public function old_read_files() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v736007832d2167baaae763fd3a3f3cf1 = $this->dir;$vd7e701984ce4a202864bfce634079069 = new umiDirectory($v736007832d2167baaae763fd3a3f3cf1);$v9354d23e6add83850f6476ba92ed0c1d = $vd7e701984ce4a202864bfce634079069->getFiles("(?<!\.htaccess|\.svn)\s?$");$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach ($v9354d23e6add83850f6476ba92ed0c1d as $va5d3f256df556554a2b2fdd8943eaea5 => $v7c471091e23954fe746b0cb10ae737cf) {if((++$v865c0c0b4ab0e063e5caa3387c1a8741 > $this->maxFilesPerFolder) && $this->maxFilesPerFolder) {return true;}$vfa7149a8afabc835b744f53daf9a58e1 = split("\.", $va5d3f256df556554a2b2fdd8943eaea5);$vabf77184f55403d75b9d51d79162a7ca = $vfa7149a8afabc835b744f53daf9a58e1[sizeof($vfa7149a8afabc835b744f53daf9a58e1)-1];if(!in_array($vabf77184f55403d75b9d51d79162a7ca, $this->exts) && $this->image_only) {continue;}$va5d3f256df556554a2b2fdd8943eaea5 = str_replace("&", "&amp;", $va5d3f256df556554a2b2fdd8943eaea5);$vfa816edb83e95bf0c8da580bdfd491ef = iconv("CP1251", "UTF-8//IGNORE", $va5d3f256df556554a2b2fdd8943eaea5);if($vfa816edb83e95bf0c8da580bdfd491ef === false) {$vfa816edb83e95bf0c8da580bdfd491ef = iconv("CP1251", "UTF-8//TRANSLIT", $va5d3f256df556554a2b2fdd8943eaea5);}$v9b207167e5381c47682c6b4f58a623fb[] = $vfa816edb83e95bf0c8da580bdfd491ef;}return $v9b207167e5381c47682c6b4f58a623fb;}public function read_files() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v736007832d2167baaae763fd3a3f3cf1 = $this->dir;$vd7e701984ce4a202864bfce634079069 = new umiDirectory($v736007832d2167baaae763fd3a3f3cf1);$v9354d23e6add83850f6476ba92ed0c1d = $vd7e701984ce4a202864bfce634079069->getFiles("(?<!\.htaccess|\.svn)\s?$");$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach ($v9354d23e6add83850f6476ba92ed0c1d as $va5d3f256df556554a2b2fdd8943eaea5 => $v7c471091e23954fe746b0cb10ae737cf) {if((++$v865c0c0b4ab0e063e5caa3387c1a8741 > $this->maxFilesPerFolder) && $this->maxFilesPerFolder) {return true;}$vfa7149a8afabc835b744f53daf9a58e1 = split("\.", $va5d3f256df556554a2b2fdd8943eaea5);$vabf77184f55403d75b9d51d79162a7ca = $vfa7149a8afabc835b744f53daf9a58e1[sizeof($vfa7149a8afabc835b744f53daf9a58e1)-1];if(!in_array($vabf77184f55403d75b9d51d79162a7ca, $this->exts) && $this->image_only) {continue;}$va5d3f256df556554a2b2fdd8943eaea5 = str_replace("&", "&amp;", $va5d3f256df556554a2b2fdd8943eaea5);$v2e3a8d3f3d1c742f7234c3d6dd74cc3c = iconv("CP1251", "UTF-8//IGNORE", $this->dir.'/'.$va5d3f256df556554a2b2fdd8943eaea5);$vd707f488d8ffd0422872f4b4ab4ebafe = iconv("CP1251", "UTF-8//IGNORE", $va5d3f256df556554a2b2fdd8943eaea5);$v9b207167e5381c47682c6b4f58a623fb[] = array($v2e3a8d3f3d1c742f7234c3d6dd74cc3c, $vd707f488d8ffd0422872f4b4ab4ebafe);}return $v9b207167e5381c47682c6b4f58a623fb;}public function make_element($v4ed9407630eb1000c0f6b63842defa7d = "", $v03eb662e3aeaf66b73b3296be3f050d5 = array()) {$vbfe6ca8c2816187ae8d51c913879f38a = $this->read_files();if($vbfe6ca8c2816187ae8d51c913879f38a === true) {if($v4ed9407630eb1000c0f6b63842defa7d) {$vbfe6ca8c2816187ae8d51c913879f38a = Array();$vbfe6ca8c2816187ae8d51c913879f38a[] = $v4ed9407630eb1000c0f6b63842defa7d;}else {$vbfe6ca8c2816187ae8d51c913879f38a = Array();}$vbdec6c316b977a09ec96bb56e4e11c17 = true;}else {$vbdec6c316b977a09ec96bb56e4e11c17 = false;}if(!is_array($vbfe6ca8c2816187ae8d51c913879f38a)) {return false;}$v9b207167e5381c47682c6b4f58a623fb = <<<JS
<script type="text/javascript">
	cifi_images_arr_{$this->name} = Array();

JS;   $v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vbfe6ca8c2816187ae8d51c913879f38a);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v9b207167e5381c47682c6b4f58a623fb .= <<<JS
	cifi_images_arr_{$this->name}[{$v865c0c0b4ab0e063e5caa3387c1a8741}] = "{$vbfe6ca8c2816187ae8d51c913879f38a[$v865c0c0b4ab0e063e5caa3387c1a8741]}";

JS;   }$v4ed9407630eb1000c0f6b63842defa7d = ($v4ed9407630eb1000c0f6b63842defa7d) ? "'" . str_replace("&", "&amp;", $v4ed9407630eb1000c0f6b63842defa7d) . "'" : "''";if($vbdec6c316b977a09ec96bb56e4e11c17) {$v736007832d2167baaae763fd3a3f3cf1 = "'" . mysql_escape_string(basename($this->dir)) . "'";}else {$v736007832d2167baaae763fd3a3f3cf1 = "''";}$v9b207167e5381c47682c6b4f58a623fb .= <<<JS
	cifi_generate('{$this->name}', cifi_images_arr_{$this->name}, {$v4ed9407630eb1000c0f6b63842defa7d}, {$v736007832d2167baaae763fd3a3f3cf1});
</script>

JS;   return $v9b207167e5381c47682c6b4f58a623fb;}public function make_div() {return <<<END
<div id="cifi_mdiv_{$this->name}" style="text-align: left; border: #FFF 1px solid;"></div>
END;  }public function make_upload() {$vef7de3f485174ff47f061ad27d83d0ee = $_REQUEST['select_' . $this->name];$vbf5f3461956c8f4ab9d7c0877c1505ad = $_FILES['f_' . $this->name];if($vbf5f3461956c8f4ab9d7c0877c1505ad['name'] == $vef7de3f485174ff47f061ad27d83d0ee) {system_upload_file($vbf5f3461956c8f4ab9d7c0877c1505ad['tmp_name'], $this->dir, $vbf5f3461956c8f4ab9d7c0877c1505ad['name']);return $vbf5f3461956c8f4ab9d7c0877c1505ad['name'];}else {return false;}}public function getUpdatedValue($v15d61712450a686a7f365adf4fef581f = false) {$vb068931cc450442b63f5b3d276ea4297 = $this->name;$v851148b4fd8fd7ae74bd9100c5c0c898 = $this->dir;$v810ad1bb47955cef46ca47144c3ea889 = getRequest('select_' . $vb068931cc450442b63f5b3d276ea4297);$vbfe6ca8c2816187ae8d51c913879f38a = ($v15d61712450a686a7f365adf4fef581f) ? $vdc150a9e3e923a67fddf1f5ebd0f1ada : $_FILES;if($vbfe6ca8c2816187ae8d51c913879f38a['pics']['size'][$vb068931cc450442b63f5b3d276ea4297] != 0) {if($v810ad1bb47955cef46ca47144c3ea889 == $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297]) {system_upload_file($vbfe6ca8c2816187ae8d51c913879f38a['pics']['tmp_name'][$vb068931cc450442b63f5b3d276ea4297], $v851148b4fd8fd7ae74bd9100c5c0c898, $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297]);$v9b207167e5381c47682c6b4f58a623fb = $vbfe6ca8c2816187ae8d51c913879f38a['pics']['name'][$vb068931cc450442b63f5b3d276ea4297];}else {$v9b207167e5381c47682c6b4f58a623fb = $v810ad1bb47955cef46ca47144c3ea889;}}else {$v9b207167e5381c47682c6b4f58a623fb = $v810ad1bb47955cef46ca47144c3ea889;}return $v9b207167e5381c47682c6b4f58a623fb;}};class ranges {public function __construct() {$this->days = Array(            ''    => 0,            ''    => 1,            ''        => 2,            ''    => 3,            ''    => 4,            ''    => 5,            ''    => 6,            ''        => 0,            ''        => 0,            ''        => 1,            ''        => 2,            ''        => 2,            ''        => 3,            ''        => 3,            ''        => 4,            ''        => 4,            ''        => 5,            ''        => 6);$this->months = Array(            ''    => 0,            ''    => 1,            ''        => 2,            ''    => 3,            ''        => 4,            ''        => 5,            ''        => 6,            ''    => 7,            ''    => 8,            ''    => 9,            ''    => 10,            ''    => 11,            ''    => 0,            ''    => 0,            ''    => 1,            ''    => 1,            ''    => 2,            ''    => 3,            ''    => 3,            ''    => 4,            ''        => 5,            ''        => 5,            ''        => 6,            ''        => 6,            ''    => 7,            ''    => 7,            ''    => 8,            ''    => 8,            ''    => 9,            ''    => 9,            ''    => 10,            ''    => 11);}public function get($v341be97d9aff90c9978347f66f945b77 = "", $v15d61712450a686a7f365adf4fef581f = 0) {$v341be97d9aff90c9978347f66f945b77 = $this->prepareStr($v341be97d9aff90c9978347f66f945b77, $v15d61712450a686a7f365adf4fef581f);return $this->str2range($v341be97d9aff90c9978347f66f945b77);}private function prepareStr($v341be97d9aff90c9978347f66f945b77 = "", $v15d61712450a686a7f365adf4fef581f = 0) {switch($v15d61712450a686a7f365adf4fef581f) {case 0: {return system_assoc_replace($v341be97d9aff90c9978347f66f945b77, $this->days);break;}case 1: {return system_assoc_replace($v341be97d9aff90c9978347f66f945b77, $this->months);break;}}}private function str2range($v03c7c0ace395d80182db07ae2c30f034) {$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/ +/", " ", $v03c7c0ace395d80182db07ae2c30f034);$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/ - /", "-", $v03c7c0ace395d80182db07ae2c30f034);$v03c7c0ace395d80182db07ae2c30f034 = preg_replace("/! /", "!", $v03c7c0ace395d80182db07ae2c30f034);if(preg_match_all("/(?!!)(\d+)(?!\-)/", $v03c7c0ace395d80182db07ae2c30f034, $vcc92747bf6da4d917e6e0b0356cd5133)) {$vcc92747bf6da4d917e6e0b0356cd5133 = $vcc92747bf6da4d917e6e0b0356cd5133[1];}if(preg_match_all("/!(\d+)(?!\-)/", $v03c7c0ace395d80182db07ae2c30f034, $v2c8e6355b8c15bc4c2707142268a1d8a)) {$v2c8e6355b8c15bc4c2707142268a1d8a = $v2c8e6355b8c15bc4c2707142268a1d8a[1];}if(preg_match_all("/(?!!)(\d+\-\d+)/", $v03c7c0ace395d80182db07ae2c30f034, $v37b19816109a32106d109e83bbb3c97d)) {$v37b19816109a32106d109e83bbb3c97d = $v37b19816109a32106d109e83bbb3c97d[0];}if(preg_match_all("/!(\d+\-\d+)/", $v03c7c0ace395d80182db07ae2c30f034, $v42ea0dce5802c9119056fe8b8f8a39ea)) {$v42ea0dce5802c9119056fe8b8f8a39ea = $v42ea0dce5802c9119056fe8b8f8a39ea[1];}$v9b207167e5381c47682c6b4f58a623fb = Array();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v42ea0dce5802c9119056fe8b8f8a39ea);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741  < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_array($v42ea0dce5802c9119056fe8b8f8a39ea[$v865c0c0b4ab0e063e5caa3387c1a8741])) continue;list($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531) = split("-", $v42ea0dce5802c9119056fe8b8f8a39ea[$v865c0c0b4ab0e063e5caa3387c1a8741]);if($vd98a07f84921b24ee30f86fd8cd85c3c <= $v01b6e20344b68835c5ed1ddedf20d531) {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}}else {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= 31;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}for($v7b8b965ad4bca0e41ab51de7b31363a1 = 1;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {$v2c8e6355b8c15bc4c2707142268a1d8a[] = $v7b8b965ad4bca0e41ab51de7b31363a1;}}}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v37b19816109a32106d109e83bbb3c97d);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(is_array($v37b19816109a32106d109e83bbb3c97d[$v865c0c0b4ab0e063e5caa3387c1a8741])) continue;list($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531) = split("-", $v37b19816109a32106d109e83bbb3c97d[$v865c0c0b4ab0e063e5caa3387c1a8741]);if($vd98a07f84921b24ee30f86fd8cd85c3c <= $v01b6e20344b68835c5ed1ddedf20d531) {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}}else {for($v7b8b965ad4bca0e41ab51de7b31363a1 = $vd98a07f84921b24ee30f86fd8cd85c3c;$v7b8b965ad4bca0e41ab51de7b31363a1 <= 31;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}for($v7b8b965ad4bca0e41ab51de7b31363a1 = 1;$v7b8b965ad4bca0e41ab51de7b31363a1 <= $v01b6e20344b68835c5ed1ddedf20d531;$v7b8b965ad4bca0e41ab51de7b31363a1++) {if(!in_array((int) $v7b8b965ad4bca0e41ab51de7b31363a1, $v2c8e6355b8c15bc4c2707142268a1d8a))                        $v9b207167e5381c47682c6b4f58a623fb[] = (int) $v7b8b965ad4bca0e41ab51de7b31363a1;}}}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vcc92747bf6da4d917e6e0b0356cd5133);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(!in_array((int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741], $v2c8e6355b8c15bc4c2707142268a1d8a) && !in_array((int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741], $v9b207167e5381c47682c6b4f58a623fb) && !empty($vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741]))                $v9b207167e5381c47682c6b4f58a623fb[] = (int) $vcc92747bf6da4d917e6e0b0356cd5133[$v865c0c0b4ab0e063e5caa3387c1a8741];}return $v9b207167e5381c47682c6b4f58a623fb;}}interface iTranslit {public static function convert($vb45cffe084dd3d20d928bee85e7b0f21);}class translit implements iTranslit {public static $fromUpper = Array("/g", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "");public static $fromLower = Array("", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "");public static $toLower   = Array("e\'", "ch", "sh", "yo", "jo", "zh", "yu", "ju", "ya", "ja", "a", "b", "v", "g", "d", "e", "z", "i", "j", "k", "l", "m", "n", "o", "p", "r", "s",  "t", "u", "f", "h", "c", "w", "~", "y", "\'");public static function convert($v341be97d9aff90c9978347f66f945b77) {$v341be97d9aff90c9978347f66f945b77 = umiObjectProperty::filterInputString($v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(self::$fromLower, self::$toLower, $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(self::$fromUpper, self::$toLower, $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = strtolower($v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/([^A-z^0-9^_^\-]+)/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/[\/\\\',\t`\^\[\]]*/", "", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = str_replace(chr(8470), "", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/[ \.]+/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = preg_replace("/([_]+)/", "_", $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = trim(trim($v341be97d9aff90c9978347f66f945b77), "_");return $v341be97d9aff90c9978347f66f945b77;}}interface iTemplater {public function init($va43c1b0aa53a0c908810c06ab1ff3967);public function loadLangs();public function putLangs($va43c1b0aa53a0c908810c06ab1ff3967);public function parseInput($va43c1b0aa53a0c908810c06ab1ff3967);public function parseMacros($vdc3ef687d19cc2fb071d846f9360ecbe);public function executeMacros($v8ee1d4327d02df333859c8dd0101aae8);public static function pushEditable($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f);public function cleanUpResult($va43c1b0aa53a0c908810c06ab1ff3967);}class templater extends singleton implements iTemplater {public $defaultMacroses = Array(Array("%content%", "macros_content"),  Array("%menu%", "macros_menu"),  Array("%header%", "macros_header"),  Array("%pid%", "macros_returnPid"),  Array("%parent_id%", "macros_returnParentId"),  Array("%pre_lang%", "macros_returnPreLang"),  Array("%curr_time%", "macros_curr_time"),  Array("%domain%", "macros_returnDomain"),  Array("%domain_floated%", "macros_returnDomainFloated"),   Array("%title%", "macros_title"),  Array("%keywords%", "macros_keywords"),  Array("%describtion%", "macros_describtion"),  Array("%description%", "macros_describtion"),  Array("%adm_menu%", "macros_adm_menu"),  Array("%adm_navibar%", "macros_adm_navibar"),  Array("%skin_path%", "macros_skin_path"),  Array("%ico_ext%", "macros_ico_ext"),   Array("%current_user_id%", "macros_current_user_id"),  Array("%current_version_line%", "macros_current_version_line"),  Array("%context_help%", "macros_help"),  Array("%current_alt_name%", "macros_current_alt_name"));public $cacheMacroses = Array();public $processingCache = array();public $cachePermitted = false;public $LANGS = Array();public $cacheEnabled = 0;protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function init($va43c1b0aa53a0c908810c06ab1ff3967) {$this->loadLangs();$this->cacheMacroses["%content%"] = $this->parseInput(cmsController::getInstance()->parsedContent);$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($va43c1b0aa53a0c908810c06ab1ff3967);$v9b207167e5381c47682c6b4f58a623fb = $this->putLangs($v9b207167e5381c47682c6b4f58a623fb);$this->output = system_parse_short_calls($v9b207167e5381c47682c6b4f58a623fb);}public function loadLangs() {$vdcb02837c3430cb5b0b73a05d1d40c8e = CURRENT_WORKING_DIR . "/classes/modules/lang." . cmsController::getInstance()->getLang()->getPrefix() . ".php";if(!file_exists($vdcb02837c3430cb5b0b73a05d1d40c8e)) {$vdcb02837c3430cb5b0b73a05d1d40c8e = CURRENT_WORKING_DIR . "/classes/modules/lang.php";}include_once $vdcb02837c3430cb5b0b73a05d1d40c8e;if(isset($LANG_EXPORT)) {$v4d424a5679c0aa6e84a0235ec1949c43 = cmsController::getInstance();$v4d424a5679c0aa6e84a0235ec1949c43->langs = array_merge($v4d424a5679c0aa6e84a0235ec1949c43->langs, $LANG_EXPORT);unset($LANG_EXPORT);}return true;}public function putLangs($va43c1b0aa53a0c908810c06ab1ff3967) {$v9b207167e5381c47682c6b4f58a623fb = $va43c1b0aa53a0c908810c06ab1ff3967;if(($v83878c91171338902e0fe0fb97a8c47a = strpos($v9b207167e5381c47682c6b4f58a623fb, "%")) === false) return $v9b207167e5381c47682c6b4f58a623fb;$v5a05866850c28651fe234659f6c92ada = cmsController::getInstance()->langs;foreach($v5a05866850c28651fe234659f6c92ada as $vde3ec0aa2234aa1e3ee275bbc715c6c9 => $v05f59f175b8961c00305e4ee7c88f9f2) {if(is_array($v05f59f175b8961c00305e4ee7c88f9f2)) continue;$v6f8f57715090da2632453988d9a1501b = "%" . $vde3ec0aa2234aa1e3ee275bbc715c6c9 . "%";if(($v1f2dfa567dcf95833eddf7aec167fec7 = strpos($v9b207167e5381c47682c6b4f58a623fb, $v6f8f57715090da2632453988d9a1501b, $v83878c91171338902e0fe0fb97a8c47a)) !== false) {$v9b207167e5381c47682c6b4f58a623fb = str_replace($v6f8f57715090da2632453988d9a1501b, $v05f59f175b8961c00305e4ee7c88f9f2, $v9b207167e5381c47682c6b4f58a623fb, $v1f2dfa567dcf95833eddf7aec167fec7);}}return $v9b207167e5381c47682c6b4f58a623fb;}public function parseInput($va43c1b0aa53a0c908810c06ab1ff3967) {$v9b207167e5381c47682c6b4f58a623fb = $va43c1b0aa53a0c908810c06ab1ff3967;if(is_array($v9b207167e5381c47682c6b4f58a623fb)) {return $v9b207167e5381c47682c6b4f58a623fb;}$v0db3209e1adc6d67be435a81baf9a66e = cmsController::getInstance()->getCurrentElementId();$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%pid%", $v0db3209e1adc6d67be435a81baf9a66e, $va43c1b0aa53a0c908810c06ab1ff3967);if(strrpos($v9b207167e5381c47682c6b4f58a623fb, "%") === false) {return $v9b207167e5381c47682c6b4f58a623fb;}$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%%", "%\r\n%", $va43c1b0aa53a0c908810c06ab1ff3967);if(preg_match_all("/%([A-z_]{3,})%/m", $va43c1b0aa53a0c908810c06ab1ff3967, $v3d801aa532c1cec3ee82d87a99fdf63f)) {$v3d801aa532c1cec3ee82d87a99fdf63f = $v3d801aa532c1cec3ee82d87a99fdf63f[0];$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v3d801aa532c1cec3ee82d87a99fdf63f);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {try {$v4b43b0aee35624cd95b910189b3dc231 = $this->parseMacros($v3d801aa532c1cec3ee82d87a99fdf63f[$v865c0c0b4ab0e063e5caa3387c1a8741]);}catch (publicException $ve1671797c52e15f763380b45e841ec32) {}}}if(preg_match_all("/%([A-z--0-9]+\s+[A-z--0-9_]+\([A-z-- \/\._\-\(\)0-9%:<>,!@\|'&=;\?\+#]*\))%/mu", $va43c1b0aa53a0c908810c06ab1ff3967, $v3d801aa532c1cec3ee82d87a99fdf63f)) {$v3d801aa532c1cec3ee82d87a99fdf63f = $v3d801aa532c1cec3ee82d87a99fdf63f[0];$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v3d801aa532c1cec3ee82d87a99fdf63f);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {try {$v4b43b0aee35624cd95b910189b3dc231 = $this->parseMacros($v3d801aa532c1cec3ee82d87a99fdf63f[$v865c0c0b4ab0e063e5caa3387c1a8741]);}catch (publicException $ve1671797c52e15f763380b45e841ec32) {}}}if(is_array($v9b207167e5381c47682c6b4f58a623fb)) implode('',$v9b207167e5381c47682c6b4f58a623fb);$v0fea6a13c52b4d4725368f24b045ca84 = $this->cacheMacroses;$v0fea6a13c52b4d4725368f24b045ca84 = array_reverse($v0fea6a13c52b4d4725368f24b045ca84);foreach($v0fea6a13c52b4d4725368f24b045ca84 as $vee33e909372d935d190f4fcb2a92d542 => $vd9394066970e44ae252fd0347e58c03e) {if(($v83878c91171338902e0fe0fb97a8c47a = strpos($v9b207167e5381c47682c6b4f58a623fb, $vee33e909372d935d190f4fcb2a92d542)) !== false) {$v9b207167e5381c47682c6b4f58a623fb = str_replace($vee33e909372d935d190f4fcb2a92d542, $vd9394066970e44ae252fd0347e58c03e, $v9b207167e5381c47682c6b4f58a623fb);}}return $this->cleanUpResult( $this->putLangs($v9b207167e5381c47682c6b4f58a623fb) );}public function parseMacros($vdc3ef687d19cc2fb071d846f9360ecbe) {$v8ee1d4327d02df333859c8dd0101aae8 = Array();if(strrpos($vdc3ef687d19cc2fb071d846f9360ecbe, "%") === false)   return $v8ee1d4327d02df333859c8dd0101aae8;if(isset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe])) return $vdc3ef687d19cc2fb071d846f9360ecbe;$this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe] = true;$v63a86638c46e7c3bcc05b4b73aa7dd79 = "/%([A-z0-9]+)\s+([A-z0-9]+)\((.*)\)%/m";if(defined("TPL_MODE")) {if(TPL_MODE == "SIMPLE") {$v63a86638c46e7c3bcc05b4b73aa7dd79 = "/%([A-z0-9]+)\s+([A-z0-9]+)\((.*)\)%/Um";}}if(preg_match($v63a86638c46e7c3bcc05b4b73aa7dd79, $vdc3ef687d19cc2fb071d846f9360ecbe, $v7f51cd1d44922c57f8f7945fc268ef09)) {$v8ee1d4327d02df333859c8dd0101aae8['str']    = $v7f51cd1d44922c57f8f7945fc268ef09[0];$v8ee1d4327d02df333859c8dd0101aae8['module'] = $v7f51cd1d44922c57f8f7945fc268ef09[1];$v8ee1d4327d02df333859c8dd0101aae8['method'] = $v7f51cd1d44922c57f8f7945fc268ef09[2];$v8ee1d4327d02df333859c8dd0101aae8['args']   = $v7f51cd1d44922c57f8f7945fc268ef09[3];if(array_key_exists($v8ee1d4327d02df333859c8dd0101aae8['str'], $this->cacheMacroses)) {unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $this->cacheMacroses[$v8ee1d4327d02df333859c8dd0101aae8['str']];}$v21ffce5b8a6cc8cc6a41448dd69623c9 = split(",", $v8ee1d4327d02df333859c8dd0101aae8['args']);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v21ffce5b8a6cc8cc6a41448dd69623c9);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vf33a4e939ffe21234596860b7249c246 = $v21ffce5b8a6cc8cc6a41448dd69623c9[$v865c0c0b4ab0e063e5caa3387c1a8741];if(strpos($vf33a4e939ffe21234596860b7249c246, "%") !== false) {$vf33a4e939ffe21234596860b7249c246 = $this->parseInput($vf33a4e939ffe21234596860b7249c246);}$v21ffce5b8a6cc8cc6a41448dd69623c9[$v865c0c0b4ab0e063e5caa3387c1a8741] = trim($vf33a4e939ffe21234596860b7249c246, "'\" ");}$v8ee1d4327d02df333859c8dd0101aae8['args'] = $v21ffce5b8a6cc8cc6a41448dd69623c9;$v9b207167e5381c47682c6b4f58a623fb = $v8ee1d4327d02df333859c8dd0101aae8['result'] = $this->executeMacros($v8ee1d4327d02df333859c8dd0101aae8);$this->cacheMacroses[$v8ee1d4327d02df333859c8dd0101aae8['str']] = $v8ee1d4327d02df333859c8dd0101aae8['result'];unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $v9b207167e5381c47682c6b4f58a623fb;}else {$vf96b9890e2821e2b15992ff81ce1806d = $this->defaultMacroses;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vf96b9890e2821e2b15992ff81ce1806d);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++)    if(stripos($vdc3ef687d19cc2fb071d846f9360ecbe, $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]) !== false) {if(array_key_exists($vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0], $this->cacheMacroses)) {unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $this->cacheMacroses[$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]];}if(!isset($vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2])) {$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2] = NULL;}$v9b207167e5381c47682c6b4f58a623fb = $this->executeMacros(          Array(           "module" => $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][1],           "method" => $vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][2],           "args"   => Array()           )         );$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($v9b207167e5381c47682c6b4f58a623fb);$this->cacheMacroses[$vf96b9890e2821e2b15992ff81ce1806d[$v865c0c0b4ab0e063e5caa3387c1a8741][0]] = $v9b207167e5381c47682c6b4f58a623fb;unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $v9b207167e5381c47682c6b4f58a623fb;}$this->cacheMacroses[$vdc3ef687d19cc2fb071d846f9360ecbe] = $vdc3ef687d19cc2fb071d846f9360ecbe;unset($this->processingCache[$vdc3ef687d19cc2fb071d846f9360ecbe]);return $vdc3ef687d19cc2fb071d846f9360ecbe;}}public function executeMacros($v8ee1d4327d02df333859c8dd0101aae8) {$v22884db148f0ffb0d830ba431102b0b5 = $v8ee1d4327d02df333859c8dd0101aae8['module'];$vea9f6aca279138c58f705c8d4cb4b8ce = $v8ee1d4327d02df333859c8dd0101aae8['method'];if($v22884db148f0ffb0d830ba431102b0b5 == "current_module")   $v22884db148f0ffb0d830ba431102b0b5 = cmsController::getInstance()->getCurrentModule();$v9b207167e5381c47682c6b4f58a623fb = "";if(!$vea9f6aca279138c58f705c8d4cb4b8ce) {$vb69957bad52d90073d0bd2ed82d0a7cb = $v8ee1d4327d02df333859c8dd0101aae8['args'];$v9b207167e5381c47682c6b4f58a623fb = call_user_func_array($v8ee1d4327d02df333859c8dd0101aae8['module'], $vb69957bad52d90073d0bd2ed82d0a7cb);}if($v22884db148f0ffb0d830ba431102b0b5 == "core" || $v22884db148f0ffb0d830ba431102b0b5 == "system" || $v22884db148f0ffb0d830ba431102b0b5 == "custom") {$v1cd3c693132f4c31b5b5e5f4c5eed6bd = &system_buildin_load($v22884db148f0ffb0d830ba431102b0b5);if($v1cd3c693132f4c31b5b5e5f4c5eed6bd) {$v9b207167e5381c47682c6b4f58a623fb = $v1cd3c693132f4c31b5b5e5f4c5eed6bd->cms_callMethod($vea9f6aca279138c58f705c8d4cb4b8ce, $v8ee1d4327d02df333859c8dd0101aae8['args']);}}if($v22884db148f0ffb0d830ba431102b0b5 != "core" && $v22884db148f0ffb0d830ba431102b0b5 != "system") {if(system_is_allowed($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)) {if($v47a12618c9a47b69a3050e6b9313a351 = cmsController::getInstance()->getModule($v22884db148f0ffb0d830ba431102b0b5)) {$v9b207167e5381c47682c6b4f58a623fb = $v47a12618c9a47b69a3050e6b9313a351->cms_callMethod($vea9f6aca279138c58f705c8d4cb4b8ce, $v8ee1d4327d02df333859c8dd0101aae8['args']);}}}if(is_array($v9b207167e5381c47682c6b4f58a623fb)) {$vfa816edb83e95bf0c8da580bdfd491ef = "";foreach($v9b207167e5381c47682c6b4f58a623fb as $v03c7c0ace395d80182db07ae2c30f034) {if(!is_array($v03c7c0ace395d80182db07ae2c30f034)) {$vfa816edb83e95bf0c8da580bdfd491ef .= $v03c7c0ace395d80182db07ae2c30f034;}}$v9b207167e5381c47682c6b4f58a623fb = $vfa816edb83e95bf0c8da580bdfd491ef;}if(strpos($v9b207167e5381c47682c6b4f58a623fb, "%") !== false) {$v9b207167e5381c47682c6b4f58a623fb = $this->parseInput($v9b207167e5381c47682c6b4f58a623fb);}return $v9b207167e5381c47682c6b4f58a623fb;}public function __destruct() {}public $blocks = Array();public static function pushEditable($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f) {if($v22884db148f0ffb0d830ba431102b0b5 === false && $vea9f6aca279138c58f705c8d4cb4b8ce === false) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($vb80bb7740288fda1f201890375a60c8f)) {$v94efb9bd8805ffa2a3d248cbe836b6ef = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();if($v481a5f16b24d461e31d85aba607238b8 = umiObjectTypesCollection::getInstance()->getType($v94efb9bd8805ffa2a3d248cbe836b6ef)) {$v09f4280d9972439d11df682357c4b807 = $v481a5f16b24d461e31d85aba607238b8->getHierarchyTypeId();if($v5f8d8192d2d4ff7e065aaf1958d15913 = umiHierarchyTypesCollection::getInstance()->getType($v09f4280d9972439d11df682357c4b807)) {$v22884db148f0ffb0d830ba431102b0b5 = $v5f8d8192d2d4ff7e065aaf1958d15913->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $v5f8d8192d2d4ff7e065aaf1958d15913->getExt();}else {return false;}}}}$v640eac53ad75db5c49a9ec86390d8530 = templater::getInstance();$v640eac53ad75db5c49a9ec86390d8530->blocks[] = Array($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $vb80bb7740288fda1f201890375a60c8f);}public function prepareQuickEdit() {$v5e72c7891093d301b60783c6a47f7aa0 = $this->blocks;if(sizeof($v5e72c7891093d301b60783c6a47f7aa0) == 0) return;$v3c6e0b8a9c15224a8228b9a98ca1531d = md5("http://" . getServer('HTTP_HOST') . getServer('REQUEST_URI'));$_SESSION[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v5e72c7891093d301b60783c6a47f7aa0;}final public static function getSomething($v0f4153145310ca3a80263d772ccd01d4 = "pro") {$v520579a4307a11304874d3845f4e67cb = domainsCollection::getInstance()->getDefaultDomain();$v43c8ce94d81492e62c60092a3664a65f = md5($_SERVER['SERVER_ADDR']);switch($v0f4153145310ca3a80263d772ccd01d4) {case "pro":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost()))))))))));break;case "free":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())));break;case "lite":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())))));break;case "freelance":    $v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost())))))));break;case "trial": {$v834c51a71b8c3cca066197db43bb209d = md5(md5(md5(md5(md5(md5($v520579a4307a11304874d3845f4e67cb->getHost()))))));}}$v90fdeb3fda515dc805fa06fda3504d5c = strtoupper(substr($v43c8ce94d81492e62c60092a3664a65f, 0, 11) . "-" . substr($v834c51a71b8c3cca066197db43bb209d, 0, 11));return $v90fdeb3fda515dc805fa06fda3504d5c;}public function cleanUpResult($va43c1b0aa53a0c908810c06ab1ff3967) {return $va43c1b0aa53a0c908810c06ab1ff3967;$va43c1b0aa53a0c908810c06ab1ff3967 = str_replace("%pid%", cmsController::getInstance()->getCurrentElementId(), $va43c1b0aa53a0c908810c06ab1ff3967);if(!regedit::getInstance()->getVal("//settings/show_macros_onerror")) {$va43c1b0aa53a0c908810c06ab1ff3967 = preg_replace("/%([A-z?-?- \/\._\-\(\)0-9%:<>,!@\|'&=;\?\+#]*)%/m", "", $va43c1b0aa53a0c908810c06ab1ff3967);}return $va43c1b0aa53a0c908810c06ab1ff3967;}};interface iCmsController {public function loadBuildInModule($v52a43e48ec4649dee819dadabcab1bde);public function getModule($v52a43e48ec4649dee819dadabcab1bde);public function installModule($v52a43e48ec4649dee819dadabcab1bde);public function getSkinPath();public function getCurrentModule();public function getCurrentMethod();public function getCurrentElementId();public function getCurrentMode();public function getCurrentDomain();public function getCurrentLang();public function getLang();public function setCurrentModule($v52a43e48ec4649dee819dadabcab1bde);public function setCurrentMethod($vddaa6e8c8c412299272e183087b8f7b6);public function getRequestId();public function getPreLang();public function calculateRefererUri();public function getCalculatedRefererUri();}class cmsController extends singleton implements iSingleton, iCmsController {private $modules = Array(),    $current_module = false,    $current_method = false,    $current_mode = false,    $current_element_id = false,    $current_lang = false,    $current_domain = false,    $calculated_referer_uri = false;public  $parsedContent = false,    $currentTitle = false,    $currentHeader = false,    $currentMetaKeywords = false,    $currentMetaDescription = false,    $langs = Array(),    $langs_export = Array(),    $nav_arr = Array(),    $pre_lang = "",    $errorUrl, $headerLabel = false;public  $isContentMode = false;protected function __construct() {$this->init();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function loadModule($v854203cccade0bbe21be239a208aea49) {$v3d788fa62d7c185a1bee4c9147ee1091 = "//modules/" . $v854203cccade0bbe21be239a208aea49;if(!defined("CURRENT_VERSION_LINE")) {define("CURRENT_VERSION_LINE", "");}if(CURRENT_VERSION_LINE == "free" || CURRENT_VERSION_LINE == "lite") {if($v854203cccade0bbe21be239a208aea49 == "forum" || $v854203cccade0bbe21be239a208aea49 == "vote" || $v854203cccade0bbe21be239a208aea49 == "webforms") {return false;}}if(ulangStream::getLangPrefix() != "ru" && $v854203cccade0bbe21be239a208aea49 == "seo") {return false;}if(regedit::getInstance()->getVal($v3d788fa62d7c185a1bee4c9147ee1091) == $v854203cccade0bbe21be239a208aea49) {$va8b32a4ad344b2574316ceac9b89c028 = CURRENT_WORKING_DIR . "/classes/modules/" . $v854203cccade0bbe21be239a208aea49 . "/class.php";$v2a99e5deda39091dffae0e1ee29ca09a = CURRENT_WORKING_DIR . "/classes/modules/" . $v854203cccade0bbe21be239a208aea49 . "/interface.php";if(file_exists($va8b32a4ad344b2574316ceac9b89c028)) {if(file_exists($v2a99e5deda39091dffae0e1ee29ca09a)) {include_once $v2a99e5deda39091dffae0e1ee29ca09a;}include_once $va8b32a4ad344b2574316ceac9b89c028;if(class_exists($v854203cccade0bbe21be239a208aea49)) {$vaeae00c17480e2734db07010c518d054 = new $v854203cccade0bbe21be239a208aea49();$vaeae00c17480e2734db07010c518d054->cms_init();$vaeae00c17480e2734db07010c518d054->pre_lang = $this->pre_lang;$this->modules[$v854203cccade0bbe21be239a208aea49] = $vaeae00c17480e2734db07010c518d054;return $vaeae00c17480e2734db07010c518d054;}}else {return false;}}else {return false;}}public function loadBuildInModule($v52a43e48ec4649dee819dadabcab1bde) {}public function getModule($v854203cccade0bbe21be239a208aea49) {if(!$v854203cccade0bbe21be239a208aea49) return false;if(array_key_exists($v854203cccade0bbe21be239a208aea49, $this->modules)) {return $this->modules[$v854203cccade0bbe21be239a208aea49];}else {return $this->loadModule($v854203cccade0bbe21be239a208aea49);}}public function installModule($v52a43e48ec4649dee819dadabcab1bde) {}public function getSkinPath() {}public function getCurrentModule() {return $this->current_module;}public function getCurrentMethod() {return $this->current_method;}public function getCurrentElementId() {return $this->current_element_id;}public function getLang() {return $this->current_lang;}public function getCurrentLang() {return $this->getLang();}public function getCurrentMode() {return $this->current_mode;}public function getCurrentDomain() {return $this->current_domain;}private function init() {$this->detectDomain();$this->detectLang();$this->detectMode();$this->loadLangs();$LANG_EXPORT = array();$v2a41f6d927793b754d2d6dcd7485d96f = CURRENT_WORKING_DIR . "/classes/modules/lang.php";if (file_exists($v2a41f6d927793b754d2d6dcd7485d96f)) {include $v2a41f6d927793b754d2d6dcd7485d96f;}$this->langs = array_merge($this->langs, $LANG_EXPORT);$v1b2c38000ce4861a9ba046bf4dc483a4 = CURRENT_WORKING_DIR . "/classes/modules/lang." . $this->getCurrentLang()->getPrefix() . ".php";if(file_exists($v1b2c38000ce4861a9ba046bf4dc483a4)) {include $v1b2c38000ce4861a9ba046bf4dc483a4;$this->langs = array_merge($this->langs, $LANG_EXPORT);}$this->errorUrl = getServer('HTTP_REFERER');$this->doSomething();$this->calculateRefererUri();}private function detectDomain() {$v67b3dba8bc6778101892eb77249db32e = getServer('HTTP_HOST');if($v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDomain($v662cbf1253ac7d8750ed9190c52163e5);}else {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDefaultDomain()->getId();}if(is_object($vad5f82e879a9c5d6b5b442eb37e50551)) {$this->current_domain = $vad5f82e879a9c5d6b5b442eb37e50551;return true;}else {$this->current_domain = domainsCollection::getInstance()->getDefaultDomain();return false;}}private function detectLang() {$vb24bcd6b7d395b852353e079beaec4f9 = getRequest('lang_id');$v78e6dd7a49f5b0cb2106a3a434dd5c86 = false;if($vb24bcd6b7d395b852353e079beaec4f9 != null) {if(is_array($vb24bcd6b7d395b852353e079beaec4f9)) list($vb24bcd6b7d395b852353e079beaec4f9) = $vb24bcd6b7d395b852353e079beaec4f9;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = intval($vb24bcd6b7d395b852353e079beaec4f9);}else if (!is_null(getRequest('links')) && is_array($v7ffc4d510260a8544e5550e62ec56bc1 = getRequest('rel'))) {if(sizeof($v7ffc4d510260a8544e5550e62ec56bc1) && ($v7552cd149af7495ee7d8225974e50f80 = array_pop($v7ffc4d510260a8544e5550e62ec56bc1))) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7552cd149af7495ee7d8225974e50f80, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();}}}else {list($vb31590b98760b74e7c4e1a809e43152d) = $this->getPathArray();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = langsCollection::getInstance()->getLangId($vb31590b98760b74e7c4e1a809e43152d);}if(($this->current_lang = langsCollection::getInstance()->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86)) === false ) {if($this->current_domain) {if($v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->current_domain->getDefaultLangId()) {$this->current_lang = langsCollection::getInstance()->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86);}else {$this->current_lang = langsCollection::getInstance()->getDefaultLang();}}else {$this->current_lang = langsCollection::getInstance()->getDefaultLang();}}if($this->current_lang->getId() != $this->current_domain->getDefaultLangId()) {$this->pre_lang = "/" . $this->current_lang->getPrefix();$_REQUEST['pre_lang'] = $this->pre_lang;}}private function getPathArray() {$vd6fe1d0be6347b8ef2427fa629c04485 = getRequest('path');$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");return explode("/", $vd6fe1d0be6347b8ef2427fa629c04485);}private function detectMode() {$v32660e7b27600e0fde6ff1333c6c0568 = $this->getPathArray();if(sizeof($v32660e7b27600e0fde6ff1333c6c0568) < 2) {$v32660e7b27600e0fde6ff1333c6c0568[1] = NULL;}list($v9ea3ab74bc8133d47b81a107f1a1c585, $v394072637b008e3829968bb5109f17ac) = $v32660e7b27600e0fde6ff1333c6c0568;if($v9ea3ab74bc8133d47b81a107f1a1c585 == "admin" || $v394072637b008e3829968bb5109f17ac == "admin") {$this->current_mode = "admin";}else {$this->current_mode = "";cacheFrontend::$cacheMode = true;}}private function getSubPathType($vb31590b98760b74e7c4e1a809e43152d) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if(!$this->current_module) {if($vb31590b98760b74e7c4e1a809e43152d == "seo") {if(ulangStream::getLangPrefix() != "ru") {return "UNKNOWN";}}if($vb31590b98760b74e7c4e1a809e43152d == "trash") {def_module::redirect($this->pre_lang . "/admin/data/trash/");}if($vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/" . $vb31590b98760b74e7c4e1a809e43152d)) {$this->setCurrentModule($vb31590b98760b74e7c4e1a809e43152d);return "MODULE";}}if($this->current_module && !$this->current_method) {$this->setCurrentMethod($vb31590b98760b74e7c4e1a809e43152d);return "METHOD";}if($this->current_module && $this->current_method) {return "PARAM";}return "UNKNOWN";}public function analyzePath() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v32660e7b27600e0fde6ff1333c6c0568 = $this->getPathArray();$vd6fe1d0be6347b8ef2427fa629c04485 = getRequest('path');$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v32660e7b27600e0fde6ff1333c6c0568);$vaddb1838ab68ee501d3a0e2868a127c9 = Array();$v83878c91171338902e0fe0fb97a8c47a = 0;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vb31590b98760b74e7c4e1a809e43152d = $v32660e7b27600e0fde6ff1333c6c0568[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v865c0c0b4ab0e063e5caa3387c1a8741 <= 1) {if(($vb31590b98760b74e7c4e1a809e43152d == $this->current_mode) || ($vb31590b98760b74e7c4e1a809e43152d == $this->current_lang->getPrefix())) {continue;}}$vaddb1838ab68ee501d3a0e2868a127c9[] = $vb31590b98760b74e7c4e1a809e43152d;$vbdcb4bec1c234b49e0a70911cf33ff6f = $this->getSubPathType($vb31590b98760b74e7c4e1a809e43152d);if($vbdcb4bec1c234b49e0a70911cf33ff6f == "PARAM") {$_REQUEST['param' . $v83878c91171338902e0fe0fb97a8c47a++] = $vb31590b98760b74e7c4e1a809e43152d;}}if(!$this->current_module) {if($this->current_mode == "admin") {$v854203cccade0bbe21be239a208aea49 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/default_module_admin");$this->autoRedirectToMethod($v854203cccade0bbe21be239a208aea49);}else {$v854203cccade0bbe21be239a208aea49 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/default_module");}$this->setCurrentModule($v854203cccade0bbe21be239a208aea49);}if(!$this->current_method) {if($this->current_mode == "admin") {$this->autoRedirectToMethod($this->current_module);}else {$v2fa70149e2a7e75da2b0303d0a36a944 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/" . $this->current_module . "/default_method");}$this->setCurrentMethod($v2fa70149e2a7e75da2b0303d0a36a944);}if($this->getCurrentMode() == "admin") {return;}$v7057e8409c7c531a1a6e9ac3df4ed549 = false;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vaddb1838ab68ee501d3a0e2868a127c9);$vb31590b98760b74e7c4e1a809e43152d = "";for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vb31590b98760b74e7c4e1a809e43152d .= "/" . $vaddb1838ab68ee501d3a0e2868a127c9[$v865c0c0b4ab0e063e5caa3387c1a8741];if(!($vfa816edb83e95bf0c8da580bdfd491ef = $vb81ca7c0ccaa77e7aa91936ab0070695->getIdByPath($vb31590b98760b74e7c4e1a809e43152d, false, $v3dbd53d892aaea70c9f5fefc18fc7e4c))) {$v7057e8409c7c531a1a6e9ac3df4ed549 = false;break;}else {$v7057e8409c7c531a1a6e9ac3df4ed549 = $vfa816edb83e95bf0c8da580bdfd491ef;}}if($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v3dbd53d892aaea70c9f5fefc18fc7e4c > 0 && !defined("DISABLE_AUTOCORRECTION_REDIRECT")) {$vd6fe1d0be6347b8ef2427fa629c04485 = $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v7057e8409c7c531a1a6e9ac3df4ed549);if($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) {if($this->isModule($vaddb1838ab68ee501d3a0e2868a127c9[0])) {$v7057e8409c7c531a1a6e9ac3df4ed549 = false;break;}}header("HTTP/1.1 301 Moved Permanently");header("Location: {$vd6fe1d0be6347b8ef2427fa629c04485}");exit();}$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDefault()) {$vd6fe1d0be6347b8ef2427fa629c04485 = $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v7057e8409c7c531a1a6e9ac3df4ed549);header("HTTP/1.1 301 Moved Permanently");header("Location: {$vd6fe1d0be6347b8ef2427fa629c04485}");exit();}}}if(($vd6fe1d0be6347b8ef2427fa629c04485 == "" || $vd6fe1d0be6347b8ef2427fa629c04485 == $this->current_lang->getPrefix()) && $this->current_mode != "admin") {if($v7057e8409c7c531a1a6e9ac3df4ed549 = $vb81ca7c0ccaa77e7aa91936ab0070695->getDefaultElementId($this->getCurrentLang()->getId(), $this->getCurrentDomain()->getId())) {$this->current_element_id = $v7057e8409c7c531a1a6e9ac3df4ed549;}}if($v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true)) {$v599dcce2998a6b40b1e38e8c6006cb0a = umiHierarchyTypesCollection::getInstance()->getType($v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId());if(!$v599dcce2998a6b40b1e38e8c6006cb0a) return false;$this->current_module = $v599dcce2998a6b40b1e38e8c6006cb0a->getName();if($vabf77184f55403d75b9d51d79162a7ca = $v599dcce2998a6b40b1e38e8c6006cb0a->getExt()) {$this->setCurrentMethod($vabf77184f55403d75b9d51d79162a7ca);}else {$this->setCurrentMethod("content");}$this->current_element_id = $v7057e8409c7c531a1a6e9ac3df4ed549;}}public function setCurrentModule($v854203cccade0bbe21be239a208aea49) {$this->current_module = $v854203cccade0bbe21be239a208aea49;}public function setCurrentMethod($v2fa70149e2a7e75da2b0303d0a36a944) {if(defined("CURRENT_VERSION_LINE")) {if(CURRENT_VERSION_LINE == "free" || CURRENT_VERSION_LINE == "lite" || CURRENT_VERSION_LINE == "freelance") {if(cmsController::getInstance()->getCurrentMode() == "admin") {if($this->current_module == "data" && substr($v2fa70149e2a7e75da2b0303d0a36a944, 0, strlen("trash")) != "trash" && $v2fa70149e2a7e75da2b0303d0a36a944 != "json_load_hierarchy_level") {$this->current_module = "content";$this->current_method = "sitetree";return false;}}}}$this->current_method = $v2fa70149e2a7e75da2b0303d0a36a944;}public function loadLangs() {$v0eb9b3af2e4a00837a1b1a854c9ea18c = regedit::getInstance()->getList("//modules");foreach($v0eb9b3af2e4a00837a1b1a854c9ea18c as $v22884db148f0ffb0d830ba431102b0b5) {$v854203cccade0bbe21be239a208aea49 = $v22884db148f0ffb0d830ba431102b0b5[0];$v9a4a6f6ee974a928a90c9152a674b141 = CURRENT_WORKING_DIR . '/classes/modules/' . $v854203cccade0bbe21be239a208aea49 . '/';$v9a4a6f6ee974a928a90c9152a674b141 .= "lang.php";if (file_exists($v9a4a6f6ee974a928a90c9152a674b141)) {include $v9a4a6f6ee974a928a90c9152a674b141;}if(isset($v4ace5046c3309f93a68ee49049d2c114)) {if(is_array($v4ace5046c3309f93a68ee49049d2c114)) {$this->langs[$v854203cccade0bbe21be239a208aea49] = $v4ace5046c3309f93a68ee49049d2c114;unset($v4ace5046c3309f93a68ee49049d2c114);}}if(isset($LANG_EXPORT)) {if(is_array($LANG_EXPORT)) {$this->langs = array_merge($this->langs, $LANG_EXPORT);unset($LANG_EXPORT);}}$v9a4a6f6ee974a928a90c9152a674b141 = CURRENT_WORKING_DIR . '/classes/modules/' . $v854203cccade0bbe21be239a208aea49 . '/';$v9a4a6f6ee974a928a90c9152a674b141 .= "lang." . $this->getCurrentLang()->getPrefix() .".php";if(file_exists($v9a4a6f6ee974a928a90c9152a674b141)) {include $v9a4a6f6ee974a928a90c9152a674b141;if(is_array($v4ace5046c3309f93a68ee49049d2c114)) {$this->langs[$v854203cccade0bbe21be239a208aea49] = $v4ace5046c3309f93a68ee49049d2c114;unset($v4ace5046c3309f93a68ee49049d2c114);}if(is_array($LANG_EXPORT)) {$this->langs = array_merge($this->langs, $LANG_EXPORT);unset($LANG_EXPORT);}}}}final private function doSomething () {return false;if(defined("CURRENT_VERSION_LINE")) {if(CURRENT_VERSION_LINE != "demo") {include CURRENT_WORKING_DIR . "/errors/invalid_license.html";exit();}else {return true;}}$v1a54c1036ccb10069e9c06281d52007a = regedit::getInstance()->getVal("//settings/keycode");if($this->doStrangeThings($v1a54c1036ccb10069e9c06281d52007a)) {return true;}$v9030f0c3bdeaad3bfed5afe95b6abb39 = Array();$v9030f0c3bdeaad3bfed5afe95b6abb39['pro'] = templater::getSomething("pro");$v9030f0c3bdeaad3bfed5afe95b6abb39['free'] = templater::getSomething("free");$v9030f0c3bdeaad3bfed5afe95b6abb39['lite'] = templater::getSomething("lite");$v9030f0c3bdeaad3bfed5afe95b6abb39['freelance'] = templater::getSomething("freelance");$v9030f0c3bdeaad3bfed5afe95b6abb39['trial'] = templater::getSomething("trial");if(regedit::checkSomething($v1a54c1036ccb10069e9c06281d52007a, $v9030f0c3bdeaad3bfed5afe95b6abb39)) {return true;}else {include CURRENT_WORKING_DIR . "/errors/invalid_license.html";exit();}}final private function doStrangeThings($v1a54c1036ccb10069e9c06281d52007a) {$v02af0c970ae1d359ec007b3e1d3c064d = CURRENT_WORKING_DIR . "/cache/trash";$v5321626b774a579656cf063f8d8ac056 = false;$vcd91e7679d575a2c548bd2c889c23b9e = 604800;if(!file_exists(CURRENT_WORKING_DIR . "/cache")) {mkdir(CURRENT_WORKING_DIR . "/cache", 0777);}if(file_exists($v02af0c970ae1d359ec007b3e1d3c064d)) {if((time() - filemtime($v02af0c970ae1d359ec007b3e1d3c064d)) > $vcd91e7679d575a2c548bd2c889c23b9e) {$v5321626b774a579656cf063f8d8ac056 = base64_decode(file_get_contents($v02af0c970ae1d359ec007b3e1d3c064d));}}else {file_put_contents($v02af0c970ae1d359ec007b3e1d3c064d, base64_encode($v1a54c1036ccb10069e9c06281d52007a));}if($v5321626b774a579656cf063f8d8ac056 !== false && $v1a54c1036ccb10069e9c06281d52007a) {if($v1a54c1036ccb10069e9c06281d52007a === $v5321626b774a579656cf063f8d8ac056) {return true;}}return false;}public function getRequestId() {static $v510ff634fce407eea1763854519fd3ce = false;if($v510ff634fce407eea1763854519fd3ce === false) $v510ff634fce407eea1763854519fd3ce = time();return $v510ff634fce407eea1763854519fd3ce;}public function getPreLang() {return $this->pre_lang;}protected function autoRedirectToMethod($v22884db148f0ffb0d830ba431102b0b5) {$v25173eac47bcd1aa0bb3a146f0595bb7 = $this->pre_lang;$vea9f6aca279138c58f705c8d4cb4b8ce = regedit::getInstance()->getVal("//modules/" . $v22884db148f0ffb0d830ba431102b0b5 . "/default_method_admin");$v572d4e421e5e6b9bc11d815e8a027112 = $v25173eac47bcd1aa0bb3a146f0595bb7 . "/admin/" . $v22884db148f0ffb0d830ba431102b0b5 . "/" . $vea9f6aca279138c58f705c8d4cb4b8ce . "/";header("Location: {$v572d4e421e5e6b9bc11d815e8a027112}");exit();}public function calculateRefererUri() {if($vc66c00ae9f18fc0c67d8973bd07dc4cd = getRequest('referer')) {$_SESSION['referer'] = $vc66c00ae9f18fc0c67d8973bd07dc4cd;}else {if($vc66c00ae9f18fc0c67d8973bd07dc4cd = getSession('referer')) {unset($_SESSION['referer']);}else {$vc66c00ae9f18fc0c67d8973bd07dc4cd = getServer('HTTP_REFERER');}}$this->calculated_referer_uri = $vc66c00ae9f18fc0c67d8973bd07dc4cd;}public function getCalculatedRefererUri() {if($this->calculated_referer_uri === false) {$this->calculateRefererUri();}return $this->calculated_referer_uri;}public function isModule($v854203cccade0bbe21be239a208aea49) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if($vb1444fb0c07653567ad325aa25d4e37a->getVal('//modules/' . $v854203cccade0bbe21be239a208aea49)) {return true;}else {return false;}}};interface iLanguageMorph {public function __construct();public static function get_word_base($vc47d187067c6cf953245f128b5fde62a);public static function get_word_morph($vc47d187067c6cf953245f128b5fde62a, $v599dcce2998a6b40b1e38e8c6006cb0a = 'noun', $ve2942a04780e223b215eb8b663cf5353 = 0);};class language_morph implements iLanguageMorph {private $lang;public function __construct() {}public static function get_word_base($vc47d187067c6cf953245f128b5fde62a) {$vce5f02f301018ab60c4921d6654a75cd = umiConversion::getInstance();return $vce5f02f301018ab60c4921d6654a75cd->stemmerRu($vc47d187067c6cf953245f128b5fde62a);}public static function get_word_morph($vc47d187067c6cf953245f128b5fde62a, $v599dcce2998a6b40b1e38e8c6006cb0a = 'noun', $ve2942a04780e223b215eb8b663cf5353 = 0) {}};interface iUmiDate {public function __construct($v87a3cb5c3554b2d9d8a1a773ad0936be = false);public function getFormattedDate($v3c64ab0a1c8c902a8cfc3bdeedccd50a = false);public function getCurrentTimeStamp();public function getDateTimeStamp();public function setDateByTimeStamp($v87a3cb5c3554b2d9d8a1a773ad0936be);public function setDateByString($ved2f216e8eb7276d3e828504ebdf5437);public static function getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437);}class umiDate implements iUmiDate {public $timestamp;public $defaultFormatString = "Y-m-d H:i";public function __construct($vd7e6d55ba379a13d08c25d15faf2a23b = false) {if($vd7e6d55ba379a13d08c25d15faf2a23b === false) {$vd7e6d55ba379a13d08c25d15faf2a23b = self::getCurrentTimeStamp();}$this->setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b);}public function getCurrentTimeStamp() {return time();}public function getDateTimeStamp() {return intval($this->timestamp);}public function getFormattedDate($v3c64ab0a1c8c902a8cfc3bdeedccd50a = false) {if($v3c64ab0a1c8c902a8cfc3bdeedccd50a === false) {$v3c64ab0a1c8c902a8cfc3bdeedccd50a = $this->defaultFormatString;}return date($v3c64ab0a1c8c902a8cfc3bdeedccd50a, $this->timestamp);}public function setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b) {if(!is_numeric($vd7e6d55ba379a13d08c25d15faf2a23b)) {return false;}$this->timestamp = $vd7e6d55ba379a13d08c25d15faf2a23b;return true;}public function setDateByString($ved2f216e8eb7276d3e828504ebdf5437) {$ved2f216e8eb7276d3e828504ebdf5437 = umiObjectProperty::filterInputString($ved2f216e8eb7276d3e828504ebdf5437);$vd7e6d55ba379a13d08c25d15faf2a23b  = strlen($ved2f216e8eb7276d3e828504ebdf5437) ? self::getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437) : time();return $this->setDateByTimeStamp($vd7e6d55ba379a13d08c25d15faf2a23b);}public static function getTimeStamp($ved2f216e8eb7276d3e828504ebdf5437) {return toTimeStamp($ved2f216e8eb7276d3e828504ebdf5437);}}interface iUmiFile {public function __construct($v47826cacc65c665212b821e6ff80b9b0);public function delete();public static function upload($vace49b0950fb197bb64f2ffb6a715467, $v2eb515ec764b456f2b9e57c512233229, $v74fd4667ea41a65d884a6de38d24a946);public function getSize();public function getExt();public function getFileName();public function getDirName();public function getModifyTime();public function getFilePath($vb660cf7888d38578b005371413e1c0a6 = false);public function getIsBroken();public function __toString();public static function getUnconflictPath($vd6fe1d0be6347b8ef2427fa629c04485);public function download($v789726e10bf01b1777c5d2ae06bede3e = false);}class umiFile implements iUmiFile {protected $filepath,    $size, $ext, $name, $dirname, $modify_time,    $is_broken = false;public static $mask = 0777;protected static $class_name = 'umiFile';public function __construct($v6a2a431fe8b621037ea949531c28551d) {$v6a2a431fe8b621037ea949531c28551d = str_replace("//", "/", $v6a2a431fe8b621037ea949531c28551d);$v6a2a431fe8b621037ea949531c28551d = str_replace("\\\\", "\\", $v6a2a431fe8b621037ea949531c28551d);if(!@is_file($v6a2a431fe8b621037ea949531c28551d)) {$this->is_broken = true;return false;}$this->filepath = $v6a2a431fe8b621037ea949531c28551d;$this->filepath = str_replace("\\", "/", $v6a2a431fe8b621037ea949531c28551d);$this->loadInfo();}public function delete() {if(is_writable($this->filepath)) {return unlink($this->filepath);}else {return false;}}public function download($v789726e10bf01b1777c5d2ae06bede3e = false) {ob_end_clean();header('HTTP/1.1 200 OK');header("Cache-Control: public, must-revalidate");header("Pragma: no-cache");header("Content-type: application/force-download");header("Content-Length: " . $this->getSize());header('Accept-Ranges: bytes');header("Content-Encoding: None");header("Vary:");header('Content-Transfer-Encoding: Binary');header("Content-Disposition: attachment; filename=" . $this->getFileName());readfile(realpath($this->getFilePath()));if($v789726e10bf01b1777c5d2ae06bede3e) {$this->delete();}exit();}public static function manualUpload($vb068931cc450442b63f5b3d276ea4297, $ve440be6a92dba11caa790215081671ae, $vf7bd60b75b29d79b660a2859395c1a24, $vb2ed5fc91c9760886b14c955ac6c82d7) {if(!$vf7bd60b75b29d79b660a2859395c1a24 || !$vb068931cc450442b63f5b3d276ea4297 || $vb068931cc450442b63f5b3d276ea4297 == ".htaccess" || !is_uploaded_file($ve440be6a92dba11caa790215081671ae)) return 1;$v694fbbfc143481cbc48ab8ddeadb00f1 = array("php", "php3", "php4", "php5", "phtml");if( in_array(substr($vb068931cc450442b63f5b3d276ea4297, strrpos($vb068931cc450442b63f5b3d276ea4297, '.')), $v694fbbfc143481cbc48ab8ddeadb00f1) ) return 2;list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . strtolower($v566bbee0f961ad71b54c3c2fd36db053);$v9024b204fb4c4ffdd07ee631ed791f75 = $vb2ed5fc91c9760886b14c955ac6c82d7 . "/" . $vb068931cc450442b63f5b3d276ea4297;if($vb068931cc450442b63f5b3d276ea4297 == ".htaccess") {return 3;}$v566bbee0f961ad71b54c3c2fd36db053 = strtolower($v566bbee0f961ad71b54c3c2fd36db053);if( in_array( $v566bbee0f961ad71b54c3c2fd36db053, $v694fbbfc143481cbc48ab8ddeadb00f1 ) ) {return 4;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v9024b204fb4c4ffdd07ee631ed791f75)) {chmod($v9024b204fb4c4ffdd07ee631ed791f75, self::$mask);$v9024b204fb4c4ffdd07ee631ed791f75 = self::getRelPath($v9024b204fb4c4ffdd07ee631ed791f75);return new self::$class_name($v9024b204fb4c4ffdd07ee631ed791f75);}else {return 5;}}else {return 6;}}public static function upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f = false) {global $_FILES;$ve067156fc3a90cfa942be4efa6f5bc7e = &$_FILES;$va1b423d9a2738b47df059a8a38abbd27 = $vb2ed5fc91c9760886b14c955ac6c82d7;if(substr($va1b423d9a2738b47df059a8a38abbd27, strlen($va1b423d9a2738b47df059a8a38abbd27) - 1, 1) != "/") $va1b423d9a2738b47df059a8a38abbd27 .= "/";$vb2ed5fc91c9760886b14c955ac6c82d7 = realpath($vb2ed5fc91c9760886b14c955ac6c82d7);if(!is_dir($vb2ed5fc91c9760886b14c955ac6c82d7)) {return false;}if(!is_writable($vb2ed5fc91c9760886b14c955ac6c82d7)) {return false;}if(!is_array($ve067156fc3a90cfa942be4efa6f5bc7e)) {return false;}if(!isset($ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e]) && isset($ve067156fc3a90cfa942be4efa6f5bc7e['pics'])) {$ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e] = $ve067156fc3a90cfa942be4efa6f5bc7e['pics'];$veeeb23fbd23e52a6a6ff78b9f18cbc4e = "pics";}if(array_key_exists($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $ve067156fc3a90cfa942be4efa6f5bc7e)) {$v080505fba0c91df9d7cff41d972acaf1 = $ve067156fc3a90cfa942be4efa6f5bc7e[$veeeb23fbd23e52a6a6ff78b9f18cbc4e];if(isset($v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17])) {$vb80bb7740288fda1f201890375a60c8f = false;}$vf7bd60b75b29d79b660a2859395c1a24 = ($vb80bb7740288fda1f201890375a60c8f === false) ?                                     (isset($v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17])? $v080505fba0c91df9d7cff41d972acaf1['size'][$v86536e21993c5a96a4d4c9c9afcc9b17] : 0)                                        :                                     (isset($v080505fba0c91df9d7cff41d972acaf1['size'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17])? $v080505fba0c91df9d7cff41d972acaf1['size'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17] : 0);if($vf7bd60b75b29d79b660a2859395c1a24 == 0) {return false;}else {$ve440be6a92dba11caa790215081671ae = ($vb80bb7740288fda1f201890375a60c8f === false) ? $v080505fba0c91df9d7cff41d972acaf1['tmp_name'][$v86536e21993c5a96a4d4c9c9afcc9b17] : $v080505fba0c91df9d7cff41d972acaf1['tmp_name'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17];$vb068931cc450442b63f5b3d276ea4297 = ($vb80bb7740288fda1f201890375a60c8f === false) ? $v080505fba0c91df9d7cff41d972acaf1['name'][$v86536e21993c5a96a4d4c9c9afcc9b17] : $v080505fba0c91df9d7cff41d972acaf1['name'][$vb80bb7740288fda1f201890375a60c8f][$v86536e21993c5a96a4d4c9c9afcc9b17];$v694fbbfc143481cbc48ab8ddeadb00f1 = array("php", "php3", "php4", "php5", "phtml");if( in_array(substr($vb068931cc450442b63f5b3d276ea4297, strrpos($vb068931cc450442b63f5b3d276ea4297, '.')), $v694fbbfc143481cbc48ab8ddeadb00f1) ) return false;list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . strtolower($v566bbee0f961ad71b54c3c2fd36db053);$v9024b204fb4c4ffdd07ee631ed791f75 = $vb2ed5fc91c9760886b14c955ac6c82d7 . "/" . $vb068931cc450442b63f5b3d276ea4297;if($vb068931cc450442b63f5b3d276ea4297 == ".htaccess") {return false;}$v566bbee0f961ad71b54c3c2fd36db053 = strtolower($v566bbee0f961ad71b54c3c2fd36db053);if( in_array( $v566bbee0f961ad71b54c3c2fd36db053, $v694fbbfc143481cbc48ab8ddeadb00f1 ) ) {return false;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v9024b204fb4c4ffdd07ee631ed791f75)) {chmod($v9024b204fb4c4ffdd07ee631ed791f75, self::$mask);$v9024b204fb4c4ffdd07ee631ed791f75 = self::getRelPath($v9024b204fb4c4ffdd07ee631ed791f75);return new self::$class_name($v9024b204fb4c4ffdd07ee631ed791f75);}else {return false;}}else {return false;}}}else {return false;}}public static function upload_zip ($v86536e21993c5a96a4d4c9c9afcc9b17, $v8c7dd922ad47494fc02c388e12c00eac = "", $v851148b4fd8fd7ae74bd9100c5c0c898 = "./images/cms/data/")  {if ($v8c7dd922ad47494fc02c388e12c00eac == "") {$ve440be6a92dba11caa790215081671ae = $v86536e21993c5a96a4d4c9c9afcc9b17['tmp_name'];$vb068931cc450442b63f5b3d276ea4297 = $v86536e21993c5a96a4d4c9c9afcc9b17['name'];list(,, $v566bbee0f961ad71b54c3c2fd36db053) = array_values(pathinfo($vb068931cc450442b63f5b3d276ea4297));$vb068931cc450442b63f5b3d276ea4297 = substr($vb068931cc450442b63f5b3d276ea4297, 0, strlen($vb068931cc450442b63f5b3d276ea4297) - strlen($v566bbee0f961ad71b54c3c2fd36db053));$vb068931cc450442b63f5b3d276ea4297 = translit::convert($vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 .= "." . $v566bbee0f961ad71b54c3c2fd36db053;$v9024b204fb4c4ffdd07ee631ed791f75 = $v851148b4fd8fd7ae74bd9100c5c0c898.$vb068931cc450442b63f5b3d276ea4297;$v3cc7992a6d5b20ce784f6169f4423048 = './'.$vb068931cc450442b63f5b3d276ea4297;if ($v86536e21993c5a96a4d4c9c9afcc9b17['size'] == 0) {return false;}if(is_uploaded_file($ve440be6a92dba11caa790215081671ae)) {$v9024b204fb4c4ffdd07ee631ed791f75 = umiFile::getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75);if(move_uploaded_file($ve440be6a92dba11caa790215081671ae, $v3cc7992a6d5b20ce784f6169f4423048)) {chmod($v3cc7992a6d5b20ce784f6169f4423048, self::$mask);}else {return false;}}else {return false;}}else {$v8c7dd922ad47494fc02c388e12c00eac = "./".$v8c7dd922ad47494fc02c388e12c00eac;if (!file_exists ($v8c7dd922ad47494fc02c388e12c00eac) || !is_writable($v8c7dd922ad47494fc02c388e12c00eac)) return "File not exists!";$ve6223bee17b330d9aed62e68463e0515 = pathinfo ($v8c7dd922ad47494fc02c388e12c00eac);if ($ve6223bee17b330d9aed62e68463e0515['extension'] != "zip") {return "It's not zip-file!";}$v9024b204fb4c4ffdd07ee631ed791f75 = $v8c7dd922ad47494fc02c388e12c00eac;$v3cc7992a6d5b20ce784f6169f4423048 = $v8c7dd922ad47494fc02c388e12c00eac;}$v888d0ee361af3603736f32131e7b20a2 = new PclZip($v3cc7992a6d5b20ce784f6169f4423048);if (($v10ae9fc7d453b0dd525d0edf2ede7961 = $v888d0ee361af3603736f32131e7b20a2->extract(PCLZIP_OPT_PATH, $v851148b4fd8fd7ae74bd9100c5c0c898,    PCLZIP_CB_PRE_EXTRACT, "callbackPreExtract",    PCLZIP_CB_POST_EXTRACT, "callbackPostExtract",    PCLZIP_OPT_REMOVE_ALL_PATH)) == 0 || !is_array ($v10ae9fc7d453b0dd525d0edf2ede7961)) {if(is_writable($v9024b204fb4c4ffdd07ee631ed791f75)) {unlink($v9024b204fb4c4ffdd07ee631ed791f75);}throw new coreException ("Zip extracting error: ".$v888d0ee361af3603736f32131e7b20a2->errorInfo(true));}if(is_writable($v9024b204fb4c4ffdd07ee631ed791f75)) {unlink($v9024b204fb4c4ffdd07ee631ed791f75);}return $v10ae9fc7d453b0dd525d0edf2ede7961;}public function getFileName() {return $this->name;}public function getDirName() {return $this->dirname;}public function getModifyTime() {return $this->modify_time;}public function getExt() {return $this->ext;}public function getSize() {return $this->size;}public function getFilePath($v335fe1286880112c216697dceb9e2bd3 = false) {if($v335fe1286880112c216697dceb9e2bd3) {$vbf7be97451be760d000d8fd7b26c5a3d = ini_get("include_path");if (substr($this->filepath, 0, strlen($vbf7be97451be760d000d8fd7b26c5a3d)) === $vbf7be97451be760d000d8fd7b26c5a3d) {return "/" . substr($this->filepath, strlen($vbf7be97451be760d000d8fd7b26c5a3d));}return (substr($this->filepath, 0, 2) == "./") ? ("/" . substr($this->filepath, 2, strlen($this->filepath) - 2)) : $this->filepath;}else {return $this->filepath;}}private function loadInfo() {if(!is_file($this->filepath)) {$this->is_broken = true;return false;}if(!is_readable($this->filepath)) {$this->is_broken = true;return false;}$va93b85dcfbb9969f5bb3c6be71737ed5 = pathinfo($this->filepath);$this->modify_time = filemtime($this->filepath);$this->size = filesize($this->filepath);$this->dirname = $va93b85dcfbb9969f5bb3c6be71737ed5['dirname'];$this->name = $va93b85dcfbb9969f5bb3c6be71737ed5['basename'];$this->ext = strtolower(getArrayKey($va93b85dcfbb9969f5bb3c6be71737ed5, 'extension'));if($this->ext == "php" || $this->ext == "php5" || $this->ext == "phtml") {$this->is_broken = true;}if($this->name == ".htaccess") {$this->is_broken = true;}}public function __toString() {$v6a2a431fe8b621037ea949531c28551d = $this->getFilePath(true);return is_null($v6a2a431fe8b621037ea949531c28551d) ? "" : $v6a2a431fe8b621037ea949531c28551d;}public function getIsBroken() {return (bool) $this->is_broken;}public static function getUnconflictPath($v9024b204fb4c4ffdd07ee631ed791f75) {if(!file_exists($v9024b204fb4c4ffdd07ee631ed791f75)) {return $v9024b204fb4c4ffdd07ee631ed791f75;}else {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v9024b204fb4c4ffdd07ee631ed791f75);$v954eef6d6eac59aca304b6d7abb4fb3e = $vcaf9b6b99962bf5c2264824231d7a40c['dirname'];$v435ed7e9f07f740abf511a62c00eef6e = $vcaf9b6b99962bf5c2264824231d7a40c['filename'];$vabf77184f55403d75b9d51d79162a7ca = $vcaf9b6b99962bf5c2264824231d7a40c['extension'];for($v865c0c0b4ab0e063e5caa3387c1a8741 = 1;$v865c0c0b4ab0e063e5caa3387c1a8741 < 257;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v9024b204fb4c4ffdd07ee631ed791f75 = $v954eef6d6eac59aca304b6d7abb4fb3e . "/" . $v435ed7e9f07f740abf511a62c00eef6e . $v865c0c0b4ab0e063e5caa3387c1a8741 . "." . $vabf77184f55403d75b9d51d79162a7ca;if(!file_exists($v9024b204fb4c4ffdd07ee631ed791f75)) {return $v9024b204fb4c4ffdd07ee631ed791f75;}}throw new coreException("This is really hard to happen");}}protected static function getRelPath($vd6fe1d0be6347b8ef2427fa629c04485) {$v109633366fd0d46d371ede589998abaa = realpath(getcwd());return "." . substr(realpath($vd6fe1d0be6347b8ef2427fa629c04485), strlen($v109633366fd0d46d371ede589998abaa));}};function callbackPreExtract ($v50cd20d6ab1f950f5f7cd9594d824078, &$v346210869c15b12ae6d906bb9e095aac) {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v346210869c15b12ae6d906bb9e095aac['filename']);$v954eb83bca864c64ee1e669dfab01c95 = substr($vcaf9b6b99962bf5c2264824231d7a40c['basename'], 0, (strlen($vcaf9b6b99962bf5c2264824231d7a40c['basename']) - strlen($vcaf9b6b99962bf5c2264824231d7a40c['extension']))-1);$v954eb83bca864c64ee1e669dfab01c95 = translit::convert($v954eb83bca864c64ee1e669dfab01c95);$v346210869c15b12ae6d906bb9e095aac['filename'] = $vcaf9b6b99962bf5c2264824231d7a40c['dirname']."/".$v954eb83bca864c64ee1e669dfab01c95.".".$vcaf9b6b99962bf5c2264824231d7a40c['extension'];$v346210869c15b12ae6d906bb9e095aac['filename'] = umiFile::getUnconflictPath($v346210869c15b12ae6d906bb9e095aac['filename']);return 1;}function callbackPostExtract ($v50cd20d6ab1f950f5f7cd9594d824078, &$v346210869c15b12ae6d906bb9e095aac) {$vcaf9b6b99962bf5c2264824231d7a40c = pathinfo($v346210869c15b12ae6d906bb9e095aac['stored_filename']);$v7fee4f7b906c49d382375b9db2541387 = array ("jpg","jpeg","gif","bmp","png");if ( !in_array ($vcaf9b6b99962bf5c2264824231d7a40c['extension'], $v7fee4f7b906c49d382375b9db2541387)) {unlink ($v346210869c15b12ae6d906bb9e095aac['filename']);}return 1;}interface iUmiImageFile {public function getWidth();public function getHeight();}class umiImageFile extends umiFile implements iUmiImageFile {private static $aSupportedTypes = null;private static $useWatermark = false;public function __construct($v6a2a431fe8b621037ea949531c28551d) {parent::__construct($v6a2a431fe8b621037ea949531c28551d);if (!$this->is_broken) {$this->is_broken = ! self::getIsImage($this->name);}}public static function getSupportedImageTypes() {if (is_null(self::$aSupportedTypes)) {self::$aSupportedTypes = array();self::$aSupportedTypes[] = "GIF";self::$aSupportedTypes[] = "JPG";self::$aSupportedTypes[] = "JPEG";self::$aSupportedTypes[] = "PNG";self::$aSupportedTypes[] = "WBMP";self::$aSupportedTypes[] = "BMP";self::$aSupportedTypes[] = "SWF";}return self::$aSupportedTypes;}public static function setWatermarkOn () {self::$useWatermark = true;}public static function setWatermarkOff () {self::$useWatermark = false;}public static function upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f = false) {self::$class_name = __CLASS__;$v6a2a431fe8b621037ea949531c28551d = parent::upload($veeeb23fbd23e52a6a6ff78b9f18cbc4e, $v86536e21993c5a96a4d4c9c9afcc9b17, $vb2ed5fc91c9760886b14c955ac6c82d7, $vb80bb7740288fda1f201890375a60c8f);$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$ve6a7ab42343e8bc9131d89646abcb773 = (int) $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/max_img_filesize");$v79001f389eb5f5185f6945430cb57be1 = (int) ini_get("upload_max_filesize");$ve6a7ab42343e8bc9131d89646abcb773 = ($ve6a7ab42343e8bc9131d89646abcb773 < $v79001f389eb5f5185f6945430cb57be1) ? $ve6a7ab42343e8bc9131d89646abcb773 : $v79001f389eb5f5185f6945430cb57be1;$v11b4278c7e5a79003db77272c1ed2cf5 = (int) filesize("." . $v6a2a431fe8b621037ea949531c28551d);$ve6a7ab42343e8bc9131d89646abcb773 = (int) $ve6a7ab42343e8bc9131d89646abcb773*1024*1024;if($ve6a7ab42343e8bc9131d89646abcb773 > 0) {if($ve6a7ab42343e8bc9131d89646abcb773 < $v11b4278c7e5a79003db77272c1ed2cf5) {unlink("." . $v6a2a431fe8b621037ea949531c28551d);return false;}}if (self::$useWatermark) {self::addWatermark ("./".$v6a2a431fe8b621037ea949531c28551d);}self::setWatermarkOff ();return $v6a2a431fe8b621037ea949531c28551d;}public static function getIsImage($v718f2106be68f0edfc366ed06124fe55) {$vdc94d607c2365888317e7b14f9ea0a9d = explode(".", $v718f2106be68f0edfc366ed06124fe55);$vdd3d03de4e016ecdd03c280fe46c86a3 = strtoupper(array_pop($vdc94d607c2365888317e7b14f9ea0a9d));return in_array($vdd3d03de4e016ecdd03c280fe46c86a3, self::getSupportedImageTypes());}public function getWidth() {list($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81) = getimagesize($this->filepath);return $veaae26a6fb20ed3ef54fb23bfa0b1fcc;}public function getHeight() {list($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81) = getimagesize($this->filepath);return $vb435e227d5dd201e1768b2bcb2e0aa81;}private static function addWatermark ($v47826cacc65c665212b821e6ff80b9b0) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance ();$v9234d6561fcbf96ed0c3f0ee5794032d = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/image");$v0246d16e9822ba3b810310987d165c71 = 80;$v8fa8b46b17731c7c9c882faede387741 = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/alpha");$v379da31305f1eba200307fcdf9cf0ca0 = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/valign");$vb1c37415e373f67b34bfbdeac8a8338f = $vb1444fb0c07653567ad325aa25d4e37a->getVal ("//settings/watermark/halign");if (!file_exists ($v9234d6561fcbf96ed0c3f0ee5794032d)) {return false;}if (!$v8fa8b46b17731c7c9c882faede387741) {$v8fa8b46b17731c7c9c882faede387741 = 70;}if (!$v379da31305f1eba200307fcdf9cf0ca0) {$v379da31305f1eba200307fcdf9cf0ca0 = "bottom";}if (!$vb1c37415e373f67b34bfbdeac8a8338f) {$vb1c37415e373f67b34bfbdeac8a8338f = "right";}$vfc1eb20506413fbbdc753afe5117cff0 = self::createImage ($v9234d6561fcbf96ed0c3f0ee5794032d);$v6226ba4abbac63dbd2114cb5966b1bf8 = self::createImage ($v47826cacc65c665212b821e6ff80b9b0);$vfcf76116d23aa625909b9eb0e709b276 = pathinfo ($v47826cacc65c665212b821e6ff80b9b0);if (!$vfc1eb20506413fbbdc753afe5117cff0 || !$v6226ba4abbac63dbd2114cb5966b1bf8) {return false;}$v9174d2f2b3c032f04911450bb5b7b25e = $vfc1eb20506413fbbdc753afe5117cff0["height"] / $v6226ba4abbac63dbd2114cb5966b1bf8["height"];$v3393d19d534fb6257afdc49390e536c4 = $vfc1eb20506413fbbdc753afe5117cff0["width"] / $v6226ba4abbac63dbd2114cb5966b1bf8["width"];if (($v9174d2f2b3c032f04911450bb5b7b25e > $v0246d16e9822ba3b810310987d165c71/100) || ($v3393d19d534fb6257afdc49390e536c4 > $v0246d16e9822ba3b810310987d165c71/100)) {$v0cb47aeb6e5f9323f0969e628c4e59f5 = ($v0246d16e9822ba3b810310987d165c71 / 100) / (($v9174d2f2b3c032f04911450bb5b7b25e > $v3393d19d534fb6257afdc49390e536c4) ? $v9174d2f2b3c032f04911450bb5b7b25e : $v3393d19d534fb6257afdc49390e536c4);$v91890ebc9d3427ff4a7d27c8f94caefc = floor($vfc1eb20506413fbbdc753afe5117cff0["height"] * $v0cb47aeb6e5f9323f0969e628c4e59f5);$vdee127a12af5fa50ceb8944739d5ef01 = floor($vfc1eb20506413fbbdc753afe5117cff0["width"] * $v0cb47aeb6e5f9323f0969e628c4e59f5);}else {$v91890ebc9d3427ff4a7d27c8f94caefc = $vfc1eb20506413fbbdc753afe5117cff0["height"];$vdee127a12af5fa50ceb8944739d5ef01 = $vfc1eb20506413fbbdc753afe5117cff0["width"];}$v98ac273381790591214fbee1fa05a6e9 = imagecreatetruecolor ($vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc);$v4362482a4ee187713f71bacd03c3f3b8 = imagecolorallocate ($v98ac273381790591214fbee1fa05a6e9, 255, 255, 255);imagefilledrectangle ($v98ac273381790591214fbee1fa05a6e9, 0, 0, $vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc, $v4362482a4ee187713f71bacd03c3f3b8);imagecopyresized ($v98ac273381790591214fbee1fa05a6e9, $vfc1eb20506413fbbdc753afe5117cff0["im"], 0, 0, 0, 0, $vdee127a12af5fa50ceb8944739d5ef01, $v91890ebc9d3427ff4a7d27c8f94caefc, $vfc1eb20506413fbbdc753afe5117cff0["width"], $vfc1eb20506413fbbdc753afe5117cff0["height"]);imagedestroy ($vfc1eb20506413fbbdc753afe5117cff0["im"]);$vfc1eb20506413fbbdc753afe5117cff0 = array (    "im" => $v98ac273381790591214fbee1fa05a6e9,    "width" => $vdee127a12af5fa50ceb8944739d5ef01,    "height" => $v91890ebc9d3427ff4a7d27c8f94caefc   );$v98ac273381790591214fbee1fa05a6e9 = imagecreatetruecolor ($v6226ba4abbac63dbd2114cb5966b1bf8["width"], $v6226ba4abbac63dbd2114cb5966b1bf8["height"]);$v4362482a4ee187713f71bacd03c3f3b8 = imagecolorallocate ($v98ac273381790591214fbee1fa05a6e9, 255, 255, 255);imagecopy ($v98ac273381790591214fbee1fa05a6e9, $v6226ba4abbac63dbd2114cb5966b1bf8["im"], 0,0,0,0, $v6226ba4abbac63dbd2114cb5966b1bf8["width"], $v6226ba4abbac63dbd2114cb5966b1bf8["height"]);$v6382f6cf920a5e1f12258b86b3fcac3b = 0;$v44ef37a80954a70dc24d955310d80967 = 0;switch ($vb1c37415e373f67b34bfbdeac8a8338f){case "center" : {$v6382f6cf920a5e1f12258b86b3fcac3b = floor (($v6226ba4abbac63dbd2114cb5966b1bf8["width"] - $vfc1eb20506413fbbdc753afe5117cff0["width"]) / 2);break;}case "right" : {$v6382f6cf920a5e1f12258b86b3fcac3b = $v6226ba4abbac63dbd2114cb5966b1bf8["width"] - $vfc1eb20506413fbbdc753afe5117cff0["width"];}}switch ($v379da31305f1eba200307fcdf9cf0ca0) {case "center" : {$v44ef37a80954a70dc24d955310d80967 = floor (($v6226ba4abbac63dbd2114cb5966b1bf8["height"] - $vfc1eb20506413fbbdc753afe5117cff0["height"]) / 2);break;}case "bottom" : {$v44ef37a80954a70dc24d955310d80967 = $v6226ba4abbac63dbd2114cb5966b1bf8["height"] - $vfc1eb20506413fbbdc753afe5117cff0["height"];}}imagecopymerge ($v98ac273381790591214fbee1fa05a6e9, $vfc1eb20506413fbbdc753afe5117cff0["im"], $v6382f6cf920a5e1f12258b86b3fcac3b, $v44ef37a80954a70dc24d955310d80967, 0, 0, $vfc1eb20506413fbbdc753afe5117cff0["width"], $vfc1eb20506413fbbdc753afe5117cff0["height"], $v8fa8b46b17731c7c9c882faede387741);switch ($vfcf76116d23aa625909b9eb0e709b276['extension']) {case "jpeg" :    case "jpg"  :    case "JPEG" :    case "JPG"  : {imagejpeg ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0, 90);break;}case "png" :    case "PNG" : {imagepng ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0);}case "gif" :    case "GIF" : {imagegif ($v98ac273381790591214fbee1fa05a6e9, $v47826cacc65c665212b821e6ff80b9b0);break;}case "bmp" :    case "BMP" : {}}imagedestroy ($v6226ba4abbac63dbd2114cb5966b1bf8["im"]);imagedestroy ($vfc1eb20506413fbbdc753afe5117cff0["im"]);imagedestroy ($v98ac273381790591214fbee1fa05a6e9);return true;}private static function createImage ($vfdc0a99c383c1558bed83c633f57a836) {$v931072b8630108758003074932646789 = 0;$va93b85dcfbb9969f5bb3c6be71737ed5 = parse_url ($vfdc0a99c383c1558bed83c633f57a836);$vfdc0a99c383c1558bed83c633f57a836 = (substr ($va93b85dcfbb9969f5bb3c6be71737ed5["path"], 0, 1) == "/")        ? substr ($va93b85dcfbb9969f5bb3c6be71737ed5["path"], 1)        : $va93b85dcfbb9969f5bb3c6be71737ed5["path"];list ($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $v599dcce2998a6b40b1e38e8c6006cb0a, $v815be97df65d6c4b510cd07189c5347a) = getimagesize ($vfdc0a99c383c1558bed83c633f57a836);$vd14a8022b085f9ef19d479cbdd581127 = array (    "GIF" => "1",    "JPG" => "2",    "PNG" => "3",    "WBMP"=> "15",    "XBM" => "16"   );switch($v599dcce2998a6b40b1e38e8c6006cb0a){case $vd14a8022b085f9ef19d479cbdd581127["GIF"] : {$v931072b8630108758003074932646789 = imagecreatefromgif ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["JPG"] : {$v931072b8630108758003074932646789 = imagecreatefromjpeg ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["PNG"] : {$v931072b8630108758003074932646789 = imagecreatefrompng ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["WBMP"] : {$v931072b8630108758003074932646789 = imagecreatefromwbmp ($vfdc0a99c383c1558bed83c633f57a836);break;}case $vd14a8022b085f9ef19d479cbdd581127["XBM"]: {$v931072b8630108758003074932646789 = imagecreatefromxbm ($vfdc0a99c383c1558bed83c633f57a836);}}if (!$v931072b8630108758003074932646789) {return false;}return array (    "im"     => $v931072b8630108758003074932646789,    "width"  => $veaae26a6fb20ed3ef54fb23bfa0b1fcc,    "height" => $vb435e227d5dd201e1768b2bcb2e0aa81   );}}interface iLang {public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getPrefix();public function setPrefix($v851f5ac9941d720844d143ed9cfcf60a);public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);}class lang extends umiEntinty implements iUmiEntinty, iLang {private $prefix, $is_default, $title;protected $store_type = "lang";protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v63c9704273c961052772737b7625d8be = XMLFactory::getInstance()->getProxy("langs.xml")->getElement("/umi/langs/lang[@id=".$this->id."]");$this->prefix     = $v63c9704273c961052772737b7625d8be->prefix;$this->title      = $v63c9704273c961052772737b7625d8be->getValue();$this->is_default = (bool) $v63c9704273c961052772737b7625d8be->is_default;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $v851f5ac9941d720844d143ed9cfcf60a, $vf62baf4c4ead98d50d516eca0ac5a746, $vd5d3db1765287eef77d7927cc956f50a) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->prefix = $v851f5ac9941d720844d143ed9cfcf60a;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;return true;}else {return false;}}public function getTitle() {return $this->title;}public function getPrefix() {return $this->prefix;}public function getIsDefault() {return $this->is_default;}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setPrefix($v851f5ac9941d720844d143ed9cfcf60a) {$this->prefix = $v851f5ac9941d720844d143ed9cfcf60a;$this->setIsUpdated();}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}protected function save() {$vd5d3db1765287eef77d7927cc956f50a = $this->title;$v851f5ac9941d720844d143ed9cfcf60a = $this->filterPrefix($this->prefix);$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$v63c9704273c961052772737b7625d8be = XMLFactory::getInstance()->getProxy("langs.xml")->getElement("/umi/langs/lang[@id=".$this->id."]");$v63c9704273c961052772737b7625d8be->setValue($vd5d3db1765287eef77d7927cc956f50a);$v63c9704273c961052772737b7625d8be->prefix     = $v851f5ac9941d720844d143ed9cfcf60a;$v63c9704273c961052772737b7625d8be->is_default = $vf62baf4c4ead98d50d516eca0ac5a746;}protected function filterPrefix($v851f5ac9941d720844d143ed9cfcf60a) {return preg_replace("/[^A-z0-9_\-]+/", "", $v851f5ac9941d720844d143ed9cfcf60a);}}interface iLangsCollection {public function addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a, $ve558e63f3083922542d8745224a66eea = false);public function delLang($vf585b7f018bb4ced15a03683a733e50b);public function getDefaultLang();public function setDefault($vf585b7f018bb4ced15a03683a733e50b);public function getLangId($v851f5ac9941d720844d143ed9cfcf60a);public function getLang($vf585b7f018bb4ced15a03683a733e50b);public function getList();public function getAssocArray();}class langsCollection extends singleton implements iSingleton, iLangsCollection {private $langs = Array(),   $def_lang;protected function __construct() {$this->loadLangs();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function loadLangs() {$v4b28a7ab3a48f5921b666e181db9acd0 = XMLFactory::getInstance()->getProxy("langs.xml")->getNodeTree("/umi/langs", true);foreach($v4b28a7ab3a48f5921b666e181db9acd0["langs"][0]["lang"] as $v414d85722be72f7dcc291daa64c49ed8) {$vcc15004c4d86fbfd23bf66b45f460a76   = $v414d85722be72f7dcc291daa64c49ed8["@attributes"];$v78e6dd7a49f5b0cb2106a3a434dd5c86   = $vcc15004c4d86fbfd23bf66b45f460a76["id"];$vf1965a857bc285d26fe22023aa5ab50d       = array($vcc15004c4d86fbfd23bf66b45f460a76["id"], $vcc15004c4d86fbfd23bf66b45f460a76["prefix"], $vcc15004c4d86fbfd23bf66b45f460a76["is_default"], $v414d85722be72f7dcc291daa64c49ed8["@value"]);if($v7572559ca86e781ba8fe8073a0b725c6 = cacheFrontend::getInstance()->load($v78e6dd7a49f5b0cb2106a3a434dd5c86, "lang")) {}else {try {$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v7572559ca86e781ba8fe8073a0b725c6, "lang");}$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = $v7572559ca86e781ba8fe8073a0b725c6;if($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]->getIsDefault()) {$this->def_lang = $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86];}}}public function getLangId($v851f5ac9941d720844d143ed9cfcf60a) {foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {if($v7572559ca86e781ba8fe8073a0b725c6->getPrefix() == $v851f5ac9941d720844d143ed9cfcf60a) {return $v7572559ca86e781ba8fe8073a0b725c6->getId();}}return false;}public function addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {if($v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->getLangId($v851f5ac9941d720844d143ed9cfcf60a)) {return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy("langs.xml");$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/langs/lang[last()]", "id") + 1;$v63c9704273c961052772737b7625d8be = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/langs", "lang", "");$v63c9704273c961052772737b7625d8be->id = $v78e6dd7a49f5b0cb2106a3a434dd5c86;$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v7572559ca86e781ba8fe8073a0b725c6->setPrefix($v851f5ac9941d720844d143ed9cfcf60a);$v7572559ca86e781ba8fe8073a0b725c6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v7572559ca86e781ba8fe8073a0b725c6->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);$v7572559ca86e781ba8fe8073a0b725c6->commit();$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = &$v7572559ca86e781ba8fe8073a0b725c6;return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}public function delLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) return false;XMLFactory::getInstance()->getProxy("langs.xml")->removeElement("/umi/langs/lang[@id=".$v78e6dd7a49f5b0cb2106a3a434dd5c86."]");unset($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]);return true;}public function getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;return ($this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) ? $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] : false;}public function isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86) {return (bool) array_key_exists($v78e6dd7a49f5b0cb2106a3a434dd5c86, $this->langs);}public function getList() {return (Array) $this->langs;}public function setDefault($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {return false;}if($this->def_lang) {$this->def_lang->setIsDefault(false);$this->def_lang->commit();}$this->def_lang = $this->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$this->def_lang->setIsDefault(true);$this->def_lang->commit();}public function getDefaultLang() {return ($this->def_lang) ? $this->def_lang : false;}public function getAssocArray() {$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {$v9b207167e5381c47682c6b4f58a623fb[$v7572559ca86e781ba8fe8073a0b725c6->getId()] = $v7572559ca86e781ba8fe8073a0b725c6->getTitle();}return $v9b207167e5381c47682c6b4f58a623fb;}}interface iDomainMirrow {public function getHost();public function setHost($v67b3dba8bc6778101892eb77249db32e);}class domainMirrow extends umiEntinty implements iUmiEntinty, iDomainMirrow {private $host;public function setHost($v67b3dba8bc6778101892eb77249db32e) {$this->host = trim($v67b3dba8bc6778101892eb77249db32e);$this->setIsUpdated();}public function getHost() {return $this->host;}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v7107c25db0fa3c1000e3f9b509fadb61 = XMLFactory::getInstance()->getProxy("domains.xml")->getElement("/umi/mirrors/mirror[@id=".$this->id."]");$this->host = $v7107c25db0fa3c1000e3f9b509fadb61->getValue();return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $v67b3dba8bc6778101892eb77249db32e) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->host = $v67b3dba8bc6778101892eb77249db32e;return true;}else {return false;}}protected function save() {$v67b3dba8bc6778101892eb77249db32e = $this->host;XMLFactory::getInstance()->getProxy("domains.xml")->setElementValue("/umi/mirrors/mirror[@id=".$this->id."]", $v67b3dba8bc6778101892eb77249db32e);}}interface iDomain {public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);public function addMirrow($vbe5301edeed9917bd552fa98fa1c1766);public function delMirrow($vb240b3b51bcbee2838ac4e9835f9ef51);public function getMirrowId($vbe5301edeed9917bd552fa98fa1c1766);public function getMirrow($vb240b3b51bcbee2838ac4e9835f9ef51);public function getMirrowsList();public function delAllMirrows();public function isMirrowExists($vb240b3b51bcbee2838ac4e9835f9ef51);public function getDefaultLangId();public function setDefaultLangId($vf585b7f018bb4ced15a03683a733e50b);}class domain extends umiEntinty implements iUmiEntinty, iDomainMirrow, iDomain {private $host, $default_lang_id, $mirrows = Array();protected $store_type = "domain";protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {$v9e7529dd508d685e8a7765e8e611d0f8 = XMLFactory::getInstance()->getProxy("domains.xml")->getElement("/umi/domains/domain[@id=".$this->id."]");$this->host            = $v9e7529dd508d685e8a7765e8e611d0f8->getValue();$this->is_default      = (bool) $v9e7529dd508d685e8a7765e8e611d0f8->is_default;$this->default_lang_id = (int)  $v9e7529dd508d685e8a7765e8e611d0f8->default_lang_id;return $this->loadMirrows();}public function getHost() {return $this->host;}public function getIsDefault() {return $this->is_default;}public function setHost($v67b3dba8bc6778101892eb77249db32e) {$this->host = trim($v67b3dba8bc6778101892eb77249db32e);$this->setIsUpdated();}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}public function getDefaultLangId() {return $this->default_lang_id;}public function setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(langsCollection::getInstance()->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->default_lang_id = $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();return true;}else {trigger_error("Language #{$v78e6dd7a49f5b0cb2106a3a434dd5c86} doesn't exists", E_USER_WARNING);return false;}}public function addMirrow($vc9b148be34c2f7632fa35c418e265083) {if($v8ec042d79ac0de3ba2c91d757c4bbf06 = $this->getMirrowId($vc9b148be34c2f7632fa35c418e265083)) {return $v8ec042d79ac0de3ba2c91d757c4bbf06;}else {$v48b8e11252203b3b99c58dd5a07776c1     = XMLFactory::getInstance()->getProxy("domains.xml");$ve3b24c29c781b4d95cd618dbb6f0c6b4  = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/mirrors/mirror[last()]", "id") + 1;$v1c2f72b782dfb5e0fed5b0b37da9c0f2 = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/mirrors", "mirror", "");$v1c2f72b782dfb5e0fed5b0b37da9c0f2->id  = $ve3b24c29c781b4d95cd618dbb6f0c6b4;$v1c2f72b782dfb5e0fed5b0b37da9c0f2->rel = $this->id;$vda570110a5cf8f2ea8b037f530ec4f5a = new domainMirrow($ve3b24c29c781b4d95cd618dbb6f0c6b4);$vda570110a5cf8f2ea8b037f530ec4f5a->setHost($vc9b148be34c2f7632fa35c418e265083);$vda570110a5cf8f2ea8b037f530ec4f5a->commit();$this->mirrows[$ve3b24c29c781b4d95cd618dbb6f0c6b4] = $vda570110a5cf8f2ea8b037f530ec4f5a;return $v8ec042d79ac0de3ba2c91d757c4bbf06;}}public function delMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06) {if($this->isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06)) {XMLFactory::getInstance()->getProxy("domains.xml")->removeElement("/umi/mirrors/mirror[@id=".$v8ec042d79ac0de3ba2c91d757c4bbf06."]");unset($this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06]);return true;}else {return false;}}public function delAllMirrows() {XMLFactory::getInstance()->getProxy("domains.xml")->removeElement("/umi/mirrors/mirror[@rel=".$this->id."]");}public function getMirrowId($vc9b148be34c2f7632fa35c418e265083) {foreach($this->mirrows as $vda570110a5cf8f2ea8b037f530ec4f5a) {if($vda570110a5cf8f2ea8b037f530ec4f5a->getHost() == $vc9b148be34c2f7632fa35c418e265083) {return $vda570110a5cf8f2ea8b037f530ec4f5a->getId();}}return false;}public function getMirrow($v8ec042d79ac0de3ba2c91d757c4bbf06) {if($this->isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06)) {return $this->mirrows[$v8ec042d79ac0de3ba2c91d757c4bbf06];}else {return false;}}public function isMirrowExists($v8ec042d79ac0de3ba2c91d757c4bbf06) {return (bool) array_key_exists($v8ec042d79ac0de3ba2c91d757c4bbf06, $this->mirrows);}public function getMirrowsList() {return $this->mirrows;}private function loadMirrows() {$vf66bcdd1812fe5a1a5a91103b232c8de = XMLFactory::getInstance()->getProxy("domains.xml")->getNodeTree("/umi/mirrors/mirror[@rel=".$this->id."]", false, true);if(is_array($vf66bcdd1812fe5a1a5a91103b232c8de)&&!empty($vf66bcdd1812fe5a1a5a91103b232c8de))            foreach($vf66bcdd1812fe5a1a5a91103b232c8de["mirror"] as $v2403def5083f02105e7802b3b315681e) {try {$vad4f3b23a9c1baee57e5d091271a0053 = array($v2403def5083f02105e7802b3b315681e['@attributes']['id'], $v2403def5083f02105e7802b3b315681e['@value']);$this->mirrows[$v2403def5083f02105e7802b3b315681e['@attributes']['id']] = new domainMirrow($vad4f3b23a9c1baee57e5d091271a0053[0], $vad4f3b23a9c1baee57e5d091271a0053);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}}return true;}protected function save() {$v67b3dba8bc6778101892eb77249db32e = $this->host;$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$v97558aef72e0ceae6733793ba319a8d1 = (int) $this->default_lang_id;$v9e7529dd508d685e8a7765e8e611d0f8 = XMLFactory::getInstance()->getProxy("domains.xml")->getElement("/umi/domains/domain[@id=".$this->id."]");$v9e7529dd508d685e8a7765e8e611d0f8->setValue($v67b3dba8bc6778101892eb77249db32e);$v9e7529dd508d685e8a7765e8e611d0f8->is_default      = $vf62baf4c4ead98d50d516eca0ac5a746;$v9e7529dd508d685e8a7765e8e611d0f8->default_lang_id =  $v97558aef72e0ceae6733793ba319a8d1;}}interface iDomainsCollection {public function addDomain($v67b3dba8bc6778101892eb77249db32e, $va840f33f4bf1f6686232b6ca1c12384e, $ve558e63f3083922542d8745224a66eea = false);public function delDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDefaultDomain();public function setDefaultDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getDomainId($v67b3dba8bc6778101892eb77249db32e, $vaa852eb4a7729f6a309496b84a01631b = true);public function getList();}class domainsCollection extends singleton implements iSingleton, iDomainsCollection {private $domains = Array(), $def_domain;protected function __construct() {$this->loadDomains();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addDomain($v67b3dba8bc6778101892eb77249db32e, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 = $this->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {return $v662cbf1253ac7d8750ed9190c52163e5;}else {$v48b8e11252203b3b99c58dd5a07776c1     = XMLFactory::getInstance()->getProxy("domains.xml");$v662cbf1253ac7d8750ed9190c52163e5  = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/domains/domain[last()]", "id") + 1;$v9e7529dd508d685e8a7765e8e611d0f8 = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/domains", "domain", "");$v9e7529dd508d685e8a7765e8e611d0f8->id = $v662cbf1253ac7d8750ed9190c52163e5;$this->domains[$v662cbf1253ac7d8750ed9190c52163e5] = $vad5f82e879a9c5d6b5b442eb37e50551 = new domain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->setHost($v67b3dba8bc6778101892eb77249db32e);$vad5f82e879a9c5d6b5b442eb37e50551->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);$vad5f82e879a9c5d6b5b442eb37e50551->setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);if($vf62baf4c4ead98d50d516eca0ac5a746) $this->setDefaultDomain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->commit();return $v662cbf1253ac7d8750ed9190c52163e5;}}public function setDefaultDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {XMLFactory::getInstance()->getProxy("domains.xml")->setAttributeValue("/umi/domains/domain[@is_default=1]", "is_default", "0");if($v2dc2d350ce3298213f154e90eb3211c3 = $this->getDefaultDomain()) {$v2dc2d350ce3298213f154e90eb3211c3->setIsDefault(false);$v2dc2d350ce3298213f154e90eb3211c3->commit();}$this->def_domain = $v662cbf1253ac7d8750ed9190c52163e5;$this->def_domain->setIsDefault(true);$this->def_domain->commit();}else {return false;}}public function delDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {$vad5f82e879a9c5d6b5b442eb37e50551 = $this->getDomain($v662cbf1253ac7d8750ed9190c52163e5);$vad5f82e879a9c5d6b5b442eb37e50551->delAllMirrows();if($vad5f82e879a9c5d6b5b442eb37e50551->getIsDefault()) {$this->def_domain = false;}unset($vad5f82e879a9c5d6b5b442eb37e50551);unset($this->domains[$v662cbf1253ac7d8750ed9190c52163e5]);XMLFactory::getInstance()->getProxy("hierarchy.xml")->removeElement("/umi/elements/element[@domain_id=".$v662cbf1253ac7d8750ed9190c52163e5."]");XMLFactory::getInstance()->getProxy("domains.xml")->removeElement("/umi/domains/domain[@id=".$v662cbf1253ac7d8750ed9190c52163e5."]");return true;}else {trigger_error("Domain #{$v662cbf1253ac7d8750ed9190c52163e5} doesn't exists.", E_USER_WARNING);return false;}}public function getDomain($v662cbf1253ac7d8750ed9190c52163e5) {if($this->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {return $this->domains[$v662cbf1253ac7d8750ed9190c52163e5];}else {return false;}}public function getDefaultDomain() {return ($this->def_domain) ? $this->def_domain : false;}public function getList() {return $this->domains;}public function isExists($v662cbf1253ac7d8750ed9190c52163e5) {return (bool) array_key_exists($v662cbf1253ac7d8750ed9190c52163e5, $this->domains);}public function getDomainId($v67b3dba8bc6778101892eb77249db32e, $vee68968f28c875319a24db7a4687bcc6 = true) {foreach($this->domains as $vad5f82e879a9c5d6b5b442eb37e50551) {if($vad5f82e879a9c5d6b5b442eb37e50551->getHost() == $v67b3dba8bc6778101892eb77249db32e) {return $vad5f82e879a9c5d6b5b442eb37e50551->getId();}else {if($vee68968f28c875319a24db7a4687bcc6) {$v1971009c5db21ab4fa6ae028d9fd2c9f = $vad5f82e879a9c5d6b5b442eb37e50551->getMirrowsList();foreach($v1971009c5db21ab4fa6ae028d9fd2c9f as $v15515d42c0242547a1c1972abb21cfad) {if($v15515d42c0242547a1c1972abb21cfad->getHost() == $v67b3dba8bc6778101892eb77249db32e) {return $vad5f82e879a9c5d6b5b442eb37e50551->getId();}}}}}return false;}private function loadDomains() {$v883b21ddc52b59a9337f9e17b6390a4b = XMLFactory::getInstance()->getProxy("domains.xml")->getNodeTree("/umi/domains", true);foreach($v883b21ddc52b59a9337f9e17b6390a4b["domains"][0]["domain"] as $ved7e8dad9fc333f3c4b2ebe97e0e55be) {$vcc15004c4d86fbfd23bf66b45f460a76   = $ved7e8dad9fc333f3c4b2ebe97e0e55be["@attributes"];$v662cbf1253ac7d8750ed9190c52163e5 = $vcc15004c4d86fbfd23bf66b45f460a76["id"];$vf1965a857bc285d26fe22023aa5ab50d       = array($vcc15004c4d86fbfd23bf66b45f460a76["id"], $ved7e8dad9fc333f3c4b2ebe97e0e55be["@value"], $vcc15004c4d86fbfd23bf66b45f460a76["is_default"], $vcc15004c4d86fbfd23bf66b45f460a76["default_lang_id"]);if($vad5f82e879a9c5d6b5b442eb37e50551 = cacheFrontend::getInstance()->load($v662cbf1253ac7d8750ed9190c52163e5, "domain")) {}else {try {$vad5f82e879a9c5d6b5b442eb37e50551 = new domain($v662cbf1253ac7d8750ed9190c52163e5, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($vad5f82e879a9c5d6b5b442eb37e50551, "domain");}$this->domains[$v662cbf1253ac7d8750ed9190c52163e5] = $vad5f82e879a9c5d6b5b442eb37e50551;if($vad5f82e879a9c5d6b5b442eb37e50551->getIsDefault()) {$this->def_domain = $vad5f82e879a9c5d6b5b442eb37e50551;}}return true;}}interface iTemplate {public function getFilename();public function setFilename($v435ed7e9f07f740abf511a62c00eef6e);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getDomainId();public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getLangId();public function setLangId($vf585b7f018bb4ced15a03683a733e50b);public function getIsDefault();public function setIsDefault($ve558e63f3083922542d8745224a66eea);public function getUsedPages();public function setUsedPages($v70cc97e695e61c16cbbc6297b3865289);}class template extends umiEntinty implements iUmiEntinty, iTemplate {private $filename, $title, $domain_id, $lang_id, $is_default;protected $store_type = "template";public function getFilename() {return $this->filename;}public function getTitle() {return $this->title;}public function getDomainId() {return $this->domain_id;}public function getLangId() {return $this->lang_id;}public function getIsDefault() {return $this->is_default;}public function setFilename($v435ed7e9f07f740abf511a62c00eef6e) {$this->filename = $v435ed7e9f07f740abf511a62c00eef6e;$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setDomainId($v662cbf1253ac7d8750ed9190c52163e5) {$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();if($ve4e46deb7f9cc58c7abfb32e5570b6f3->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->setIsUpdated();return true;}else {return false;}}public function setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v5a05866850c28651fe234659f6c92ada = langsCollection::getInstance();if($v5a05866850c28651fe234659f6c92ada->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();return true;}else {return false;}}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746) {$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}public function getUsedPages() {$v64f672732ba624fb62b5cc1e9a0a8fac = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getNodeTree('/umi/elements/element[@tpl_id='.$this->id.' and @is_deleted=0 and @domain_id='.$this->domain_id.']');$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objects.xml');$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($v64f672732ba624fb62b5cc1e9a0a8fac['element'] as $v231afe47f3f37d3808096b36c28b4ded) {$v9b207167e5381c47682c6b4f58a623fb[] = Array($v231afe47f3f37d3808096b36c28b4ded['@attributes']['id'],                                 $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objects/object[@id='.$v231afe47f3f37d3808096b36c28b4ded['@attributes']['obj_id'].']', 'name'));}return $v9b207167e5381c47682c6b4f58a623fb;}public function setUsedPages($vb3b32a2d422265cd25c3323ed0157f81) {$v3822e54d799ece2cf6bec7120d8a3a9f = templatesCollection::getInstance()->getDefaultTemplate($this->domain_id, $this->lang_id)->getId();$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/elements/element[@tpl_id='.$this->id.' and @is_deleted=0 and @domain_id='.$this->domain_id.']',                                                                                    'tpl_id', $v3822e54d799ece2cf6bec7120d8a3a9f);if(!is_array($vb3b32a2d422265cd25c3323ed0157f81)) {return false;}if(is_array($vb3b32a2d422265cd25c3323ed0157f81)&&!empty($vb3b32a2d422265cd25c3323ed0157f81)) {$vbeebfd51d771de35c59fbdc719c81181 = '/umi/elements/element[';$v865c0c0b4ab0e063e5caa3387c1a8741      = 0;foreach($vb3b32a2d422265cd25c3323ed0157f81 as $v71860c77c6745379b0d44304d66b6a13)                    $vbeebfd51d771de35c59fbdc719c81181 = (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'').'@id='.$v71860c77c6745379b0d44304d66b6a13;$vbeebfd51d771de35c59fbdc719c81181 = ']';$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue($vbeebfd51d771de35c59fbdc719c81181, 'tpl_id', $this->id);}}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v278c491bdd8a53618c149c4ac790da34 = XMLFactory::getInstance()->getProxy('templates.xml')->getElement('/umi/templates/tempalte['.$this->id.']');$this->filename     = $v278c491bdd8a53618c149c4ac790da34->filename;$this->title        = $v278c491bdd8a53618c149c4ac790da34->getValue();$this->domain_id    = (int)  $v278c491bdd8a53618c149c4ac790da34->domain_id;$this->lang_id      = (int)  $v278c491bdd8a53618c149c4ac790da34->lang_id;$this->is_default   = (bool) $v278c491bdd8a53618c149c4ac790da34->is_default;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf62baf4c4ead98d50d516eca0ac5a746) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->filename = $v435ed7e9f07f740abf511a62c00eef6e;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->is_default = (bool) $vf62baf4c4ead98d50d516eca0ac5a746;return true;}else {return false;}}protected function save() {$v435ed7e9f07f740abf511a62c00eef6e = $this->filename;$vd5d3db1765287eef77d7927cc956f50a = $this->title;$v662cbf1253ac7d8750ed9190c52163e5 = (int) $this->domain_id;$v78e6dd7a49f5b0cb2106a3a434dd5c86 =  (int) $this->lang_id;$vf62baf4c4ead98d50d516eca0ac5a746 = (int) $this->is_default;$v278c491bdd8a53618c149c4ac790da34 = XMLFactory::getInstance()->getProxy('templates.xml')->getElement('/umi/templates/template[@id='.$this->id.']');$v278c491bdd8a53618c149c4ac790da34->setValue($vd5d3db1765287eef77d7927cc956f50a);$v278c491bdd8a53618c149c4ac790da34->filename   = $v435ed7e9f07f740abf511a62c00eef6e;$v278c491bdd8a53618c149c4ac790da34->domain_id  = $v662cbf1253ac7d8750ed9190c52163e5;$v278c491bdd8a53618c149c4ac790da34->lang_id    = $v78e6dd7a49f5b0cb2106a3a434dd5c86;$v278c491bdd8a53618c149c4ac790da34->is_default = $vf62baf4c4ead98d50d516eca0ac5a746;return true;}}interface iTemplatesCollection {public function addTemplate($v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v72ee76c5c29383b7c9f9225c1fa4d10b = false, $vf585b7f018bb4ced15a03683a733e50b = false, $ve558e63f3083922542d8745224a66eea = false);public function delTemplate($v3200a31fc05da4e9d5a0465c36822e2f);public function getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false);public function setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false);public function getTemplatesList($v72ee76c5c29383b7c9f9225c1fa4d10b, $vf585b7f018bb4ced15a03683a733e50b);public function getTemplate($v3200a31fc05da4e9d5a0465c36822e2f);}class templatesCollection extends singleton implements iSingleton, iTemplatesCollection {private $templates = Array(), $def_template;protected function __construct() {$this->loadTemplates();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addTemplate($v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();$v5a05866850c28651fe234659f6c92ada = langsCollection::getInstance();if(!$ve4e46deb7f9cc58c7abfb32e5570b6f3->isExists($v662cbf1253ac7d8750ed9190c52163e5)) {if($ve4e46deb7f9cc58c7abfb32e5570b6f3->getDefaultDomain()) {$v662cbf1253ac7d8750ed9190c52163e5 = $ve4e46deb7f9cc58c7abfb32e5570b6f3->getDefaultDomain()->getId();}else {return false;}}if(!$v5a05866850c28651fe234659f6c92ada->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) {if($v5a05866850c28651fe234659f6c92ada->getDefaultLang()) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v5a05866850c28651fe234659f6c92ada->getDefaultLang()->getId();}else {return false;}}$v48b8e11252203b3b99c58dd5a07776c1      = XMLFactory::getInstance()->getProxy("templates.xml");$v74f5356453a69e438e0f58ef93103cc0 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/templates/template[last()]", "id") + 1;$v836c28ef1aa3f848b2e7221c79be9701     = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/templates", "template", "");$v836c28ef1aa3f848b2e7221c79be9701->id = $v74f5356453a69e438e0f58ef93103cc0;$v66f6181bcb4cff4cd38fbc804a036db6 = new template($v74f5356453a69e438e0f58ef93103cc0);$v66f6181bcb4cff4cd38fbc804a036db6->setFilename($v435ed7e9f07f740abf511a62c00eef6e);$v66f6181bcb4cff4cd38fbc804a036db6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v66f6181bcb4cff4cd38fbc804a036db6->setDomainId($v662cbf1253ac7d8750ed9190c52163e5);$v66f6181bcb4cff4cd38fbc804a036db6->setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);if($vf62baf4c4ead98d50d516eca0ac5a746) {$this->setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0);}$v66f6181bcb4cff4cd38fbc804a036db6->commit();$this->templates[$v74f5356453a69e438e0f58ef93103cc0] = $v66f6181bcb4cff4cd38fbc804a036db6;return $v74f5356453a69e438e0f58ef93103cc0;}public function setDefaultTemplate($v74f5356453a69e438e0f58ef93103cc0, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 == false) $v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDefaultDomain()->getId();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 ==false) $v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();if(!$this->isExists($v74f5356453a69e438e0f58ef93103cc0)) {return false;}$vfed36e93a0509e20f2dc96cbbd85b678 = $this->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5,$v78e6dd7a49f5b0cb2106a3a434dd5c86);foreach ($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v74f5356453a69e438e0f58ef93103cc0 == $v66f6181bcb4cff4cd38fbc804a036db6->getId()) {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(true);}else {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(false);}$v66f6181bcb4cff4cd38fbc804a036db6->commit();}return true;if(!($v66f6181bcb4cff4cd38fbc804a036db6 = $this->getTemplate($v3200a31fc05da4e9d5a0465c36822e2f))) {return false;}if($this->def_template) {$this->def_template->setIsDefault(false);$this->def_template->commit();}$this->def_template = $v66f6181bcb4cff4cd38fbc804a036db6;$this->def_template->setIsDefault(true);$this->def_template->commit();}public function delTemplate($v74f5356453a69e438e0f58ef93103cc0) {if($this->isExists($v74f5356453a69e438e0f58ef93103cc0)) {if($this->templates[$v74f5356453a69e438e0f58ef93103cc0]->getIsDefault()) {unset($this->def_template);}unset($this->templates[$v74f5356453a69e438e0f58ef93103cc0]);$vb3f91ed738222a77e3713df926f55fd7 = $this->getDefaultTemplate();if (!$vb3f91ed738222a77e3713df926f55fd7 || $vb3f91ed738222a77e3713df926f55fd7->getId() == $v74f5356453a69e438e0f58ef93103cc0) return false;XMLFactory::getInstance()->getProxy('hierarchy.xml')->setAttributeValue('/umi/elementss/element[@tpl_id='.$v74f5356453a69e438e0f58ef93103cc0.']', 'tpl_id', $vb3f91ed738222a77e3713df926f55fd7->getId());XMLFactory::getInstance()->getProxy('templates.xml')->removeElement('/umi/templates/template[@id='.$v74f5356453a69e438e0f58ef93103cc0.']');return true;}else return false;}public function getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v9b207167e5381c47682c6b4f58a623fb = Array();foreach($this->templates as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v66f6181bcb4cff4cd38fbc804a036db6->getDomainId() == $v662cbf1253ac7d8750ed9190c52163e5 && $v66f6181bcb4cff4cd38fbc804a036db6->getLangId() == $v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v9b207167e5381c47682c6b4f58a623fb[] = $v66f6181bcb4cff4cd38fbc804a036db6;}}return $v9b207167e5381c47682c6b4f58a623fb;}public function getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false) {if($v662cbf1253ac7d8750ed9190c52163e5 == false) $v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 ==false) $v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$vfed36e93a0509e20f2dc96cbbd85b678 = $this->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);foreach($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {if($v66f6181bcb4cff4cd38fbc804a036db6->getIsDefault() == true) {return $v66f6181bcb4cff4cd38fbc804a036db6;}}return false;}public function getTemplate($v74f5356453a69e438e0f58ef93103cc0) {return ($this->isExists($v74f5356453a69e438e0f58ef93103cc0)) ? $this->templates[$v74f5356453a69e438e0f58ef93103cc0] : false;}public function isExists($v74f5356453a69e438e0f58ef93103cc0) {return (bool) array_key_exists($v74f5356453a69e438e0f58ef93103cc0, $this->templates);}private function loadTemplates() {$v1f0492ad97b8c76253171279acc6bc65 = XMLFactory::getInstance()->getProxy('templates.xml')->getNodeTree('/umi/templates');foreach($v1f0492ad97b8c76253171279acc6bc65['templates'][0]['template'] as $v278c491bdd8a53618c149c4ac790da34) {$v815be97df65d6c4b510cd07189c5347a        = $v278c491bdd8a53618c149c4ac790da34['@attributes'];$v74f5356453a69e438e0f58ef93103cc0 = $v815be97df65d6c4b510cd07189c5347a['id'];$vf1965a857bc285d26fe22023aa5ab50d         = array($v815be97df65d6c4b510cd07189c5347a['id'], $v815be97df65d6c4b510cd07189c5347a['filename'], $v278c491bdd8a53618c149c4ac790da34['@value'], $v815be97df65d6c4b510cd07189c5347a['domain_id'], $v815be97df65d6c4b510cd07189c5347a['lang_id'], $v815be97df65d6c4b510cd07189c5347a['is_default']);if($v66f6181bcb4cff4cd38fbc804a036db6 = cacheFrontend::getInstance()->load($v74f5356453a69e438e0f58ef93103cc0, "template")) {}else {try {$v66f6181bcb4cff4cd38fbc804a036db6 = new template($v74f5356453a69e438e0f58ef93103cc0, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v66f6181bcb4cff4cd38fbc804a036db6, "template");}$this->templates[$v74f5356453a69e438e0f58ef93103cc0] = $v66f6181bcb4cff4cd38fbc804a036db6;if($v66f6181bcb4cff4cd38fbc804a036db6->getIsDefault()) {$this->def_template = $v66f6181bcb4cff4cd38fbc804a036db6;}}return true;}}interface iUmiHierarchyType {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getExt();public function setExt($vabf77184f55403d75b9d51d79162a7ca);}class umiHierarchyType extends umiEntinty implements iUmiEntinty, iUmiHierarchyType {private $name, $title, $ext;protected $store_type = "element_type";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getExt() {return $this->ext;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "hierarchy-type-");$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->setIsUpdated();}public function setExt($vabf77184f55403d75b9d51d79162a7ca) {$this->ext = $vabf77184f55403d75b9d51d79162a7ca;$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v524fbbd9172775c142a35990c34e727f    = XMLFactory::getInstance()->getProxy("hierarchy.xml")->getElement("/umi/types/type[@id=".$this->id."]");$this->name  = $v524fbbd9172775c142a35990c34e727f->name;$this->title = $v524fbbd9172775c142a35990c34e727f->getValue();$this->ext   = $v524fbbd9172775c142a35990c34e727f->ext;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->ext = $vabf77184f55403d75b9d51d79162a7ca;return true;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = $this->name;$vd5d3db1765287eef77d7927cc956f50a = $this->title;$vabf77184f55403d75b9d51d79162a7ca = $this->ext;$v524fbbd9172775c142a35990c34e727f       = XMLFactory::getInstance()->getProxy("hierarchy.xml")->getElement("/umi/types/type[@id=".$this->id."]");$v524fbbd9172775c142a35990c34e727f->name = $vb068931cc450442b63f5b3d276ea4297;$v524fbbd9172775c142a35990c34e727f->ext  = $vabf77184f55403d75b9d51d79162a7ca;$v524fbbd9172775c142a35990c34e727f->setValue($vd5d3db1765287eef77d7927cc956f50a);return true;}}interface iUmiHierarchyTypesCollection {public function addType($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca = "");public function getType($v5f694956811487225d15e973ca38fbab);public function delType($v5f694956811487225d15e973ca38fbab);public function getTypeByName($v84aa805a9d919179ab8f8b24376e2ed7, $va93d60b62600196e433071e75061f398 = false);public function getTypesList();}class umiHierarchyTypesCollection extends singleton implements iSingleton, iUmiHierarchyTypesCollection {private $types;protected function __construct() {$this->loadTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->types[$v94757cae63fd3e398c0811a976dd6bbe];}else {return false;}}public function getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca = false) {foreach($this->types as $v599dcce2998a6b40b1e38e8c6006cb0a) {if($v599dcce2998a6b40b1e38e8c6006cb0a->getName() == $vb068931cc450442b63f5b3d276ea4297 && !$vabf77184f55403d75b9d51d79162a7ca) return $v599dcce2998a6b40b1e38e8c6006cb0a;if($v599dcce2998a6b40b1e38e8c6006cb0a->getName() == $vb068931cc450442b63f5b3d276ea4297 && $v599dcce2998a6b40b1e38e8c6006cb0a->getExt() == $vabf77184f55403d75b9d51d79162a7ca && $vabf77184f55403d75b9d51d79162a7ca) return $v599dcce2998a6b40b1e38e8c6006cb0a;}return false;}public function addType($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $vabf77184f55403d75b9d51d79162a7ca = "") {if($vb946c44d711ade3b061653732977d043  = $this->getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca)) {$vb946c44d711ade3b061653732977d043->setTitle($vd5d3db1765287eef77d7927cc956f50a);return $vb946c44d711ade3b061653732977d043->getId();}$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy("hierarchy.xml");$v94757cae63fd3e398c0811a976dd6bbe = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/types/type[last()]", "id") + 1;$v524fbbd9172775c142a35990c34e727f = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/types", "type", "");$v524fbbd9172775c142a35990c34e727f->id = $v94757cae63fd3e398c0811a976dd6bbe;$v599dcce2998a6b40b1e38e8c6006cb0a = new umiHierarchyType($v94757cae63fd3e398c0811a976dd6bbe);$v599dcce2998a6b40b1e38e8c6006cb0a->setName($vb068931cc450442b63f5b3d276ea4297);$v599dcce2998a6b40b1e38e8c6006cb0a->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v599dcce2998a6b40b1e38e8c6006cb0a->setExt($vabf77184f55403d75b9d51d79162a7ca);$v599dcce2998a6b40b1e38e8c6006cb0a->commit();$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return $v94757cae63fd3e398c0811a976dd6bbe;}public function delType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {unset($this->types[$v94757cae63fd3e398c0811a976dd6bbe]);$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;XMLFactory::getInstance()->getProxy('hierarchy.xml')->removeElement('/umi/types/type[@id='.$v94757cae63fd3e398c0811a976dd6bbe.']');return true;}else {return false;}}public function isExists($v94757cae63fd3e398c0811a976dd6bbe) {return (bool) array_key_exists($v94757cae63fd3e398c0811a976dd6bbe, $this->types);}private function loadTypes() {$vb258acb7138dd6caa36ea7108040bc99 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getNodeTree('/umi/types');foreach($vb258acb7138dd6caa36ea7108040bc99['types'][0]['type'] as $v12403f19a505a2da6eb79acec05ad6a2) {$vb80bb7740288fda1f201890375a60c8f  = $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['id'];$vf1965a857bc285d26fe22023aa5ab50d = array($v12403f19a505a2da6eb79acec05ad6a2['@attributes']['id'], $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['name'], $v12403f19a505a2da6eb79acec05ad6a2['@value'], $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['ext']);if($v599dcce2998a6b40b1e38e8c6006cb0a = cacheFrontend::getInstance()->load($vb80bb7740288fda1f201890375a60c8f, "element_type")) {}else {try {$v599dcce2998a6b40b1e38e8c6006cb0a = new umiHierarchyType($vb80bb7740288fda1f201890375a60c8f, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v599dcce2998a6b40b1e38e8c6006cb0a, "element_type");}$this->types[$vb80bb7740288fda1f201890375a60c8f] = $v599dcce2998a6b40b1e38e8c6006cb0a;}return true;}public function getTypesList() {return $this->types;}}interface iUmiHierarchyElement {public function getIsDeleted();public function setIsDeleted($va18b1057c4327b9cc46abc9fcf952bd8 = false);public function getIsActive();public function setIsActive($v367e854225a0810977297b3bedb2f309 = true);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024 = true);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getLangId();public function setLangId($vf585b7f018bb4ced15a03683a733e50b);public function getTplId();public function setTplId($vdfae309a35c166d21d4a1ab377b78a47);public function getDomainId();public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b);public function getUpdateTime();public function setUpdateTime($v87a3cb5c3554b2d9d8a1a773ad0936be = 0);public function getOrd();public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9);public function getRel();public function setRel($vd5d4bb9b2c282937ee64b1fb0495ef08);public function getObject();public function setObject(umiObject $va8cfde6331bd59eb2ac96f8911c4b666);public function setAltName($v0330da281541887f65b0a60066351c91, $v9081405e153955c7c08554c483e264cb = true);public function getAltName();public function setIsDefault($ve558e63f3083922542d8745224a66eea = true);public function getIsDefault();public function getParentId();public function getValue($v46b9e6004c49d9cc040029c197cab278);public function setValue($v46b9e6004c49d9cc040029c197cab278, $vafd40dce490ea113be83c89ca7f3052d);public function getFieldId($vc5b8d76e52be996ffe6ea3b9a19f1fed);public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getObjectTypeId();public function getHierarchyType();public function getObjectId();public function getModule();public function getMethod();}class umiHierarchyElement extends umiEntinty implements iUmiEntinty, iUmiHierarchyElement {private    $rel, $alt_name, $ord, $object_id,   $type_id, $domain_id, $lang_id, $tpl_id,   $is_deleted = false, $is_active = true, $is_visible = true, $is_default = false, $name,   $update_time,   $object,   $is_broken = false;protected $store_type = "element";public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {return $vb45cffe084dd3d20d928bee85e7b0f21;}public function getIsDeleted() {return $this->is_deleted;}public function getIsActive() {return $this->is_active;}public function getIsVisible() {return $this->is_visible;}public function getLangId() {return $this->lang_id;}public function getDomainId() {return $this->domain_id;}public function getTplId() {return $this->tpl_id;}public function getTypeId() {return $this->type_id;}public function getUpdateTime() {return $this->update_time;}public function getOrd() {return $this->ord;}public function getRel() {return $this->rel;}public function getAltName() {return $this->alt_name;}public function getIsDefault() {return $this->is_default;}public function getObject() {if($this->object) {return $this->object;}else {$this->object = umiObjectsCollection::getInstance()->getObject($this->object_id);return $this->object;}}public function getParentId() {return $this->rel;}public function getName() {return $this->translateLabel($this->name);}public function getValue($vdfc394bd05a4b48161c790034af522a8) {return $this->getObject()->getValue($vdfc394bd05a4b48161c790034af522a8);}public function setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e) {$v9b207167e5381c47682c6b4f58a623fb = $this->getObject()->setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e);$this->setIsUpdated(true);return $v9b207167e5381c47682c6b4f58a623fb;}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true) {if ($this->is_visible !== ((bool)$ve1c6c9ef2fcbe75f26f815c4ef2e60b4)) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}}public function setIsActive($v4264c638e0098acb172519b0436db099 = true) {if ($this->is_active !== ((bool)$v4264c638e0098acb172519b0436db099)) {$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->setIsUpdated();}}public function setIsDeleted($vf49e2553045b3240a95c36854d36dddc = false) {if ($this->is_deleted !== ((bool)$vf49e2553045b3240a95c36854d36dddc)) {$this->is_deleted = (bool) $vf49e2553045b3240a95c36854d36dddc;$this->setIsUpdated();}}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {if ($this->type_id !== ((int)$v94757cae63fd3e398c0811a976dd6bbe)) {$this->type_id = (int) $v94757cae63fd3e398c0811a976dd6bbe;$this->setIsUpdated();}}public function setLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if ($this->lang_id !== ((int)$v78e6dd7a49f5b0cb2106a3a434dd5c86)) {$this->lang_id = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;$this->setIsUpdated();}}public function setTplId($vd02e12eb6d6c3f6ebd763197df01e211) {if ($this->tpl_id !== ((int)$vd02e12eb6d6c3f6ebd763197df01e211)) {$this->tpl_id = (int) $vd02e12eb6d6c3f6ebd763197df01e211;$this->setIsUpdated();}}public function setDomainId($v662cbf1253ac7d8750ed9190c52163e5) {$vadce578d04ed03c31f6ac59451fcf8e4 = umiHierarchy::getInstance()->getChilds($this->id, true, true);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$v1b7d5726533ab525a8760351e9b5e415 = umiHierarchy::getInstance()->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5);$v1b7d5726533ab525a8760351e9b5e415->setDomainId($v662cbf1253ac7d8750ed9190c52163e5);umiHierarchy::getInstance()->unloadElement($vf36263a38d7de5cdaa953c1e2b2f79b5);unset($v1b7d5726533ab525a8760351e9b5e415);}if ($this->domain_id !== ((int)$v662cbf1253ac7d8750ed9190c52163e5)) {$this->domain_id = (int) $v662cbf1253ac7d8750ed9190c52163e5;$this->setIsUpdated();}}public function setUpdateTime($ve0df5a999da22bc6fa9e26b115eb4ae4 = 0) {if($ve0df5a999da22bc6fa9e26b115eb4ae4 == 0) {$ve0df5a999da22bc6fa9e26b115eb4ae4 = umiHierarchy::getTimeStamp();}if ($this->update_time !== ((int)$ve0df5a999da22bc6fa9e26b115eb4ae4)) {$this->update_time = (int) $ve0df5a999da22bc6fa9e26b115eb4ae4;$this->setIsUpdated();}}public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9) {if ($this->ord !== ((int)$v8bef1cc20ada3bef55fdf132cb2a1cb9)) {$this->ord = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;$this->setIsUpdated();}}public function setRel($v7ffc4d510260a8544e5550e62ec56bc1) {if ($this->rel !== ((int)$v7ffc4d510260a8544e5550e62ec56bc1)) {$this->rel = (int) $v7ffc4d510260a8544e5550e62ec56bc1;$this->setIsUpdated();}}public function setObject(umiObject $va8cfde6331bd59eb2ac96f8911c4b666, $vac2a04437278cf6e6e597b1b9295b193 = true) {$this->object = $va8cfde6331bd59eb2ac96f8911c4b666;$this->object_id = $va8cfde6331bd59eb2ac96f8911c4b666->getId();if ($vac2a04437278cf6e6e597b1b9295b193) $this->setIsUpdated();}public function setAltName($vd84ff935144e00c3e1d395c2379aca47, $v5c42c04954c401e189bb85786bde8adb = true) {if (!strlen($vd84ff935144e00c3e1d395c2379aca47)) $vd84ff935144e00c3e1d395c2379aca47 = $this->getName();$vd84ff935144e00c3e1d395c2379aca47 = $this->getRightAltName($vd84ff935144e00c3e1d395c2379aca47);$vd295b8117d72bf06e54a27bcbfc782cf = $this->alt_name;$this->alt_name = $this->getRightAltName(umiObjectProperty::filterInputString($vd84ff935144e00c3e1d395c2379aca47));if(!$this->alt_name) {$this->alt_name = $vd84ff935144e00c3e1d395c2379aca47;}$v1988c61c48f30d2b39eed4edcf1e3c8b = $this->alt_name;if ($v1988c61c48f30d2b39eed4edcf1e3c8b !== $vd295b8117d72bf06e54a27bcbfc782cf) $this->setIsUpdated();}private function getRightAltName($vd84ff935144e00c3e1d395c2379aca47) {if(!strlen($vd84ff935144e00c3e1d395c2379aca47)) $vd84ff935144e00c3e1d395c2379aca47 = '1';$vd84ff935144e00c3e1d395c2379aca47 = translit::convert($vd84ff935144e00c3e1d395c2379aca47);$vc1332a8893475d77a4cb5226b0e6246d =  array();if($this->getRel() == 0) {$v6c63406410aa57b3c97b88d3feb09990 = regedit::getInstance()->getList("//modules");foreach($v6c63406410aa57b3c97b88d3feb09990 as $v854203cccade0bbe21be239a208aea49) {if($vd84ff935144e00c3e1d395c2379aca47 == $v854203cccade0bbe21be239a208aea49[0]) {$vd84ff935144e00c3e1d395c2379aca47 .= '1';break;}}}$va2d2953131ec91efe3c90d4dbcee3777 = "";$v544988e29afe707b134aa03709eb443e = $vd84ff935144e00c3e1d395c2379aca47;if (preg_match  ("/^([a-z0-9_.-]*\D)(\d*)$/", $vd84ff935144e00c3e1d395c2379aca47, $v66373a9c960d5bb19f89068c5a2797b0)) {$va2d2953131ec91efe3c90d4dbcee3777 = $v66373a9c960d5bb19f89068c5a2797b0[2];$v544988e29afe707b134aa03709eb443e = $v66373a9c960d5bb19f89068c5a2797b0[1];}$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $this->getDomainId();$v9e0afd0da0cb3aa281e5477a369a09d3 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getNodeTree('/umi/elements/element[@rel='.$this->getRel().' and not(@id='.$this->getId().')'.                        ' and @is_deleted=0 and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.' and starts-with(text(), "'.$v544988e29afe707b134aa03709eb443e.'")]');if(!empty($v9e0afd0da0cb3aa281e5477a369a09d3))    foreach($v9e0afd0da0cb3aa281e5477a369a09d3['element'] as $v18b049cc8d8535787929df716f9f4e68)     $vc1332a8893475d77a4cb5226b0e6246d[] = $v18b049cc8d8535787929df716f9f4e68['@value'];if(!empty($vc1332a8893475d77a4cb5226b0e6246d) and in_array($vd84ff935144e00c3e1d395c2379aca47,$vc1332a8893475d77a4cb5226b0e6246d)){foreach($vc1332a8893475d77a4cb5226b0e6246d as $v52dfbb9b0e571701b76699a145406d48){preg_match  ("/(\D*)(\d*)/", $v52dfbb9b0e571701b76699a145406d48, $v66373a9c960d5bb19f89068c5a2797b0);if (!empty($v66373a9c960d5bb19f89068c5a2797b0[2])) $va2d2953131ec91efe3c90d4dbcee3777 = max($va2d2953131ec91efe3c90d4dbcee3777,$v66373a9c960d5bb19f89068c5a2797b0[2]);}++$va2d2953131ec91efe3c90d4dbcee3777;}return $v544988e29afe707b134aa03709eb443e. $va2d2953131ec91efe3c90d4dbcee3777;}public function setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746 = true) {if ($this->is_default !== ((int)$vf62baf4c4ead98d50d516eca0ac5a746)) {$this->is_default = (int) $vf62baf4c4ead98d50d516eca0ac5a746;$this->setIsUpdated();}}public function getFieldId($v73f329f154a663bfda020aadcdd0b775) {return umiObjectTypesCollection::getInstance()->getType($this->getObject()->getTypeId())->getFieldId($v73f329f154a663bfda020aadcdd0b775);}protected function loadInfo() {$v231afe47f3f37d3808096b36c28b4ded = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElement('/umi/elements/element[@id='.$this->id.']');if(!$v231afe47f3f37d3808096b36c28b4ded->exists()) return false;if(!$v231afe47f3f37d3808096b36c28b4ded->obj_id && !$this->is_broken) {$this->is_broken = true;umiHierarchy::getInstance()->delElement($this->id);return false;}$this->rel        = (int) $v231afe47f3f37d3808096b36c28b4ded->rel;$this->type_id    = (int) $v231afe47f3f37d3808096b36c28b4ded->type_id;$this->lang_id    = (int) $v231afe47f3f37d3808096b36c28b4ded->lang_id;$this->domain_id  = (int) $v231afe47f3f37d3808096b36c28b4ded->domain_id;$this->tpl_id     = (int) $v231afe47f3f37d3808096b36c28b4ded->tpl_id;$this->object_id  = (int) $v231afe47f3f37d3808096b36c28b4ded->obj_id;$this->ord        = (int) $v231afe47f3f37d3808096b36c28b4ded->ord;$this->alt_name   = $v231afe47f3f37d3808096b36c28b4ded->getValue();$this->is_active  = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_active;$this->is_visible = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_visible;$this->is_deleted = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_deleted;$this->is_default = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_default;$vb068931cc450442b63f5b3d276ea4297    = XMLFactory::getInstance()->getProxy('objects.xml')->getElementValue('/umi/objects/object[@id='.$v231afe47f3f37d3808096b36c28b4ded->obj_id.']');$this->name = $vb068931cc450442b63f5b3d276ea4297;$v3e04dc2abd929a9d02e2e0fa41d24bf9 = (int)$v231afe47f3f37d3808096b36c28b4ded->updatetime;if (!$v3e04dc2abd929a9d02e2e0fa41d24bf9) {$v3e04dc2abd929a9d02e2e0fa41d24bf9 = umiHierarchy::getTimeStamp();}$this->update_time = (int) $v3e04dc2abd929a9d02e2e0fa41d24bf9;return true;}protected function save() {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');if($this->is_default) {$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/elements/element[@is_default=1 and @lang_id='.(int)$this->lang_id.' and @domain_id='.(int)$this->domain_id.']',           'is_defalut', '0');}$v231afe47f3f37d3808096b36c28b4ded = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/elements/element[@id='.$this->id.']');$v231afe47f3f37d3808096b36c28b4ded->setValue($this->alt_name);$v231afe47f3f37d3808096b36c28b4ded->rel = (int) $this->rel;$v231afe47f3f37d3808096b36c28b4ded->type_id = (int) $this->type_id;$v231afe47f3f37d3808096b36c28b4ded->lang_id = (int) $this->lang_id;$v231afe47f3f37d3808096b36c28b4ded->domain_id = (int) $this->domain_id;$v231afe47f3f37d3808096b36c28b4ded->tpl_id = (int) $this->tpl_id;$v231afe47f3f37d3808096b36c28b4ded->obj_id = (int) $this->object_id;$v231afe47f3f37d3808096b36c28b4ded->ord = (int) $this->ord;$v231afe47f3f37d3808096b36c28b4ded->is_active = (int) $this->is_active;$v231afe47f3f37d3808096b36c28b4ded->is_visible = (int) $this->is_visible;$v231afe47f3f37d3808096b36c28b4ded->is_deleted = (int) $this->is_deleted;$v231afe47f3f37d3808096b36c28b4ded->update_time = (int) $this->update_time;$v231afe47f3f37d3808096b36c28b4ded->is_default = (int) $this->is_default;return true;}public function setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f = true) {parent::setIsUpdated($v50e544b8aa9b48fae6d78fb7574d402f);$this->update_time = time();umiHierarchy::getInstance()->addUpdatedElementId($this->id);if($this->rel) {umiHierarchy::getInstance()->addUpdatedElementId($this->rel);}}public function getIsBroken() {return $this->is_broken;}public function commit() {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject();if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$va8cfde6331bd59eb2ac96f8911c4b666->commit();$v16b2b26000987faccb260b9d39df1269 = $va8cfde6331bd59eb2ac96f8911c4b666->getId();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();cacheFrontend::getInstance()->del($v16b2b26000987faccb260b9d39df1269, "object");$va7f1f2c46c62415198e0884b827bd2d2 = $vb81ca7c0ccaa77e7aa91936ab0070695->getObjectInstances($v16b2b26000987faccb260b9d39df1269);foreach($va7f1f2c46c62415198e0884b827bd2d2 as $va3e6bf52d6871a75cae73e5262de04af) {cacheFrontend::getInstance()->del($va3e6bf52d6871a75cae73e5262de04af, "element");}}parent::commit();}public function getObjectTypeId() {return $this->getObject()->getTypeId();}public function setName($vb068931cc450442b63f5b3d276ea4297) {$v9b207167e5381c47682c6b4f58a623fb = $this->getObject()->setName($vb068931cc450442b63f5b3d276ea4297);$this->setIsUpdated(true);return $v9b207167e5381c47682c6b4f58a623fb;}public function getHierarchyType() {return umiHierarchyTypesCollection::getInstance()->getType($this->type_id);}public function getObjectId() {return $this->object_id;}protected function getType() {$v1723bdd4ee51910267a625cae41ced8a = umiHierarchyTypesCollection::getInstance();return $v1723bdd4ee51910267a625cae41ced8a->getType($this->getTypeId());}public function getModule() {return $this->getType()->getName();}public function getMethod() {return $this->getType()->getExt();}public function __wakeup() {$this->object = NULL;}public function __sleep() {$vb63119da730344b345cdc8f62a4711e9 = get_class_vars(get_class($this));$vb63119da730344b345cdc8f62a4711e9['object'] = NULL;return array_keys($vb63119da730344b345cdc8f62a4711e9);}};interface iUmiHierarchy {public function addElement($va722790b49e8eb1f37a1c672326ec501, $vacf567c9c3d6cf7c6e2cc0ce108e0631, $vb068931cc450442b63f5b3d276ea4297, $vd84ff935144e00c3e1d395c2379aca47, $v6301cee35ea764a1e241978f93f01069 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false, $vf585b7f018bb4ced15a03683a733e50b = false, $v3200a31fc05da4e9d5a0465c36822e2f = false);public function getElement($v7552cd149af7495ee7d8225974e50f80, $ve70325c72e806c33fd52022dd9c07eb2 = false, $vbeaf7e25161be5ef9784e550ab4fc891 = false);public function delElement($v7552cd149af7495ee7d8225974e50f80);public function copyElement($v7552cd149af7495ee7d8225974e50f80, $v05ea772b3414e6a459bc1b52cc830436, $v5972c4d2dc988e33130281251a6f282a = false);public function cloneElement($v7552cd149af7495ee7d8225974e50f80, $v05ea772b3414e6a459bc1b52cc830436, $v5972c4d2dc988e33130281251a6f282a = false);public function getDeletedList();public function restoreElement($v7552cd149af7495ee7d8225974e50f80);public function removeDeletedElement($v7552cd149af7495ee7d8225974e50f80);public function removeDeletedAll();public function getParent($v7552cd149af7495ee7d8225974e50f80);public function getAllParents($v970489db8d4f274439de776cfb2f36c2, $vd990c45185b59769adb599de6227718d = false);public function getChilds($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee = true, $vbc8c7a7f95968293eac2b176cc1a21b5 = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vacf567c9c3d6cf7c6e2cc0ce108e0631 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function getChildsCount($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee = true, $vbc8c7a7f95968293eac2b176cc1a21b5 = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vacf567c9c3d6cf7c6e2cc0ce108e0631 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function getPathById($v7552cd149af7495ee7d8225974e50f80, $v5cd943c36b800237522c35155d898244 = false, $vbc9ecd0be77ceffa51fc6918c714e5d3 = false);public function getIdByPath($v4a20784bb5bad10b0f5c941a900f0c04, $v4ee7832bcc23d41fa74f84e483f1859e = false, &$v5f51e765b4dc9821bb184fe18370ab8d = 0);public static function compareStrings($v34b577be20fbc15477aadb9a08101ff9, $v91c0c59c8f6fc9aa2dc99a89f2fd0ab5);public static function convertAltName($vd84ff935144e00c3e1d395c2379aca47);public static function getTimeStamp();public function getDefaultElementId($vf585b7f018bb4ced15a03683a733e50b = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function moveBefore($v7552cd149af7495ee7d8225974e50f80, $va722790b49e8eb1f37a1c672326ec501, $v2862c7667bfa3eb6b4c6fa1de2bd8826 = false);public function moveFirst($v7552cd149af7495ee7d8225974e50f80, $va722790b49e8eb1f37a1c672326ec501);public function getDominantTypeId($v7552cd149af7495ee7d8225974e50f80);public function addUpdatedElementId($v7552cd149af7495ee7d8225974e50f80);public function getUpdatedElements();public function unloadElement($v7552cd149af7495ee7d8225974e50f80);public function getElementsCount($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = "");public function forceAbsolutePath($vf9448cc5666e281bc210298b60567801 = true);public function getObjectInstances($v16b2b26000987faccb260b9d39df1269, $vfc9bd216c399e5612672290fa3f0cbe2 = false, $v1200c36ada21fb70df10f131f49eaf3d = false);public function getLastUpdatedElements($vaa9f73eea60a006820d0f8768bc8a3fc, $v9a5e73d67afbd1b69ff848efe5e73442 = 0);public function checkIsVirtual($v8e67e94f87e92070a0874d1de3ff8f6a);}class umiHierarchy extends singleton implements iSingleton, iUmiHierarchy {private $elements = Array(),   $objects, $langs, $domains, $templates;private $updatedElements = Array();private $autocorrectionDisabled = false;private $elementsLastUpdateTime = 0;private $bForceAbsolutePath = false;private $symlinks = Array();protected function __construct() {$this->objects        =    &umiObjectsCollection::getInstance();$this->langs        =    &langsCollection::getInstance();$this->domains        =    &domainsCollection::getInstance();$this->templates    =    &templatesCollection::getInstance();if(regedit::getInstance()->getVal("//settings/disable_url_autocorrection")) {$this->autocorrectionDisabled = true;}}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function isExists($v7057e8409c7c531a1a6e9ac3df4ed549) {if($this->isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549)) {return true;}else {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;return (bool) XMLFactory::getInstance()->getProxy('hierarchy.xml')->getCount('/umi/elements/element[@id='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');}}public function isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v7057e8409c7c531a1a6e9ac3df4ed549 === false) {return false;}if(is_array($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v5b78ddc78e0a270e44c7928843456220 = true;foreach($v7057e8409c7c531a1a6e9ac3df4ed549 as $v7a83e592dae31301d9b5c2bbc544d822) {if(!array_key_exists($v7a83e592dae31301d9b5c2bbc544d822, $this->elements)) {$v5b78ddc78e0a270e44c7928843456220 = false;break;}}return $v5b78ddc78e0a270e44c7928843456220;}else {return (bool) array_key_exists($v7057e8409c7c531a1a6e9ac3df4ed549, $this->elements);}}public function getElement($v7057e8409c7c531a1a6e9ac3df4ed549, $ve70325c72e806c33fd52022dd9c07eb2 = false, $vbeaf7e25161be5ef9784e550ab4fc891 = false) {if(!$ve70325c72e806c33fd52022dd9c07eb2) {if(!$this->isAllowed($v7057e8409c7c531a1a6e9ac3df4ed549)) return false;}if($this->isLoaded($v7057e8409c7c531a1a6e9ac3df4ed549)) {return $this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549];}else {if($v8e2dcfd7e7e24b1ca76c1193f645902b = cacheFrontend::getInstance()->load($v7057e8409c7c531a1a6e9ac3df4ed549, "element")) {}else {try {$v8e2dcfd7e7e24b1ca76c1193f645902b = new umiHierarchyElement($v7057e8409c7c531a1a6e9ac3df4ed549);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($v8e2dcfd7e7e24b1ca76c1193f645902b, "element");}if(is_object($v8e2dcfd7e7e24b1ca76c1193f645902b)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsBroken()) {return false;}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDeleted() && !$vbeaf7e25161be5ef9784e550ab4fc891) return false;$this->pushElementsLastUpdateTime($v8e2dcfd7e7e24b1ca76c1193f645902b->getUpdateTime());$this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549] = $v8e2dcfd7e7e24b1ca76c1193f645902b;return $this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549];}else {return false;}}}public function delElement($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v24af3aa6132f2de2388dc4d034732920 = cmsController::getInstance()->getModule("users")) {if(!$v24af3aa6132f2de2388dc4d034732920->isAllowedObject($v24af3aa6132f2de2388dc4d034732920->user_id, $v7057e8409c7c531a1a6e9ac3df4ed549)) {return false;}}if(array_key_exists($v7057e8409c7c531a1a6e9ac3df4ed549, $this->elements)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@rel='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($v231afe47f3f37d3808096b36c28b4ded->id, true, true);cacheFrontend::getInstance()->del($v231afe47f3f37d3808096b36c28b4ded->id, "element");$this->delElement($v231afe47f3f37d3808096b36c28b4ded->id);}$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDeleted(true);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);$this->addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549);return true;}return false;}else {$v48b8e11252203b3b99c58dd5a07776c1       = XMLFactory::getInstance()->getProxy('hierarchy.xml');$vd9d0ea629b42f52ce023f840767a8109 = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/elements/element[@id='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');$vd9d0ea629b42f52ce023f840767a8109->is_deleted = true;$v4e0d2156ad702016277edb10f2cbd7b1 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@rel='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');foreach($v4e0d2156ad702016277edb10f2cbd7b1 as $v266dfb6190a3ce57973bce176a01701e) $this->delElement( $v266dfb6190a3ce57973bce176a01701e->id );$this->addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549);cacheFrontend::getInstance()->del($v7057e8409c7c531a1a6e9ac3df4ed549, "element");}}public function copyElement($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v5972c4d2dc988e33130281251a6f282a = false) {if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) && ($this->isExists($vd5d4bb9b2c282937ee64b1fb0495ef08) || $vd5d4bb9b2c282937ee64b1fb0495ef08 === 0)) {cacheFrontend::getInstance()->flush();$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$vd7e6d55ba379a13d08c25d15faf2a23b = self::getTimeStamp();if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $v8e2dcfd7e7e24b1ca76c1193f645902b->getOrd();unset($v8e2dcfd7e7e24b1ca76c1193f645902b);}$v2114c8075d855b3cea53d5d880c68948 = $v7057e8409c7c531a1a6e9ac3df4ed549;$v48b8e11252203b3b99c58dd5a07776c1         = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v7057e8409c7c531a1a6e9ac3df4ed549     = (int) $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[not(@id <= preceding-sibling::element/@id) and not(@id <=following-sibling::element/@id)]','id') + 1;$v3d164bce91ce86eb5563b7332b7fc491       = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/elements/element[@id='.$v2114c8075d855b3cea53d5d880c68948.']')->cloneSelf(true);$v3d164bce91ce86eb5563b7332b7fc491->id   = $v7057e8409c7c531a1a6e9ac3df4ed549;$v3d164bce91ce86eb5563b7332b7fc491->rel  = $vd5d4bb9b2c282937ee64b1fb0495ef08;$v3d164bce91ce86eb5563b7332b7fc491->ord  = $this->getMaxOrd($vd5d4bb9b2c282937ee64b1fb0495ef08) + 10;$v3d164bce91ce86eb5563b7332b7fc491->updatetime = $vd7e6d55ba379a13d08c25d15faf2a23b;XMLFactory::copyFile('eperms/'.$v2114c8075d855b3cea53d5d880c68948.'.xml', 'eperms/'.$v7057e8409c7c531a1a6e9ac3df4ed549.'.xml');if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();if($v5972c4d2dc988e33130281251a6f282a) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChilds($v2114c8075d855b3cea53d5d880c68948, true, true, 0, false, $v662cbf1253ac7d8750ed9190c52163e5);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$this->copyElement($vf36263a38d7de5cdaa953c1e2b2f79b5, $v7057e8409c7c531a1a6e9ac3df4ed549, true);}}return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {return false;}}else {return false;}}public function cloneElement($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v5972c4d2dc988e33130281251a6f282a = false) {if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) && ($this->isExists($vd5d4bb9b2c282937ee64b1fb0495ef08) || $vd5d4bb9b2c282937ee64b1fb0495ef08 === 0)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $v8e2dcfd7e7e24b1ca76c1193f645902b->getOrd();}$vaf31437ce61345f416579830a98c91e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getId();$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objects.xml');$v5e3f5f5bf865de072ff1e4cd710d4a39 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objects/object[not(@id <= preceding-sibling::object/@id) and not(@id <=following-sibling::object/@id)]','id') + 1;$vc86c544ad7071a183f4776c4b43d477e        = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/objects/object[@id='.$vaf31437ce61345f416579830a98c91e5.']')->cloneSelf(true);$vc86c544ad7071a183f4776c4b43d477e->id    = $v5e3f5f5bf865de072ff1e4cd710d4a39;$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy('objectcontent/'.$vc86c544ad7071a183f4776c4b43d477e->type_id.'.xml');$v44b09c0a4f0bbe932cce0cea40ccba35 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/values/value[@obj_id='.$vaf31437ce61345f416579830a98c91e5.']');foreach($v44b09c0a4f0bbe932cce0cea40ccba35 as $v689202409e48743b914713f96d93947c) $v689202409e48743b914713f96d93947c->cloneSelf(true)->setAttribute('obj_id', $v5e3f5f5bf865de072ff1e4cd710d4a39);$vd7e6d55ba379a13d08c25d15faf2a23b = self::getTimeStamp();$v2114c8075d855b3cea53d5d880c68948 = $v7057e8409c7c531a1a6e9ac3df4ed549;$v48b8e11252203b3b99c58dd5a07776c1         = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v7057e8409c7c531a1a6e9ac3df4ed549     = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[not(@id <= preceding-sibling::element/@id) and not(@id <=following-sibling::element/@id)]','id') + 1;$v3d164bce91ce86eb5563b7332b7fc491       = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/elements/element[@id='.$v2114c8075d855b3cea53d5d880c68948.']')->cloneSelf(true);$v3d164bce91ce86eb5563b7332b7fc491->id   = $v7057e8409c7c531a1a6e9ac3df4ed549;$v3d164bce91ce86eb5563b7332b7fc491->rel  = $vd5d4bb9b2c282937ee64b1fb0495ef08;$v3d164bce91ce86eb5563b7332b7fc491->ord  = $this->getMaxOrd($vd5d4bb9b2c282937ee64b1fb0495ef08) + 10;$v3d164bce91ce86eb5563b7332b7fc491->updatetime = $vd7e6d55ba379a13d08c25d15faf2a23b;$v3d164bce91ce86eb5563b7332b7fc491->obj_id = $v5e3f5f5bf865de072ff1e4cd710d4a39;XMLFactory::copyFile('eperms/'.$v2114c8075d855b3cea53d5d880c68948.'.xml', 'eperms/'.$v7057e8409c7c531a1a6e9ac3df4ed549.'.xml');if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();if($v5972c4d2dc988e33130281251a6f282a) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChilds($v2114c8075d855b3cea53d5d880c68948, true, true, 0, false, $v662cbf1253ac7d8750ed9190c52163e5);foreach($vadce578d04ed03c31f6ac59451fcf8e4 as $vf36263a38d7de5cdaa953c1e2b2f79b5 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$this->cloneElement($vf36263a38d7de5cdaa953c1e2b2f79b5, $v7057e8409c7c531a1a6e9ac3df4ed549, true);}}return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {return false;}}}public function getDeletedList() {$vfa816edb83e95bf0c8da580bdfd491ef      = array();$v9b207167e5381c47682c6b4f58a623fb      = array();$v48b8e11252203b3b99c58dd5a07776c1   = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v84f37beafde903ab5beeb5bb43012cc1 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@is_deleted=1]');foreach($v84f37beafde903ab5beeb5bb43012cc1 as $v231afe47f3f37d3808096b36c28b4ded) {$v7ffc4d510260a8544e5550e62ec56bc1 = $v231afe47f3f37d3808096b36c28b4ded->rel;$vb80bb7740288fda1f201890375a60c8f  = $v231afe47f3f37d3808096b36c28b4ded->id;if($v7ffc4d510260a8544e5550e62ec56bc1 != 0)      if($v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/elements/element[@id='.$v7ffc4d510260a8544e5550e62ec56bc1.']')->getAttribute('is_deleted') != 0) continue;if(array_key_exists($v7ffc4d510260a8544e5550e62ec56bc1, $vfa816edb83e95bf0c8da580bdfd491ef)) continue;if(array_key_exists($vb80bb7740288fda1f201890375a60c8f, $v9b207167e5381c47682c6b4f58a623fb))  unset($v9b207167e5381c47682c6b4f58a623fb[$vfa816edb83e95bf0c8da580bdfd491ef[$vb80bb7740288fda1f201890375a60c8f]]);$v9b207167e5381c47682c6b4f58a623fb[$vb80bb7740288fda1f201890375a60c8f] = $vb80bb7740288fda1f201890375a60c8f;$vfa816edb83e95bf0c8da580bdfd491ef[$vb80bb7740288fda1f201890375a60c8f] = $v7ffc4d510260a8544e5550e62ec56bc1;}return array_values($v9b207167e5381c47682c6b4f58a623fb);}public function restoreElement($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, false, true)) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDeleted(false);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$v23fb592029f67c5f931dbeef4be993a3 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@rel='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');foreach($v23fb592029f67c5f931dbeef4be993a3 as $va82fea383f121c803741f8de1c209734) {$vf36263a38d7de5cdaa953c1e2b2f79b5 = $va82fea383f121c803741f8de1c209734->id;$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5, true, true);$this->restoreElement($vf36263a38d7de5cdaa953c1e2b2f79b5);}return true;}else {return false;}}public function removeDeletedElement($v7057e8409c7c531a1a6e9ac3df4ed549) {if($v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true)) {if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDeleted()) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$v48b8e11252203b3b99c58dd5a07776c1     = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v23fb592029f67c5f931dbeef4be993a3  = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@rel='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');foreach($v23fb592029f67c5f931dbeef4be993a3 as $va82fea383f121c803741f8de1c209734) {$vf36263a38d7de5cdaa953c1e2b2f79b5      = $va82fea383f121c803741f8de1c209734->id;$v2da0d90fc7822dade6effbdd1f48b458 = $this->getElement($vf36263a38d7de5cdaa953c1e2b2f79b5, true, true);$v2da0d90fc7822dade6effbdd1f48b458->setIsDeleted(true);$this->removeDeletedElement($vf36263a38d7de5cdaa953c1e2b2f79b5);}$v48b8e11252203b3b99c58dd5a07776c1->removeElement('/umi/elements/element[@id='.$v7057e8409c7c531a1a6e9ac3df4ed549.']');unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);return true;}else {return false;}}else {return false;}}public function removeDeletedAll() {$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@is_deleted=1]');foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$this->removeDeletedElement($v231afe47f3f37d3808096b36c28b4ded->id);}return true;}public function getParent($v7057e8409c7c531a1a6e9ac3df4ed549) {return (int)XMLFactory::getInstance()->getProxy('hierarchy.xml')->getAttributeValue('/umi/elements/element[@id='.((int)$v7057e8409c7c531a1a6e9ac3df4ed549).']', 'rel');}public function getAllParents($v7057e8409c7c531a1a6e9ac3df4ed549, $vd0e8988bcdf8745f43ea50ef3e1b54b2 = false) {$v9b207167e5381c47682c6b4f58a623fb = Array();$v66c87baa6f2f325a3f2929312e4ebb31 = $v7057e8409c7c531a1a6e9ac3df4ed549;if($vd0e8988bcdf8745f43ea50ef3e1b54b2) $v9b207167e5381c47682c6b4f58a623fb[] = $v66c87baa6f2f325a3f2929312e4ebb31;while($v7057e8409c7c531a1a6e9ac3df4ed549 > 0) {$v7057e8409c7c531a1a6e9ac3df4ed549 = $this->getParent($v7057e8409c7c531a1a6e9ac3df4ed549);if($v7057e8409c7c531a1a6e9ac3df4ed549 === false || in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $v9b207167e5381c47682c6b4f58a623fb)) return false;$v9b207167e5381c47682c6b4f58a623fb[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}return array_reverse($v9b207167e5381c47682c6b4f58a623fb);}public function getChilds($v7057e8409c7c531a1a6e9ac3df4ed549, $v69077352f5ac48235305c08dd983bf9f = true, $vbdbeb3b037059befbd5195fe4863ac5e = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $v0715f6d9497f93911417c9c324265771 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$v9b207167e5381c47682c6b4f58a623fb = Array();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$v69077352f5ac48235305c08dd983bf9f = (int) $v69077352f5ac48235305c08dd983bf9f;$vbdbeb3b037059befbd5195fe4863ac5e = (int) $vbdbeb3b037059befbd5195fe4863ac5e;$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5   = ($v72ee76c5c29383b7c9f9225c1fa4d10b) ? $v72ee76c5c29383b7c9f9225c1fa4d10b : cmsController::getInstance()->getCurrentDomain()->getId();$vb6454d498635710a189184ea13beed1c = '/umi/elements/element[@is_deleted=0 and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.(($v7057e8409c7c531a1a6e9ac3df4ed549 > 0) ? "" : " and @domain_id=".$v662cbf1253ac7d8750ed9190c52163e5);if(!$v69077352f5ac48235305c08dd983bf9f)    $vb6454d498635710a189184ea13beed1c .= " and @is_active=1";if(!$vbdbeb3b037059befbd5195fe4863ac5e)   $vb6454d498635710a189184ea13beed1c .= " and @is_visible=1";if($v0715f6d9497f93911417c9c324265771)  $vb6454d498635710a189184ea13beed1c .= " and @type_id=".$v0715f6d9497f93911417c9c324265771;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v8f2586e754de1b0267c5c2f833ad50e8 = array($v7057e8409c7c531a1a6e9ac3df4ed549);$v4f910a02588ad76e4ca93f7eb3ec4ab7 = array($v7057e8409c7c531a1a6e9ac3df4ed549 => &$v9b207167e5381c47682c6b4f58a623fb);while($v12a055bf01a31369fe81ac35d85c7bc1 >= 0) {if(empty($v8f2586e754de1b0267c5c2f833ad50e8)) {break;}$v23fb592029f67c5f931dbeef4be993a3 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray($vb6454d498635710a189184ea13beed1c.' and (@rel='.implode(' or @rel=', $v8f2586e754de1b0267c5c2f833ad50e8).')]');@usort($v23fb592029f67c5f931dbeef4be993a3, create_function('$a, $b', 'if($a->ord>$b->ord)return 1; else if($a->ord<$b->ord) return -1; else return 0;'));$v8f2586e754de1b0267c5c2f833ad50e8      = array();$ve3d483f1564bbd550b8bb93a56acb13b      = array();foreach($v23fb592029f67c5f931dbeef4be993a3 as $va82fea383f121c803741f8de1c209734) {$v841391d3c89975423e80c5a583bc4ad9  = $va82fea383f121c803741f8de1c209734->id;$v0e253c3caf96f474cb7aff000091a74f = $va82fea383f121c803741f8de1c209734->rel;$v8f2586e754de1b0267c5c2f833ad50e8[]    = $v841391d3c89975423e80c5a583bc4ad9;$v4f910a02588ad76e4ca93f7eb3ec4ab7[$v0e253c3caf96f474cb7aff000091a74f][$v841391d3c89975423e80c5a583bc4ad9] = array();$ve3d483f1564bbd550b8bb93a56acb13b[$v841391d3c89975423e80c5a583bc4ad9] = &$v4f910a02588ad76e4ca93f7eb3ec4ab7[$v0e253c3caf96f474cb7aff000091a74f][$v841391d3c89975423e80c5a583bc4ad9];}$v4f910a02588ad76e4ca93f7eb3ec4ab7 = $ve3d483f1564bbd550b8bb93a56acb13b;$v12a055bf01a31369fe81ac35d85c7bc1--;}return $v9b207167e5381c47682c6b4f58a623fb;}private static function countRecursive($v0cc175b9c0f1b6a831c399e269772661) {$v4a8a08f09d37b73795649038408b5f33 = 0;if(is_array($v0cc175b9c0f1b6a831c399e269772661))   foreach($v0cc175b9c0f1b6a831c399e269772661 as $v447b7147e84be512208dcc0995d67ebc) {$v4a8a08f09d37b73795649038408b5f33 += 1 + self::countRecursive($v447b7147e84be512208dcc0995d67ebc);}return $v4a8a08f09d37b73795649038408b5f33;}public function getChildsCount($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee = true, $vbc8c7a7f95968293eac2b176cc1a21b5 = true, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vacf567c9c3d6cf7c6e2cc0ce108e0631 = false, $v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$v7d8f378d5c6ab456f11cc631eca138d9 = $this->getChilds($v7552cd149af7495ee7d8225974e50f80, $v6ca4142a47386791b174d9cd8d1841ee, $vbc8c7a7f95968293eac2b176cc1a21b5, $v12a055bf01a31369fe81ac35d85c7bc1, $vacf567c9c3d6cf7c6e2cc0ce108e0631, $v72ee76c5c29383b7c9f9225c1fa4d10b);return self::countRecursive($v7d8f378d5c6ab456f11cc631eca138d9);}public function forceAbsolutePath($vf9448cc5666e281bc210298b60567801 = true) {$v8123ef13520d88a438e469cc8a7ab63b = $this->bForceAbsolutePath;$this->bForceAbsolutePath = (bool) $vf9448cc5666e281bc210298b60567801;return $v8123ef13520d88a438e469cc8a7ab63b;}public function getPathById($v7057e8409c7c531a1a6e9ac3df4ed549, $v5cd943c36b800237522c35155d898244 = false, $vbc9ecd0be77ceffa51fc6918c714e5d3 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244])) return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244];$v25173eac47bcd1aa0bb3a146f0595bb7 = cmsController::getInstance()->pre_lang;if($v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true)) {$v263deaa64d2e600bed1b85f3303f608e = cmsController::getInstance()->getCurrentDomain();$v3c2d776e82f7716166c1c2183822a04b = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();if(!$this->bForceAbsolutePath && $v263deaa64d2e600bed1b85f3303f608e->getId() == $v3c2d776e82f7716166c1c2183822a04b) {$v37540249ba8b3080e8092c62b08e7d4d = "";}else {$v37540249ba8b3080e8092c62b08e7d4d = "http://" . domainsCollection::getInstance()->getDomain($v3c2d776e82f7716166c1c2183822a04b)->getHost();}$vfb479516754f41871773a666a31026c4 = intval($v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId());$va51d26dd5a799dd184b4093d8cfb8d1b = langsCollection::getInstance()->getLang($vfb479516754f41871773a666a31026c4);$v795e772d23c3965d128d13aa8ee3e1f4 = ($vfb479516754f41871773a666a31026c4 === intval(cmsController::getInstance()->getCurrentDomain()->getDefaultLangId()));if(!$va51d26dd5a799dd184b4093d8cfb8d1b || $v795e772d23c3965d128d13aa8ee3e1f4 || $v5cd943c36b800237522c35155d898244 == true) {$v5a6e3be618e0347ab0766b23ec68d7fc = "";}else {$v5a6e3be618e0347ab0766b23ec68d7fc = "/" . $va51d26dd5a799dd184b4093d8cfb8d1b->getPrefix();}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDefault() && !$vbc9ecd0be77ceffa51fc6918c714e5d3) {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244] = $v37540249ba8b3080e8092c62b08e7d4d . $v5a6e3be618e0347ab0766b23ec68d7fc . "/";}}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549 . $v5cd943c36b800237522c35155d898244] = "";}if($vc68ad910ed49ac65f21f1bf2c5dbf912 = $this->getAllParents($v7057e8409c7c531a1a6e9ac3df4ed549)) {$vd6fe1d0be6347b8ef2427fa629c04485 = $v37540249ba8b3080e8092c62b08e7d4d . $v5a6e3be618e0347ab0766b23ec68d7fc;$vc68ad910ed49ac65f21f1bf2c5dbf912[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@id='.implode(' or @id=',$vc68ad910ed49ac65f21f1bf2c5dbf912).']');$v39b1fadece4d4b0d310eb9adcfe5af07 = 0;$v1f0136d7978627d18a348f7708404098 = array();while(true) {$v7f9bec28bc8902d45d905788d7aa59a1 = 0;foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v46cf510e48f99667216bfa781d6bebab=>$ve1671797c52e15f763380b45e841ec32) {if($ve1671797c52e15f763380b45e841ec32->rel == $v39b1fadece4d4b0d310eb9adcfe5af07) {$v7f9bec28bc8902d45d905788d7aa59a1  = $v46cf510e48f99667216bfa781d6bebab;$v39b1fadece4d4b0d310eb9adcfe5af07 = $ve1671797c52e15f763380b45e841ec32->id;break;}}$v1f0136d7978627d18a348f7708404098[] = $v5bf8bee33eed7e4b21708827159ec8b4[$v7f9bec28bc8902d45d905788d7aa59a1];unset($v5bf8bee33eed7e4b21708827159ec8b4[$v7f9bec28bc8902d45d905788d7aa59a1]);if(!count($v5bf8bee33eed7e4b21708827159ec8b4)) break;}foreach($v1f0136d7978627d18a348f7708404098 as $v231afe47f3f37d3808096b36c28b4ded) {$vd84ff935144e00c3e1d395c2379aca47 = $v231afe47f3f37d3808096b36c28b4ded->getValue();if($vd84ff935144e00c3e1d395c2379aca47) $vd6fe1d0be6347b8ef2427fa629c04485 .= "/" . $vd84ff935144e00c3e1d395c2379aca47;}$vd6fe1d0be6347b8ef2427fa629c04485 .= "/";return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = $vd6fe1d0be6347b8ef2427fa629c04485;}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v7057e8409c7c531a1a6e9ac3df4ed549] = false;}}public function getIdByPath($v84d8c2148d233e7430fceb3f20ae3314, $vda936bf93b2dd512e0554fd9eb7b4120 = false, &$v3dbd53d892aaea70c9f5fefc18fc7e4c = 0) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314])) return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314];$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');if($v84d8c2148d233e7430fceb3f20ae3314 == "/") {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = $this->getDefaultElementId();}$v84d8c2148d233e7430fceb3f20ae3314 = trim($v84d8c2148d233e7430fceb3f20ae3314, "\/ \n");if($vb80bb7740288fda1f201890375a60c8f = cacheFrontend::getInstance()->loadSql($v84d8c2148d233e7430fceb3f20ae3314 . "_path")) {return $vb80bb7740288fda1f201890375a60c8f;}$v13872c0118a4316afd1e99295017d654 = split("/", $v84d8c2148d233e7430fceb3f20ae3314);$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v13872c0118a4316afd1e99295017d654);$vb80bb7740288fda1f201890375a60c8f = 0;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd84ff935144e00c3e1d395c2379aca47 = $v13872c0118a4316afd1e99295017d654[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v865c0c0b4ab0e063e5caa3387c1a8741 == 0) {if($v3c2d776e82f7716166c1c2183822a04b = domainsCollection::getInstance()->getDomainId($vd84ff935144e00c3e1d395c2379aca47)) {$v662cbf1253ac7d8750ed9190c52163e5 = $v3c2d776e82f7716166c1c2183822a04b;continue;}}$v5bf8bee33eed7e4b21708827159ec8b4 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[text()="'.$vd84ff935144e00c3e1d395c2379aca47.'" and @rel='.$vb80bb7740288fda1f201890375a60c8f.' and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.(($vda936bf93b2dd512e0554fd9eb7b4120)?'':' and @is_deleted=0 and @is_active=1').']');if(empty($v5bf8bee33eed7e4b21708827159ec8b4)) {$v2ffe4e77325d9a7152f7086ea7aa5114       = 0;$vb6b6e66c9db093b3c4c8800ac9365830   = 0;$v1a1cc17b4341344c0ceec516de628da3    = 0;$v5bf8bee33eed7e4b21708827159ec8b4 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@rel='.$vb80bb7740288fda1f201890375a60c8f.' and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.(($vda936bf93b2dd512e0554fd9eb7b4120)?'':' and @is_deleted=0 and @is_active=1').']');foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$vb6b6e66c9db093b3c4c8800ac9365830 = $v231afe47f3f37d3808096b36c28b4ded->id;$v423b21e5932f11b123a1ddb35654b51b    = $v231afe47f3f37d3808096b36c28b4ded->getValue();if($this->autocorrectionDisabled) {if($vd84ff935144e00c3e1d395c2379aca47 == $v423b21e5932f11b123a1ddb35654b51b) {$v1a1cc17b4341344c0ceec516de628da3 = $vb6b6e66c9db093b3c4c8800ac9365830;$v2ffe4e77325d9a7152f7086ea7aa5114 = 80;}}else {$v3d801aa532c1cec3ee82d87a99fdf63f = umiHierarchy::compareStrings($vd84ff935144e00c3e1d395c2379aca47, $v423b21e5932f11b123a1ddb35654b51b);if($v3d801aa532c1cec3ee82d87a99fdf63f > $v2ffe4e77325d9a7152f7086ea7aa5114) {$v2ffe4e77325d9a7152f7086ea7aa5114 = $v3d801aa532c1cec3ee82d87a99fdf63f;$v1a1cc17b4341344c0ceec516de628da3 = $vb6b6e66c9db093b3c4c8800ac9365830;++$v3dbd53d892aaea70c9f5fefc18fc7e4c;}}}if($v2ffe4e77325d9a7152f7086ea7aa5114 > 75) {$vb80bb7740288fda1f201890375a60c8f = $v1a1cc17b4341344c0ceec516de628da3;}else {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = false;}}else {$v3a3ea00cfc35332cedf6e5e9a32e94da = $v5bf8bee33eed7e4b21708827159ec8b4[0];if(!$v3a3ea00cfc35332cedf6e5e9a32e94da->id) {return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = false;}else {$vb80bb7740288fda1f201890375a60c8f = $v3a3ea00cfc35332cedf6e5e9a32e94da->id;}}}cacheFrontend::getInstance()->saveSql($v84d8c2148d233e7430fceb3f20ae3314 . "_path", $vb80bb7740288fda1f201890375a60c8f, 3600);return $v0fea6a13c52b4d4725368f24b045ca84[$v84d8c2148d233e7430fceb3f20ae3314] = $vb80bb7740288fda1f201890375a60c8f;}public function addElement($vd5d4bb9b2c282937ee64b1fb0495ef08, $v0715f6d9497f93911417c9c324265771, $vb068931cc450442b63f5b3d276ea4297, $vd84ff935144e00c3e1d395c2379aca47, $v94757cae63fd3e398c0811a976dd6bbe = false, $v662cbf1253ac7d8750ed9190c52163e5 = false, $v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $vd02e12eb6d6c3f6ebd763197df01e211 = false) {if($v94757cae63fd3e398c0811a976dd6bbe === false) {if($vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v0715f6d9497f93911417c9c324265771)) {$v94757cae63fd3e398c0811a976dd6bbe = umiObjectTypesCollection::getInstance()->getBaseType($vb946c44d711ade3b061653732977d043->getName(), $vb946c44d711ade3b061653732977d043->getExt());if(!$v94757cae63fd3e398c0811a976dd6bbe) {throw new coreException("There is no base object type for hierarchy type #{$v0715f6d9497f93911417c9c324265771}");return false;}}else {throw new coreException("Wrong hierarchy type id given");return false;}}if($v662cbf1253ac7d8750ed9190c52163e5 === false) {$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();}if($v78e6dd7a49f5b0cb2106a3a434dd5c86 === false) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();}if($vd02e12eb6d6c3f6ebd763197df01e211 === false) {$vd02e12eb6d6c3f6ebd763197df01e211 = templatesCollection::getInstance()->getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86)->getId();}if($vd5d4bb9b2c282937ee64b1fb0495ef08) {$this->addUpdatedElementId($vd5d4bb9b2c282937ee64b1fb0495ef08);}else {$this->addUpdatedElementId($this->getDefaultElementId());}if($vaf31437ce61345f416579830a98c91e5 = $this->objects->addObject($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe)) {$v48b8e11252203b3b99c58dd5a07776c1     = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v7057e8409c7c531a1a6e9ac3df4ed549 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[not(@id <= preceding-sibling::element/@id) and not(@id <=following-sibling::element/@id)]','id') + 1;XMLFactory::createFile('eperms/'.$v7057e8409c7c531a1a6e9ac3df4ed549.'.xml', '<?xml version="1.0" encoding="utf-8"?><umi><eperms /></umi>');$v0847f0c1a11b13c36dbe87b63e380dbe = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/elements', 'element', '');$v0847f0c1a11b13c36dbe87b63e380dbe->id        = $v7057e8409c7c531a1a6e9ac3df4ed549;$v0847f0c1a11b13c36dbe87b63e380dbe->rel       = $vd5d4bb9b2c282937ee64b1fb0495ef08;$v0847f0c1a11b13c36dbe87b63e380dbe->type_id   = $v0715f6d9497f93911417c9c324265771;$v0847f0c1a11b13c36dbe87b63e380dbe->domain_id = $v662cbf1253ac7d8750ed9190c52163e5;$v0847f0c1a11b13c36dbe87b63e380dbe->lang_id   = $v78e6dd7a49f5b0cb2106a3a434dd5c86;$v0847f0c1a11b13c36dbe87b63e380dbe->tpl_id    = $vd02e12eb6d6c3f6ebd763197df01e211;$v0847f0c1a11b13c36dbe87b63e380dbe->obj_id    = $vaf31437ce61345f416579830a98c91e5;$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true);$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($vd84ff935144e00c3e1d395c2379aca47);$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[not(@ord <= preceding-sibling::element/@ord) and not(@ord <=following-sibling::element/@ord)][@rel='.$vd5d4bb9b2c282937ee64b1fb0495ef08.']','ord');$v8e2dcfd7e7e24b1ca76c1193f645902b->setOrd( ($v8bef1cc20ada3bef55fdf132cb2a1cb9 + 1) );$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549] = $v8e2dcfd7e7e24b1ca76c1193f645902b;$this->addUpdatedElementId($vd5d4bb9b2c282937ee64b1fb0495ef08);$this->addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549);if($vd5d4bb9b2c282937ee64b1fb0495ef08) {$vc975d8201fe751ebb3429336eeee7d3b = umiHierarchy::getInstance()->getElement($vd5d4bb9b2c282937ee64b1fb0495ef08);if($vc975d8201fe751ebb3429336eeee7d3b instanceof umiHierarchyElement) {$vd011f21d73bbed77facded50f36b9e7d = umiHierarchy::getInstance()->getObjectInstances($vc975d8201fe751ebb3429336eeee7d3b->getObject()->getId());if(sizeof($vd011f21d73bbed77facded50f36b9e7d) > 1) {foreach($vd011f21d73bbed77facded50f36b9e7d as $v249d9032fd2c81de7f755fc06b1c397a) {if($v249d9032fd2c81de7f755fc06b1c397a == $vd5d4bb9b2c282937ee64b1fb0495ef08) continue;$this->symlinks[] = Array($v7057e8409c7c531a1a6e9ac3df4ed549, $v249d9032fd2c81de7f755fc06b1c397a);}}}}return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {throw new coreException("Failed to create new object for hierarchy element");return false;}}public function getDefaultElementId($v78e6dd7a49f5b0cb2106a3a434dd5c86 = false, $v662cbf1253ac7d8750ed9190c52163e5 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 === false) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();}if($v662cbf1253ac7d8750ed9190c52163e5 === false) {$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5];}return $v0fea6a13c52b4d4725368f24b045ca84[$v78e6dd7a49f5b0cb2106a3a434dd5c86][$v662cbf1253ac7d8750ed9190c52163e5] = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getAttributeValue('/umi/elements/element[@is_default=1 and @is_deleted=0 and @is_active=1 and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.']', 'id');}public static function compareStrings($vd7b5808c3f443eb5a496225468c7e4a5, $v6dc84905d6df841d6f19153bd593e213) {return    100 * (    similar_text($vd7b5808c3f443eb5a496225468c7e4a5, $v6dc84905d6df841d6f19153bd593e213) / (     (strlen($vd7b5808c3f443eb5a496225468c7e4a5) + strlen($v6dc84905d6df841d6f19153bd593e213))    / 2)   );}public static function convertAltName($vd84ff935144e00c3e1d395c2379aca47) {$vd84ff935144e00c3e1d395c2379aca47 = preg_replace("/[\?\\\\\-&=]+/", "_", $vd84ff935144e00c3e1d395c2379aca47);$vd84ff935144e00c3e1d395c2379aca47 = preg_replace("/[_\/]+/", "_", $vd84ff935144e00c3e1d395c2379aca47);return $vd84ff935144e00c3e1d395c2379aca47;}public static function getTimeStamp() {return time();}public function moveBefore($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v37b7e5e846e31d9da322c6e743ce3b3c = false) {if(!$this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) return false;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$v46a8df3f1b0f374830be2497076b9446 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTplId();$v3568678a69e0e639e9c3163b2d10ceba = templatesCollection::getInstance()->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);$vf07440bfac87b2aa38a59a0109b6cd38 = true;foreach($v3568678a69e0e639e9c3163b2d10ceba as $vcfc7e0dcf6883d635b928f1e31f7694d) {if ($vcfc7e0dcf6883d635b928f1e31f7694d->getId() == $v46a8df3f1b0f374830be2497076b9446) {$vf07440bfac87b2aa38a59a0109b6cd38 = false;break;}}if ($vf07440bfac87b2aa38a59a0109b6cd38) {$v84b4de448609c5297d79dbec08101fbd = templatesCollection::getInstance()->getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);if ($v84b4de448609c5297d79dbec08101fbd) {$v8c3112e89e491f40ed057b32883c646c = $v84b4de448609c5297d79dbec08101fbd->getId();$v770c309c1aed0fbfabad24a3d5933129 = new umiSelection;$v770c309c1aed0fbfabad24a3d5933129->setHierarchyFilter();$v770c309c1aed0fbfabad24a3d5933129->addHierarchyFilter($v7057e8409c7c531a1a6e9ac3df4ed549, 100);$v4650086681d0c3d7660463e94b1156a5 = umiSelectionsParser::runSelection($v770c309c1aed0fbfabad24a3d5933129);$v4650086681d0c3d7660463e94b1156a5[] = $v7057e8409c7c531a1a6e9ac3df4ed549;$v18e7588ee516318bc8ae9c8c0ff7c917 = implode(",", $v4650086681d0c3d7660463e94b1156a5);$vb6454d498635710a189184ea13beed1c = '/umi/elements/element[@id='.implode(']|/umi/elements/element[@id=', $v4650086681d0c3d7660463e94b1156a5).']';$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue($vb6454d498635710a189184ea13beed1c, 'tpl_id', $v8c3112e89e491f40ed057b32883c646c);}}if($v37b7e5e846e31d9da322c6e743ce3b3c) {$v37b7e5e846e31d9da322c6e743ce3b3c = (int) $v37b7e5e846e31d9da322c6e743ce3b3c;$v8bef1cc20ada3bef55fdf132cb2a1cb9 = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[@id='.$v37b7e5e846e31d9da322c6e743ce3b3c.']', 'ord');if($v8bef1cc20ada3bef55fdf132cb2a1cb9 != null) {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;$v5bf8bee33eed7e4b21708827159ec8b4 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@rel='.$vd5d4bb9b2c282937ee64b1fb0495ef08.' and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.' and @ord>='.$v8bef1cc20ada3bef55fdf132cb2a1cb9.']');foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v266dfb6190a3ce57973bce176a01701e)       $v266dfb6190a3ce57973bce176a01701e->setAttribute('ord', $v266dfb6190a3ce57973bce176a01701e->getAttribute('ord') + 1 );$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/elements/element[@id='.$v7057e8409c7c531a1a6e9ac3df4ed549.']', array('ord'=>$v8bef1cc20ada3bef55fdf132cb2a1cb9, 'rel'=>$vd5d4bb9b2c282937ee64b1fb0495ef08));return true;}else {return false;}}else {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = $this->getMaxOrd($vd5d4bb9b2c282937ee64b1fb0495ef08, $v48b8e11252203b3b99c58dd5a07776c1);if($v8bef1cc20ada3bef55fdf132cb2a1cb9 != null) {++$v8bef1cc20ada3bef55fdf132cb2a1cb9;}else {$v8bef1cc20ada3bef55fdf132cb2a1cb9 = 1;}$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/elements/element[@id='.$v7057e8409c7c531a1a6e9ac3df4ed549.']', array('ord'=>$v8bef1cc20ada3bef55fdf132cb2a1cb9, 'rel'=>$vd5d4bb9b2c282937ee64b1fb0495ef08));return true;}}public function moveFirst($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$vd5d4bb9b2c282937ee64b1fb0495ef08 = (int) $vd5d4bb9b2c282937ee64b1fb0495ef08;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');$v030afc52a2a7c64d04ee2b659e54299d   = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[@rel='.$vd5d4bb9b2c282937ee64b1fb0495ef08.']', 'ord', true);$v37b7e5e846e31d9da322c6e743ce3b3c = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/elements/element[(@rel='.$vd5d4bb9b2c282937ee64b1fb0495ef08.') and (@ord = '.min($v030afc52a2a7c64d04ee2b659e54299d).')]', 'id');if($v37b7e5e846e31d9da322c6e743ce3b3c === false) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return $this->moveBefore($v7057e8409c7c531a1a6e9ac3df4ed549, $vd5d4bb9b2c282937ee64b1fb0495ef08, $v37b7e5e846e31d9da322c6e743ce3b3c);}}protected function isAllowed($v7057e8409c7c531a1a6e9ac3df4ed549) {if($va178a6b6ad454764f5d724e7f96e75b7 = cmsController::getInstance()->getModule('users')) {list($v4b43b0aee35624cd95b910189b3dc231, $ve1671797c52e15f763380b45e841ec32) = $va178a6b6ad454764f5d724e7f96e75b7->isAllowedObject($va178a6b6ad454764f5d724e7f96e75b7->user_id, $v7057e8409c7c531a1a6e9ac3df4ed549);return $v4b43b0aee35624cd95b910189b3dc231;}else {return true;}}public function getDominantTypeId($v7057e8409c7c531a1a6e9ac3df4ed549) {if($this->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) $v7057e8409c7c531a1a6e9ac3df4ed549;$v8365b68c848f25b33e509dfc375af3d8 = array();$vf897304cabd6123e0d76f68708690bf6    = array();$va5a2bb9982d4ca8af0110c276f5494eb = array(0, 0);$v48b8e11252203b3b99c58dd5a07776c1    = XMLFactory::getInstance()->getProxy('objects.xml');$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@rel='.$v7057e8409c7c531a1a6e9ac3df4ed549.' and @is_deleted=0 and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.']');if(empty($v5bf8bee33eed7e4b21708827159ec8b4)) return null;$v38b7b3ab8651eb69de0e1c4fab167cc6 = '';$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded)     $v38b7b3ab8651eb69de0e1c4fab167cc6 .= (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'').'@id='.$v231afe47f3f37d3808096b36c28b4ded->obj_id;$vcd804a351eeafbfd69bc82b5dbde2037  = XMLFactory::getInstance()->getProxy('objects.xml')->getElementsArray('/umi/objects/object['.$v38b7b3ab8651eb69de0e1c4fab167cc6.']');if(empty($vcd804a351eeafbfd69bc82b5dbde2037)) return null;foreach($vcd804a351eeafbfd69bc82b5dbde2037 as $v497031794414a552435f90151ac3b54b) {$v4db448fda1d93cb9f7a7c9cac3416573 = $v497031794414a552435f90151ac3b54b->id;if(array_key_exists($v4db448fda1d93cb9f7a7c9cac3416573, $v8365b68c848f25b33e509dfc375af3d8)) {$v963cecbdfa91757f2c7a4a9e794f3da7 = $v8365b68c848f25b33e509dfc375af3d8[$v4db448fda1d93cb9f7a7c9cac3416573];}else {$v963cecbdfa91757f2c7a4a9e794f3da7 = $v497031794414a552435f90151ac3b54b->type_id;$v8365b68c848f25b33e509dfc375af3d8[$v4db448fda1d93cb9f7a7c9cac3416573] = $v963cecbdfa91757f2c7a4a9e794f3da7;}if(array_key_exists($v963cecbdfa91757f2c7a4a9e794f3da7, $vf897304cabd6123e0d76f68708690bf6)) $vf897304cabd6123e0d76f68708690bf6[$v963cecbdfa91757f2c7a4a9e794f3da7]++;else $vf897304cabd6123e0d76f68708690bf6[$v963cecbdfa91757f2c7a4a9e794f3da7] = 1;if($vf897304cabd6123e0d76f68708690bf6[$v963cecbdfa91757f2c7a4a9e794f3da7] > $va5a2bb9982d4ca8af0110c276f5494eb[1]) {$va5a2bb9982d4ca8af0110c276f5494eb[0] = $v963cecbdfa91757f2c7a4a9e794f3da7;$va5a2bb9982d4ca8af0110c276f5494eb[1] = $vf897304cabd6123e0d76f68708690bf6[$v963cecbdfa91757f2c7a4a9e794f3da7];}}return $va5a2bb9982d4ca8af0110c276f5494eb[0];}else {return false;}}public function addUpdatedElementId($v7057e8409c7c531a1a6e9ac3df4ed549) {if(!in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $this->updatedElements)) {$this->updatedElements[] = $v7057e8409c7c531a1a6e9ac3df4ed549;}}public function getUpdatedElements() {return $this->updatedElements;}public function __destruct() {if(sizeof($this->updatedElements)) {if(function_exists("deleteElementsRelatedPages")) {deleteElementsRelatedPages();}}if(sizeof($this->symlinks)) {foreach($this->symlinks as $v47c80780ab608cc046f2a6e6f071feb6) {list($v7057e8409c7c531a1a6e9ac3df4ed549, $va473047c73202ee9a9ff3648c5aab351) = $v47c80780ab608cc046f2a6e6f071feb6;$this->copyElement($v7057e8409c7c531a1a6e9ac3df4ed549, $va473047c73202ee9a9ff3648c5aab351);}$this->symlinks = Array();}}public function getCollectedElements() {return array_keys($this->elements);}public function unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549) {static $v0db3209e1adc6d67be435a81baf9a66e;if($v0db3209e1adc6d67be435a81baf9a66e === NULL) {$v0db3209e1adc6d67be435a81baf9a66e = cmsController::getInstance()->getCurrentElementId();}if($v0db3209e1adc6d67be435a81baf9a66e == $v7057e8409c7c531a1a6e9ac3df4ed549) return false;if(array_key_exists($v7057e8409c7c531a1a6e9ac3df4ed549, $this->elements)) {unset($this->elements[$v7057e8409c7c531a1a6e9ac3df4ed549]);}else {return false;}}public function getElementsCount($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = "") {$v0715f6d9497f93911417c9c324265771 = umiHierarchyTypesCollection::getInstance()->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce)->getId();return XMLFactory::getInstance()->getProxy('hierarchy.xml')->getCount('/umi/elements/element[@type_id='.$v0715f6d9497f93911417c9c324265771.']');}private function pushElementsLastUpdateTime($ve0df5a999da22bc6fa9e26b115eb4ae4 = 0) {if($ve0df5a999da22bc6fa9e26b115eb4ae4 > $this->elementsLastUpdateTime) {$this->elementsLastUpdateTime = $ve0df5a999da22bc6fa9e26b115eb4ae4;}}public function getElementsLastUpdateTime() {return $this->elementsLastUpdateTime;}public function getObjectInstances($vaf31437ce61345f416579830a98c91e5, $vfc9bd216c399e5612672290fa3f0cbe2 = false, $v1200c36ada21fb70df10f131f49eaf3d = false) {$v9b207167e5381c47682c6b4f58a623fb       = array();$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;$v78e6dd7a49f5b0cb2106a3a434dd5c86   = cmsController::getInstance()->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = cmsController::getInstance()->getCurrentDomain()->getId();$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@obj_id='.$vaf31437ce61345f416579830a98c91e5.' and @domain_id='.$v662cbf1253ac7d8750ed9190c52163e5.' and @lang_id='.$v78e6dd7a49f5b0cb2106a3a434dd5c86.']');if(!empty($v5bf8bee33eed7e4b21708827159ec8b4))   foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$v9b207167e5381c47682c6b4f58a623fb[] = $v231afe47f3f37d3808096b36c28b4ded->id;}return $v9b207167e5381c47682c6b4f58a623fb;}public function getDominantTplId($v7552cd149af7495ee7d8225974e50f80) {$v7552cd149af7495ee7d8225974e50f80 = (int) $v7552cd149af7495ee7d8225974e50f80;$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@rel='.$v7552cd149af7495ee7d8225974e50f80.' and @is_deleted=0]');$vb9fcdcdf060fc6e43dc958e58ac7d881 = array();$va5a2bb9982d4ca8af0110c276f5494eb = array(0, 0);if(!empty($v5bf8bee33eed7e4b21708827159ec8b4)) {foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$vf743178606c87768baf5cead7b305cf6 = $v231afe47f3f37d3808096b36c28b4ded->tpl_id;if(array_key_exists($vf743178606c87768baf5cead7b305cf6, $vb9fcdcdf060fc6e43dc958e58ac7d881)) $vb9fcdcdf060fc6e43dc958e58ac7d881[$vf743178606c87768baf5cead7b305cf6]++;else $vb9fcdcdf060fc6e43dc958e58ac7d881[$vf743178606c87768baf5cead7b305cf6] = 1;if($va5a2bb9982d4ca8af0110c276f5494eb[1] < $vb9fcdcdf060fc6e43dc958e58ac7d881[$vf743178606c87768baf5cead7b305cf6]) {$va5a2bb9982d4ca8af0110c276f5494eb[0] = $vf743178606c87768baf5cead7b305cf6;$va5a2bb9982d4ca8af0110c276f5494eb[1] = $vb9fcdcdf060fc6e43dc958e58ac7d881[$vf743178606c87768baf5cead7b305cf6];}return $va5a2bb9982d4ca8af0110c276f5494eb[0];}}else {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7552cd149af7495ee7d8225974e50f80);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {return $v8e2dcfd7e7e24b1ca76c1193f645902b->getTplId();}}}public function getLastUpdatedElements($vaa9f73eea60a006820d0f8768bc8a3fc, $vd7e6d55ba379a13d08c25d15faf2a23b = 0) {$v9b207167e5381c47682c6b4f58a623fb       = array();$vaa9f73eea60a006820d0f8768bc8a3fc     = (int) $vaa9f73eea60a006820d0f8768bc8a3fc;$vd7e6d55ba379a13d08c25d15faf2a23b = (int) $vd7e6d55ba379a13d08c25d15faf2a23b;$v5bf8bee33eed7e4b21708827159ec8b4 = XMLFactory::getInstance()->getProxy('hierarchy.xml')->getElementsArray('/umi/elements/element[@updatetime>='.$vd7e6d55ba379a13d08c25d15faf2a23b.']');$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;if(!empty($v5bf8bee33eed7e4b21708827159ec8b4))   foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) {$v9b207167e5381c47682c6b4f58a623fb[] = $v231afe47f3f37d3808096b36c28b4ded->id;$v865c0c0b4ab0e063e5caa3387c1a8741++;if($v865c0c0b4ab0e063e5caa3387c1a8741>=$vaa9f73eea60a006820d0f8768bc8a3fc) break;}return $v9b207167e5381c47682c6b4f58a623fb;}public function checkIsVirtual($v47c80780ab608cc046f2a6e6f071feb6) {if(sizeof($v47c80780ab608cc046f2a6e6f071feb6) == 0) return $v47c80780ab608cc046f2a6e6f071feb6;foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v7057e8409c7c531a1a6e9ac3df4ed549 => $v1a13105b7e4eb5fb2e7c9515ac06aa48) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v47c80780ab608cc046f2a6e6f071feb6[$v7057e8409c7c531a1a6e9ac3df4ed549] = (string) $v8e2dcfd7e7e24b1ca76c1193f645902b->getObjectId();}$v162ba3ede45bcac0f0213ed0d924a250 = Array();$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v7057e8409c7c531a1a6e9ac3df4ed549 => $vaf31437ce61345f416579830a98c91e5) {if(isset($v162ba3ede45bcac0f0213ed0d924a250[$vaf31437ce61345f416579830a98c91e5])) {$v6a7f245843454cf4f28ad7c5e2572aa2 = $v162ba3ede45bcac0f0213ed0d924a250[$vaf31437ce61345f416579830a98c91e5];}else {$v162ba3ede45bcac0f0213ed0d924a250[$vaf31437ce61345f416579830a98c91e5] = $v6a7f245843454cf4f28ad7c5e2572aa2 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/elements/element[@obj_id = ' . $vaf31437ce61345f416579830a98c91e5 . ' and @is_deleted = 0]');}$v47c80780ab608cc046f2a6e6f071feb6[$v7057e8409c7c531a1a6e9ac3df4ed549] = (bool) (sizeof($v6a7f245843454cf4f28ad7c5e2572aa2) > 1);}return $v47c80780ab608cc046f2a6e6f071feb6;}protected function rewriteElementAltName($v7057e8409c7c531a1a6e9ac3df4ed549) {$this->unloadElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->getElement($v7057e8409c7c531a1a6e9ac3df4ed549, true, true);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName());$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();return true;}else {return false;}}protected function getMaxOrd($vd5d4bb9b2c282937ee64b1fb0495ef08, $v48b8e11252203b3b99c58dd5a07776c1 = NULL) {if(!$v48b8e11252203b3b99c58dd5a07776c1) {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('hierarchy.xml');}return (int) $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/elements/element[@rel = '{$vd5d4bb9b2c282937ee64b1fb0495ef08}' and (not(@ord <= preceding-sibling::element/@ord) and not(@ord <=following-sibling::element/@ord))]",'ord');}};interface iUmiSelection {public function setObjectTypeFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setElementTypeFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setPropertyFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setLimitFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setHierarchyFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setOrderFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setPermissionsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setNamesFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setActiveFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setOwnerFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setObjectsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function setElementsFilter($vd97a94e6c10d324fbb3c5f3a1c4a12d5 = true);public function forceHierarchyTable($v9a11e4b1e888a4467c1e9cabcd5243c9 = true);public function addObjectType($v6301cee35ea764a1e241978f93f01069);public function addElementType($v94efb9bd8805ffa2a3d248cbe836b6ef);public function addLimit($v46e7bdf0a692b1eca202f0d12b593b1e, $v8a9b81a55f7d809de402f0d2ce9d42af = 0);public function setOrderByProperty($v945100186b119048837b9859c2c46410, $v375a52cb87b22005816fe7a418ec6660 = true);public function setOrderByOrd();public function setOrderByRand();public function setOrderByName($v375a52cb87b22005816fe7a418ec6660 = true);public function setOrderByObjectId($v375a52cb87b22005816fe7a418ec6660 = true);public function addHierarchyFilter($v7552cd149af7495ee7d8225974e50f80, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vabd12ea100a9ec8377e3c7339f056b00 = false);public function addPropertyFilterBetween($v945100186b119048837b9859c2c46410, $vc77a6602bc26923923022914991f7089, $ve728b2d791dd5ba5e95cf932e053ee54);public function addPropertyFilterEqual($v945100186b119048837b9859c2c46410, $vceddaedc8950c06207af818c743f5986, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterNotEqual($v945100186b119048837b9859c2c46410, $vceddaedc8950c06207af818c743f5986, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterLike($v945100186b119048837b9859c2c46410, $ve1099940f96cfb8bb4fbfd8af691553e, $vd32ea5905defab375bc68bc780334f4f = true);public function addPropertyFilterMore($v945100186b119048837b9859c2c46410, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);public function addPropertyFilterLess($v945100186b119048837b9859c2c46410, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);public function addPropertyFilterIsNull($v945100186b119048837b9859c2c46410);public function addActiveFilter($vc76a5e84e4bdee527e274ea30c680d79);public function addOwnerFilter($v72122ce96bfec66e2396d2e25225d70a);public function addObjectsFilter($v486e8f4c27e77f00e55301bea98709b3);public function addElementsFilter($v8d7953acf74eb79d375a932e111d71a3);public function addNameFilterEquals($vceddaedc8950c06207af818c743f5986);public function addNameFilterLike($ve1099940f96cfb8bb4fbfd8af691553e);public function addPermissions($v8e44f0089b076e18a718eb9ca3d94674 = false);public function setPermissionsLevel($vc9e9a848920877e76685b2e4e76de38d = 1);public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b = false);public function setLangId($vf585b7f018bb4ced15a03683a733e50b = false);public function getOrderConds();public function getLimitConds();public function getPropertyConds();public function getObjectTypeConds();public function getElementTypeConds();public function getHierarchyConds();public function getPermissionsConds();public function getForceCond();public function getActiveConds();public function getOwnerConds();public function getObjectsConds();public function getElementsConds();public function getDomainId();public function getLangId();public function getRequiredPermissionsLevel();public function getNameConds();public function setConditionModeOR();public function setIsDomainIgnored($vf3e6017a1a6654acd4f621a18cc49878 = false);public function setIsLangIgnored($ve17f508d15b7985bf0f67b6d72c72072 = false);}class umiSelection implements iUmiSelection {private $order = Array(),   $limit = Array(),   $object_type = Array(),   $element_type = Array(),   $props = Array(),   $hierarchy = Array(),   $perms = Array(),   $names = Array(),   $active = Array(),   $owner = Array(),   $objects_ids = Array(),   $elements_ids = Array(),   $is_order = false,  $is_limit = false, $is_object_type = false, $is_element_type = false, $is_props = false, $is_hierarchy = false, $is_permissions = false, $is_forced = false, $is_names = false, $is_active = false,   $condition_mode_or = false, $is_owner = false,   $is_objects_ids = false, $is_elements_ids = false,   $is_domain_ignored = false, $isDomainIgnored = false, $isLangIgnored = false, $langId = false, $domainId = false,   $permissionsLevel = 1,   $searchStrings = Array();public $result = false, $count = false;public $optimize_root_search_query = false;public $sql_part__hierarchy = "";public $sql_part__element_type = "";public $sql_part__owner = "";public $sql_part__objects = "";public $sql_part__elements = "";public $sql_part__perms = "";public $sql_part__perms_tables = "";public $sql_part__content_tables = "";public $sql_part__object_type = "";public $sql_part__props_and_names = "";public $sql_part__lang_cond = "";public $sql_part__domain_cond = "";public $sql_part__unactive_cond = "";public $sql_cond__total_joins = 0;public $sql_cond__content_tables_loaded = 0;public $sql_cond__need_content = false;public $sql_cond__need_hierarchy = false;public $sql_cond__domain_ignored = false;public $sql_cond_auto_domain = false;public $sql_arr_for_mark_used_fields = array();public $sql_arr_for_and_or_part = array();public $sql_kwd_distinct = "";public $sql_kwd_distinct_count = "";public $sql_kwd_straight_join = "";public $sql_select_expr = "";public $sql_table_references = "";public $sql_where_condition_required = "";public $sql_where_condition_common = "";public $sql_where_condition_additional = "";public $sql_order_by = "";public $sql_limit = "";public $objectTableIsRequired = false;public $excludeNestedPages = false;public $usedContentTables = Array();public function setObjectTypeFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_object_type = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->object_type = Array();}public function setElementTypeFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_element_type = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->element_type = Array();}public function setPropertyFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_props = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->props = Array();}public function setLimitFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_limit = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->limit = Array();}public function setHierarchyFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_hierarchy = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->hierarchy = Array();}public function setOrderFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_order = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->order = Array();}public function setPermissionsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_permissions = $v615ed030b41392ae2a69ca39f0d521a3;$ve8701ad48ba05a91604e480dd60899a3 = $this->getCurrentUserId();if(cmsController::getInstance()->getModule("users")->isSv($ve8701ad48ba05a91604e480dd60899a3)) {$this->is_permissions = false;}if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->perms = Array();}public function setActiveFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_active = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_active = Array();}public function setOwnerFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_owner = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_owner = Array();}public function setObjectsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_objects_ids = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_objects_ids = Array();}public function setElementsFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_elements_ids = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->is_elements_ids = Array();}public function setNamesFilter($v615ed030b41392ae2a69ca39f0d521a3 = true) {$this->is_names = (bool) $v615ed030b41392ae2a69ca39f0d521a3;if (!$v615ed030b41392ae2a69ca39f0d521a3) $this->names = Array();}public function forceHierarchyTable($v9a11e4b1e888a4467c1e9cabcd5243c9 = true) {$this->is_forced = (bool) $v9a11e4b1e888a4467c1e9cabcd5243c9;}public function addObjectType($v87306dd4235ed712ebc07fe169b76f83) {$this->setObjectTypeFilter();if(is_array($v87306dd4235ed712ebc07fe169b76f83)) {foreach($v87306dd4235ed712ebc07fe169b76f83 as $v9191678b4dce60a558a09976502caa71) {if(!$this->addObjectType($v9191678b4dce60a558a09976502caa71)) {return false;}}return true;}if(umiObjectTypesCollection::getInstance()->isExists($v87306dd4235ed712ebc07fe169b76f83)) {if(in_array($v87306dd4235ed712ebc07fe169b76f83, $this->object_type) === false) {$this->object_type[] = $v87306dd4235ed712ebc07fe169b76f83;return true;}else {return false;}}else {return false;}}public function addElementType($v9a0ad81d8ded2798e111f35a942f00e9) {$this->setElementTypeFilter();if(umiHierarchyTypesCollection::getInstance()->isExists($v9a0ad81d8ded2798e111f35a942f00e9)) {if(in_array($v9a0ad81d8ded2798e111f35a942f00e9, $this->element_type) === false) {$this->element_type[] = $v9a0ad81d8ded2798e111f35a942f00e9;return true;}else {return false;}}else {return false;}}public function addLimit($v9d85c254b5062e518a134a61950999c3, $v71860c77c6745379b0d44304d66b6a13 = 0) {$this->setLimitFilter();$v9d85c254b5062e518a134a61950999c3 = (int) $v9d85c254b5062e518a134a61950999c3;$v71860c77c6745379b0d44304d66b6a13 = (int) $v71860c77c6745379b0d44304d66b6a13;if($v71860c77c6745379b0d44304d66b6a13 < 0) {$v71860c77c6745379b0d44304d66b6a13 = 0;}$this->limit = Array($v9d85c254b5062e518a134a61950999c3, $v71860c77c6745379b0d44304d66b6a13);}public function addActiveFilter($vc76a5e84e4bdee527e274ea30c680d79) {$this->setActiveFilter();$this->active = Array($vc76a5e84e4bdee527e274ea30c680d79);}public function addOwnerFilter($vca105ed04a437dfe76422775527d3e83) {$this->setOwnerFilter();$this->owner = $this->toIntsArray($vca105ed04a437dfe76422775527d3e83);}public function addObjectsFilter($v486e8f4c27e77f00e55301bea98709b3) {$this->setObjectsFilter();$this->objects_ids = $this->toIntsArray($v486e8f4c27e77f00e55301bea98709b3);}public function addElementsFilter($v8d7953acf74eb79d375a932e111d71a3) {$this->setElementsFilter();$this->elements_ids = $this->toIntsArray($v8d7953acf74eb79d375a932e111d71a3);}public function setOrderByProperty($v3aabf39f2d943fa886d86dcbbee4d910, $v375a52cb87b22005816fe7a418ec6660 = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setOrderFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "asc" => $v375a52cb87b22005816fe7a418ec6660, "type" => $v17f71d965fe9589ddbd11caf7182243e, "native_field" => false);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByOrd($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "ord", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByRand() {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "rand", "asc" => true);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByName($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "name", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function setOrderByObjectId($v375a52cb87b22005816fe7a418ec6660 = true) {$this->setOrderFilter();$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => "native", "native_field" => "object_id", "asc" => $v375a52cb87b22005816fe7a418ec6660);if(in_array($vb2c97ae425dd751b0e48a3acae79cf4a, $this->order) === false) {$this->order[] = $vb2c97ae425dd751b0e48a3acae79cf4a;return true;}else {return false;}}public function addHierarchyFilter($v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1 = 0, $vabd12ea100a9ec8377e3c7339f056b00 = true) {$this->setHierarchyFilter();if(is_array($v7057e8409c7c531a1a6e9ac3df4ed549)) {foreach($v7057e8409c7c531a1a6e9ac3df4ed549 as $vb80bb7740288fda1f201890375a60c8f) {$this->addHierarchyFilter($vb80bb7740288fda1f201890375a60c8f, $v12a055bf01a31369fe81ac35d85c7bc1);}return;}if(umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549) || (is_numeric($v7057e8409c7c531a1a6e9ac3df4ed549) && $v7057e8409c7c531a1a6e9ac3df4ed549 == 0)) {if($v7057e8409c7c531a1a6e9ac3df4ed549 == umiHierarchy::getInstance()->getDefaultElementId() && $vabd12ea100a9ec8377e3c7339f056b00 == false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = Array(0, 0);}if(in_array($v7057e8409c7c531a1a6e9ac3df4ed549, $this->hierarchy) === false || $v7057e8409c7c531a1a6e9ac3df4ed549 == 0) {$this->hierarchy[] = Array((int) $v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1);}if($v12a055bf01a31369fe81ac35d85c7bc1 > 0) {$this->hierarchy[] = Array($v7057e8409c7c531a1a6e9ac3df4ed549, $v12a055bf01a31369fe81ac35d85c7bc1);}}else {return false;}}public function addPropertyFilterBetween($v3aabf39f2d943fa886d86dcbbee4d910, $vd8bd79cc131920d5de426f914d17405a, $v2ffe4e77325d9a7152f7086ea7aa5114) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "between", "min" => $vd8bd79cc131920d5de426f914d17405a, "max" => $v2ffe4e77325d9a7152f7086ea7aa5114);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterEqual($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "equal", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterNotEqual($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "not_equal", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterLike($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804, $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c = true) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "like", "value" => $v2063c1608d6e0baf80249c42e2be5804, "case_insencetive" => $ve1e4c5d3ee9d4ae51d2a0e4d3ed5460c);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterMore($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "more", "value" => $v2063c1608d6e0baf80249c42e2be5804);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterLess($v3aabf39f2d943fa886d86dcbbee4d910, $v2063c1608d6e0baf80249c42e2be5804) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "less", "value" => $v2063c1608d6e0baf80249c42e2be5804);$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterIsNull($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "null");$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPropertyFilterIsNotNull($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$v3aabf39f2d943fa886d86dcbbee4d910) return false;$this->setPropertyFilter();$v17f71d965fe9589ddbd11caf7182243e = $this->getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);$vb2c97ae425dd751b0e48a3acae79cf4a = Array("type" => $v17f71d965fe9589ddbd11caf7182243e, "field_id" => $v3aabf39f2d943fa886d86dcbbee4d910, "filter_type" => "notnull");$this->props[] = $vb2c97ae425dd751b0e48a3acae79cf4a;}public function addPermissions($ve8701ad48ba05a91604e480dd60899a3 = false) {$this->setPermissionsFilter();if($ve8701ad48ba05a91604e480dd60899a3 === false) $ve8701ad48ba05a91604e480dd60899a3 = $this->getCurrentUserId();$vb132392a317588e56460e77a8fd74229 = $this->getOwnersByUser($ve8701ad48ba05a91604e480dd60899a3);$this->perms = $vb132392a317588e56460e77a8fd74229;}public function setPermissionsLevel($vc9e9a848920877e76685b2e4e76de38d = 1) {$this->permissionsLevel = (int) $vc9e9a848920877e76685b2e4e76de38d;}public function addNameFilterEquals($v2063c1608d6e0baf80249c42e2be5804) {$this->setNamesFilter();$v2063c1608d6e0baf80249c42e2be5804 = Array("value" => $v2063c1608d6e0baf80249c42e2be5804, "type" => "exact");if(!in_array($v2063c1608d6e0baf80249c42e2be5804, $this->names)) {$this->names[] = $v2063c1608d6e0baf80249c42e2be5804;}}public function addNameFilterLike($v2063c1608d6e0baf80249c42e2be5804) {$this->setNamesFilter();$v2063c1608d6e0baf80249c42e2be5804 = Array("value" => $v2063c1608d6e0baf80249c42e2be5804, "type" => "like");if(!in_array($v2063c1608d6e0baf80249c42e2be5804, $this->names)) {$this->names[] = $v2063c1608d6e0baf80249c42e2be5804;}}public function getOrderConds() {return ($this->is_order) ? $this->order : false;}public function getLimitConds() {return ($this->is_limit) ? $this->limit : false;}public function getActiveConds() {return ($this->is_active) ? $this->active : false;}public function getOwnerConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->owner) && count($this->owner)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->owner);}return ($this->is_owner) ? $va7ea85302605a40475ffd70703779448 : false;}public function getObjectsConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->objects_ids) && count($this->objects_ids)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->objects_ids);}return ($this->is_objects_ids) ? $va7ea85302605a40475ffd70703779448 : false;}public function getElementsConds() {$va7ea85302605a40475ffd70703779448 = array();if (is_array($this->elements_ids) && count($this->elements_ids)) {$va7ea85302605a40475ffd70703779448 = array_map('intval', $this->elements_ids);}return ($this->is_elements_ids) ? $va7ea85302605a40475ffd70703779448 : false;}public function getPropertyConds() {return ($this->is_props) ? $this->props : false;}public function getObjectTypeConds() {return ($this->is_object_type) ? $this->object_type : false;}public function getElementTypeConds() {if($this->getObjectTypeConds() !== false) {return false;}if($this->optimize_root_search_query) {if(is_array($this->element_type)) {if(sizeof($this->element_type) > 1) {reset($this->element_type);$this->element_type = Array(current($this->element_type));}}}return ($this->is_element_type) ? $this->element_type : false;}public function getHierarchyConds() {$this->hierarchy = array_unique_arrays($this->hierarchy, 0);return ($this->is_hierarchy && !$this->optimize_root_search_query) ? $this->hierarchy : false;}public function getPermissionsConds() {return ($this->is_permissions) ? $this->perms : false;}public function getForceCond() {return $this->is_forced;}public function getNameConds() {return ($this->is_names) ? $this->names : false;}private function getDataByFieldId($v3aabf39f2d943fa886d86dcbbee4d910) {if($v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910)) {$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();if($v519504d7d4beb745dac24ccfb6c1d7c9 = umiFieldTypesCollection::getInstance()->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561)) {if($v17f71d965fe9589ddbd11caf7182243e = $v519504d7d4beb745dac24ccfb6c1d7c9->getDataType()) {return umiFieldType::getDataTypeDB($v17f71d965fe9589ddbd11caf7182243e);}else {return false;}}else {return false;}}else {return false;}}private function getCurrentUserId() {if($v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule("users")) {return $v9bc65c2abec141778ffaa729489f3e87->user_id;}else {return false;}}private function getOwnersByUser($ve8701ad48ba05a91604e480dd60899a3) {if($vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($ve8701ad48ba05a91604e480dd60899a3)) {$v1471e4e05a4db95d353cc867fe317314 = $vee11cbb19052e40b07aac0ca060c23ee->getValue("groups");$v1471e4e05a4db95d353cc867fe317314[] = $ve8701ad48ba05a91604e480dd60899a3;return $v1471e4e05a4db95d353cc867fe317314;}else {return false;}}public function setConditionModeOr() {$this->condition_mode_or = true;}public function getConditionModeOr() {return $this->condition_mode_or;}public function setIsDomainIgnored($vf3e6017a1a6654acd4f621a18cc49878 = false) {$this->isDomainIgnored = (bool) $vf3e6017a1a6654acd4f621a18cc49878;}public function setIsLangIgnored($ve17f508d15b7985bf0f67b6d72c72072 = false) {$this->isLangIgnored = (bool) $ve17f508d15b7985bf0f67b6d72c72072;}public function getIsDomainIgnored() {return $this->isDomainIgnored;}public function getIsLangIgnored() {return $this->isLangIgnored;}public function setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b = false) {$this->domainId = ($v72ee76c5c29383b7c9f9225c1fa4d10b === false) ? false : (int) $v72ee76c5c29383b7c9f9225c1fa4d10b;}public function setLangId($vf585b7f018bb4ced15a03683a733e50b = false) {$this->langId = ($vf585b7f018bb4ced15a03683a733e50b === false) ? false : (int) $vf585b7f018bb4ced15a03683a733e50b;}public function searchText($v597a51f04d341eba4ca965899acc10b3) {if(is_string($v597a51f04d341eba4ca965899acc10b3)) {if(strlen($v597a51f04d341eba4ca965899acc10b3) > 0 && !in_array($v597a51f04d341eba4ca965899acc10b3, $this->searchStrings)) {$this->searchStrings[] = $v597a51f04d341eba4ca965899acc10b3;return true;}}return false;}public function getDomainId() {return $this->domainId;}public function getLangId() {return $this->langId;}public function getRequiredPermissionsLevel() {return $this->permissionsLevel;}public function getSearchStrings() {return $this->searchStrings;}private function toIntsArray($vb84684c51768c267eb8836ba206ab734) {$va7ea85302605a40475ffd70703779448 = Array();if (is_string($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = preg_split("/[^\d]/is", $vb84684c51768c267eb8836ba206ab734);}elseif (is_numeric($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = array(intval($vb84684c51768c267eb8836ba206ab734));}elseif (!is_array($vb84684c51768c267eb8836ba206ab734)) {$va7ea85302605a40475ffd70703779448 = array();}else {$va7ea85302605a40475ffd70703779448 = $vb84684c51768c267eb8836ba206ab734;}return array_map('intval', $va7ea85302605a40475ffd70703779448);}};interface iUmiSelectionsParser {public static function runSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);public static function runSelectionCounts(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);public static function parseSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87);}class umiSelectionsParser implements iUmiSelectionsParser {const UPCASE_FROM = 'abcdefghijklmnopqrstuvwxyz';const UPCASE_TO   = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';public static function parseSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$vc76bbb5d812bdab81fe449cb9f98b8df                = array();$vc76bbb5d812bdab81fe449cb9f98b8df['Limitation']  = umiSelectionsParser::makeLimitations($v8780ef07c6558a6e696d79a8c05d3e87);$vc76bbb5d812bdab81fe449cb9f98b8df['Ordering']    = umiSelectionsParser::makeOrdering($v8780ef07c6558a6e696d79a8c05d3e87);$vc76bbb5d812bdab81fe449cb9f98b8df['Objects']     = umiSelectionsParser::makeObjectQuery($v8780ef07c6558a6e696d79a8c05d3e87);$vc76bbb5d812bdab81fe449cb9f98b8df['Content']     = umiSelectionsParser::makeContentQuery($v8780ef07c6558a6e696d79a8c05d3e87);$vc76bbb5d812bdab81fe449cb9f98b8df['Permissions'] = umiSelectionsParser::makePermissionQuery($v8780ef07c6558a6e696d79a8c05d3e87);$vc76bbb5d812bdab81fe449cb9f98b8df['Hierarchy']   = umiSelectionsParser::makeHierarchyQuery($v8780ef07c6558a6e696d79a8c05d3e87);return $vc76bbb5d812bdab81fe449cb9f98b8df;}public static function runSelection(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$vff05506a90c37a85b5dc8f1b60670aa3     = umiSelectionsParser::parseSelection($v8780ef07c6558a6e696d79a8c05d3e87);$v09dbbbbb33bce9accf8459a7a164ba44      = array();$v8de46b2f593ad51a1333185911c6d23d      = array();$v3e25aa091b4bd49c5351491b6ae71889 = array();$vc5d759b0d96ec81e7c8252db08627a69 = XMLFactory::getInstance();if($vff05506a90c37a85b5dc8f1b60670aa3['Objects']) {if($vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['object']) {$v5bf8bee33eed7e4b21708827159ec8b4 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('objects.xml')->getElementsArray($vff05506a90c37a85b5dc8f1b60670aa3['Objects'][0]);$v09dbbbbb33bce9accf8459a7a164ba44     = umiSelectionsParser::sortItems($v5bf8bee33eed7e4b21708827159ec8b4, $vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['object']);}else {$v09dbbbbb33bce9accf8459a7a164ba44 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('objects.xml')->getAttributeValue($vff05506a90c37a85b5dc8f1b60670aa3['Objects'][0], 'id', true);}$v3e25aa091b4bd49c5351491b6ae71889 = $v09dbbbbb33bce9accf8459a7a164ba44;if(empty($v3e25aa091b4bd49c5351491b6ae71889) && !$vff05506a90c37a85b5dc8f1b60670aa3['Objects'][1]) {$v8780ef07c6558a6e696d79a8c05d3e87->count  = 0;$v8780ef07c6558a6e696d79a8c05d3e87->result = array();return array();}}if($vff05506a90c37a85b5dc8f1b60670aa3['Content']) {$vac7ad15162e3345ffb8d999d29170d33 = (( !empty($v09dbbbbb33bce9accf8459a7a164ba44) && !$vff05506a90c37a85b5dc8f1b60670aa3['Objects'][1] )?'[@obj_id='.implode(' or @obj_id=',$v09dbbbbb33bce9accf8459a7a164ba44).']':'');$v6a5ca253c6fa2dc8c99c189a66c4fdcb  = $v09dbbbbb33bce9accf8459a7a164ba44;if($vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['content']) {$v5bf8bee33eed7e4b21708827159ec8b4 = array();$v7a78da94e3726a77aeebc594ce3fb7a4 = array();foreach($vff05506a90c37a85b5dc8f1b60670aa3['Content'][0] as $vb1e8c1e4762cb2eae39906df8e867c27) {$vfbb873a75763cdad00e1a975bc30b78c = array();$v1f68779da7c9391ba23bc2ed8b3821ef = 'objectcontent/'.$vb1e8c1e4762cb2eae39906df8e867c27.'.xml';$v48b8e11252203b3b99c58dd5a07776c1 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy($v1f68779da7c9391ba23bc2ed8b3821ef);$v19763ef3e87f6f7d8e1e68569613d2f1 = 0;foreach($vff05506a90c37a85b5dc8f1b60670aa3['Content'][2] as $vabdc6fca39c945587efec7f17113d48a) {$v141c7f42f6d7b3f5bf8bca910bc8d0b0 = '/umi/values/value['.$vabdc6fca39c945587efec7f17113d48a[0].']'.$vac7ad15162e3345ffb8d999d29170d33;$ve3d483f1564bbd550b8bb93a56acb13b   = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray($v141c7f42f6d7b3f5bf8bca910bc8d0b0, 'obj_id');if($vabdc6fca39c945587efec7f17113d48a[1]) {$v7a78da94e3726a77aeebc594ce3fb7a4 = array_merge($ve3d483f1564bbd550b8bb93a56acb13b, $v7a78da94e3726a77aeebc594ce3fb7a4);}else {if(!$v19763ef3e87f6f7d8e1e68569613d2f1) {$vfbb873a75763cdad00e1a975bc30b78c = $ve3d483f1564bbd550b8bb93a56acb13b;}else {if($vff05506a90c37a85b5dc8f1b60670aa3['Content'][1])                                    $vfbb873a75763cdad00e1a975bc30b78c = array_intersect($vfbb873a75763cdad00e1a975bc30b78c, $ve3d483f1564bbd550b8bb93a56acb13b);else                                    $vfbb873a75763cdad00e1a975bc30b78c = array_merge($vfbb873a75763cdad00e1a975bc30b78c, $ve3d483f1564bbd550b8bb93a56acb13b);}}$v19763ef3e87f6f7d8e1e68569613d2f1++;}$v5bf8bee33eed7e4b21708827159ec8b4 = array_merge($v5bf8bee33eed7e4b21708827159ec8b4, $vfbb873a75763cdad00e1a975bc30b78c);}$v09dbbbbb33bce9accf8459a7a164ba44     = umiSelectionsParser::sortItems($v5bf8bee33eed7e4b21708827159ec8b4, $vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['content']);$vfd07fee24728fbf7c168e1ee86b8acdf  = array();if(!empty($v7a78da94e3726a77aeebc594ce3fb7a4)) foreach($v7a78da94e3726a77aeebc594ce3fb7a4 as $ve1671797c52e15f763380b45e841ec32) $vfd07fee24728fbf7c168e1ee86b8acdf[] = $ve1671797c52e15f763380b45e841ec32->id;$v09dbbbbb33bce9accf8459a7a164ba44     = array_diff($v09dbbbbb33bce9accf8459a7a164ba44, $vfd07fee24728fbf7c168e1ee86b8acdf);}else {$v09dbbbbb33bce9accf8459a7a164ba44 = array();foreach($vff05506a90c37a85b5dc8f1b60670aa3['Content'][0] as $vb1e8c1e4762cb2eae39906df8e867c27) {$v22b0cf0675c2de25fc5cabedf27c122b = array();$v1f68779da7c9391ba23bc2ed8b3821ef = 'objectcontent/'.$vb1e8c1e4762cb2eae39906df8e867c27.'.xml';$v48b8e11252203b3b99c58dd5a07776c1 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy($v1f68779da7c9391ba23bc2ed8b3821ef);$v19763ef3e87f6f7d8e1e68569613d2f1 = 0;foreach($vff05506a90c37a85b5dc8f1b60670aa3['Content'][2] as $vabdc6fca39c945587efec7f17113d48a) {$v141c7f42f6d7b3f5bf8bca910bc8d0b0 = '/umi/values/value['.$vabdc6fca39c945587efec7f17113d48a[0].']'.$vac7ad15162e3345ffb8d999d29170d33;$ve3d483f1564bbd550b8bb93a56acb13b   = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue($v141c7f42f6d7b3f5bf8bca910bc8d0b0, 'obj_id', true);if($vabdc6fca39c945587efec7f17113d48a[1]) $ve3d483f1564bbd550b8bb93a56acb13b = array_diff($v6a5ca253c6fa2dc8c99c189a66c4fdcb, $ve3d483f1564bbd550b8bb93a56acb13b);if(!$v19763ef3e87f6f7d8e1e68569613d2f1) {$v22b0cf0675c2de25fc5cabedf27c122b = $ve3d483f1564bbd550b8bb93a56acb13b;}else {if($vff05506a90c37a85b5dc8f1b60670aa3['Content'][1])                                $v22b0cf0675c2de25fc5cabedf27c122b = array_intersect($v22b0cf0675c2de25fc5cabedf27c122b, $ve3d483f1564bbd550b8bb93a56acb13b);else                                $v22b0cf0675c2de25fc5cabedf27c122b = array_merge($v22b0cf0675c2de25fc5cabedf27c122b, $ve3d483f1564bbd550b8bb93a56acb13b);}$v19763ef3e87f6f7d8e1e68569613d2f1++;}$v09dbbbbb33bce9accf8459a7a164ba44 = array_merge($v09dbbbbb33bce9accf8459a7a164ba44, $v22b0cf0675c2de25fc5cabedf27c122b);}}if($vff05506a90c37a85b5dc8f1b60670aa3['Objects'][1]) {$v3e25aa091b4bd49c5351491b6ae71889 = array_unique(array_merge($v09dbbbbb33bce9accf8459a7a164ba44, $v3e25aa091b4bd49c5351491b6ae71889));$v09dbbbbb33bce9accf8459a7a164ba44      = $v3e25aa091b4bd49c5351491b6ae71889;}else {$v3e25aa091b4bd49c5351491b6ae71889 = $v09dbbbbb33bce9accf8459a7a164ba44;}if(empty($v3e25aa091b4bd49c5351491b6ae71889)) {$v8780ef07c6558a6e696d79a8c05d3e87->count  = 0;$v8780ef07c6558a6e696d79a8c05d3e87->result = array();return array();}}if($vff05506a90c37a85b5dc8f1b60670aa3['Hierarchy']) {$v141c7f42f6d7b3f5bf8bca910bc8d0b0     = $vff05506a90c37a85b5dc8f1b60670aa3['Hierarchy'] . (( !empty($v09dbbbbb33bce9accf8459a7a164ba44) ) ? '[@obj_id=' . implode(' or @obj_id=', $v09dbbbbb33bce9accf8459a7a164ba44) . ']' : '' );if($vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['hierarchy']) {$v5bf8bee33eed7e4b21708827159ec8b4 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('hierarchy.xml')->getElementsArray($v141c7f42f6d7b3f5bf8bca910bc8d0b0);$v8de46b2f593ad51a1333185911c6d23d     = umiSelectionsParser::sortItems($v5bf8bee33eed7e4b21708827159ec8b4, $vff05506a90c37a85b5dc8f1b60670aa3['Ordering']['hierarchy']);}else if(!empty($v09dbbbbb33bce9accf8459a7a164ba44)) {$v5bf8bee33eed7e4b21708827159ec8b4 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('hierarchy.xml')->getElementsArray($v141c7f42f6d7b3f5bf8bca910bc8d0b0);$v8de46b2f593ad51a1333185911c6d23d     = umiSelectionsParser::arrangeElements($v5bf8bee33eed7e4b21708827159ec8b4, $v09dbbbbb33bce9accf8459a7a164ba44, 'obj_id');}else {$v8de46b2f593ad51a1333185911c6d23d = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('hierarchy.xml')->getAttributeValue($v141c7f42f6d7b3f5bf8bca910bc8d0b0, 'id', true);}if($v8780ef07c6558a6e696d79a8c05d3e87->excludeNestedPages) {$v431387eb7262e1cfc79b125eb8a67c60 = $vc5d759b0d96ec81e7c8252db08627a69->getProxy('hierarchy.xml');$vfa816edb83e95bf0c8da580bdfd491ef   = array();foreach($v8de46b2f593ad51a1333185911c6d23d as $v61ed634cec22131fac21528c28655491) {$v7ffc4d510260a8544e5550e62ec56bc1 = $v431387eb7262e1cfc79b125eb8a67c60->getAttributeValue('/umi/elements/element[@id='.$v61ed634cec22131fac21528c28655491.']', 'rel');if(!in_array($v7ffc4d510260a8544e5550e62ec56bc1, $v8de46b2f593ad51a1333185911c6d23d)) $vfa816edb83e95bf0c8da580bdfd491ef[] = $v61ed634cec22131fac21528c28655491;}$v8de46b2f593ad51a1333185911c6d23d = $vfa816edb83e95bf0c8da580bdfd491ef;}$v3e25aa091b4bd49c5351491b6ae71889 = $v8de46b2f593ad51a1333185911c6d23d;if(empty($v3e25aa091b4bd49c5351491b6ae71889)) {$v8780ef07c6558a6e696d79a8c05d3e87->count  = 0;$v8780ef07c6558a6e696d79a8c05d3e87->result = array();return array();}}if($vff05506a90c37a85b5dc8f1b60670aa3['Permissions'] && !empty($v8de46b2f593ad51a1333185911c6d23d)) {$v141c7f42f6d7b3f5bf8bca910bc8d0b0 = $vff05506a90c37a85b5dc8f1b60670aa3['Permissions'];$v8de46b2f593ad51a1333185911c6d23d  = array();foreach($v3e25aa091b4bd49c5351491b6ae71889 as $va9643153fcbdbe2d9ca198f960c20938) {if($vc5d759b0d96ec81e7c8252db08627a69->getProxy('eperms/'.$va9643153fcbdbe2d9ca198f960c20938.'.xml')->getCount($v141c7f42f6d7b3f5bf8bca910bc8d0b0))                    $v8de46b2f593ad51a1333185911c6d23d[] = $va9643153fcbdbe2d9ca198f960c20938;}$v3e25aa091b4bd49c5351491b6ae71889  = $v8de46b2f593ad51a1333185911c6d23d;}$v8780ef07c6558a6e696d79a8c05d3e87->count  = count($v3e25aa091b4bd49c5351491b6ae71889);if($vff05506a90c37a85b5dc8f1b60670aa3['Limitation'] !== false) {$v3e25aa091b4bd49c5351491b6ae71889 = array_slice($v3e25aa091b4bd49c5351491b6ae71889, $vff05506a90c37a85b5dc8f1b60670aa3['Limitation']['start'], $vff05506a90c37a85b5dc8f1b60670aa3['Limitation']['count']);}$v8780ef07c6558a6e696d79a8c05d3e87->result = $v3e25aa091b4bd49c5351491b6ae71889;return $v3e25aa091b4bd49c5351491b6ae71889;}public static function runSelectionCounts(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {if($v8780ef07c6558a6e696d79a8c05d3e87->count === false) umiSelectionsParser::runSelection($v8780ef07c6558a6e696d79a8c05d3e87);return $v8780ef07c6558a6e696d79a8c05d3e87->count;}private static function makeXPathFromArray($_sField, $_aValues, $_sFunction=false) {$v8c6e5e0820b02c09d3b227434130f9cc = '';if(is_array($_aValues) && !empty($_aValues)) {if($_sFunction)                array_map($_sFunction, $_aValues);$v8c6e5e0820b02c09d3b227434130f9cc = '['.$_sField.'=' . implode(' or '.$_sField.'=', $_aValues) . ']';}return $v8c6e5e0820b02c09d3b227434130f9cc;}private static function makeLimitations(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v7092426f94c1f2ffcdf19c06e73df9c9 = false;$v229eb04083e06f419f9ac494329f957d = $v8780ef07c6558a6e696d79a8c05d3e87->getLimitConds();if($v229eb04083e06f419f9ac494329f957d !== false) {if (is_array($v229eb04083e06f419f9ac494329f957d) && count($v229eb04083e06f419f9ac494329f957d) > 1 && is_numeric($v229eb04083e06f419f9ac494329f957d[0]) && is_numeric($v229eb04083e06f419f9ac494329f957d[1])) {$v7092426f94c1f2ffcdf19c06e73df9c9          = array();$v7092426f94c1f2ffcdf19c06e73df9c9['start'] = intval($v229eb04083e06f419f9ac494329f957d[0] * $v229eb04083e06f419f9ac494329f957d[1]);$v7092426f94c1f2ffcdf19c06e73df9c9['count'] = intval($v229eb04083e06f419f9ac494329f957d[0]);}}return $v7092426f94c1f2ffcdf19c06e73df9c9;}private static function makeOrdering(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v242ce12d964f3c99336424f73158a1d4    = array('hierarchy'=>false, 'object'=>false, 'content'=>false);$v229eb04083e06f419f9ac494329f957d = $v8780ef07c6558a6e696d79a8c05d3e87->getOrderConds();if(is_array($v229eb04083e06f419f9ac494329f957d) && !empty($v229eb04083e06f419f9ac494329f957d)) {foreach($v229eb04083e06f419f9ac494329f957d as $v20f99a693a6a20f1a935ee2ab6766667) {if($v6f16a5f8ff5d75ab84c018adacdfcbb7 = $v20f99a693a6a20f1a935ee2ab6766667['native_field']) {$v9f4407bf637dfa8f5f5d532e0b86855d = array(false, false, false);switch($v6f16a5f8ff5d75ab84c018adacdfcbb7) {case 'name':      $v9f4407bf637dfa8f5f5d532e0b86855d[1] = 'name';break;case 'object_id': $v9f4407bf637dfa8f5f5d532e0b86855d[1] = 'id';break;case 'rand':      $v9f4407bf637dfa8f5f5d532e0b86855d[1] = false;break;}$v9f4407bf637dfa8f5f5d532e0b86855d[2] = (bool)$v20f99a693a6a20f1a935ee2ab6766667['asc'];$v242ce12d964f3c99336424f73158a1d4['object'][] = $v9f4407bf637dfa8f5f5d532e0b86855d;}else {$v242ce12d964f3c99336424f73158a1d4['content'][] = array($v20f99a693a6a20f1a935ee2ab6766667['field_id'], $v20f99a693a6a20f1a935ee2ab6766667['type'], (bool)$v20f99a693a6a20f1a935ee2ab6766667['asc']);}}}if($v242ce12d964f3c99336424f73158a1d4['object'] === false && $v242ce12d964f3c99336424f73158a1d4['content'] === false) {$v242ce12d964f3c99336424f73158a1d4['hierarchy'] = array( array(false, 'ord', true) );}return $v242ce12d964f3c99336424f73158a1d4;}private static function sortItems($_aElements, $_aSortingCriteria) {if(!is_array($_aElements) || empty($_aElements) || !is_array($_aSortingCriteria) || empty($_aSortingCriteria)) return array();$v1a53c2f894198c150f1842d7fdf6da4b = array();foreach($_aElements as $v266dfb6190a3ce57973bce176a01701e) {$vfa816edb83e95bf0c8da580bdfd491ef = $v266dfb6190a3ce57973bce176a01701e->getAttributesList();$vfa816edb83e95bf0c8da580bdfd491ef['#_v'] = $v266dfb6190a3ce57973bce176a01701e->getValue();$v1a53c2f894198c150f1842d7fdf6da4b[]   = $vfa816edb83e95bf0c8da580bdfd491ef;}$v5556b5ded4fa48eab61355cde78a66ee = true;foreach($_aSortingCriteria as $v2e739b2175e8d3399b4e7fc7a95bfe1b) {$v5556b5ded4fa48eab61355cde78a66ee = $v5556b5ded4fa48eab61355cde78a66ee & ($v2e739b2175e8d3399b4e7fc7a95bfe1b[0] === false);$vf40fd733d53b8a4a28b444d8d17cf344 = "if(\$a['field_id']==".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0]." && \$b['field_id']!=".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0].") return -1;".                             "if(\$a['field_id']!=".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0]." && \$b['field_id']==".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0].") return 1;".                             "if(\$a['field_id']!=".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0]." && \$b['field_id']!=".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0].") return 0;".                             "if(\$a['field_id']==".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0]." && \$b['field_id']==".$v2e739b2175e8d3399b4e7fc7a95bfe1b[0].")";if(!in_array($v2e739b2175e8d3399b4e7fc7a95bfe1b[1], array('rand', 'ord', 'obj_id')))             $vf8ae95fe9dd3f3b67990c2b1a7cba019 =  (($v2e739b2175e8d3399b4e7fc7a95bfe1b[0] !== false)?$vf40fd733d53b8a4a28b444d8d17cf344:'').                              "return (".($v2e739b2175e8d3399b4e7fc7a95bfe1b[2]?'':'-')."strnatcasecmp(\$a['#_v'], \$b['#_v']) );";else             $vf8ae95fe9dd3f3b67990c2b1a7cba019 =  (($v2e739b2175e8d3399b4e7fc7a95bfe1b[0] !== false)?$vf40fd733d53b8a4a28b444d8d17cf344:'').                              "return (".($v2e739b2175e8d3399b4e7fc7a95bfe1b[2]?'':'-')."strnatcasecmp(\$a['".$v2e739b2175e8d3399b4e7fc7a95bfe1b[1]."'], \$b['".$v2e739b2175e8d3399b4e7fc7a95bfe1b[1]."']) );";usort($v1a53c2f894198c150f1842d7fdf6da4b, create_function('$a, $b', $vf8ae95fe9dd3f3b67990c2b1a7cba019));}$v5a5ee9d34dea6c675324a7bb46462694 = array();foreach($v1a53c2f894198c150f1842d7fdf6da4b as $vad4f3b23a9c1baee57e5d091271a0053) $v5a5ee9d34dea6c675324a7bb46462694[] = $v5556b5ded4fa48eab61355cde78a66ee ? $vad4f3b23a9c1baee57e5d091271a0053['id'] : $vad4f3b23a9c1baee57e5d091271a0053['obj_id'];return $v5a5ee9d34dea6c675324a7bb46462694;}private static function arrangeElements($_aElements, $_aArrangeArray, $_sArrangeField) {if(!is_array($_aElements) || empty($_aElements) || !is_array($_aArrangeArray) || empty($_aArrangeArray)) return array();$v8eea62084ca7e541d918e823422bd82e = array();foreach($_aArrangeArray as $va7cb078b43b67265f4c7e6ac1f9f6bc7) {if(!empty($_aElements))      foreach($_aElements as $v865c0c0b4ab0e063e5caa3387c1a8741=>$v231afe47f3f37d3808096b36c28b4ded) {if($v231afe47f3f37d3808096b36c28b4ded->getAttribute($_sArrangeField) == $va7cb078b43b67265f4c7e6ac1f9f6bc7) {$v8eea62084ca7e541d918e823422bd82e[] = $v231afe47f3f37d3808096b36c28b4ded->id;unset($_aElements[$v865c0c0b4ab0e063e5caa3387c1a8741]);break;}}}return $v8eea62084ca7e541d918e823422bd82e;}private static function makeObjectQuery(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v2bced46d2dd633ac474aaabf422fe42e     = false;$v2ffe3a9ac7fd6080ef2ade0144a5882e  = '';$v2ffe3a9ac7fd6080ef2ade0144a5882e .= umiSelectionsParser::makeXPathFromArray('@id',       $v8780ef07c6558a6e696d79a8c05d3e87->getObjectsConds(),    'intval');$v2ffe3a9ac7fd6080ef2ade0144a5882e .= umiSelectionsParser::makeXPathFromArray('@owner_id', $v8780ef07c6558a6e696d79a8c05d3e87->getOwnerConds(),      'intval');$v2ffe3a9ac7fd6080ef2ade0144a5882e .= umiSelectionsParser::makeXPathFromArray('@type_id',  $v8780ef07c6558a6e696d79a8c05d3e87->getObjectTypeConds(), 'intval');$v229eb04083e06f419f9ac494329f957d    = $v8780ef07c6558a6e696d79a8c05d3e87->getNameConds();$v8bcf6629759bd278a5c6266bd9c054f8       = $v8780ef07c6558a6e696d79a8c05d3e87->getSearchStrings();if(!empty($v8bcf6629759bd278a5c6266bd9c054f8)) {foreach($v8bcf6629759bd278a5c6266bd9c054f8 as $v341be97d9aff90c9978347f66f945b77) $v229eb04083e06f419f9ac494329f957d[] = array('type'=>'like', 'value'=>$v341be97d9aff90c9978347f66f945b77);$v2bced46d2dd633ac474aaabf422fe42e = true;}if(is_array($v229eb04083e06f419f9ac494329f957d) && !empty($v229eb04083e06f419f9ac494329f957d)) {$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[';foreach($v229eb04083e06f419f9ac494329f957d as $v20f99a693a6a20f1a935ee2ab6766667) {if($v20f99a693a6a20f1a935ee2ab6766667['type'] == 'exact')                    $v2ffe3a9ac7fd6080ef2ade0144a5882e .= (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'') . "text()='". $v20f99a693a6a20f1a935ee2ab6766667['value'] . "'";else                    $v2ffe3a9ac7fd6080ef2ade0144a5882e .= (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'') . "contains( translate(text(), '".umiSelectionsParser::UPCASE_FROM."', '".umiSelectionsParser::UPCASE_TO."'), translate('". ($v20f99a693a6a20f1a935ee2ab6766667['value']) . "', '".umiSelectionsParser::UPCASE_FROM."', '".umiSelectionsParser::UPCASE_TO."'))";}$v2ffe3a9ac7fd6080ef2ade0144a5882e .= ']';}return (strlen($v2ffe3a9ac7fd6080ef2ade0144a5882e)) ? array('/umi/objects/object'.$v2ffe3a9ac7fd6080ef2ade0144a5882e, $v2bced46d2dd633ac474aaabf422fe42e) : false;}private static function makeHierarchyQuery(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v7ffc4d510260a8544e5550e62ec56bc1 = $v8780ef07c6558a6e696d79a8c05d3e87->getHierarchyConds();$v2ffe3a9ac7fd6080ef2ade0144a5882e = '';$v2ffe3a9ac7fd6080ef2ade0144a5882e .= umiSelectionsParser::makeXPathFromArray('@id',      $v8780ef07c6558a6e696d79a8c05d3e87->getElementsConds(),    'intval');$v2ffe3a9ac7fd6080ef2ade0144a5882e .= umiSelectionsParser::makeXPathFromArray('@type_id', $v8780ef07c6558a6e696d79a8c05d3e87->getElementTypeConds(), 'intval');if(is_array($v7ffc4d510260a8544e5550e62ec56bc1) && !empty($v7ffc4d510260a8544e5550e62ec56bc1)) {$v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[';$v4a8a08f09d37b73795649038408b5f33 = false;foreach($v7ffc4d510260a8544e5550e62ec56bc1 as $v0db3209e1adc6d67be435a81baf9a66e) {$v2ffe3a9ac7fd6080ef2ade0144a5882e .= ( $v4a8a08f09d37b73795649038408b5f33 ? ' or ' : '' ).'@rel='.$v0db3209e1adc6d67be435a81baf9a66e[0];$v4a8a08f09d37b73795649038408b5f33 = true;}$v2ffe3a9ac7fd6080ef2ade0144a5882e .= ']';}if(strlen($v2ffe3a9ac7fd6080ef2ade0144a5882e) || $v8780ef07c6558a6e696d79a8c05d3e87->getForceCond()) {$v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[@lang_id='.cmsController::getInstance()->getCurrentLang()->getId().']';if(!$v8780ef07c6558a6e696d79a8c05d3e87->getIsDomainIgnored()) {if($v72ee76c5c29383b7c9f9225c1fa4d10b = $v8780ef07c6558a6e696d79a8c05d3e87->getDomainId())              $v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[@domain_id='.$v72ee76c5c29383b7c9f9225c1fa4d10b.']';else                 $v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[@domain_id='.cmsController::getInstance()->getCurrentDomain()->getId().']';}if ($v487724b2c8e371f2d0a2719f7c19010d = $v8780ef07c6558a6e696d79a8c05d3e87->getActiveConds()) {$v367e854225a0810977297b3bedb2f309      = (isset($v487724b2c8e371f2d0a2719f7c19010d[0]) && (bool) $v487724b2c8e371f2d0a2719f7c19010d[0])? 1 : 0;$v2ffe3a9ac7fd6080ef2ade0144a5882e .= '[@is_active='.$v367e854225a0810977297b3bedb2f309.']';}else {$v2ffe3a9ac7fd6080ef2ade0144a5882e .= ( !strlen( cmsController::getInstance()->getCurrentMode() ) ) ? '[@is_active=1]' : '';}}return (strlen($v2ffe3a9ac7fd6080ef2ade0144a5882e)) ? '/umi/elements/element'.$v2ffe3a9ac7fd6080ef2ade0144a5882e.'[@is_deleted=0]' : false;}private static function makePermissionQuery(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v2ffe3a9ac7fd6080ef2ade0144a5882e = '';$v229eb04083e06f419f9ac494329f957d   = $v8780ef07c6558a6e696d79a8c05d3e87->getPermissionsConds();if(is_array($v229eb04083e06f419f9ac494329f957d) && !empty($v229eb04083e06f419f9ac494329f957d)) {array_map('intval', $v229eb04083e06f419f9ac494329f957d);$v229eb04083e06f419f9ac494329f957d[] = 2373;$v2ffe3a9ac7fd6080ef2ade0144a5882e = " and (@owner=" . implode(" or @owner=", $v229eb04083e06f419f9ac494329f957d) . ")";}return (strlen($v2ffe3a9ac7fd6080ef2ade0144a5882e)) ?                 '/umi/eperms/perm[text()>=1'.$v2ffe3a9ac7fd6080ef2ade0144a5882e.']' : false;}private static function makeContentQuery(umiSelection $v8780ef07c6558a6e696d79a8c05d3e87) {$v242ce12d964f3c99336424f73158a1d4    = array();$vb1e8c1e4762cb2eae39906df8e867c27    = false;$vc6afd1f18aaceec685d00689888f4ef5 = true;$v229eb04083e06f419f9ac494329f957d = $v8780ef07c6558a6e696d79a8c05d3e87->getPropertyConds();$v8bcf6629759bd278a5c6266bd9c054f8 = $v8780ef07c6558a6e696d79a8c05d3e87->getSearchStrings();if(!empty($v8bcf6629759bd278a5c6266bd9c054f8))         $v229eb04083e06f419f9ac494329f957d[] = array('type'=>true,'filter_type'=>'', 'value'=>$v8bcf6629759bd278a5c6266bd9c054f8);$v7442e29d7d53e549b78d93c46b8cdcfc  = $v8780ef07c6558a6e696d79a8c05d3e87->getOrderConds();if(is_array($v7442e29d7d53e549b78d93c46b8cdcfc) && !empty($v7442e29d7d53e549b78d93c46b8cdcfc)) {foreach($v7442e29d7d53e549b78d93c46b8cdcfc as $v3bf24a2e7c1dbcad84e9bdda58df5905) {if(!$v3bf24a2e7c1dbcad84e9bdda58df5905['native_field']) {$v229eb04083e06f419f9ac494329f957d[] = array('field_id'=>$v3bf24a2e7c1dbcad84e9bdda58df5905['field_id'], 'filter_type'=>'exists', 'type'=>$v3bf24a2e7c1dbcad84e9bdda58df5905['type']);}}}if(is_array($v229eb04083e06f419f9ac494329f957d) &&  !empty($v229eb04083e06f419f9ac494329f957d)) {if($v8780ef07c6558a6e696d79a8c05d3e87->getConditionModeOr()) $vc6afd1f18aaceec685d00689888f4ef5 = false;foreach($v229eb04083e06f419f9ac494329f957d as $v20f99a693a6a20f1a935ee2ab6766667) {if($v20f99a693a6a20f1a935ee2ab6766667['type'] === false) continue;$v66c1b4c7f3dc385b68a9fa903ccd016d = array();switch($v20f99a693a6a20f1a935ee2ab6766667['filter_type']) {case 'equal':                            if(!is_array($v20f99a693a6a20f1a935ee2ab6766667['value'])) $v20f99a693a6a20f1a935ee2ab6766667['value'] = array($v20f99a693a6a20f1a935ee2ab6766667['value']);array_map(NULL, $v20f99a693a6a20f1a935ee2ab6766667['value']);$v66c1b4c7f3dc385b68a9fa903ccd016d[0] = "(@field_id=" . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . " and (text()='" . implode("' or text()='" , $v20f99a693a6a20f1a935ee2ab6766667['value']) . "') )";$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'not_equal':                            if(!is_array($v20f99a693a6a20f1a935ee2ab6766667['value'])) $v20f99a693a6a20f1a935ee2ab6766667['value'] = array($v20f99a693a6a20f1a935ee2ab6766667['value']);array_map(NULL, $v20f99a693a6a20f1a935ee2ab6766667['value']);$v66c1b4c7f3dc385b68a9fa903ccd016d[0] = "(@field_id=" . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . " and not(text()='" . implode("') and not(text()='" , $v20f99a693a6a20f1a935ee2ab6766667['value']) . "') )";$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'like':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id=' . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . " and contains(text(), '" . ($v20f99a693a6a20f1a935ee2ab6766667['value']) . "') )";$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'between':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id='.$v20f99a693a6a20f1a935ee2ab6766667['field_id'].' and text()>='.((float)$v20f99a693a6a20f1a935ee2ab6766667['min']).' and text()<='.((float)$v20f99a693a6a20f1a935ee2ab6766667['max']) . ')';$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'more':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id=' . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . ' and text()>' . ((float)$v20f99a693a6a20f1a935ee2ab6766667['value']) . ')';$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'less':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id=' . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . ' and text()<' . ((float)$v20f99a693a6a20f1a935ee2ab6766667['value']) . ')';$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;case 'null':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id=' . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . ')';$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = true;break;case 'exists':                            $v66c1b4c7f3dc385b68a9fa903ccd016d[0] = '(@field_id=' . $v20f99a693a6a20f1a935ee2ab6766667['field_id'] . ')';$v66c1b4c7f3dc385b68a9fa903ccd016d[1] = false;break;default:                                            $vc6afd1f18aaceec685d00689888f4ef5 = false;$v66c1b4c7f3dc385b68a9fa903ccd016d[0]   = "contains(text(), '".implode("') or contains(text(), '", $v20f99a693a6a20f1a935ee2ab6766667['value'])."')";$v66c1b4c7f3dc385b68a9fa903ccd016d[1]   = false;break;}if($vb1e8c1e4762cb2eae39906df8e867c27 === false) {$vb1e8c1e4762cb2eae39906df8e867c27  = array();if($v44f12444b2254a603bee4fd441f62e73 = $v8780ef07c6558a6e696d79a8c05d3e87->getElementTypeConds()) {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');foreach($v44f12444b2254a603bee4fd441f62e73 as $vb3ae09ec29c29129cf83b21a7ebbe1b8)                            $vb1e8c1e4762cb2eae39906df8e867c27 = array_merge($vb1e8c1e4762cb2eae39906df8e867c27, $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objecttypes/objecttype[@hierarchy_type_id='.$vb3ae09ec29c29129cf83b21a7ebbe1b8.']', 'id', true));}else if($v4008c8dae6700f0b8ea250491564fddd = $v8780ef07c6558a6e696d79a8c05d3e87->getObjectTypeConds()){$vb1e8c1e4762cb2eae39906df8e867c27 = $v4008c8dae6700f0b8ea250491564fddd;}else {$v48b8e11252203b3b99c58dd5a07776c1    = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v7333c07742608da4b5b8eb22f0048562 = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldcontroller/conn[@field_id=' . (isset($v20f99a693a6a20f1a935ee2ab6766667['field_id']) ? $v20f99a693a6a20f1a935ee2ab6766667['field_id'] : '22') . ']', 'group_id', true);foreach($v7333c07742608da4b5b8eb22f0048562 as $v47db2588331bbe530c80dd001fc60aed)                         $vb1e8c1e4762cb2eae39906df8e867c27[] = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldgroups/fieldgroup[@id='.$v47db2588331bbe530c80dd001fc60aed.']', 'type_id');}}if(strlen($v66c1b4c7f3dc385b68a9fa903ccd016d[0])) $v242ce12d964f3c99336424f73158a1d4[] = $v66c1b4c7f3dc385b68a9fa903ccd016d;}}return (!empty($v242ce12d964f3c99336424f73158a1d4)) ? array($vb1e8c1e4762cb2eae39906df8e867c27, $vc6afd1f18aaceec685d00689888f4ef5, $v242ce12d964f3c99336424f73158a1d4) : false;}}interface iUmiFieldType {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getIsMultiple();public function setIsMultiple($v09ec737a9ab66d1d796304239d3f8a86);public function getIsUnsigned();public function setIsUnsigned($va4e397efa082dcccc62563f1f2d9513b);public function getDataType();public function setDataType($v81a1cd8f514ff6c93ddd4c3cb201130e);public static function getDataTypes();public static function getDataTypeDB($v870b60148237c1452dfb337fdd19c314);public static function isValidDataType($v81a1cd8f514ff6c93ddd4c3cb201130e);}class umiFieldType extends umiEntinty implements iUmiEntinty, iUmiFieldType {private $name, $data_type, $is_multiple = false, $is_unsigned = false;protected $store_type = "field_type";public function getName() {return $this->translateLabel($this->name);}public function getIsMultiple() {return $this->is_multiple;}public function getIsUnsigned() {return $this->is_multiple;}public function getDataType() {return $this->data_type;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297, "field-type-");$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function setIsMultiple($v96a76ec43956dac431b643cbd544dd08) {$this->is_multiple = (bool) $v96a76ec43956dac431b643cbd544dd08;$this->setIsUpdated();}public function setIsUnsigned($vf089d93c2ef0d088edadddb0028d548d) {$this->is_unsigned = (bool) $vf089d93c2ef0d088edadddb0028d548d;$this->setIsUpdated();}public function setDataType($v17f71d965fe9589ddbd11caf7182243e) {if(self::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {$this->data_type = $v17f71d965fe9589ddbd11caf7182243e;$this->setIsUpdated();return true;}else {return false;}}public static function getDataTypes() {return   Array (    "int",    "string",    "text",    "relation",    "file",    "img_file",    "swf_file",    "date",    "boolean",    "wysiwyg",    "password",    "tags",    "symlink",    "price",    "formula",    "float"    );}public static function getDataTypeDB($v17f71d965fe9589ddbd11caf7182243e) {$v48908871a0d20dd2e5bd0a3d634ac745 = Array (    "int"  => "int_val",    "string" => "varchar_val",    "text"  => "text_val",    "relation" => "rel_val",    "file"  => "varchar_val",    "img_file" => "varchar_val",    "swf_file" => "varchar_val",    "date"  => "int_val",    "boolean" => "int_val",    "wysiwyg" => "text_val",    "password" => "varchar_val",    "tags"  => "varchar_val",    "symlink" => "tree_val",    "price"  => "float_val",    "formula" => "varchar_val",    "float"  => "float_val"    );if(array_key_exists($v17f71d965fe9589ddbd11caf7182243e, $v48908871a0d20dd2e5bd0a3d634ac745) === false) {return false;}else {return $v48908871a0d20dd2e5bd0a3d634ac745[$v17f71d965fe9589ddbd11caf7182243e];}}public static function isValidDataType($v17f71d965fe9589ddbd11caf7182243e) {return in_array($v17f71d965fe9589ddbd11caf7182243e, self::getDataTypes());}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v784813455c14b4e16d7014624f797310 = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/fieldtypes/fieldtype[@id='.$this->id.']');$this->name        = $v784813455c14b4e16d7014624f797310->getValue();$this->data_type   = $v784813455c14b4e16d7014624f797310->data_type;$this->is_multiple = (bool) $v784813455c14b4e16d7014624f797310->is_multiple;$this->is_unsigned = (bool) $v784813455c14b4e16d7014624f797310->is_unsigned;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $v17f71d965fe9589ddbd11caf7182243e, $v96a76ec43956dac431b643cbd544dd08, $vf089d93c2ef0d088edadddb0028d548d) = $vf1965a857bc285d26fe22023aa5ab50d) {if(!self::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {throw new coreException("Wrong data type given for filed type #{$this->id}");return false;}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->data_type = $v17f71d965fe9589ddbd11caf7182243e;$this->is_multiple= (bool) $v96a76ec43956dac431b643cbd544dd08;$this->is_unsigned = (bool) $vf089d93c2ef0d088edadddb0028d548d;return true;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = ($this->name);$v17f71d965fe9589ddbd11caf7182243e = ($this->data_type);$v96a76ec43956dac431b643cbd544dd08 = (int) $this->is_multiple;$vf089d93c2ef0d088edadddb0028d548d = (int) $this->is_unsigned;$v784813455c14b4e16d7014624f797310 = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/fieldtypes/fieldtype[@id='.$this->id.']');$v784813455c14b4e16d7014624f797310->setValue($vb068931cc450442b63f5b3d276ea4297);$v784813455c14b4e16d7014624f797310->data_type   = $v17f71d965fe9589ddbd11caf7182243e;$v784813455c14b4e16d7014624f797310->is_multiple = $v96a76ec43956dac431b643cbd544dd08;$v784813455c14b4e16d7014624f797310->is_unsigned = $vf089d93c2ef0d088edadddb0028d548d;}}interface iUmiField {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getIsInheritable();public function setIsInheritable($v55e0eccc570671ca7ba7f5ef4ded0b96);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024);public function getFieldTypeId();public function setFieldTypeId($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldType();public function getGuideId();public function setGuideId($v52eb29c6d8ea0d3a5bb3654f49bbd7c7);public function getIsInSearch();public function setIsInSearch($va757dc717a4486487d21b4aba6f32740);public function getIsInFilter();public function setIsInFilter($v9a4b912ee7e6ea85cbecbe8fe5994ea2);public function getTip();public function setTip($v6a2139364f96787c8ce1bbb0070b898c);public function getIsRequired();public function setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69 = false);}class umiField extends umiEntinty implements iUmiEntinty, iUmiField {private $name, $title, $is_locked = false, $is_inheritable = false, $is_visible = true, $field_type_id, $guide_id;private $is_in_search = true, $is_in_filter = true, $tip = NULL;protected $store_type = "field";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getIsLocked() {return $this->is_locked;}public function getIsInheritable() {return $this->is_inheritable;}public function getIsVisible() {return $this->is_visible;}public function getFieldTypeId() {return $this->field_type_id;}public function getFieldType() {return umiFieldTypesCollection::getInstance()->getFieldType($this->field_type_id);}public function getGuideId() {return $this->guide_id;}public function getIsInSearch() {return $this->is_in_search;}public function getIsInFilter() {return $this->is_in_filter;}public function getTip() {return $this->tip;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = str_replace("-", "_", $vb068931cc450442b63f5b3d276ea4297);$vb068931cc450442b63f5b3d276ea4297 = umiHierarchy::convertAltName($vb068931cc450442b63f5b3d276ea4297);$this->name = umiObjectProperty::filterInputString($vb068931cc450442b63f5b3d276ea4297);$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "field-");$this->title = umiObjectProperty::filterInputString($vd5d3db1765287eef77d7927cc956f50a);$this->setIsUpdated();}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}public function setIsInheritable($vd5752333adc3a004f826f2ea2a41273a) {$this->is_inheritable = (bool) $vd5752333adc3a004f826f2ea2a41273a;$this->setIsUpdated();}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}public function setFieldTypeId($v1e3f04102267eaf5e8d0ca424fd5c561) {$this->field_type_id = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$this->setIsUpdated();return true;}public function setGuideId($v051369818a8073bba5feeb0e957eb308) {$this->guide_id = (int) $v051369818a8073bba5feeb0e957eb308;$this->setIsUpdated();}public function setIsInSearch($v26ff9f2281b323db6a9f4fda798fb0dc) {$this->is_in_search = (bool) $v26ff9f2281b323db6a9f4fda798fb0dc;$this->setIsUpdated();}public function setIsInFilter($v8a98dfdd379bf6548fa217678117ce3b) {$this->is_in_filter = (bool) $v8a98dfdd379bf6548fa217678117ce3b;$this->setIsUpdated();}public function setTip($v6a2139364f96787c8ce1bbb0070b898c) {$this->tip = umiObjectProperty::filterInputString($v6a2139364f96787c8ce1bbb0070b898c);$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$vece9a5741f5526a8bf46b1bb2cc4a3ee = XMLFactory::getInstance()->getProxy("objectsdef.xml")->getElement("/umi/fields/field[@id=".$this->id."]");$this->name           = $vece9a5741f5526a8bf46b1bb2cc4a3ee->name;$this->title          = $vece9a5741f5526a8bf46b1bb2cc4a3ee->getValue();$this->is_locked      = (bool)   $vece9a5741f5526a8bf46b1bb2cc4a3ee->is_locked;$this->is_inheritable = (bool)   $vece9a5741f5526a8bf46b1bb2cc4a3ee->is_inheritable;$this->is_visible     = (bool)   $vece9a5741f5526a8bf46b1bb2cc4a3ee->is_visible;$this->field_type_id  = (int)    $vece9a5741f5526a8bf46b1bb2cc4a3ee->field_type_id;$this->guide_id       = (int)    $vece9a5741f5526a8bf46b1bb2cc4a3ee->guide_id;$this->is_in_search   = (bool)   $vece9a5741f5526a8bf46b1bb2cc4a3ee->in_search;$this->is_in_filter   = (bool)   $vece9a5741f5526a8bf46b1bb2cc4a3ee->in_filter;$this->tip            = (string) $vece9a5741f5526a8bf46b1bb2cc4a3ee->tip;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1945c9a2a5e2ba6133f1db6757a35fcb, $vd5752333adc3a004f826f2ea2a41273a, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1e3f04102267eaf5e8d0ca424fd5c561, $v051369818a8073bba5feeb0e957eb308, $v5fa2ecd1dc485ead330e65903d19650a, $ve4a2ed2dde6e8354ae6f321744843084, $v6a2139364f96787c8ce1bbb0070b898c) = $vf1965a857bc285d26fe22023aa5ab50d) {$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->is_inheritable = (bool) $vd5752333adc3a004f826f2ea2a41273a;$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->field_type_id = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$this->guide_id = (int) $v051369818a8073bba5feeb0e957eb308;$this->is_in_search = (bool) $v5fa2ecd1dc485ead330e65903d19650a;$this->is_in_filter = (bool) $ve4a2ed2dde6e8354ae6f321744843084;$this->tip = (string) $v6a2139364f96787c8ce1bbb0070b898c;}else {return false;}}protected function save() {$vb068931cc450442b63f5b3d276ea4297 = ($this->name);$vd5d3db1765287eef77d7927cc956f50a = ($this->title);$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$vd5752333adc3a004f826f2ea2a41273a = (int) $this->is_inheritable;$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = (int) $this->is_visible;$v1e3f04102267eaf5e8d0ca424fd5c561 = (int) $this->field_type_id;$v051369818a8073bba5feeb0e957eb308 = (int) $this->guide_id;$v5fa2ecd1dc485ead330e65903d19650a = (int) $this->is_in_search;$ve4a2ed2dde6e8354ae6f321744843084 = (int) $this->is_in_filter;$v6a2139364f96787c8ce1bbb0070b898c = (string) $this->tip;$v6f16a5f8ff5d75ab84c018adacdfcbb7 = XMLFactory::getInstance()->getProxy("objectsdef.xml")->getElement("/umi/fields/field[@id=".$this->id."]");$v6f16a5f8ff5d75ab84c018adacdfcbb7->setValue($vd5d3db1765287eef77d7927cc956f50a);$v6f16a5f8ff5d75ab84c018adacdfcbb7->name           = $vb068931cc450442b63f5b3d276ea4297;$v6f16a5f8ff5d75ab84c018adacdfcbb7->is_locked      = $v1945c9a2a5e2ba6133f1db6757a35fcb;$v6f16a5f8ff5d75ab84c018adacdfcbb7->is_inheritable = $vd5752333adc3a004f826f2ea2a41273a;$v6f16a5f8ff5d75ab84c018adacdfcbb7->is_visible     = $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$v6f16a5f8ff5d75ab84c018adacdfcbb7->field_type_id  = $v1e3f04102267eaf5e8d0ca424fd5c561;$v6f16a5f8ff5d75ab84c018adacdfcbb7->guide_id       = $v051369818a8073bba5feeb0e957eb308;$v6f16a5f8ff5d75ab84c018adacdfcbb7->in_search      = $v5fa2ecd1dc485ead330e65903d19650a;$v6f16a5f8ff5d75ab84c018adacdfcbb7->in_filter      = $ve4a2ed2dde6e8354ae6f321744843084;$v6f16a5f8ff5d75ab84c018adacdfcbb7->tip            = $v6a2139364f96787c8ce1bbb0070b898c;return true;}public function getIsRequired() {return false;}public function setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69 = false) {return;}}interface iUmiFieldsGroup {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getTitle();public function setTitle($vd5d3db1765287eef77d7927cc956f50a);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getOrd();public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9);public function getIsActive();public function setIsActive($v367e854225a0810977297b3bedb2f309);public function getIsVisible();public function setIsVisible($v19fad0416b4b101ab72faccf4c323024);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getFields();public function attachField($v945100186b119048837b9859c2c46410);public function detachField($v945100186b119048837b9859c2c46410);public function moveFieldAfter($v945100186b119048837b9859c2c46410, $v7107894721f4771e44b220bc8ab81811, $v0e939a4ffd3aacd724dd3b50147b4353, $v3f84b203eef48e9862ac1ffbe344dffe);}class umiFieldsGroup extends umiEntinty implements iUmiEntinty, iUmiFieldsGroup {private $name, $title,   $type_id, $ord,   $is_active = true, $is_visible = true, $is_locked = false,   $autoload_fields = false,   $fields = Array();protected $store_type = "fields_group";public function getName() {return $this->name;}public function getTitle() {return $this->translateLabel($this->title);}public function getTypeId() {return $this->type_id;}public function getOrd() {return $this->ord;}public function getIsActive() {return $this->is_active;}public function getIsVisible() {return $this->is_visible;}public function getIsLocked() {return $this->is_locked;}public function setName($vb068931cc450442b63f5b3d276ea4297) {$this->name = umiObjectProperty::filterInputString($vb068931cc450442b63f5b3d276ea4297);$this->setIsUpdated();}public function setTitle($vd5d3db1765287eef77d7927cc956f50a) {$vd5d3db1765287eef77d7927cc956f50a = $this->translateI18n($vd5d3db1765287eef77d7927cc956f50a, "fields-group");$this->title = umiObjectProperty::filterInputString($vd5d3db1765287eef77d7927cc956f50a);$this->setIsUpdated();}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {$vd14a8022b085f9ef19d479cbdd581127 = umiObjectTypesCollection::getInstance();if($vd14a8022b085f9ef19d479cbdd581127->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;return true;}else {return false;}}public function setOrd($v8bef1cc20ada3bef55fdf132cb2a1cb9) {$this->ord = $v8bef1cc20ada3bef55fdf132cb2a1cb9;$this->setIsUpdated();}public function setIsActive($v4264c638e0098acb172519b0436db099) {$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->setIsUpdated();}public function setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4) {$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->setIsUpdated();}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if($vf1965a857bc285d26fe22023aa5ab50d === false) {$v03937134cedab9078be39a77ee3a48a0 = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/fieldgroups/fieldgroup[@id='.$this->id.']');$this->name       = $v03937134cedab9078be39a77ee3a48a0->name;$this->title      = $v03937134cedab9078be39a77ee3a48a0->getValue();$this->type_id    = $v03937134cedab9078be39a77ee3a48a0->type_id;$this->is_active  = (bool) $v03937134cedab9078be39a77ee3a48a0->is_active;$this->is_visible = (bool) $v03937134cedab9078be39a77ee3a48a0->is_visible;$this->is_locked  = (bool) $v03937134cedab9078be39a77ee3a48a0->is_locked;$this->ord        = (int)  $v03937134cedab9078be39a77ee3a48a0->ord;return true;}if(list($vb80bb7740288fda1f201890375a60c8f, $vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v94757cae63fd3e398c0811a976dd6bbe, $v4264c638e0098acb172519b0436db099, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, $v1945c9a2a5e2ba6133f1db6757a35fcb, $v8bef1cc20ada3bef55fdf132cb2a1cb9) = $vf1965a857bc285d26fe22023aa5ab50d) {if(!umiObjectTypesCollection::getInstance()->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {return false;}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->title = $vd5d3db1765287eef77d7927cc956f50a;$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;$this->is_active = (bool) $v4264c638e0098acb172519b0436db099;$this->is_visible = (bool) $ve1c6c9ef2fcbe75f26f815c4ef2e60b4;$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->ord = (int) $v8bef1cc20ada3bef55fdf132cb2a1cb9;if($this->autoload_fields) {return $this->loadFields();}else {return true;}}else {return false;}}protected function save() {$v03937134cedab9078be39a77ee3a48a0 = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/fieldgroups/fieldgroup[@id='.$this->id.']');$v03937134cedab9078be39a77ee3a48a0->setValue(($this->title));$v03937134cedab9078be39a77ee3a48a0->name        = ($this->name);$v03937134cedab9078be39a77ee3a48a0->type_id     = (int) $this->type_id;$v03937134cedab9078be39a77ee3a48a0->is_active   = (int) $this->is_active;$v03937134cedab9078be39a77ee3a48a0->is_visible  = (int) $this->is_visible;$v03937134cedab9078be39a77ee3a48a0->ord         = (int) $this->ord;$v03937134cedab9078be39a77ee3a48a0->is_locked   = (int) $this->is_locked;return true;}public function loadFields($vdf347a373b8f92aa0ae3dd920a5ec2f6 = false) {$vd05b6ed7d2345020440df396d6da7f73 = umiFieldsCollection::getInstance();if($vdf347a373b8f92aa0ae3dd920a5ec2f6 === false) {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v4ada014bd530cc7ec4604de11cca30d5  = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldcontroller/conn[@group_id='.$this->id.']');$vbeebfd51d771de35c59fbdc719c81181 = '/umi/fields/field[@id=';$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach($v4ada014bd530cc7ec4604de11cca30d5 as $vc2cc7082a89c1ad6631a2f66af5f00c0) {$vbeebfd51d771de35c59fbdc719c81181 .= (($v865c0c0b4ab0e063e5caa3387c1a8741>0)?' or @id=':'').$vc2cc7082a89c1ad6631a2f66af5f00c0->getAttribute('field_id');$v865c0c0b4ab0e063e5caa3387c1a8741++;}$vbeebfd51d771de35c59fbdc719c81181  .= ']';$vb3d22b06afa2487fe5ed4f0f3919aa83 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray($vbeebfd51d771de35c59fbdc719c81181);foreach($vb3d22b06afa2487fe5ed4f0f3919aa83 as $v2017d400f0721e7ec4bf10b008d381be) {$vf1965a857bc285d26fe22023aa5ab50d = array($v2017d400f0721e7ec4bf10b008d381be->id, $v2017d400f0721e7ec4bf10b008d381be->name, $v2017d400f0721e7ec4bf10b008d381be->getValue(), $v2017d400f0721e7ec4bf10b008d381be->is_locked, $v2017d400f0721e7ec4bf10b008d381be->is_inheritable, $v2017d400f0721e7ec4bf10b008d381be->is_visible, $v2017d400f0721e7ec4bf10b008d381be->field_type_id, $v2017d400f0721e7ec4bf10b008d381be->guide_id, $v2017d400f0721e7ec4bf10b008d381be->in_search, $v2017d400f0721e7ec4bf10b008d381be->in_filter, $v2017d400f0721e7ec4bf10b008d381be->tip);if($v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v2017d400f0721e7ec4bf10b008d381be->id, $vf1965a857bc285d26fe22023aa5ab50d)) {$this->fields[$v2017d400f0721e7ec4bf10b008d381be->id] = $v06e3d36fa30cea095545139854ad1fb9;}}}else {foreach($vdf347a373b8f92aa0ae3dd920a5ec2f6 as $vf1965a857bc285d26fe22023aa5ab50d) {list($v3aabf39f2d943fa886d86dcbbee4d910) = $vf1965a857bc285d26fe22023aa5ab50d;if($v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d)) {$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;}}}}public function getFields() {return $this->fields;}private function isLoaded($v3aabf39f2d943fa886d86dcbbee4d910) {return (bool) array_key_exists($v3aabf39f2d943fa886d86dcbbee4d910, $this->fields);}public function attachField($v3aabf39f2d943fa886d86dcbbee4d910) {if($this->isLoaded($v3aabf39f2d943fa886d86dcbbee4d910)) {return true;}else {$v3aabf39f2d943fa886d86dcbbee4d910 = (int) $v3aabf39f2d943fa886d86dcbbee4d910;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v8bef1cc20ada3bef55fdf132cb2a1cb9    = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldcontroller/conn[not(@ord <= preceding-sibling::conn/@ord) and not(@ord <=following-sibling::conn/@ord)][@group_id='.$this->id.']','ord');$v8bef1cc20ada3bef55fdf132cb2a1cb9   += 5;$va32417899e2db4290fb0d3634d33c9a3   = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/fieldcontroller', 'conn', '');$va32417899e2db4290fb0d3634d33c9a3->ord      = $v8bef1cc20ada3bef55fdf132cb2a1cb9;$va32417899e2db4290fb0d3634d33c9a3->field_id = $v3aabf39f2d943fa886d86dcbbee4d910;$va32417899e2db4290fb0d3634d33c9a3->group_id = $this->id;$vd05b6ed7d2345020440df396d6da7f73 = umiFieldsCollection::getInstance();$v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910);$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;$this->fillInContentTable($v3aabf39f2d943fa886d86dcbbee4d910);}}protected function fillInContentTable($v3aabf39f2d943fa886d86dcbbee4d910) {$v94757cae63fd3e398c0811a976dd6bbe = $this->type_id;$vcd804a351eeafbfd69bc82b5dbde2037 = XMLFactory::getInstance()->getProxy('objects.xml')->getElementsArray('/umi/objects/object[@type_id='.$v94757cae63fd3e398c0811a976dd6bbe.']');$v48b8e11252203b3b99c58dd5a07776c1   = XMLFactory::getInstance()->getProxy('objectcontent/'.$v94757cae63fd3e398c0811a976dd6bbe.'.xml');foreach($vcd804a351eeafbfd69bc82b5dbde2037 as $v497031794414a552435f90151ac3b54b) {$v231afe47f3f37d3808096b36c28b4ded = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/values', 'value', '');$v231afe47f3f37d3808096b36c28b4ded->obj_id   = $v497031794414a552435f90151ac3b54b->id;$v231afe47f3f37d3808096b36c28b4ded->field_id = $v3aabf39f2d943fa886d86dcbbee4d910;}}public function detachField($v3aabf39f2d943fa886d86dcbbee4d910) {if($this->isLoaded($v3aabf39f2d943fa886d86dcbbee4d910)) {$v3aabf39f2d943fa886d86dcbbee4d910 = (int) $v3aabf39f2d943fa886d86dcbbee4d910;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v48b8e11252203b3b99c58dd5a07776c1->removeElement('/umi/fieldscontroller/conn[@field_id='.$v3aabf39f2d943fa886d86dcbbee4d910.' and @group_id='.$this->id.']');unset($this->fields[$v3aabf39f2d943fa886d86dcbbee4d910]);$v4a8a08f09d37b73795649038408b5f33 = $v48b8e11252203b3b99c58dd5a07776c1->getCount('/umi/fieldscontroller/conn[@field_id='.$v3aabf39f2d943fa886d86dcbbee4d910.']');return ($v4a8a08f09d37b73795649038408b5f33 == 0) ? umiFieldsCollection::getInstance()->delField($v3aabf39f2d943fa886d86dcbbee4d910) : true;}else {return false;}}public function moveFieldAfter($v3aabf39f2d943fa886d86dcbbee4d910, $vfcd4b86e12c95a57c24239e8a4125360, $v0e939a4ffd3aacd724dd3b50147b4353, $v3f84b203eef48e9862ac1ffbe344dffe) {$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');if($vfcd4b86e12c95a57c24239e8a4125360 == 0) {$vf2400bf3c8b70283e04af07d6d67fe6a = 0;}else {$vf2400bf3c8b70283e04af07d6d67fe6a = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldscontroller/conn[@field_id='.$vfcd4b86e12c95a57c24239e8a4125360.' and @group_id='.$v0e939a4ffd3aacd724dd3b50147b4353.']','ord');}if($v3f84b203eef48e9862ac1ffbe344dffe) {$v4ada014bd530cc7ec4604de11cca30d5 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldscontroller/conn[@group_id='.$this->id.' and @ord>='.$vf2400bf3c8b70283e04af07d6d67fe6a.']');foreach($v4ada014bd530cc7ec4604de11cca30d5 as $vc2cc7082a89c1ad6631a2f66af5f00c0) $vc2cc7082a89c1ad6631a2f66af5f00c0->ord = $vc2cc7082a89c1ad6631a2f66af5f00c0->ord + 1;}else {$vf2400bf3c8b70283e04af07d6d67fe6a = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldcontroller/conn[not(@ord <= preceding-sibling::conn/@ord) and not(@ord <=following-sibling::conn/@ord)][@group_id='.$v0e939a4ffd3aacd724dd3b50147b4353.']','ord');++$vf2400bf3c8b70283e04af07d6d67fe6a;}$va32417899e2db4290fb0d3634d33c9a3 = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/fieldcontroller/conn[@field_id='.$v3aabf39f2d943fa886d86dcbbee4d910.' and @group_id='.$this->id.']');$va32417899e2db4290fb0d3634d33c9a3->ord      = $vf2400bf3c8b70283e04af07d6d67fe6a;$va32417899e2db4290fb0d3634d33c9a3->group_id = $v0e939a4ffd3aacd724dd3b50147b4353;return true;}public function commit() {parent::commit();cacheFrontend::getInstance()->flush();}};interface iUmiObjectType {public function addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v367e854225a0810977297b3bedb2f309 = true, $v19fad0416b4b101ab72faccf4c323024 = true);public function delFieldsGroup($v3fdcf94940aa24dc024a819904427035);public function getFieldsGroupByName($v120aafc4d1ddeda208736bcfa6be14cb);public function getFieldsGroup($v3fdcf94940aa24dc024a819904427035);public function getFieldsGroupsList();public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getIsLocked();public function setIsGuidable($va8d6fa79ab1177f254f679f9fe648a3e);public function getIsGuidable();public function setIsPublic($v16995eef256269cfe8804ffaf770cb4b);public function getIsPublic();public function setHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631);public function getHierarchyTypeId();public function getParentId();public function setFieldGroupOrd($v47db2588331bbe530c80dd001fc60aed, $v8437225ef7c926cdd9bc4b9783a3be54, $v4bd439a3ff0fb0e318264d9f579f15f9);public function getFieldId($v972bf3f05d14ffbdb817bef60638ff00);public function getAllFields($v33a8421fb9f5a2636cefaed92ae056c3 = false);public function getModule();public function getMethod();}class umiObjectType extends umiEntinty implements iUmiEntinty, iUmiObjectType {private $name, $parent_id, $is_locked = false,   $field_groups = Array(), $is_guidable = false, $is_public = false, $hierarchy_type_id;protected $store_type = "object_type";public function getName() {return $this->translateLabel($this->name);}public function setName($vb068931cc450442b63f5b3d276ea4297) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297, "object-type-");$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}public function getIsLocked() {return $this->is_locked;}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}public function getParentId() {return $this->parent_id;}public function getIsGuidable() {return $this->is_guidable;}public function setIsGuidable($v7617e8d03bb811f5c37135234006b114) {$this->is_guidable = (bool) $v7617e8d03bb811f5c37135234006b114;$this->setIsUpdated();}public function getIsPublic() {return $this->is_public;}public function setIsPublic($v117256556af3bd1a0c9710a593d93814) {$this->is_public = (bool) $v117256556af3bd1a0c9710a593d93814;$this->setIsUpdated();}public function getHierarchyTypeId() {return $this->hierarchy_type_id;}public function setHierarchyTypeId($v0715f6d9497f93911417c9c324265771) {$this->hierarchy_type_id = (int) $v0715f6d9497f93911417c9c324265771;$this->setIsUpdated();}public function addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v4264c638e0098acb172519b0436db099 = true, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true) {if($vdb0f6f37ebeb6ea09489124345af2a45 = $this->getFieldsGroupByName($vb068931cc450442b63f5b3d276ea4297)) {return $vdb0f6f37ebeb6ea09489124345af2a45->getId();}XMLFactory::createFile('objectcontent/'.$this->id.'.xml' , "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<umi>\n <values />\n</umi>");$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v260e8b71052a73a8d5a6b162135fe851 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldgroups/fieldgroup[@type_id='.$this->id.']');$v8bef1cc20ada3bef55fdf132cb2a1cb9    = 1;foreach($v260e8b71052a73a8d5a6b162135fe851 as $v6c3a6944a808a7c0bbb6788dbec54a9f) {if($v8bef1cc20ada3bef55fdf132cb2a1cb9 < $v6c3a6944a808a7c0bbb6788dbec54a9f->ord) $v8bef1cc20ada3bef55fdf132cb2a1cb9 = $v6c3a6944a808a7c0bbb6788dbec54a9f->ord;}if($v8bef1cc20ada3bef55fdf132cb2a1cb9 > 1) $v8bef1cc20ada3bef55fdf132cb2a1cb9 += 5;$v6c26c1979a522c2dd7e76e527aa69ca5 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldgroups/fieldgroup[not(@id <= preceding-sibling::field/@id) and not(@id <=following-sibling::fieldgroup/@id)]','id') + 1;$v231afe47f3f37d3808096b36c28b4ded        = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/fieldgroups', 'fieldgroup', '');$v231afe47f3f37d3808096b36c28b4ded->id    = $v6c26c1979a522c2dd7e76e527aa69ca5;$v231afe47f3f37d3808096b36c28b4ded->type_id = $this->id;$v8e2dcfd7e7e24b1ca76c1193f645902b->ord   = $v8bef1cc20ada3bef55fdf132cb2a1cb9;$v38f582e54454005ec0664831734e1152 = new umiFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5);$v38f582e54454005ec0664831734e1152->setName($vb068931cc450442b63f5b3d276ea4297);$v38f582e54454005ec0664831734e1152->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v38f582e54454005ec0664831734e1152->setIsActive($v4264c638e0098acb172519b0436db099);$v38f582e54454005ec0664831734e1152->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v38f582e54454005ec0664831734e1152->commit();$this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5] = $v38f582e54454005ec0664831734e1152;$v2af1d1812273df0bd0f720da7068f8a6 = umiObjectTypesCollection::getInstance()->getSubTypesList($this->id);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v2af1d1812273df0bd0f720da7068f8a6);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd4fd255f51559df00de5424b64292413 = $v2af1d1812273df0bd0f720da7068f8a6[$v865c0c0b4ab0e063e5caa3387c1a8741];if($v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($vd4fd255f51559df00de5424b64292413)) {$v599dcce2998a6b40b1e38e8c6006cb0a->addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v4264c638e0098acb172519b0436db099, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4);}else {throw new coreException("Can't load object type #{$vd4fd255f51559df00de5424b64292413}");}}return $v6c26c1979a522c2dd7e76e527aa69ca5;}public function delFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5) {if($this->isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5)) {$v6c26c1979a522c2dd7e76e527aa69ca5 = (int) $v6c26c1979a522c2dd7e76e527aa69ca5;XMLFactory::getInstance()->getProxy('objectsdef.xml')->removeElement('/umi/fieldgroups/fieldgroup[@id='.$v6c26c1979a522c2dd7e76e527aa69ca5.']');unset($this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5]);return true;}else {return false;}}public function getFieldsGroupByName($v669198bb876eff07758f68a34b5d21fb) {$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $v0e939a4ffd3aacd724dd3b50147b4353 => $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getName()  == $v669198bb876eff07758f68a34b5d21fb) {return $vdb0f6f37ebeb6ea09489124345af2a45;}}return false;}public function getFieldsGroup($v6c26c1979a522c2dd7e76e527aa69ca5) {if($this->isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5)) {return $this->field_groups[$v6c26c1979a522c2dd7e76e527aa69ca5];}else {return false;}}public function getFieldsGroupsList() {return $this->field_groups;}private function isFieldsGroupExists($v6c26c1979a522c2dd7e76e527aa69ca5) {if(!$v6c26c1979a522c2dd7e76e527aa69ca5) {return false;}else {return (bool) array_key_exists($v6c26c1979a522c2dd7e76e527aa69ca5, $this->field_groups);}}protected function loadInfo() {$v231afe47f3f37d3808096b36c28b4ded = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/objecttypes/objecttype[@id='.$this->id.']');$this->name = $v231afe47f3f37d3808096b36c28b4ded->name;$this->parent_id = (int) $v231afe47f3f37d3808096b36c28b4ded->parent_id;$this->is_locked = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_locked;$this->is_guidable = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_guidable;$this->is_public = (bool) $v231afe47f3f37d3808096b36c28b4ded->is_public;$this->hierarchy_type_id = (int) $v231afe47f3f37d3808096b36c28b4ded->hierarchy_type_id;return $this->loadFieldsGroups();}private function loadFieldsGroups() {$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v9f603482a3512b98ada9fdb672e14501 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldgroups/fieldgroup[@type_id='.$this->id.']');@usort($v9f603482a3512b98ada9fdb672e14501, create_function('$a, $b', 'if($a->ord>$b->ord)return 1; else if($a->ord<$b->ord) return -1; else return 0;'));$ved5654dfb54c45de0e56fdf93e4dfcf4 = '';$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach($v9f603482a3512b98ada9fdb672e14501 as $v03937134cedab9078be39a77ee3a48a0) {$ved5654dfb54c45de0e56fdf93e4dfcf4 .= (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'').'@group_id='.$v03937134cedab9078be39a77ee3a48a0->getAttribute('id');$v0e939a4ffd3aacd724dd3b50147b4353 = $v03937134cedab9078be39a77ee3a48a0->id;$vf1965a857bc285d26fe22023aa5ab50d = array($v0e939a4ffd3aacd724dd3b50147b4353, $v03937134cedab9078be39a77ee3a48a0->name, $v03937134cedab9078be39a77ee3a48a0->getValue(), $v03937134cedab9078be39a77ee3a48a0->type_id,            $v03937134cedab9078be39a77ee3a48a0->is_active, $v03937134cedab9078be39a77ee3a48a0->is_visible, $v03937134cedab9078be39a77ee3a48a0->is_locked, $v03937134cedab9078be39a77ee3a48a0->ord);$v38f582e54454005ec0664831734e1152 = new umiFieldsGroup($v0e939a4ffd3aacd724dd3b50147b4353, $vf1965a857bc285d26fe22023aa5ab50d);$this->field_groups[$v0e939a4ffd3aacd724dd3b50147b4353] = $v38f582e54454005ec0664831734e1152;}if(!$ved5654dfb54c45de0e56fdf93e4dfcf4) {return;}$v4ada014bd530cc7ec4604de11cca30d5   = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldcontroller/conn['.$ved5654dfb54c45de0e56fdf93e4dfcf4.']');$v75769e8c11855c44ae9d73845c5fbd6e  = array();$ved5654dfb54c45de0e56fdf93e4dfcf4 = '';$v865c0c0b4ab0e063e5caa3387c1a8741 = 0;foreach($v4ada014bd530cc7ec4604de11cca30d5 as $vc2cc7082a89c1ad6631a2f66af5f00c0) {$v7d7b2d6df5afe6d967289cd13a3a473b = $vc2cc7082a89c1ad6631a2f66af5f00c0->getAttribute('field_id');$v75769e8c11855c44ae9d73845c5fbd6e[ $v7d7b2d6df5afe6d967289cd13a3a473b ] = $vc2cc7082a89c1ad6631a2f66af5f00c0->getAttribute('group_id');$ved5654dfb54c45de0e56fdf93e4dfcf4 .= (($v865c0c0b4ab0e063e5caa3387c1a8741++)?' or ':'').'@id='.$v7d7b2d6df5afe6d967289cd13a3a473b;}$vb3d22b06afa2487fe5ed4f0f3919aa83 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fields/field['.$ved5654dfb54c45de0e56fdf93e4dfcf4.']');$vd05b6ed7d2345020440df396d6da7f73  = Array();foreach($vb3d22b06afa2487fe5ed4f0f3919aa83 as $v2017d400f0721e7ec4bf10b008d381be) {$v7d7b2d6df5afe6d967289cd13a3a473b     = $v2017d400f0721e7ec4bf10b008d381be->id;$v0e939a4ffd3aacd724dd3b50147b4353 = $v75769e8c11855c44ae9d73845c5fbd6e[ $v7d7b2d6df5afe6d967289cd13a3a473b ];if(isset($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353])) {if(!is_array($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353])) {$vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353] = Array();}}$vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353][] = Array($v7d7b2d6df5afe6d967289cd13a3a473b, $v2017d400f0721e7ec4bf10b008d381be->name, $v2017d400f0721e7ec4bf10b008d381be->getValue(), $v2017d400f0721e7ec4bf10b008d381be->is_locked, $v2017d400f0721e7ec4bf10b008d381be->is_inheritable, $v2017d400f0721e7ec4bf10b008d381be->is_visible,                $v2017d400f0721e7ec4bf10b008d381be->field_type_id, $v2017d400f0721e7ec4bf10b008d381be->guide_id, $v2017d400f0721e7ec4bf10b008d381be->in_search, $v2017d400f0721e7ec4bf10b008d381be->in_filter, $v2017d400f0721e7ec4bf10b008d381be->tip);}foreach($this->field_groups as $v0e939a4ffd3aacd724dd3b50147b4353 => $vaa1b294ed2197da2929c13b581e9219e) {if (isset($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353])) {$vaa1b294ed2197da2929c13b581e9219e->loadFields($vd05b6ed7d2345020440df396d6da7f73[$v0e939a4ffd3aacd724dd3b50147b4353]);}}return true;}protected function save() {$v231afe47f3f37d3808096b36c28b4ded = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElement('/umi/objecttypes/objecttype[@id='.$this->id.']');if(!$v231afe47f3f37d3808096b36c28b4ded->valid()) {$v231afe47f3f37d3808096b36c28b4ded = XMLFactory::getInstance()->getProxy('objectsdef.xml')->addElement('/umi/objecttypes', 'objecttype', '');$v231afe47f3f37d3808096b36c28b4ded->id = $this->id;}$v231afe47f3f37d3808096b36c28b4ded->name = umiObjectProperty::filterInputString($this->name);$v231afe47f3f37d3808096b36c28b4ded->parent_id = (int) $this->parent_id;$v231afe47f3f37d3808096b36c28b4ded->is_locked = (int) $this->is_locked;$v231afe47f3f37d3808096b36c28b4ded->is_guidable = (int) $this->is_guidable;$v231afe47f3f37d3808096b36c28b4ded->is_public = (int) $this->is_public;$v231afe47f3f37d3808096b36c28b4ded->hierarchy_type_id = (int) $this->hierarchy_type_id;XMLFactory::createFile('objectcontent/'.$this->id.'.xml' , "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<umi>\n <values />\n</umi>");}public function setFieldGroupOrd($v0e939a4ffd3aacd724dd3b50147b4353, $vf2400bf3c8b70283e04af07d6d67fe6a, $v3f84b203eef48e9862ac1ffbe344dffe) {$vf2400bf3c8b70283e04af07d6d67fe6a = (int) $vf2400bf3c8b70283e04af07d6d67fe6a;$v0e939a4ffd3aacd724dd3b50147b4353 = (int) $v0e939a4ffd3aacd724dd3b50147b4353;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');if(!$v3f84b203eef48e9862ac1ffbe344dffe) {$v94757cae63fd3e398c0811a976dd6bbe = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldgroups/fieldgroup[@id='.$v0e939a4ffd3aacd724dd3b50147b4353.']');$v5bf8bee33eed7e4b21708827159ec8b4 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldgroups/fieldgroup[@type_id='.$v94757cae63fd3e398c0811a976dd6bbe.' and @ord>='.$vf2400bf3c8b70283e04af07d6d67fe6a.']');foreach($v5bf8bee33eed7e4b21708827159ec8b4 as $v231afe47f3f37d3808096b36c28b4ded) $v231afe47f3f37d3808096b36c28b4ded->ord = $v231afe47f3f37d3808096b36c28b4ded->ord + 1;}$v48b8e11252203b3b99c58dd5a07776c1->setAttributeValue('/umi/fieldgroups/fieldgorup[@id='.$v0e939a4ffd3aacd724dd3b50147b4353.']', 'ord', $vf2400bf3c8b70283e04af07d6d67fe6a);return true;}public function getAllFields($v33a8421fb9f5a2636cefaed92ae056c3 = false) {$vd05b6ed7d2345020440df396d6da7f73 = Array();$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $vdb0f6f37ebeb6ea09489124345af2a45) {if($v33a8421fb9f5a2636cefaed92ae056c3) {if(!$vdb0f6f37ebeb6ea09489124345af2a45->getIsVisible()) {continue;}}$vd05b6ed7d2345020440df396d6da7f73 = array_merge($vd05b6ed7d2345020440df396d6da7f73, $vdb0f6f37ebeb6ea09489124345af2a45->getFields());}return $vd05b6ed7d2345020440df396d6da7f73;}public function getFieldId($v73f329f154a663bfda020aadcdd0b775) {$v1471e4e05a4db95d353cc867fe317314 = $this->getFieldsGroupsList();foreach($v1471e4e05a4db95d353cc867fe317314 as $v0e939a4ffd3aacd724dd3b50147b4353 => $vdb0f6f37ebeb6ea09489124345af2a45) {if(!$vdb0f6f37ebeb6ea09489124345af2a45->getIsActive()) continue;$vd05b6ed7d2345020440df396d6da7f73 = $vdb0f6f37ebeb6ea09489124345af2a45->getFields();foreach($vd05b6ed7d2345020440df396d6da7f73 as $v3aabf39f2d943fa886d86dcbbee4d910 => $v06e3d36fa30cea095545139854ad1fb9) {if($v06e3d36fa30cea095545139854ad1fb9->getName() == $v73f329f154a663bfda020aadcdd0b775) {return $v06e3d36fa30cea095545139854ad1fb9->getId();}}}return false;}public function getModule() {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $this->getHierarchyTypeId();$v89b0b9deff65f8b9cd1f71bc74ce36ba = umiHierarchyTypesCollection::getInstance()->getType($vacf567c9c3d6cf7c6e2cc0ce108e0631);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof umiHierarchyType) {return $v89b0b9deff65f8b9cd1f71bc74ce36ba->getName();}else {return false;}}public function getMethod() {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $this->getHierarchyTypeId();$v89b0b9deff65f8b9cd1f71bc74ce36ba = umiHierarchyTypesCollection::getInstance()->getType($vacf567c9c3d6cf7c6e2cc0ce108e0631);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof umiHierarchyType) {return $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt();}else {return false;}}}interface iUmiObjectProperty {public function getValue();public function setValue($v2063c1608d6e0baf80249c42e2be5804);public function resetValue();public function getName();public function getTitle();public function getIsMultiple();public function getIsUnsigned();public function getDataType();public function getIsLocked();public function getIsInheritable();public function getIsVisible();public static function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21);public static function filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21);public function getObject();public function getField();}abstract class umiObjectProperty extends umiEntinty implements iUmiEntinty, iUmiObjectProperty {protected $object_id, $field_id, $field, $field_type, $store,   $StoreProxy,   $value = Array();public    $store_type = "property";public static $USE_FORCE_OBJECTS_CREATION = false;public static $IGNORE_FILTER_INPUT_STRING = false;public function __construct($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910) {$this->setId($vb80bb7740288fda1f201890375a60c8f);$this->object_id = (int) $vb80bb7740288fda1f201890375a60c8f;$v94757cae63fd3e398c0811a976dd6bbe     = XMLFactory::getInstance()->getProxy('objects.xml')->getAttributeValue('/umi/objects/object[@id='.$this->object_id.']', 'type_id');$this->store = 'objectcontent/'.$v94757cae63fd3e398c0811a976dd6bbe.'.xml';$this->StoreProxy  = XMLFactory::getInstance()->getProxy($this->store);$this->field = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$this->field_id = $v3aabf39f2d943fa886d86dcbbee4d910;$this->is_updated = false;$this->loadInfo();}public static function getProperty($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe) {$v6f66e878c62db60568a3487869695820 = self::getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);return new $v6f66e878c62db60568a3487869695820($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe);}public function getId() {return $this->id . "." . $this->field_id;}public function getValue() {if($this->getIsMultiple() === false) {if(sizeof($this->value) > 0) {list($v2063c1608d6e0baf80249c42e2be5804) = $this->value;}else {return NULL;}}else {$v2063c1608d6e0baf80249c42e2be5804 = $this->value;}return $v2063c1608d6e0baf80249c42e2be5804;}public function setValue($v2063c1608d6e0baf80249c42e2be5804) {if(!is_array($v2063c1608d6e0baf80249c42e2be5804)) {$v2063c1608d6e0baf80249c42e2be5804 = Array($v2063c1608d6e0baf80249c42e2be5804);}$v17f71d965fe9589ddbd11caf7182243e = $this->getDataType();if ($v17f71d965fe9589ddbd11caf7182243e === 'date') {foreach ($v2063c1608d6e0baf80249c42e2be5804 as $v8dcd0fced6cad049fa9d12a0e56b5bb6=>$ve0c750ab2ba65ff988478860712c5ff2) {if (!($ve0c750ab2ba65ff988478860712c5ff2 instanceof umiDate)) {$v2063c1608d6e0baf80249c42e2be5804[$v8dcd0fced6cad049fa9d12a0e56b5bb6] = new umiDate(intval($ve0c750ab2ba65ff988478860712c5ff2));}}}$this->value = $v2063c1608d6e0baf80249c42e2be5804;$this->setIsUpdated();$this->setObjectIsUpdated();}public function resetValue() {$this->value = Array();$this->setIsUpdated();}public function getName() {return $this->field->getName();}public function getTitle() {return $this->field->getTitle();}protected function loadInfo() {$v06e3d36fa30cea095545139854ad1fb9 = $this->field;$v3fa9d6639f24f9bb4bf81ac6bdbdbc8c = umiFieldTypesCollection::getInstance();$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v519504d7d4beb745dac24ccfb6c1d7c9 = $v3fa9d6639f24f9bb4bf81ac6bdbdbc8c->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$this->field_type = $v519504d7d4beb745dac24ccfb6c1d7c9;$this->value = $this->loadValue();}public function getIsMultiple() {return $this->field_type->getIsMultiple();}public function getIsUnsigned() {return $this->field_type->getIsUnsigned();}public function getDataType() {return $this->field_type->getDataType();}public function getIsLocked() {return $this->field->getIsLocked();}public function getIsInheritable() {return $this->field->getIsInheritable();}public function getIsVisible() {return $this->field->getIsVisible();}protected function loadValue() {$this->value = array();}protected function loadValueByTypeName($_sTypeName = '') {$vb3d22b06afa2487fe5ed4f0f3919aa83   = XMLFactory::getInstance()->getProxy($this->store)->getNodeTree('/umi/values/value[@obj_id='.$this->object_id.' and @field_id='.$this->field_id.']');$v44b09c0a4f0bbe932cce0cea40ccba35   = array();if($this->getIsMultiple()) {if(!empty($vb3d22b06afa2487fe5ed4f0f3919aa83['value']))    foreach($vb3d22b06afa2487fe5ed4f0f3919aa83['value'] as $vc2cb0161ee2f99b1f1d9e42ece4123d5) {$v2b98881e77fb3b8efca9cf7239fc1d19 = $vc2cb0161ee2f99b1f1d9e42ece4123d5['@value'];if($v2b98881e77fb3b8efca9cf7239fc1d19 == null) continue;$v44b09c0a4f0bbe932cce0cea40ccba35[] = $v2b98881e77fb3b8efca9cf7239fc1d19;}}else {if(isset($vb3d22b06afa2487fe5ed4f0f3919aa83['value'])) {$v44b09c0a4f0bbe932cce0cea40ccba35[] = $vb3d22b06afa2487fe5ed4f0f3919aa83['value'][0]['@value'];}}return $v44b09c0a4f0bbe932cce0cea40ccba35;}protected function save() {return $this->saveValue();}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$this->saveValueByTypeName('', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}protected function deleteCurrentRows() {if($this->StoreProxy instanceof XMLProxy)    $this->StoreProxy->removeElement('/umi/values/value[@obj_id='.$this->object_id.' and @field_id='.$this->field_id.']');}protected function saveValueByTypeName($_TypeName, $_Val) {$v689202409e48743b914713f96d93947c = $this->StoreProxy->addElement('/umi/values','value','');$v689202409e48743b914713f96d93947c->setAttribute(  'obj_id',   $this->object_id);$v689202409e48743b914713f96d93947c->setAttribute('field_id',   $this->field_id);$v689202409e48743b914713f96d93947c->setValue($_Val);$this->StoreProxy->saveFile();}protected function fillNull($v800dcfbeb699822f1a2247373659c5d6 = NULL) {return true;$v4a8a08f09d37b73795649038408b5f33 = $this->StoreProxy->getCount('/umi/values/value[@obj_id='.$this->object_id.' and @field_id='.$this->field_id.']');if($v4a8a08f09d37b73795649038408b5f33 == 0) {$v689202409e48743b914713f96d93947c = $this->StoreProxy->addElement('/umi/values', 'value');$v689202409e48743b914713f96d93947c->obj_id   = $this->object_id;$v689202409e48743b914713f96d93947c->field_id = $this->field_id;}return true;}public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = ($vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = umiObjectProperty::filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21);if(cmsController::getInstance()->getCurrentMode() != "admin"  && !self::$IGNORE_FILTER_INPUT_STRING) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#37;", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {if(cmsController::getInstance()->getCurrentMode() == "admin") {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#037;", $vb45cffe084dd3d20d928bee85e7b0f21);}else {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("&#037;", "%", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("]]>", "]]&gt;", $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function setObjectIsUpdated() {if($va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject()) {$va8cfde6331bd59eb2ac96f8911c4b666->setIsUpdated();return true;}else {return false;}}public function getObject() {return umiObjectsCollection::getInstance()->getObject($this->object_id);}public function getObjectId() {return $this->object_id;}public function getField() {return $this->field;}protected static function getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910];}$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v833750ac635fcc57dc33ecafe365f9a7 = umiFieldTypesCollection::getInstance()->getFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);$v5fd6df40d7c4dd7f503475344d8c145c = $v833750ac635fcc57dc33ecafe365f9a7->getDataType();$v8f7cd34efac0926458bbd05f62c13001 = Array(    'relation' => 'umiObjectPropertyRelation',    'wysiwyg' => 'umiObjectPropertyWYSIWYG',    'string' => 'umiObjectPropertyString',    'file' => 'umiObjectPropertyFile',    'img_file' => 'umiObjectPropertyImgFile',    'swf_file' => 'umiObjectPropertyImgFile',    'boolean' => 'umiObjectPropertyBoolean',    'int' => 'umiObjectPropertyInt',    'text' => 'umiObjectPropertyText',    'date' => 'umiObjectPropertyDate',    'symlink' => 'umiObjectPropertySymlink',    'price' => 'umiObjectPropertyPrice',    'float' => 'umiObjectPropertyFloat',    'tags' => 'umiObjectPropertyTags',    'password' => 'umiObjectPropertyPassword'   );if(isset($v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910] = $v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c];}else {throw new coreException("Unhandled field of type \"{$v5fd6df40d7c4dd7f503475344d8c145c}\"");}}protected static function data_type_by_field_id($v0f728ec6147eaec54f5f45e37bce8ddd) {$vf075216e33aab95cfd5462f90f0638df = 0;$v1704117a068ad701515a2ea14b45213e = umiFieldsCollection::getInstance()->getField($v0f728ec6147eaec54f5f45e37bce8ddd);if (!($v1704117a068ad701515a2ea14b45213e instanceof umiField)) {$vf075216e33aab95cfd5462f90f0638df = -1;}else {$v5833713f8ee40674826c37dd2fe1af4c = $v1704117a068ad701515a2ea14b45213e->getFieldTypeId();$v2f266c70c57243c9e9c35988b9bc96e6 = umiFieldTypesCollection::getInstance()->getFieldType($v5833713f8ee40674826c37dd2fe1af4c);if (!($v2f266c70c57243c9e9c35988b9bc96e6 instanceof umiFieldType)) {$vf075216e33aab95cfd5462f90f0638df = -2;}else {$vf075216e33aab95cfd5462f90f0638df = $v2f266c70c57243c9e9c35988b9bc96e6->getDataType();}}return $vf075216e33aab95cfd5462f90f0638df;}protected static function col_name_by_data_type($ve44680d1f24a1092f6c94b0b12bac7f3) {$v8ae9391858dfdc11dbd8f15cf9b04a26 = '';switch ($ve44680d1f24a1092f6c94b0b12bac7f3) {case 'int': case 'boolean': case 'date': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'int_val';break;case 'price': case 'float': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'float_val';break;case 'string': case 'password': case 'tags': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'varchar_val';break;case 'text': case 'wysiwyg': case 'img_file': case 'swf_file': case 'file': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'text_val';break;case 'relation': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'rel_val';break;case 'symlink': $v8ae9391858dfdc11dbd8f15cf9b04a26 = 'tree_val';break;default:     break;}return $v8ae9391858dfdc11dbd8f15cf9b04a26;}public static function objectsByValue($v0f728ec6147eaec54f5f45e37bce8ddd, $v2ef4385ee1f18f02679161fef2b094d9 = NULL, $v95fc2db4375309c569794b723adc3972 = false, $vf80384e7987156531edaa3afd549957d = true, $v8ef57923ab3049b18fb75541ff476ff7 = NULL) {throw new coreException("Not implemented yet");}}class umiObjectPropertyBoolean extends umiObjectProperty {protected function loadValue() {$vf09cc7ee3a9a93273f4b80601cafb00c = $this->loadValueByTypeName('int_val');$v9b207167e5381c47682c6b4f58a623fb    = array();foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) $v9b207167e5381c47682c6b4f58a623fb[] = ($v3a6d0284e743dc4a9b86f97d6dd1a3bf)?true:false;return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;$this->saveValueByTypeName('int_val', (int)$v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyImgFile extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = array();$vf09cc7ee3a9a93273f4b80601cafb00c = $this->loadValueByTypeName('text_val');foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$vb798abe6e1b1318ee36b0dcb3fb9e4d3 = new umiImageFile(self::filterOutputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf));if($vb798abe6e1b1318ee36b0dcb3fb9e4d3->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $vb798abe6e1b1318ee36b0dcb3fb9e4d3;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = ($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath());}else {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = ($v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->saveValueByTypeName('text_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyRelation extends umiObjectProperty {protected function loadValue() {return $this->loadValueByTypeName('rel_val');}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}$vfa816edb83e95bf0c8da580bdfd491ef = Array();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && strpos($v3a6d0284e743dc4a9b86f97d6dd1a3bf, "|") !== false) {$v2e3a8d3f3d1c742f7234c3d6dd74cc3c = split("\|", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);foreach($v2e3a8d3f3d1c742f7234c3d6dd74cc3c as $v9e3669d19b675bd57058fd4664205d2a) {$v9e3669d19b675bd57058fd4664205d2a = trim($v9e3669d19b675bd57058fd4664205d2a);if($v9e3669d19b675bd57058fd4664205d2a) $vfa816edb83e95bf0c8da580bdfd491ef[] = $v9e3669d19b675bd57058fd4664205d2a;unset($v9e3669d19b675bd57058fd4664205d2a);}unset($v2e3a8d3f3d1c742f7234c3d6dd74cc3c);$this->getField()->setFieldTypeId(7);}else {$vfa816edb83e95bf0c8da580bdfd491ef[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}$this->value = $vfa816edb83e95bf0c8da580bdfd491ef;unset($vfa816edb83e95bf0c8da580bdfd491ef);$ve23ef6e93b070c8d28adc485c1f13b73 = self::$USE_FORCE_OBJECTS_CREATION;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objects.xml');foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v3a6d0284e743dc4a9b86f97d6dd1a3bf->getId();}else {if(is_numeric($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && umiObjectsCollection::getInstance()->isExists($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && !$ve23ef6e93b070c8d28adc485c1f13b73) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}else {if($v051369818a8073bba5feeb0e957eb308 = $this->field->getGuideId()) {$vbb4744ed1cc7cb81da0e8cdd2e483cba = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objects/object[@type_id='.$v051369818a8073bba5feeb0e957eb308." and text()='".$vbb4744ed1cc7cb81da0e8cdd2e483cba."']", 'id');if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf = umiObjectsCollection::getInstance()->addObject($vbb4744ed1cc7cb81da0e8cdd2e483cba, $v051369818a8073bba5feeb0e957eb308)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}else {throw new coreException("Can't create guide item");return false;}}}else {continue;}}}if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$this->saveValueByTypeName('rel_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyTags extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('varchar_val');foreach($v9b207167e5381c47682c6b4f58a623fb as &$v341be97d9aff90c9978347f66f945b77) $v341be97d9aff90c9978347f66f945b77 = self::filterOutputString((string)$v341be97d9aff90c9978347f66f945b77);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(sizeof($this->value) == 1) {$v2063c1608d6e0baf80249c42e2be5804 =  split(",", preg_replace("[^\w, ]", "", trim($this->value[0], ",")));}else {$v2063c1608d6e0baf80249c42e2be5804 = array_map( create_function('$a', " return preg_replace(\"[^\\w, ]\", \"\", \$a); ") , $this->value);}foreach($v2063c1608d6e0baf80249c42e2be5804 as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = trim($v3a6d0284e743dc4a9b86f97d6dd1a3bf);if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->saveValueByTypeName('varchar_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyDate extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$vf09cc7ee3a9a93273f4b80601cafb00c = $this->loadValueByTypeName('int_val');foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v9b207167e5381c47682c6b4f58a623fb[] = new umiDate((int)$v3a6d0284e743dc4a9b86f97d6dd1a3bf);}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) ? (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf->timestamp : (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;$this->saveValueByTypeName('int_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$v012a31a21ca1fe67361f204ae9e3e55d = (is_array($this->value) ? count($this->value) : -1);$this->fillNull();}};class umiObjectPropertyInt extends umiObjectProperty {protected function loadValue() {return $this->loadValueByTypeName('int_val');}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;$this->saveValueByTypeName('int_val', (int)$v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyString extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('varchar_val');foreach($v9b207167e5381c47682c6b4f58a623fb as &$v341be97d9aff90c9978347f66f945b77) $v341be97d9aff90c9978347f66f945b77 = self::filterOutputString((string)$v341be97d9aff90c9978347f66f945b77);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->saveValueByTypeName('varchar_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}}class umiObjectPropertyText extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('text_val');foreach($v9b207167e5381c47682c6b4f58a623fb as &$v341be97d9aff90c9978347f66f945b77) $v341be97d9aff90c9978347f66f945b77 = self::filterOutputString((string)$v341be97d9aff90c9978347f66f945b77);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf == "<p />" || $v3a6d0284e743dc4a9b86f97d6dd1a3bf == "&nbsp;") $v3a6d0284e743dc4a9b86f97d6dd1a3bf = "";$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->saveValueByTypeName('text_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}public function __wakeup() {foreach($this->value as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if(is_string($v9e3669d19b675bd57058fd4664205d2a)) {$this->value[$v865c0c0b4ab0e063e5caa3387c1a8741] = str_replace("&#037;", "%", $v9e3669d19b675bd57058fd4664205d2a);}}}};class umiObjectPropertyFile extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$vf09cc7ee3a9a93273f4b80601cafb00c = $this->loadValueByTypeName('text_val');foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v8c7dd922ad47494fc02c388e12c00eac = new umiFile($v3a6d0284e743dc4a9b86f97d6dd1a3bf);if($v8c7dd922ad47494fc02c388e12c00eac->getIsBroken()) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8c7dd922ad47494fc02c388e12c00eac;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = ($v3a6d0284e743dc4a9b86f97d6dd1a3bf->getFilePath());}else {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = ($v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->saveValueByTypeName('text_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyPassword extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('varchar_val');foreach($v9b207167e5381c47682c6b4f58a623fb as &$v341be97d9aff90c9978347f66f945b77) $v341be97d9aff90c9978347f66f945b77 = self::filterOutputString((string)$v341be97d9aff90c9978347f66f945b77);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(strlen($v3a6d0284e743dc4a9b86f97d6dd1a3bf) == 0) continue;$this->deleteCurrentRows();$v3a6d0284e743dc4a9b86f97d6dd1a3bf = self::filterInputString($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->saveValueByTypeName('varchar_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyWYSIWYG extends umiObjectPropertyText {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('text_val');foreach($v9b207167e5381c47682c6b4f58a623fb as &$v341be97d9aff90c9978347f66f945b77) {if(str_replace("&nbsp;", "", trim($v341be97d9aff90c9978347f66f945b77)) == "") continue;$v341be97d9aff90c9978347f66f945b77 = self::filterOutputString((string)$v341be97d9aff90c9978347f66f945b77);}return $v9b207167e5381c47682c6b4f58a623fb;}};class umiObjectPropertyFloat extends umiObjectProperty {protected function loadValue() {return $this->loadValueByTypeName('float_val');}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(strpos(".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf) === false) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace(",", ".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->saveValueByTypeName('float_val', (float)$v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};class umiObjectPropertyPrice extends umiObjectPropertyFloat {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = $this->loadValueByTypeName('float_val');if($v3766293ae0857925595a6f0bf40531a8 = cmsController::getInstance()->getModule("eshop")) {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = is_array($v9b207167e5381c47682c6b4f58a623fb) && count($v9b207167e5381c47682c6b4f58a623fb) ? $v9b207167e5381c47682c6b4f58a623fb[0] : $v9b207167e5381c47682c6b4f58a623fb;$v78a5eb43deef9a7b5b9ce157b9d52ac4 = $v3766293ae0857925595a6f0bf40531a8->calculateDiscount($this->object_id, $v78a5eb43deef9a7b5b9ce157b9d52ac4);$v9b207167e5381c47682c6b4f58a623fb = Array($v78a5eb43deef9a7b5b9ce157b9d52ac4);}list($v78a5eb43deef9a7b5b9ce157b9d52ac4) = $v9b207167e5381c47682c6b4f58a623fb;$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("umiObjectProperty_loadPriceValue");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("object_id", $this->object_id);$v161c9aaa4fe035e7b2f465bc59f3ab45->addRef("price", $v78a5eb43deef9a7b5b9ce157b9d52ac4);$v161c9aaa4fe035e7b2f465bc59f3ab45->call();$v9b207167e5381c47682c6b4f58a623fb = Array($v78a5eb43deef9a7b5b9ce157b9d52ac4);return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(strpos(".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf) === false) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace(",", ".", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);$v3a6d0284e743dc4a9b86f97d6dd1a3bf = abs((float)$v3a6d0284e743dc4a9b86f97d6dd1a3bf);if($v3a6d0284e743dc4a9b86f97d6dd1a3bf > 9999999.99) $v3a6d0284e743dc4a9b86f97d6dd1a3bf = 9999999.99;$this->saveValueByTypeName('float_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}public function __wakeup() {$this->value = $this->loadValue();}};class umiObjectPropertySymlink extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$vf09cc7ee3a9a93273f4b80601cafb00c = $this->loadValueByTypeName('tree_val');foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement( (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf );if($v8e2dcfd7e7e24b1ca76c1193f645902b === false) continue;if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive() == false) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v8e2dcfd7e7e24b1ca76c1193f645902b;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf === false || $v3a6d0284e743dc4a9b86f97d6dd1a3bf === "") continue;if(is_object($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf->getId();}if(is_numeric($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = (int) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$this->saveValueByTypeName('tree_val', $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$this->fillNull();}};interface iUmiObject {public function getName();public function setName($vb068931cc450442b63f5b3d276ea4297);public function getIsLocked();public function setIsLocked($v73b8754d45983f35756b157ea439de8c);public function getTypeId();public function setTypeId($v5f694956811487225d15e973ca38fbab);public function getPropGroupId($va2b861d0e7719d9108522aacfd4181bc);public function getPropGroupByName($va2b861d0e7719d9108522aacfd4181bc);public function getPropGroupById($v47db2588331bbe530c80dd001fc60aed);public function getPropByName($v46b9e6004c49d9cc040029c197cab278);public function getPropById($vdfcdd018a7fc531ad77b18e3534bf4ae);public function isPropertyExists($vb80bb7740288fda1f201890375a60c8f);public function getValue($v46b9e6004c49d9cc040029c197cab278);public function setValue($v46b9e6004c49d9cc040029c197cab278, $vafd40dce490ea113be83c89ca7f3052d);public function setOwnerId($vb0ab4f7791b60b1e8ea01057b77873b0);public function getOwnerId();}class umiObject extends umiEntinty implements iUmiEntinty, iUmiObject {private $name, $type_id, $is_locked, $owner_id = false,   $type, $properties = Array(), $prop_groups = Array();protected $store_type = "object";public function getName() {return $this->translateLabel($this->name);}public function getTypeId() {return $this->type_id;}public function getIsLocked() {return $this->is_locked;}public function setName($vb068931cc450442b63f5b3d276ea4297) {if ($this->name !== $vb068931cc450442b63f5b3d276ea4297) {if(($this->translateLabel($this->name) != $this->name)) {$vb068931cc450442b63f5b3d276ea4297 = $this->translateI18n($vb068931cc450442b63f5b3d276ea4297);}$this->name = $vb068931cc450442b63f5b3d276ea4297;$this->setIsUpdated();}}public function setTypeId($v94757cae63fd3e398c0811a976dd6bbe) {if ($this->type_id !== $v94757cae63fd3e398c0811a976dd6bbe) {$this->type_id = $v94757cae63fd3e398c0811a976dd6bbe;$this->setIsUpdated();}return true;}public function setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb) {if ($this->is_locked !== ((bool) $v1945c9a2a5e2ba6133f1db6757a35fcb)) {$this->is_locked = (bool) $v1945c9a2a5e2ba6133f1db6757a35fcb;$this->setIsUpdated();}}public function setOwnerId($vb0ab4f7791b60b1e8ea01057b77873b0) {if(!is_null($vb0ab4f7791b60b1e8ea01057b77873b0) and umiObjectsCollection::getInstance()->isExists($vb0ab4f7791b60b1e8ea01057b77873b0)) {if ($this->owner_id !== $vb0ab4f7791b60b1e8ea01057b77873b0) {$this->owner_id = $vb0ab4f7791b60b1e8ea01057b77873b0;$this->setIsUpdated();}return true;}else {if (!is_null($this->owner_id)) {$this->owner_id = NULL;$this->setIsUpdated();}return false;}}public function getOwnerId() {return $this->owner_id;}protected function save() {if ($this->is_updated) {$vb068931cc450442b63f5b3d276ea4297      = umiObjectProperty::filterInputString($this->name);$v94757cae63fd3e398c0811a976dd6bbe   = (int) $this->type_id;$v1945c9a2a5e2ba6133f1db6757a35fcb = (int) $this->is_locked;$v5e7b19364b8de2dedd3aa48cf62706e3  = (int) $this->owner_id;$vd82f268d5a82fc66260ad083d1a2e5b4   = XMLFactory::getInstance()->getProxy('objects.xml')->getElement('/umi/objects/object[@id='.$this->id.']');$vd82f268d5a82fc66260ad083d1a2e5b4->setValue($vb068931cc450442b63f5b3d276ea4297);$vd82f268d5a82fc66260ad083d1a2e5b4->type_id   = (int) $this->type_id;$vd82f268d5a82fc66260ad083d1a2e5b4->is_locked = (int) $this->is_locked;$vd82f268d5a82fc66260ad083d1a2e5b4->owner_id  = (int) $this->owner_id;foreach($this->properties as $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) $v23a5b8ab834cb5140fa6665622eb6417->commit();}$this->setIsUpdated(false);}return true;}protected function loadInfo() {$vd82f268d5a82fc66260ad083d1a2e5b4 = XMLFactory::getInstance()->getProxy('objects.xml')->getElement('/umi/objects/object[@id='.$this->id.']');if(!$vd82f268d5a82fc66260ad083d1a2e5b4->type_id) {umiObjectsCollection::getInstance()->delObject($this->id);return false;}$this->name      = $vd82f268d5a82fc66260ad083d1a2e5b4->getValue();$this->type_id   = (int)  $vd82f268d5a82fc66260ad083d1a2e5b4->type_id;$this->is_locked = (bool) $vd82f268d5a82fc66260ad083d1a2e5b4->is_locked;$this->owner_id  = (int)  $vd82f268d5a82fc66260ad083d1a2e5b4->owner_id;return $this->loadType();}private function loadType() {$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($this->type_id);if(!$v599dcce2998a6b40b1e38e8c6006cb0a) {throw new coreException("Can't load type in object's init");return false;}$this->type = $v599dcce2998a6b40b1e38e8c6006cb0a;return $this->loadProperties();}private function loadProperties() {$v599dcce2998a6b40b1e38e8c6006cb0a = $this->type;$v041f36f9e13e5473c5b995506bad2aaa = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroupsList();foreach($v041f36f9e13e5473c5b995506bad2aaa as $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getIsActive() == false) continue;$vd05b6ed7d2345020440df396d6da7f73 = $vdb0f6f37ebeb6ea09489124345af2a45->getFields();$this->prop_groups[$vdb0f6f37ebeb6ea09489124345af2a45->getId()] = Array();foreach($vd05b6ed7d2345020440df396d6da7f73 as $v06e3d36fa30cea095545139854ad1fb9) {$this->properties[$v06e3d36fa30cea095545139854ad1fb9->getId()] = $v06e3d36fa30cea095545139854ad1fb9->getName();$this->prop_groups[$vdb0f6f37ebeb6ea09489124345af2a45->getId()][] = $v06e3d36fa30cea095545139854ad1fb9->getId();}}}public function getPropByName($vdfc394bd05a4b48161c790034af522a8) {$vdfc394bd05a4b48161c790034af522a8 = strtolower($vdfc394bd05a4b48161c790034af522a8);foreach($this->properties as $v3aabf39f2d943fa886d86dcbbee4d910 => $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) {if($v23a5b8ab834cb5140fa6665622eb6417->getName() == $vdfc394bd05a4b48161c790034af522a8) {return $v23a5b8ab834cb5140fa6665622eb6417;}}else {if($v23a5b8ab834cb5140fa6665622eb6417 == $vdfc394bd05a4b48161c790034af522a8) {$v23a5b8ab834cb5140fa6665622eb6417 = cacheFrontend::getInstance()->load($this->id . "." . $v3aabf39f2d943fa886d86dcbbee4d910, "property");if($v23a5b8ab834cb5140fa6665622eb6417 instanceof umiObjectProperty == false) {$v23a5b8ab834cb5140fa6665622eb6417 = umiObjectProperty::getProperty($this->id, $v3aabf39f2d943fa886d86dcbbee4d910, $this->type_id);cacheFrontend::getInstance()->save($v23a5b8ab834cb5140fa6665622eb6417, "property");}$this->properties[$v3aabf39f2d943fa886d86dcbbee4d910] = $v23a5b8ab834cb5140fa6665622eb6417;return $v23a5b8ab834cb5140fa6665622eb6417;}}}return NULL;}public function getPropById($v3aabf39f2d943fa886d86dcbbee4d910) {if(!$this->isPropertyExists($v3aabf39f2d943fa886d86dcbbee4d910)) {return NULL;}else {if(!is_object($this->properties)) {if($v23a5b8ab834cb5140fa6665622eb6417 = cacheFrontend::getInstance()->load($this->id . "." . $v3aabf39f2d943fa886d86dcbbee4d910, "property")) {}else {$v23a5b8ab834cb5140fa6665622eb6417 = umiObjectProperty::getProperty($this->id, $v3aabf39f2d943fa886d86dcbbee4d910, $this->type_id);cacheFrontend::getInstance()->save($v23a5b8ab834cb5140fa6665622eb6417, "property");}$this->properties[$v3aabf39f2d943fa886d86dcbbee4d910] = $v23a5b8ab834cb5140fa6665622eb6417;}return $this->properties[$v3aabf39f2d943fa886d86dcbbee4d910];}}public function isPropertyExists($v3aabf39f2d943fa886d86dcbbee4d910) {return (bool) array_key_exists($v3aabf39f2d943fa886d86dcbbee4d910, $this->properties);}public function isPropGroupExists($vb78a51df08ebf5c0b87001c180e3c2ab) {return (bool) array_key_exists($vb78a51df08ebf5c0b87001c180e3c2ab, $this->prop_groups);}public function getPropGroupId($v630d7459cbc61bfef50b1a0fff2ea42e) {$v041f36f9e13e5473c5b995506bad2aaa = $this->type->getFieldsGroupsList();foreach($v041f36f9e13e5473c5b995506bad2aaa as $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45->getName() == $v630d7459cbc61bfef50b1a0fff2ea42e) {return $vdb0f6f37ebeb6ea09489124345af2a45->getId();}}return false;}public function getPropGroupByName($v630d7459cbc61bfef50b1a0fff2ea42e) {$v041f36f9e13e5473c5b995506bad2aaa = $this->type->getFieldsGroupsList();if($v0e939a4ffd3aacd724dd3b50147b4353 = $this->getPropGroupId($v630d7459cbc61bfef50b1a0fff2ea42e)) {return $this->getPropGroupById($v0e939a4ffd3aacd724dd3b50147b4353);}else {return false;}}public function getPropGroupById($vb78a51df08ebf5c0b87001c180e3c2ab) {if($this->isPropGroupExists($vb78a51df08ebf5c0b87001c180e3c2ab)) {return $this->prop_groups[$vb78a51df08ebf5c0b87001c180e3c2ab];}else {return false;}}public function getValue($vdfc394bd05a4b48161c790034af522a8) {if($v23a5b8ab834cb5140fa6665622eb6417 = $this->getPropByName($vdfc394bd05a4b48161c790034af522a8)) {return $v23a5b8ab834cb5140fa6665622eb6417->getValue();}else {return false;}}public function setValue($vdfc394bd05a4b48161c790034af522a8, $v2771be291c4a714ca95fd1f45a32403e) {if($v23a5b8ab834cb5140fa6665622eb6417 = $this->getPropByName($vdfc394bd05a4b48161c790034af522a8)) {$this->setIsUpdated();return $v23a5b8ab834cb5140fa6665622eb6417->setValue($v2771be291c4a714ca95fd1f45a32403e);}else {return false;}}public function commit() {foreach($this->properties as $v23a5b8ab834cb5140fa6665622eb6417) {if(is_object($v23a5b8ab834cb5140fa6665622eb6417)) {$v23a5b8ab834cb5140fa6665622eb6417->commit();}}parent::commit();}public function setIsUpdated($v8de61324edc43f3acb1b73da3c63e89e = true) {umiObjectsCollection::getInstance()->addUpdatedObjectId($this->id);return parent::setIsUpdated($v8de61324edc43f3acb1b73da3c63e89e);}}interface iUmiFieldTypesCollection {public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v870b60148237c1452dfb337fdd19c314 = "string", $v09ec737a9ab66d1d796304239d3f8a86 = false, $va4e397efa082dcccc62563f1f2d9513b = false);public function delFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);public function getFieldTypesList();}class umiFieldTypesCollection extends singleton implements iSingleton, iUmiFieldTypesCollection {private $field_types = Array();protected function __construct() {$this->loadFieldTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v17f71d965fe9589ddbd11caf7182243e = "string", $v96a76ec43956dac431b643cbd544dd08 = false, $vf089d93c2ef0d088edadddb0028d548d = false) {if(!umiFieldType::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {throw new coreException("Not valid data type given");return false;}$v48b8e11252203b3b99c58dd5a07776c1         = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v1e3f04102267eaf5e8d0ca424fd5c561  = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldtypes/fieldtype[last()]', 'id') + 1;$v524fbbd9172775c142a35990c34e727f       = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/fieldtypes', 'fieldtype', '');$v524fbbd9172775c142a35990c34e727f->id   = $v1e3f04102267eaf5e8d0ca424fd5c561;$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v519504d7d4beb745dac24ccfb6c1d7c9->setName($vb068931cc450442b63f5b3d276ea4297);$v519504d7d4beb745dac24ccfb6c1d7c9->setDataType($v17f71d965fe9589ddbd11caf7182243e);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsMultiple($v96a76ec43956dac431b643cbd544dd08);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsUnsigned($vf089d93c2ef0d088edadddb0028d548d);$v519504d7d4beb745dac24ccfb6c1d7c9->commit();$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;return $v1e3f04102267eaf5e8d0ca424fd5c561;}public function delFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {$v1e3f04102267eaf5e8d0ca424fd5c561 = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;XMLFactory::getInstance()->getProxy('objectsdef.xml')->removeElement('/umi/fieldtypes/fieldtype[@id='.$v1e3f04102267eaf5e8d0ca424fd5c561.']');unset($this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561]);return true;}else {return false;}}public function getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {return $this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561];}else {return false;}}public function isExists($v1e3f04102267eaf5e8d0ca424fd5c561) {return (bool) array_key_exists($v1e3f04102267eaf5e8d0ca424fd5c561, $this->field_types);}private function loadFieldTypes() {$v6870514814c1b2f69895dc65159e9f98 = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getNodeTree("/umi/fieldtypes");if(!empty($v6870514814c1b2f69895dc65159e9f98))               foreach($v6870514814c1b2f69895dc65159e9f98['fieldtypes'][0]['fieldtype'] as $v12403f19a505a2da6eb79acec05ad6a2) {$v1e3f04102267eaf5e8d0ca424fd5c561 = $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['id'];$vf1965a857bc285d26fe22023aa5ab50d = array($v12403f19a505a2da6eb79acec05ad6a2['@attributes']['id'],                              $v12403f19a505a2da6eb79acec05ad6a2['@value'],                              $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['data_type'],                              $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['is_multiple'],                              $v12403f19a505a2da6eb79acec05ad6a2['@attributes']['is_unsigned']);if($v519504d7d4beb745dac24ccfb6c1d7c9 = cacheFrontend::getInstance()->load($v1e3f04102267eaf5e8d0ca424fd5c561, "field_type")) {}else {try {$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}cacheFrontend::getInstance()->save($v519504d7d4beb745dac24ccfb6c1d7c9, "field_type");}$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;}return true;}public function getFieldTypesList() {return $this->field_types;}}interface iUmiFieldsCollection {public function addField($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $ve2aeb4e882d60b1eb4b7c8cd97986a28, $v19fad0416b4b101ab72faccf4c323024 = true, $v73b8754d45983f35756b157ea439de8c = false, $v55e0eccc570671ca7ba7f5ef4ded0b96 = false);public function delField($v3aabf39f2d943fa886d86dcbbee4d910);public function getField($v945100186b119048837b9859c2c46410);}class umiFieldsCollection extends singleton implements iSingleton, iUmiFieldsCollection {private $fields = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d = false) {if($this->isExists($v3aabf39f2d943fa886d86dcbbee4d910)) {return $this->fields[$v3aabf39f2d943fa886d86dcbbee4d910];}else {return $this->loadField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d);}}public function delField($v3aabf39f2d943fa886d86dcbbee4d910) {if($this->isExists($v3aabf39f2d943fa886d86dcbbee4d910)) {XMLFactory::getInstance()->getProxy('objectsdef.xml')->removeElement('/umi/fields/field[@id='.$v3aabf39f2d943fa886d86dcbbee4d910.']');unset($this->fields[$v3aabf39f2d943fa886d86dcbbee4d910]);return true;}else {return false;}}public function addField($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1e3f04102267eaf5e8d0ca424fd5c561, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = true, $v1945c9a2a5e2ba6133f1db6757a35fcb = false, $vd5752333adc3a004f826f2ea2a41273a = false) {$v48b8e11252203b3b99c58dd5a07776c1    = XMLFactory::getInstance()->getProxy("objectsdef.xml");$v3aabf39f2d943fa886d86dcbbee4d910  = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue("/umi/fields/field[last()]", "id") + 1;$vece9a5741f5526a8bf46b1bb2cc4a3ee = $v48b8e11252203b3b99c58dd5a07776c1->addElement("/umi/fields", "field", "");$vece9a5741f5526a8bf46b1bb2cc4a3ee->id = $v3aabf39f2d943fa886d86dcbbee4d910;$v06e3d36fa30cea095545139854ad1fb9 = new umiField($v3aabf39f2d943fa886d86dcbbee4d910);$v06e3d36fa30cea095545139854ad1fb9->setName($vb068931cc450442b63f5b3d276ea4297);$v06e3d36fa30cea095545139854ad1fb9->setTitle($vd5d3db1765287eef77d7927cc956f50a);if(!$v06e3d36fa30cea095545139854ad1fb9->setFieldTypeId($v1e3f04102267eaf5e8d0ca424fd5c561)) return false;$v06e3d36fa30cea095545139854ad1fb9->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v06e3d36fa30cea095545139854ad1fb9->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);$v06e3d36fa30cea095545139854ad1fb9->setIsInheritable($vd5752333adc3a004f826f2ea2a41273a);if(!$v06e3d36fa30cea095545139854ad1fb9->commit()) return false;$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;return $v3aabf39f2d943fa886d86dcbbee4d910;}public function isExists($v3aabf39f2d943fa886d86dcbbee4d910) {return (bool) array_key_exists((string)$v3aabf39f2d943fa886d86dcbbee4d910, $this->fields);}private function loadField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d) {if($v06e3d36fa30cea095545139854ad1fb9 = cacheFrontend::getInstance()->load($v3aabf39f2d943fa886d86dcbbee4d910, "field")) {}else {try {$v06e3d36fa30cea095545139854ad1fb9 = new umiField($v3aabf39f2d943fa886d86dcbbee4d910, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($v06e3d36fa30cea095545139854ad1fb9, "field");}if($v06e3d36fa30cea095545139854ad1fb9 instanceof iUmiField) {$this->fields[$v3aabf39f2d943fa886d86dcbbee4d910] = $v06e3d36fa30cea095545139854ad1fb9;return $this->fields[$v3aabf39f2d943fa886d86dcbbee4d910];}else {return false;}}}interface iUmiObjectTypesCollection {public function addType($vbfa030fe63bacd523dd70a76cfaed98a, $vb068931cc450442b63f5b3d276ea4297, $v73b8754d45983f35756b157ea439de8c = false);public function delType($v5f694956811487225d15e973ca38fbab);public function getType($v5f694956811487225d15e973ca38fbab);public function getSubTypesList($v5f694956811487225d15e973ca38fbab);public function getParentClassId($v5f694956811487225d15e973ca38fbab);public function getChildClasses($v5f694956811487225d15e973ca38fbab);public function getGuidesList($v848510e91f02f04fc5edf94f85f248d8 = false);public function getTypesByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631, $v35507ea46d2c0b049d7ed968c449223d = false);public function getTypeByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631, $v35507ea46d2c0b049d7ed968c449223d = false);public function getBaseType($v84aa805a9d919179ab8f8b24376e2ed7, $v4c2f1ec2014300ad2af17410a4adc3e1 = "");}class umiObjectTypesCollection extends singleton implements iSingleton, iUmiObjectTypesCollection {private $types = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->types[$v94757cae63fd3e398c0811a976dd6bbe];}else {if(true) {$this->loadType($v94757cae63fd3e398c0811a976dd6bbe);return $this->types[$v94757cae63fd3e398c0811a976dd6bbe];}else {return false;}}throw new coreException("Unknow error");}public function addType($v6be379826b20cc58475f636e33f4606b, $vb068931cc450442b63f5b3d276ea4297, $v1945c9a2a5e2ba6133f1db6757a35fcb = false) {$v6be379826b20cc58475f636e33f4606b = (int) $v6be379826b20cc58475f636e33f4606b;$v48b8e11252203b3b99c58dd5a07776c1 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v94757cae63fd3e398c0811a976dd6bbe = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objecttypes/objecttype[not(@id <= preceding-sibling::objecttype/@id) and not(@id <=following-sibling::objecttype/@id)]','id') + 1;$v231afe47f3f37d3808096b36c28b4ded = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/fieldgroups', 'fieldgroup', '');$v231afe47f3f37d3808096b36c28b4ded->id = $v94757cae63fd3e398c0811a976dd6bbe;$v231afe47f3f37d3808096b36c28b4ded->parent_id = $v6be379826b20cc58475f636e33f4606b;$v9f603482a3512b98ada9fdb672e14501 = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldgroups/fieldgroup[@type_id='.$v6be379826b20cc58475f636e33f4606b.']');$v5f2444d49c5d43b9cf7a3d7174b983f1 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/fieldgroups/fieldgroup[not(@id <= preceding-sibling::fieldgroup/@id) and not(@id <=following-sibling::fieldgroup/@id)]','id');foreach($v9f603482a3512b98ada9fdb672e14501 as $v03937134cedab9078be39a77ee3a48a0) {$v5f2444d49c5d43b9cf7a3d7174b983f1++;$vcaff3ae39026d4531d1417e93d4c130f = $v03937134cedab9078be39a77ee3a48a0->cloneSelf();$vcaff3ae39026d4531d1417e93d4c130f->id = $v5f2444d49c5d43b9cf7a3d7174b983f1;$v3da732528976622659178e861359734d = $v48b8e11252203b3b99c58dd5a07776c1->getElementsArray('/umi/fieldcontroller/conn[@group_id='.$v03937134cedab9078be39a77ee3a48a0->id.']');foreach($v3da732528976622659178e861359734d as $va32417899e2db4290fb0d3634d33c9a3) $va32417899e2db4290fb0d3634d33c9a3->cloneSelf()->group_id = $v5f2444d49c5d43b9cf7a3d7174b983f1;}XMLFactory::getInstance()->createFile('objectcontent/'.$v94757cae63fd3e398c0811a976dd6bbe.'.xml' , "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<umi>\n <values />\n</umi>");$vee085e556579b9a69e64e3eddc559b89 = false;if($v6be379826b20cc58475f636e33f4606b) {$v328a21868fce2b3f8569db40f1aa8a89 = $this->getType($v6be379826b20cc58475f636e33f4606b);if($v328a21868fce2b3f8569db40f1aa8a89) {$vee085e556579b9a69e64e3eddc559b89 = $v328a21868fce2b3f8569db40f1aa8a89->getHierarchyTypeId();}}$v231afe47f3f37d3808096b36c28b4ded     = XMLFactory::getInstance()->getProxy('objectsdef.xml')->addElement('/umi/objecttypes', 'objecttype', '');$v231afe47f3f37d3808096b36c28b4ded->id   = (int) $v94757cae63fd3e398c0811a976dd6bbe;$v231afe47f3f37d3808096b36c28b4ded->parent_id = (int) $v6be379826b20cc58475f636e33f4606b;$v599dcce2998a6b40b1e38e8c6006cb0a = new umiObjectType($v94757cae63fd3e398c0811a976dd6bbe);$v599dcce2998a6b40b1e38e8c6006cb0a->setName($vb068931cc450442b63f5b3d276ea4297);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);if($vee085e556579b9a69e64e3eddc559b89) {$v599dcce2998a6b40b1e38e8c6006cb0a->setHierarchyTypeId($vee085e556579b9a69e64e3eddc559b89);}$v599dcce2998a6b40b1e38e8c6006cb0a->commit();$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return $v94757cae63fd3e398c0811a976dd6bbe;}public function delType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isExists($v94757cae63fd3e398c0811a976dd6bbe)) {$vadce578d04ed03c31f6ac59451fcf8e4 = $this->getChildClasses($v94757cae63fd3e398c0811a976dd6bbe);$vfb85fd8c421b5b0c8f26a38189d7c2a3  = XMLFactory::getInstance()->getProxy('objects.xml');$v215e343e9f534f1fe91ede5a64ddf063 = XMLFactory::getInstance()->getProxy('objectsdef.xml');$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vadce578d04ed03c31f6ac59451fcf8e4);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd4fd255f51559df00de5424b64292413 = $vadce578d04ed03c31f6ac59451fcf8e4[$v865c0c0b4ab0e063e5caa3387c1a8741];if($this->isExists($vd4fd255f51559df00de5424b64292413)) {$vfb85fd8c421b5b0c8f26a38189d7c2a3->removeElement('/umi/objects/object[@type_id='.$vd4fd255f51559df00de5424b64292413.']');$v215e343e9f534f1fe91ede5a64ddf063->removeElement('/umi/objecttypes/objecttype[@id='.$vd4fd255f51559df00de5424b64292413.']');unset($this->types[$vd4fd255f51559df00de5424b64292413]);}}$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$vfb85fd8c421b5b0c8f26a38189d7c2a3->removeElement('/umi/objects/object[@type_id='.$v94757cae63fd3e398c0811a976dd6bbe.']');$v215e343e9f534f1fe91ede5a64ddf063->removeElement('/umi/objecttypes/objecttype[@id='.$v94757cae63fd3e398c0811a976dd6bbe.']');XMLFactory::getInstance()->getProxy('objectcontent/objectmap.xml')->removeElement('/umi/objectmap/entry[@tid='.$v94757cae63fd3e398c0811a976dd6bbe.']');XMLFactory::getInstance()->removeFile('objectcontent/'.$v94757cae63fd3e398c0811a976dd6bbe.'.xml');unset($this->types[$v94757cae63fd3e398c0811a976dd6bbe]);return true;}else {return false;}}public function isExists($v94757cae63fd3e398c0811a976dd6bbe) {return true;}private function isLoaded($v94757cae63fd3e398c0811a976dd6bbe) {if(!intval($v94757cae63fd3e398c0811a976dd6bbe)) return false;return (bool) array_key_exists($v94757cae63fd3e398c0811a976dd6bbe, $this->types);}private function loadType($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return true;}else {if($v599dcce2998a6b40b1e38e8c6006cb0a = cacheFrontend::getInstance()->load($v94757cae63fd3e398c0811a976dd6bbe, "object_type")) {}else {try {$v599dcce2998a6b40b1e38e8c6006cb0a = new umiObjectType($v94757cae63fd3e398c0811a976dd6bbe);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($v599dcce2998a6b40b1e38e8c6006cb0a, "object_type");}if(is_object($v599dcce2998a6b40b1e38e8c6006cb0a)) {$this->types[$v94757cae63fd3e398c0811a976dd6bbe] = $v599dcce2998a6b40b1e38e8c6006cb0a;return true;}else {return false;}}}public function getSubTypesList($v94757cae63fd3e398c0811a976dd6bbe) {if(!is_numeric($v94757cae63fd3e398c0811a976dd6bbe)) {throw new coreException("Type id must be numeric");return false;}$v9b207167e5381c47682c6b4f58a623fb = array();$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$v4008c8dae6700f0b8ea250491564fddd  = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElementsArray('/umi/objecttypes/objecttype[@parent_id='.$v94757cae63fd3e398c0811a976dd6bbe.']');foreach($v4008c8dae6700f0b8ea250491564fddd as $va1fa27779242b4902f7ae3bdd5c6d508) {$v9b207167e5381c47682c6b4f58a623fb[] = (int)$va1fa27779242b4902f7ae3bdd5c6d508->id;}return $v9b207167e5381c47682c6b4f58a623fb;}public function getParentClassId($v94757cae63fd3e398c0811a976dd6bbe) {if($this->isLoaded($v94757cae63fd3e398c0811a976dd6bbe)) {return $this->getType($v94757cae63fd3e398c0811a976dd6bbe)->getParentId();}else {$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;return (int)XMLFactory::getInstance()->getProxy('objectsdef.xml')->getAttributeValue('/umi/objecttypes/objecttype[@id='.$v94757cae63fd3e398c0811a976dd6bbe.']', 'parent_id');}}public function getChildClasses($v94757cae63fd3e398c0811a976dd6bbe, $vadce578d04ed03c31f6ac59451fcf8e4 = false) {return array();$v9b207167e5381c47682c6b4f58a623fb = Array();if(!$vadce578d04ed03c31f6ac59451fcf8e4) $vadce578d04ed03c31f6ac59451fcf8e4 = Array();$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$v4008c8dae6700f0b8ea250491564fddd  = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElementsArray('/umi/objecttypes/objecttype[@parent_id='.$v94757cae63fd3e398c0811a976dd6bbe.']');foreach($v4008c8dae6700f0b8ea250491564fddd as $va1fa27779242b4902f7ae3bdd5c6d508) {$vb80bb7740288fda1f201890375a60c8f    = (int)$va1fa27779242b4902f7ae3bdd5c6d508->id;$v9b207167e5381c47682c6b4f58a623fb[] = $vb80bb7740288fda1f201890375a60c8f;if(!in_array($vb80bb7740288fda1f201890375a60c8f, $vadce578d04ed03c31f6ac59451fcf8e4)) $v9b207167e5381c47682c6b4f58a623fb = array_merge($v9b207167e5381c47682c6b4f58a623fb, $this->getChildClasses($vb80bb7740288fda1f201890375a60c8f, $v9b207167e5381c47682c6b4f58a623fb));}$v9b207167e5381c47682c6b4f58a623fb = array_unique($v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}public function getGuidesList($v805ab0374f72d8da46502cbb00c05464 = false) {$v9b207167e5381c47682c6b4f58a623fb = Array();$v4008c8dae6700f0b8ea250491564fddd  = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElementsArray('/umi/objecttypes/objecttype[@is_guidable=1'.(($v805ab0374f72d8da46502cbb00c05464)?' and @is_public=1':'').']');foreach($v4008c8dae6700f0b8ea250491564fddd as $va1fa27779242b4902f7ae3bdd5c6d508) {$v9b207167e5381c47682c6b4f58a623fb[$va1fa27779242b4902f7ae3bdd5c6d508->id] = $this->translateLabel($va1fa27779242b4902f7ae3bdd5c6d508->name);}return $v9b207167e5381c47682c6b4f58a623fb;}public function getTypesByHierarchyTypeId($v0715f6d9497f93911417c9c324265771, $v35507ea46d2c0b049d7ed968c449223d = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771])) return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771];$v4008c8dae6700f0b8ea250491564fddd  = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getElementsArray('/umi/objecttypes/objecttype[@hierarchy_type_id='.$v0715f6d9497f93911417c9c324265771.']');$v9b207167e5381c47682c6b4f58a623fb = array();foreach($v4008c8dae6700f0b8ea250491564fddd as $va1fa27779242b4902f7ae3bdd5c6d508) {$v9b207167e5381c47682c6b4f58a623fb[$va1fa27779242b4902f7ae3bdd5c6d508->id] = $this->translateLabel($va1fa27779242b4902f7ae3bdd5c6d508->name);}return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771] = $v9b207167e5381c47682c6b4f58a623fb;}public function getTypeByHierarchyTypeId($v0715f6d9497f93911417c9c324265771, $v35507ea46d2c0b049d7ed968c449223d = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$v0715f6d9497f93911417c9c324265771 = (int) $v0715f6d9497f93911417c9c324265771;if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771])) return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771];$vb80bb7740288fda1f201890375a60c8f = XMLFactory::getInstance()->getProxy('objectsdef.xml')->getAttributeValue('/umi/objecttypes/objecttype[@hierarchy_type_id='.$v0715f6d9497f93911417c9c324265771.']', 'id');return $v0fea6a13c52b4d4725368f24b045ca84[$v0715f6d9497f93911417c9c324265771] = $vb80bb7740288fda1f201890375a60c8f;}public function getBaseType($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca = "") {$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getTypeByName($vb068931cc450442b63f5b3d276ea4297, $vabf77184f55403d75b9d51d79162a7ca);if($vb946c44d711ade3b061653732977d043) {$v0715f6d9497f93911417c9c324265771 = $vb946c44d711ade3b061653732977d043->getId();$v94757cae63fd3e398c0811a976dd6bbe = $this->getTypeByHierarchyTypeId($v0715f6d9497f93911417c9c324265771);return (int) $v94757cae63fd3e398c0811a976dd6bbe;}else {return false;}}}interface iUmiObjectsCollection {public function getObject($v16b2b26000987faccb260b9d39df1269);public function addObject($vb068931cc450442b63f5b3d276ea4297, $v5f694956811487225d15e973ca38fbab, $v73b8754d45983f35756b157ea439de8c = false);public function delObject($v16b2b26000987faccb260b9d39df1269);public function cloneObject($va77b1053cb200e022574f213c7553d88);public function getGuidedItems($v52eb29c6d8ea0d3a5bb3654f49bbd7c7);public function unloadObject($v16b2b26000987faccb260b9d39df1269);}class umiObjectsCollection extends singleton implements iSingleton, iUmiObjectsCollection {private $objects = Array(), $updatedObjects = Array();protected function __construct() {}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}private function isLoaded($vaf31437ce61345f416579830a98c91e5) {if(gettype($vaf31437ce61345f416579830a98c91e5) == "object") {throw new coreException("Object given!");}return (bool) array_key_exists($vaf31437ce61345f416579830a98c91e5, $this->objects);}public function isExists($vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;return (XMLFactory::getInstance()->getProxy('objects.xml')->getCount('/umi/objects/object[@id='.$vaf31437ce61345f416579830a98c91e5.']')) ? true : false;}public function getObject($vaf31437ce61345f416579830a98c91e5) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;if(!$vaf31437ce61345f416579830a98c91e5) {return false;}if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {return $this->objects[$vaf31437ce61345f416579830a98c91e5];}if($va8cfde6331bd59eb2ac96f8911c4b666 = cacheFrontend::getInstance()->load($vaf31437ce61345f416579830a98c91e5, "object")) {}else {try {$va8cfde6331bd59eb2ac96f8911c4b666 = new umiObject($vaf31437ce61345f416579830a98c91e5);}catch (baseException $ve1671797c52e15f763380b45e841ec32) {return false;}cacheFrontend::getInstance()->save($va8cfde6331bd59eb2ac96f8911c4b666, "object");}if(is_object($va8cfde6331bd59eb2ac96f8911c4b666)) {$this->objects[$vaf31437ce61345f416579830a98c91e5] = $va8cfde6331bd59eb2ac96f8911c4b666;return $this->objects[$vaf31437ce61345f416579830a98c91e5];}else {return false;}}public function delObject($vaf31437ce61345f416579830a98c91e5) {if($this->isExists($vaf31437ce61345f416579830a98c91e5)) {$vaf31437ce61345f416579830a98c91e5 = (int) $vaf31437ce61345f416579830a98c91e5;$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->commit();XMLFactory::getInstance()->getProxy('objects.xml')->removeElement('/umi/objects/object[@id='.$vaf31437ce61345f416579830a98c91e5.' and @is_locked=0]');if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {unset($this->objects[$vaf31437ce61345f416579830a98c91e5]);}$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy('objectcontent/objectmap.xml');$vb1e8c1e4762cb2eae39906df8e867c27 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objectmap/entry[@oid='.$vaf31437ce61345f416579830a98c91e5.']', 'tid');$v48b8e11252203b3b99c58dd5a07776c1->removeElement('/umi/objectmap/entry[@oid='.$vaf31437ce61345f416579830a98c91e5.']');XMLFactory::getInstance()->getProxy('objectcontent'.$vb1e8c1e4762cb2eae39906df8e867c27.'.xml')->removeElement('/umi/values/value[@obj_id='.$vaf31437ce61345f416579830a98c91e5.']');$vf9db64d0451efe8676ad21a2b15f87d7 = cacheFrontend::getInstance();if(in_array("del", get_class_methods( get_class($vf9db64d0451efe8676ad21a2b15f87d7) ) ) ) {$vf9db64d0451efe8676ad21a2b15f87d7->del($vaf31437ce61345f416579830a98c91e5, "object");}return true;}else {return false;}}public function addObject($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe, $v1945c9a2a5e2ba6133f1db6757a35fcb = false) {$v94757cae63fd3e398c0811a976dd6bbe = (int) $v94757cae63fd3e398c0811a976dd6bbe;$v48b8e11252203b3b99c58dd5a07776c1    = XMLFactory::getInstance()->getProxy('objects.xml');$vaf31437ce61345f416579830a98c91e5 = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objects/object[last()]', 'id') + 1;$vd82f268d5a82fc66260ad083d1a2e5b4   = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/objects', 'object', '');$vd82f268d5a82fc66260ad083d1a2e5b4->id      = $vaf31437ce61345f416579830a98c91e5;$vd82f268d5a82fc66260ad083d1a2e5b4->type_id = $v94757cae63fd3e398c0811a976dd6bbe;$v4d45f6bb0b3a614bfbe09d5734332efe = XMLFactory::getInstance()->getProxy('objectcontent/objectmap.xml')->addElement('/umi/objectmap', 'entry');$v4d45f6bb0b3a614bfbe09d5734332efe->oid = $vaf31437ce61345f416579830a98c91e5;$v4d45f6bb0b3a614bfbe09d5734332efe->tid = $v94757cae63fd3e398c0811a976dd6bbe;$va8cfde6331bd59eb2ac96f8911c4b666 = new umiObject($vaf31437ce61345f416579830a98c91e5);$va8cfde6331bd59eb2ac96f8911c4b666->setName($vb068931cc450442b63f5b3d276ea4297);$va8cfde6331bd59eb2ac96f8911c4b666->setIsLocked($v1945c9a2a5e2ba6133f1db6757a35fcb);if($v5571898aeb5505ee9a9111ddd83598f7 = cmsController::getInstance()->getModule("users")) {if($v5571898aeb5505ee9a9111ddd83598f7->is_auth()) {$ve8701ad48ba05a91604e480dd60899a3 = cmsController::getInstance()->getModule("users")->user_id;$va8cfde6331bd59eb2ac96f8911c4b666->setOwnerId($ve8701ad48ba05a91604e480dd60899a3);}}else {$va8cfde6331bd59eb2ac96f8911c4b666->setOwnerId(NULL);}$va8cfde6331bd59eb2ac96f8911c4b666->commit();$this->objects[$vaf31437ce61345f416579830a98c91e5] = $va8cfde6331bd59eb2ac96f8911c4b666;$this->resetObjectProperties($vaf31437ce61345f416579830a98c91e5);return $vaf31437ce61345f416579830a98c91e5;}public function cloneObject($va77b1053cb200e022574f213c7553d88) {$v25d877efea6783c4bc6117555350c1d3 = false;$vd82f268d5a82fc66260ad083d1a2e5b4 = $this->getObject($va77b1053cb200e022574f213c7553d88);if ($vd82f268d5a82fc66260ad083d1a2e5b4 instanceof umiObject) {$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy('objects.xml');$v02e4e2af33032c1850f37a80047fd0c3  = (int)$v48b8e11252203b3b99c58dd5a07776c1->getAttributeValue('/umi/objects/object[last()]', 'id') + 1;$vdbd959d5a9500f52370b64dcd0204fb0 = $v48b8e11252203b3b99c58dd5a07776c1->getElement('/umi/objects/object[@id='.$va77b1053cb200e022574f213c7553d88.']');$v7d39166e10f2d4201981342349aeddc3 = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/objects', 'object', $vdbd959d5a9500f52370b64dcd0204fb0->getValue() );$v7d39166e10f2d4201981342349aeddc3->is_locked = $vdbd959d5a9500f52370b64dcd0204fb0->is_locked;$v7d39166e10f2d4201981342349aeddc3->type_id   = $vdbd959d5a9500f52370b64dcd0204fb0->type_id;$v7d39166e10f2d4201981342349aeddc3->owner_id  = $vdbd959d5a9500f52370b64dcd0204fb0->owner_id;$v7d39166e10f2d4201981342349aeddc3->id        = $v02e4e2af33032c1850f37a80047fd0c3;$v4c2263a88e797aabfa328443e79e2230 = XMLFactory::getInstance()->getProxy('objectcontent/'.$vd82f268d5a82fc66260ad083d1a2e5b4->getTypeId().'.xml')->getNodeTree('/umi/values/value[@object_id='.$va77b1053cb200e022574f213c7553d88.']');$v48b8e11252203b3b99c58dd5a07776c1  = XMLFactory::getInstance()->getProxy('objectcontent/'.$vadf62911d523a4c7be2611e6b5f23612.'.xml');foreach($v4c2263a88e797aabfa328443e79e2230 as $v246f940753c7e663d301904fe8f5bf63) {$v0d9f207b6a6b3e56baac0f3b77dcb957 = $v246f940753c7e663d301904fe8f5bf63['@attribute'];$v12d983adaa0fc99f2eccd3fd92708baa = $v48b8e11252203b3b99c58dd5a07776c1->addElement('/umi/values', 'value', '');$v12d983adaa0fc99f2eccd3fd92708baa->obj_id      = $v0d9f207b6a6b3e56baac0f3b77dcb957['obj_id'];$v12d983adaa0fc99f2eccd3fd92708baa->field_id    = $v0d9f207b6a6b3e56baac0f3b77dcb957['field_id'];$v12d983adaa0fc99f2eccd3fd92708baa->int_val     = $v0d9f207b6a6b3e56baac0f3b77dcb957['int_val'];$v12d983adaa0fc99f2eccd3fd92708baa->varchar_val = $v0d9f207b6a6b3e56baac0f3b77dcb957['varchar_val'];$v12d983adaa0fc99f2eccd3fd92708baa->text_val    = $v0d9f207b6a6b3e56baac0f3b77dcb957['text_val'];$v12d983adaa0fc99f2eccd3fd92708baa->rel_val     = $v0d9f207b6a6b3e56baac0f3b77dcb957['rel_val'];$v12d983adaa0fc99f2eccd3fd92708baa->tree_val    = $v0d9f207b6a6b3e56baac0f3b77dcb957['tree_val'];$v12d983adaa0fc99f2eccd3fd92708baa->float_val   = $v0d9f207b6a6b3e56baac0f3b77dcb957['float_val'];}$v4d45f6bb0b3a614bfbe09d5734332efe = XMLFactory::getInstance()->getProxy('objectcontent/objectmap.xml')->addElement('/umi/objectmap', 'entry');$v4d45f6bb0b3a614bfbe09d5734332efe->oid = $v02e4e2af33032c1850f37a80047fd0c3;$v4d45f6bb0b3a614bfbe09d5734332efe->tid = $vdbd959d5a9500f52370b64dcd0204fb0->type_id;$v25d877efea6783c4bc6117555350c1d3 = $vadf62911d523a4c7be2611e6b5f23612;}return $v25d877efea6783c4bc6117555350c1d3;}public function getGuidedItems($v051369818a8073bba5feeb0e957eb308) {$v9b207167e5381c47682c6b4f58a623fb        = Array();$v051369818a8073bba5feeb0e957eb308   = (int) $v051369818a8073bba5feeb0e957eb308;$v1674ba0189d156c9c507d28226fe2ec3 = XMLFactory::getInstance()->getProxy('objects.xml')->getNodeTree('/umi/objects/object[@type_id='.$v051369818a8073bba5feeb0e957eb308.']');if(!isset($v1674ba0189d156c9c507d28226fe2ec3['object'])) {return $v9b207167e5381c47682c6b4f58a623fb;}foreach($v1674ba0189d156c9c507d28226fe2ec3['object'] as $vbb82b99144b4b1ec0100d39b773270f5) {$v9b207167e5381c47682c6b4f58a623fb[ $vbb82b99144b4b1ec0100d39b773270f5['@attributes']['id'] ] = $this->translateLabel($vbb82b99144b4b1ec0100d39b773270f5['@value']);}$v47474f16bc8e08736ec6d8eece4f8c96 = intval(regedit::getInstance()->getVal("//settings/ignore_guides_sort")) ? true : false;if(!$v47474f16bc8e08736ec6d8eece4f8c96) natsort($v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}protected function resetObjectProperties($vaf31437ce61345f416579830a98c91e5) {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject($vaf31437ce61345f416579830a98c91e5);$v87306dd4235ed712ebc07fe169b76f83 = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$v37c0c66b0de38f0adb05826f136d75f7 = $v7ae7003da59ae71dcc9f8638ef50593d->getAllFields();foreach($v37c0c66b0de38f0adb05826f136d75f7 as $vb8b49ef6bc7c1cfa510520b8a17b9f69) {$va8cfde6331bd59eb2ac96f8911c4b666->setValue($vb8b49ef6bc7c1cfa510520b8a17b9f69->getName(), Array());}}public function unloadObject($vaf31437ce61345f416579830a98c91e5) {if($this->isLoaded($vaf31437ce61345f416579830a98c91e5)) {unset($this->objects[$vaf31437ce61345f416579830a98c91e5]);}else {return false;}}public function getCollectedObjects() {return array_keys($this->objects);}public function addUpdatedObjectId($vaf31437ce61345f416579830a98c91e5) {if(!in_array($vaf31437ce61345f416579830a98c91e5, $this->updatedObjects)) {$this->updatedObjects[] = $vaf31437ce61345f416579830a98c91e5;}}public function getUpdatedObjects() {return $this->updatedObjects;}public function __destruct() {if(sizeof($this->updatedObjects)) {if(function_exists("deleteObjectsRelatedPages")) {deleteObjectsRelatedPages();}}}};interface iUmiBaseStream {public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736);public function stream_read($ve2942a04780e223b215eb8b663cf5353);public function stream_write($v8d777f385d3dfec8815d20f7496026dc);public function stream_tell();public function stream_eof();public function stream_seek($v7a86c157ee9713c34fbd7a1ee40f0c5a, $v02c86cc535151887678873a6d0a3c347);public function stream_flush();public function stream_close();public function url_stat();public function getProtocol();public static function getCalledStreams();};abstract class umiBaseStream implements iUmiBaseStream {public static $allowTimeMark = true;protected $position = 0,    $length = 0,    $data = "",    $expire = 0,    $transform = "",    $path, $params = Array();protected $scheme;protected static $callLog = Array();private  $start_time = false;public function __construct() {$this->start_time = microtime(true);}public function stream_flush() {return true;}public function stream_tell() {return $this->position;}public function stream_eof() {return $this->position >= $this->length;}public function stream_seek($v7a86c157ee9713c34fbd7a1ee40f0c5a, $v02c86cc535151887678873a6d0a3c347) {switch($v02c86cc535151887678873a6d0a3c347) {case SEEK_SET: {if($this->isValidOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a)) {$this->position = $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}case SEEK_CUR: {if($v7a86c157ee9713c34fbd7a1ee40f0c5a >= 0) {$this->position += $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}case SEEK_END: {if($this->isValidOffset($this->position + $v7a86c157ee9713c34fbd7a1ee40f0c5a)) {$this->position = $this->length + $v7a86c157ee9713c34fbd7a1ee40f0c5a;return true;}else {return false;}}default: {return false;}}}public function url_stat() {return Array();}public function stream_stat() {return Array();}public function stream_close() {return true;}public function stream_read($ve2942a04780e223b215eb8b663cf5353) {$result = bytes_substr($this->data, $this->position, $ve2942a04780e223b215eb8b663cf5353);$this->position += $ve2942a04780e223b215eb8b663cf5353;return $result;}public function stream_write($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$vfa2a5780ee71a3c906f941f11804346a = bytes_strlen($ve62e4d22f2d8630f6e44e2b7c3f70ddc);$v5db949cee806af8b6998a0b53bc78489 = bytes_substr($this->data, 0, $this->position);$ve2ad64473fdb1836ebaa0dc70299e9a8 = bytes_substr($this->data, $this->position + $vfa2a5780ee71a3c906f941f11804346a);$this->data = $v5db949cee806af8b6998a0b53bc78489 . $ve62e4d22f2d8630f6e44e2b7c3f70ddc . $ve2ad64473fdb1836ebaa0dc70299e9a8;$this->position += $ve62e4d22f2d8630f6e44e2b7c3f70ddc;return $vfa2a5780ee71a3c906f941f11804346a;}public function getProtocol() {return $this->scheme . "://";}protected function isValidOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a) {return ($v7a86c157ee9713c34fbd7a1ee40f0c5a >= 0) && ($v7a86c157ee9713c34fbd7a1ee40f0c5a < $this->length);}protected function translateToXml($v9b207167e5381c47682c6b4f58a623fb = Array()) {$vf9d06f6bf4fdf64ee0d73708c1a94ee1 = number_format(microtime(true) - $this->start_time, 6);self::reportCallTime($this->getProtocol() . $this->path, $vf9d06f6bf4fdf64ee0d73708c1a94ee1);if(isset($v9b207167e5381c47682c6b4f58a623fb['plain:result'])) {return $v9b207167e5381c47682c6b4f58a623fb['plain:result'];}$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument("1.0", "utf-8");$v9119bd388184b01e6237543be6983c6c = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement("udata");$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v9119bd388184b01e6237543be6983c6c);$v9b207167e5381c47682c6b4f58a623fb['attribute:generation-time'] = $vf9d06f6bf4fdf64ee0d73708c1a94ee1;$va9af713c2b2cfe00ff6c77a6a07127ed = new xmlTranslator($vdd988cfd769c9f7fbd795a0f5da8e751);$va9af713c2b2cfe00ff6c77a6a07127ed->translateToXml($v9119bd388184b01e6237543be6983c6c, $v9b207167e5381c47682c6b4f58a623fb);if($this->transform) {return $this->applyXslTransformation($vdd988cfd769c9f7fbd795a0f5da8e751, $this->transform);}return $vdd988cfd769c9f7fbd795a0f5da8e751->saveXml();}protected function applyXslTransformation(DOMDocument $vdd988cfd769c9f7fbd795a0f5da8e751, $v6a559eac8ab38b0b76a6fca32dcb9749) {$vc3aaa7dd2c4cf0305f95e82438b46e82 = DomDocument::load("./xsltTpls/" . $v6a559eac8ab38b0b76a6fca32dcb9749, DOM_LOAD_OPTIONS);checkXmlError($vc3aaa7dd2c4cf0305f95e82438b46e82);$v801f7201346b43f8ee8390a1ef20ddcd = new xsltProcessor;$v801f7201346b43f8ee8390a1ef20ddcd->registerPHPFunctions();$v801f7201346b43f8ee8390a1ef20ddcd->importStyleSheet($vc3aaa7dd2c4cf0305f95e82438b46e82);return $v801f7201346b43f8ee8390a1ef20ddcd->transformToXML($vdd988cfd769c9f7fbd795a0f5da8e751);}protected function parsePath($vd6fe1d0be6347b8ef2427fa629c04485) {$v81788ba0d7d02d81c063dbca621ba11b = $this->getProtocol();$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, strlen($v81788ba0d7d02d81c063dbca621ba11b));$v6d530125c7b0bc91b8b49c9d98795759 = parse_url($vd6fe1d0be6347b8ef2427fa629c04485);$this->path = $v6d530125c7b0bc91b8b49c9d98795759['path'];self::$callLog[] = Array($v81788ba0d7d02d81c063dbca621ba11b . $vd6fe1d0be6347b8ef2427fa629c04485, false);if($v21ffce5b8a6cc8cc6a41448dd69623c9 = getArrayKey($v6d530125c7b0bc91b8b49c9d98795759, 'query')) {parse_str($v21ffce5b8a6cc8cc6a41448dd69623c9, $vd5330079a488b3cac29a84f13a458629);$this->params = $vd5330079a488b3cac29a84f13a458629;$_REQUEST = array_merge($_REQUEST, $vd5330079a488b3cac29a84f13a458629);if(isset($vd5330079a488b3cac29a84f13a458629['expire'])) {$this->expire = getArrayKey($vd5330079a488b3cac29a84f13a458629, 'expire');}if(isset($vd5330079a488b3cac29a84f13a458629['transform'])) {$this->transform = getArrayKey($vd5330079a488b3cac29a84f13a458629, 'transform');}}return $this->path;}protected function normalizeString($v341be97d9aff90c9978347f66f945b77) {$v341be97d9aff90c9978347f66f945b77 = urldecode($v341be97d9aff90c9978347f66f945b77);if(!preg_match("/[\x{0000}-\x{FFFF}]+/u", $v341be97d9aff90c9978347f66f945b77)) {$v341be97d9aff90c9978347f66f945b77 = iconv("CP1251", "UTF-8//IGNORE", $v341be97d9aff90c9978347f66f945b77);}return $v341be97d9aff90c9978347f66f945b77;}protected function setData($v8d777f385d3dfec8815d20f7496026dc) {if(!$v8d777f385d3dfec8815d20f7496026dc) {return false;}$this->data = $v8d777f385d3dfec8815d20f7496026dc;$this->length = bytes_strlen($v8d777f385d3dfec8815d20f7496026dc);return true;}static public function registerStream($v41323917ef8089432959a3c33269debf) {$v6a2a431fe8b621037ea949531c28551d = CURRENT_WORKING_DIR . "/classes/streams/{$v41323917ef8089432959a3c33269debf}/{$v41323917ef8089432959a3c33269debf}Stream.php";if(file_exists($v6a2a431fe8b621037ea949531c28551d)) {include $v6a2a431fe8b621037ea949531c28551d;if(!stream_wrapper_register($v41323917ef8089432959a3c33269debf, "{$v41323917ef8089432959a3c33269debf}Stream")) {throw new coreException("Failed to register stream \"{$v41323917ef8089432959a3c33269debf}\"");}}else {throw new coreException("Can't locate file \"{$v6a2a431fe8b621037ea949531c28551d}\"");}}public static function protectParams($veca07335a33c5aeb5e1bc7c98b4b9d80) {return str_replace("/", "&#2F;", $veca07335a33c5aeb5e1bc7c98b4b9d80);}public static function unprotectParams($veca07335a33c5aeb5e1bc7c98b4b9d80) {return str_replace("&#2F;", "/", $veca07335a33c5aeb5e1bc7c98b4b9d80);}public static function getCalledStreams() {$v058ea00715de566bfe7b13f8e17aaf15 = Array();foreach(self::$callLog as $v3cde413efdb2e8ce17b094592df0334e) {list($v572d4e421e5e6b9bc11d815e8a027112, $v07cc694b9b3fc636710fa08b6922c42b) = $v3cde413efdb2e8ce17b094592df0334e;$v69ba0c89abba8a3e9cc0c5e32be0d35d = Array();$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:generation-time'] = $v07cc694b9b3fc636710fa08b6922c42b;$v69ba0c89abba8a3e9cc0c5e32be0d35d['node:url'] = $v572d4e421e5e6b9bc11d815e8a027112;$v058ea00715de566bfe7b13f8e17aaf15[] = $v69ba0c89abba8a3e9cc0c5e32be0d35d;}$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array('nodes:call' => $v058ea00715de566bfe7b13f8e17aaf15);$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument;$v173a1756d2d82394cb803161f70f9a38 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement("streams-call");$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v173a1756d2d82394cb803161f70f9a38);$vea392050444b5a06a86b8ec9c02d2437 = new xmlTranslator($vdd988cfd769c9f7fbd795a0f5da8e751);$vea392050444b5a06a86b8ec9c02d2437->translateToXml($v173a1756d2d82394cb803161f70f9a38, $vfca1bff8ad8b3a8585abfb0ad523ba42);header("Content-type: text/xml; charset=utf-8");echo $vdd988cfd769c9f7fbd795a0f5da8e751->saveXml();}public static function reportCallTime($vd6fe1d0be6347b8ef2427fa629c04485, $v07cc694b9b3fc636710fa08b6922c42b) {foreach(self::$callLog as &$v3cde413efdb2e8ce17b094592df0334e) {if($v3cde413efdb2e8ce17b094592df0334e[0] == $vd6fe1d0be6347b8ef2427fa629c04485) {$v3cde413efdb2e8ce17b094592df0334e[1] = $v07cc694b9b3fc636710fa08b6922c42b;}}}};$i18n = Array( "header-data-trash"  => "  ", "label-empty-all"  => " ", "label-type-add"  => "  ", "header-data-config"  => " ", "header-data-types"  => " ", "header-data-type_group_add" => "  ", "header-data-type_edit"  => "  ", "header-data-type_field_add" => " ", "header-data-type_field_edit" => " ", "header-data-type_group_edit" => "  ", "header-data-guides"  => "", "header-data-guide_item_edit" => "  ", "label-type-name"  => " ", "label-hierarchy-type"  => " ", "label-is-public"  => "", "label-is-guide"  => "   ", "label-edit-type-common" => " ", "label-add-fields-group" => "  ", "label-group-title"  => " ", "label-group-name"  => "", "label-group-is-visible" => "", "label-field-title"  => " ", "label-field-name"  => "", "label-field-tip"  => "", "label-field-is-visible" => "", "label-field-in-search"  => "", "label-field-in-filter"  => "  ", "label-field-type"  => " ", "label-field-default-guide" => " ", "label-field-is-required"  => "", "field-is_active"  => "", "label-guide-add"  => " ", "label-module"          => "", "label-method"          => "", "field-name"   => "", "header-data-guide_items" => " ", 'object-type-blogs-blog_message' => 'C ', 'object-type-rss-lenta'   => 'RSS-', 'object-type-users-author'  => '', 'object-type-eshop-address'  => ' ', 'object-type-banners-banner'  => '', 'object-type-banners-banner-image'  => '  ', 'object-type-banners-banner-swf'  => '  ', 'object-type-banners-banner-html'  => '  HTML', 'object-type-blogs-blog'  => '', 'object-type-valyuta'   => '', 'object-type-vote-poll_item'  => '   ', 'object-type-vid_homyachka'  => ' ', 'object-type-faq-question'  => '  FAQ', 'object-type-catalog-question'  => '   ', 'object-type-dispatches-release' => ' ', 'object-type-users-users'  => ' ', 'object-type-eshop-discount_card' => ' ', 'object-type-druzhelyubnost_homyachka' => ' ', 'object-type-eshop-order'  => '  -', 'object-type-content-ticket'  => '', 'object-type-integriruemost_homyachka_v_koleso'   => '   ', 'object-type-faq-category'  => '  FAQ', 'object-type-kachestvo_fleshki'  => ' ', 'object-type-catalog-object'  => ' ', 'object-type-catalog-object-good'  => '  ', 'object-type-catalog-object-good-hamster'  => '', 'object-type-catalog-object-good-kolesa'  => '  ', 'object-type-catalog-object-good-povodki'  => '', 'object-type-comments-comment'  => '', 'object-type-blogs-blog_comment' => '   ', 'object-type-forum-conf'  => ' ', 'object-type-kulinarnye_predpochteniya_homyachka'   => '  ', 'object-type-news-rubric'  => ' ', 'object-type-updatesrv-license'  => ' UMI.CMS', 'object-type-catalog-matrix'  => ' ', 'object-type-banners-place'  => '  ', 'object-type-eshop-order_item'  => '  ', 'object-type-news-item'   => '', 'object-type-okras_homyachka'  => ' ', 'object-type-catalog-answer'  => '     ', 'object-type-eshop-payment_transaction' => ' ', 'object-type-dispatches-subscriber' => '  ', 'object-type-pol'   => '', 'object-type-pol_homyachka'  => ' ', 'object-type-users-user'  => '', 'object-type-faq-project'  => '  FAQ', 'object-type-proizvoditeli'  => '', 'object-type-catalog-category'  => ' ', 'object-type-razdel_sajta'  => ' ', 'object-type-dispatches-dispatch' => '', 'object-type-filemanager-shared_file' => ' ', 'object-type-eshop-discount'  => '  -', 'object-type-eshop-store'  => ' -', 'object-type-forum-message'  => '  ', 'object-type-dispatches-message' => ' ', 'object-type-webforms-address'  => ' ', 'object-type-spisok_gorodov_dlya_geo' => '   geo', 'object-type-spravochnik_dlya_polya_gorod' => '   ""', 'object-type-spravochnik_dlya_polya_zhanr' => '   ""', 'object-type-spravochnik_dlya_polya_nalichiya_na_skladah' => '   "  "', 'object-type-spravochnik_dlya_polya_ukazatel_na_sklad'  => '   "  "', 'object-type-spravochnik_dlya_polya_format_nositelya'  => '   " "', 'object-type-spravochniki'  => '', 'object-type-vote-poll'   => ' ', 'object-type-eshop-order_status' => ' ', 'object-type-eshop-payment_transaction_status' => '  ', 'object-type-blogs-blog_privacy' => '  ()', 'object-type-content-'   => ' ', 'object-type-strany'   => '', 'object-type-news-subject'  => ' ', 'object-type-tip_rss'   => ' RSS', 'object-type-updatesrv-license_type' => '  UMI.CMS', 'object-type-tip_povodka'  => ' ', 'object-type-tip_shersti_homyachka' => '  ', 'object-type-eshop-store_relation' => '   -', 'object-type-forum-topic'  => '  ', 'object-type-webforms-form'  => '  ', 'object-type-photoalbum-album'  => '', 'object-type-photoalbum-photo'  => '', 'object-type-harakter_homyachka' => ' ', 'object-type-cvet'   => '', 'object-type-webforms-template'  => ' ', 'object-type-new-data-type'   =>  '  ', 'object-type-new-guide'    =>  ' ', 'hierarchy-type-content-page'  => ' ', 'hierarchy-type-users-user'  => '', 'hierarchy-type-catalog-category' => ' ', 'hierarchy-type-catalog-object'  => ' ', 'hierarchy-type-users-users'  => ' ', 'hierarchy-type-news-rubric'  => ' ', 'hierarchy-type-news-item'  => '', 'hierarchy-type-news-subject'  => ' ', 'hierarchy-type-vote-poll'  => '', 'hierarchy-type-vote-poll_item'  => '  ', 'hierarchy-type-eshop-order'  => '  -', 'hierarchy-type-eshop-order_item' => '   -', 'hierarchy-type-eshop-order_status' => '   -', 'hierarchy-type-eshop-address'  => ' ', 'hierarchy-type-forum-conf'  => ' ', 'hierarchy-type-forum-topic'  => '  ', 'hierarchy-type-forum-message'  => '  ', 'hierarchy-type-comments-comment' => '', 'hierarchy-type-updatesrv-license' => ' UMI.CMS', 'hierarchy-type-updatesrv-license_type' => '  UMI.CMS', 'hierarchy-type-banners-banner'  => '', 'hierarchy-type-banners-place'  => '  ', 'hierarchy-type-dispatches-dispatch' => '', 'hierarchy-type-dispatches-release' => ' ', 'hierarchy-type-dispatches-message' => ' ', 'hierarchy-type-dispatches-subscriber' => '  ', 'hierarchy-type-catalog-matrix'  => ' ', 'hierarchy-type-catalog-question' => '   ', 'hierarchy-type-catalog-answer'  => '     ', 'hierarchy-type-users-author'  => '', 'hierarchy-type-content-ticket'  => '  ', 'hierarchy-type-photoalbum-album' => '', 'hierarchy-type-photoalbum-photo' => '', 'hierarchy-type-faq-project'  => '  FAQ', 'hierarchy-type-faq-category'  => '  FAQ', 'hierarchy-type-faq-question'  => '  FAQ', 'hierarchy-type-filemanager-shared_file' => ' ', 'hierarchy-type-eshop-store'  => '  -', 'hierarchy-type-eshop-store_relation' => '   -', 'hierarchy-type-eshop-discount_card' => ' ', 'hierarchy-type-eshop-discount'  => '  -', 'hierarchy-type-blogs-blog'  => '', 'hierarchy-type-blogs-blog_privacy' => '  ', 'hierarchy-type-blogs-blog_comment' => '   ', 'hierarchy-type-blogs-blog_message' => ' ', 'hierarchy-type-eshop-payment_transaction' => ' ', 'hierarchy-type-eshop-payment_transaction_status' => '  ', 'hierarchy-type-webforms-form'  => '  ', 'hierarchy-type-webforms-template' => ' ', 'hierarchy-type-webforms-address' => ' ', "hierarchy-type-eshop-global-discount" => "    ", 'hierarchy-type-eshop-global_discount' => '    ', 'hierarchy-type-blogs20-blog' => '', 'hierarchy-type-blogs20-comment' => ' ', 'field-min_discount_order_total' => '  ', 'field-max_discount_order_total' => '  ', 'field-preffered_currency'   => ' ', 'field-age'    => '', 'field-gender'    => '', 'field-geo_targeting_is_active'  => '- ', 'field-avatar'    => '', 'field-url'    => 'Url ', 'field-rss_type'   => '', 'field-news_rubric'   => ' ', 'field-anons_pic'   => '  ', 'field-publish_pic'   => '  ', 'field-customer_comments'  => ' ', 'field-default_type_id'   => 'default_type_id', 'field-seo_prefix'   => 'seo_prefix', 'field-trans'    => ' Id', 'field-proizvoditel'   => '', 'field-predyduwaya_cena'  => ' ', 'field-specialnaya_cena'  => ' ', 'field-fiksirovannaya_cena'  => ' ', 'field-opisanie'   => ' ', 'field-soputstvuyuwie_tovary'  => ' ', 'field-polosa_tehnologij'  => ' ', 'field-izobrazhenie'   => '', 'field-bolshoe_izobrazhenie'  => ' ', 'field-id_name'    => 'ID ', 'field-tip_igrovoj_pristavki'  => '  ', 'field-komplekt_postavki'  => ' ', 'field-tip_karty_pamyati'  => '  ', 'field-razemy_tip'   => ' ()', 'field-cvet_korpusa'   => ' ', 'field-garantiya'   => '', 'field-tranzitnyj_id'   => ' ID', 'field-special_naya_cena'  => ' ', 'field-bol_shoe_izobrazhenie'  => ' ', 'field-yes_or_no'   => '  ?', 'field-country'    => '', 'field-city'    => '', 'field-post_index'   => ' ', 'field-address'    => '', 'field-phone'    => '    ', 'field-codename'   => ' ', 'field-ot_baldi'   => '- ', 'field-my_house'   => '  ', 'field-site_link'   => '  ', 'field-company_logo'   => ' ', 'field-elements_links'   => '  ', 'field-kartinochka'   => '', 'field-objektiki'   => '', 'field-currency_id'   => ' ', 'field-currency'   => '', 'field-rate'    => '', 'field-model'    => ' ', 'field-isbn'    => 'ISBN', 'field-author'    => '', 'field-publisher'   => '', 'field-year'    => '', 'field-series'    => '', 'field-nazvanie'   => '', 'field-media'    => '', 'field-starring'   => '', 'field-director'   => '', 'field-original_name'   => ' ', 'field-store'    => '  ', 'field-quality_value'   => '', 'field-to_order'   => '  (   )', 'field-typePrefiks'   => '', 'field-place'    => ' ', 'field-hall'    => '', 'field-date'    => ' ', 'field-premier'    => '', 'field-for-kids'   => ' ', 'field-hall_plan'   => ' ', 'field-hall_part'   => '', 'field-worldRegion'   => ' ', 'field-region'    => '  ', 'field-days'    => ' ', 'field-dataTour'   => ' ', 'field-hotel_stars'   => '', 'field-room'    => ' ', 'field-meal'    => ' ', 'field-included'   => '    ', 'field-transport'   => '', 'field-plus'    => ' (+)', 'field-is_cbrf'    => ' CBRF', 'field-deliveryIncluded'  => '', 'field-price_min'   => ' ', 'field-price_max'   => ' ', 'field-sales_notes'   => ' ', 'field-color'    => '', 'field-weight'    => '', 'field-power'    => '', 'field-description'   => '', 'field-'    => '', 'field-descr'    => '', 'field-order_price'   => ' ', 'field-elements'   => ' ', 'field-hex'    => ' ', 'field-zhanr'    => '', 'field-kratkoe_opisanie'  => ' ', 'field-format_nositelya'  => ' ', 'field-god_vypuska'   => ' ', 'field-vozrastnoe_ogranichenie_na_prosmotr' => '   ', 'field-vid'    => '', 'field-okras'    => '', 'field-tip_shersti'   => ' ', 'field-ves'    => '', 'field-pol'    => '', 'field-kolichestvo_lap'   => ' ', 'field-dlina_usov'   => ' ', 'field-maksimalnaya_skorost'  => ' ', 'field-obem_legkih'   => ' ', 'field-razmah_lap_v_bege'  => '   ', 'field-harakter'   => '', 'field-druzhelyubnost'   => '', 'field-kulinarnye_predpochteniya' => ' ', 'field-integriruemost_v_koleso'  => '  ', 'field-photo'    => '', 'field-diametr_kolesa'   => ' ', 'field-type'    => '', 'field-s_shipami'   => ' ', 'field-recommend'   => '', 'field-lock_cancel'   => '   ', 'field-lock_payment'   => '   ', 'field-destination_address'  => ' ', 'field-sender_ip'   => 'IP- ', 'field-from_email_template'  => ' ', 'field-from_template'   => ' ', 'field-subject_template'  => ' ', 'field-master_template'   => '  ', 'field-autoreply_from_email_template' => ' ', 'field-autoreply_from_template'  => ' ', 'field-autoreply_subject_template' => '', 'field-autoreply_template'  => '', 'field-form_id'    => ' ', 'field-address_description'  => '', 'field-address_list'   => '', 'field-fname'    => '', 'field-father_name'   => '', 'field-lname'    => '', 'field-e-mail'    => 'E-mail', 'field-time_targeting_is_active' => 'Time- ', 'field-time_targeting_by_month_days' => '  ', 'field-time_targeting_by_month'  => ' ', 'field-time_targeting_by_week_days' => '  ', 'field-time_targeting_by_hours'  => '  ', 'field-title'    => ' TITLE', 'field-h1'    => ' H1', 'field-meta_keywords'   => ' meta KEYWORDS', 'field-meta_descriptions'  => ' meta DESCRIPTIONS', 'field-content'    => '', 'label-field-content'    => '', 'field-menu_pic_ua'   => '  ', 'field-menu_pic_a'   => '  ', 'field-header_pic'   => '  ', 'field-robots_deny'   => '  ', 'field-show_submenu'   => ' ', 'field-is_expanded'   => '  ', 'field-is_unindexed'   => "  ", 'field-login'    => '', 'field-password'   => '', 'field-groups'    => ' ', 'field-readme'    => '', 'field-anons'    => '', 'label-field-anons'    => '', 'field-source'    => '', 'field-source_url'   => 'URL ', 'field-publish_time'   => ' ', 'field-begin_time'   => '  ', 'field-finish_time'   => '  ', 'field-end_time'   => '  ', 'field-subjects'   => '  ', 'field-price_item'   => '   ', 'field-price_total'   => ' ', 'field-count'    => ' ', 'field-discount_size'   => ' ', 'field-catalog_relation'  => '  ', 'field-items'    => '', 'field-status'    => '', 'field-order_time'   => ' ', 'field-admin_comments'   => ' ', 'field-is_closed'   => ' ', 'field-question'   => '', 'field-answers'    => '', 'field-total_count'   => ' ', 'field-cena'    => '', 'field-orders_refs'   => '', 'field-delivery_address'  => ' ', 'field-delivery_addresses'  => ' ', 'field-message'    => '', 'field-activate_code'   => ' ', 'field-is_activated'   => '', 'field-domain_name'   => '', 'field-ip'    => 'ip', 'field-license_type'   => ' ', 'field-owner_lname'   => '', 'field-owner_fname'   => '', 'field-owner_mname'   => '', 'field-owner_email'   => 'E-mail', 'field-keycode'    => ' ', 'field-gen_time'   => ' ', 'field-id'    => 'ID', 'field-views_count'   => ' ', 'field-clicks_count'   => ' ', 'field-max_views'   => '  ', 'field-tags'    => '', 'field-is_active'   => '', 'field-view_pages'   => ',    ', 'field-image'    => '', 'field-open_in_new_window'  => '   ', 'field-width'    => '', 'field-height'    => '', 'field-alt'    => ' ', 'field-swf'    => '-', 'field-swf_quality'   => ' ', 'field-html_content'   => 'HTML-', 'field-show_till_date'   => '  ', 'field-poll_rel'   => '  ', 'field-is_show_rand_banner'  => '  ', 'field-show_start_date'   => '  ', 'field-disp_last_release'  => '  ', 'field-disp_description'  => '', 'field-disp_reference'   => '  ', 'field-header'    => '', 'field-body'    => ' ', 'field-attach_file'   => ' ', 'field-release_reference'  => '  ', 'field-uid'     => '', 'field-subscriber_dispatches'  => '  ', 'field-subscribe_date'   => ' ', 'field-related_items'   => ' ', 'field-question_txt'   => ' ', 'field-answers_rel'   => ' ', 'field-per_page'   => '  ', 'field-goods'    => '', 'field-questions_rel'   => ' ', 'field-is_registrated'   => '', 'field-user_id'    => '', 'field-nickname'   => '', 'field-email'    => 'E-mail', 'field-author_id'   => '', 'field-x'    => 'X', 'field-y'    => 'Y', 'field-create_time'   => ' ', 'field-answer'    => '  ', 'field-fs_file'    => ' ', 'field-downloads_counter'  => ' ', 'field-user_dock'   => ' ', 'field-user_tags'   => '   ', 'field-rate_voters'   => ' ', 'field-rate_sum'   => ' ', 'field-amount'    => '  ', 'field-store_id'   => '  ', 'field-store_amounts'   => '  ', 'field-proc'    => ' ', 'field-start_time'   => '   ', 'field-code'    => '', 'field-price'    => '', 'field-ignore_discounts'  => ' ', 'field-subscribed_pages'  => '  ', 'field-is_online'   => ' on-line', 'field-privacy'    => '', 'field-sid'    => 'sid', 'field-prvlist_friends'   => ' ', 'field-lmessage_time'   => '   ', 'field-lcomment_time'   => '   ', 'field-privacy_forpostonly'  => '     (  )', 'field-topics_count'   => ' ', 'field-messages_count'   => ' ', 'field-last_post_time'   => '  ', 'field-last_request_time'  => '  ', 'field-rated_pages'   => ' ', 'field-sid_transaction'   => ' ', 'field-sid_eshoporder_status'  => '  ', 'field-rel_transactionstatus'  => ' ', 'field-date_created'   => ' ', 'field-inited_whom'   => ' ', 'field-rel_eshoporder'   => ' ', 'field-initprice'   => ' ', 'field-text_request'   => ' ', 'field-method_engine'   => 'Transaction engine', 'field-date_answered'   => '  ', 'field-text_answer'   => '  ', 'field-date_validated'   => '  ', 'field-text_validated'   => '  ', 'field-date_conseq'   => ' ', 'field-text_conseq'   => ' ', 'field-city_targeting_city'  => '', 'field-city_targeting_is_active' => ' ', 'field-news_relation'   => '   ', 'field-ignore-banner-subpages' => ' ', 'field-publish-status'  => ' ', 'fields-group-short_info'  => ' ', 'fields-group-more_info'  => ' ', 'fields-group-common'   => '', 'fields-group-view_params'  => ' ', 'fields-group-time_targeting'  => 'Time-', 'fields-group-menu_view'  => '  ', 'fields-group-more_params'  => ' ', 'fields-group-idetntify_data'  => ' ', 'fields-group-item_props'  => ' ', 'fields-group-subjects_block'  => '', 'fields-group-order_item_props'  => ' ', 'fields-group-order_props'  => ' ', 'fields-group-comments'   => '', 'fields-group-common_props'  => ' ', 'fields-group-poll_props'  => ' ', 'fields-group-status_props'  => ' ', 'fields-group-delivery_address'  => '  ', 'fields-group-topic_props'  => ' ',    'fields-group-message_props'        =>    ' ', 'fields-group-comment_props'  => ' ', 'fields-group-license_info'  => ' ', 'fields-group-owner_info'  => '  ', 'fields-group-currency_props'  => ' ', 'fields-group-view_pages'  => ' ', 'fields-group-banner_custom_props' => '  ', 'fields-group-redirect_props'  => ' ', 'fields-group-props'   => '', 'fields-group-grp_disp_props'  => ' ', 'fields-group-grp_disp_release_props' => '  ', 'fields-group-grp_disp_msg_props' => '  ', 'fields-group-grp_sbs_props'  => '  ', 'fields-group-grp_disp_msg_extended' => ' ', 'fields-group-grp_sbs_extended'  => ' ', 'fields-group-matrix_props'  => ' ', 'fields-group-photo_props'  => ' ', 'fields-group-album_props'  => ' ', 'fields-group-svojstva_gruppy_polzovatelej'  => '  ', 'fields-group-fs_file_props'  => ' ', 'fields-group-news_images'  => ' ', 'fields-group-dopolnitelno'  => '', 'fields-group-rate_props'  => ' ', 'fields-group-rate_voters'  => ' ', 'fields-group-store_props'  => ' ', 'fields-group-cenovye_svojstva'  => ' ', 'fields-group-other_proerties'  => ' ', 'fields-group-pictures'   => '', 'fields-group-descr_grp'  => ' ', 'fields-group-parametry_aksessuara' => ' ', 'fields-group-recommend'  => '', 'fields-group-common_group'  => ' ', 'fields-group-privatnost'  => '', 'fields-group-identity'   => 'identity', 'fields-group-transaction_status_props' => '', 'fields-group-transaction_props' => ' ', 'fields-group-trans_init'  => '', 'fields-group-trans_deliver'  => '', 'fields-group-prelim'   => '', 'fields-group-final'   => '', 'fields-group-consequences'  => '', 'fields-group-city_targeting'  => '', 'fields-group-SendingData'  => '  ', 'fields-group-Templates'  => '', 'fields-group-Binding'   => '', 'fields-group-list'   => '', 'fields-group-short_user_info'  => ' ', 'field-type-int'   => '', 'field-type-string'   => '', 'field-type-text'   => ' ', 'field-type-relation'   => ' ', 'field-type-relation-multiple'  => '    ', 'field-type-file'   => '', 'field-type-img_file'   => '', 'field-type-swf_file'   => '-', 'field-type-date'   => '', 'field-type-boolean'   => '-', 'field-type-wysiwyg'   => 'HTML-', 'field-type-password'   => '', 'field-type-tags-multiple'  => '', 'field-type-symlink-multiple'  => '  ', 'field-type-price'   => '', 'field-type-float'   => '  ', 'field-expiration-date'  => '  ', 'field-notification-date' => '    ', 'field-publish_comments' => '  ', 'field-date-empty'   => '', 'object-samka'    => '', 'object-samec'    => '', 'object-v_korzine'   => ' ', 'object-ozhidaet_proverki'  => ' ', 'object-prinyat'   => '', 'object-otklonen'   => '', 'object-otmenen'   => '', 'object-gotov'    => '', 'object-v_processe_oplaty'  => '  ', 'object-oplachen_uspeshno'  => ' ', 'object-oshibki_v_oplate'  => '  ', 'object-proveren_mozhno_oplachivat' => ',  ', 'object-proverka_oplaty'  => ' ', 'object-1_inicializirovana'  => '1. ', 'object-2_dostavlena'   => '2. ', 'object-3_ne_dostavlena'  => '3.  ', 'object-4_predvaritel_no_prinyata_ozhidaetsya_podtverzhdenie'   => '4.   ( )', 'object-5_predvaritel_no_prinyata_podtverzhdenie_ne_trebuetsya'   => '5.   (  )', 'object-6_predvaritel_no_otklonena_ozhidaetsya_podtverzhdenie'   => '6.   ( )', 'object-7_predvaritel_no_otklonena_podtverzhdenie_ne_trebuetsya'  => '7.   (  )', 'object-8_prinyata_s_podtverzhdeniem' => '8.   ', 'object-9_otklonena_s_podtverzhdeniem' => '9.   ', 'object-moya_zhzh-lenta'  => ' -', 'object-rss'    => 'RSS', 'object-atom'    => 'ATOM', 'object-dlya_vseh'   => ' ', 'object-dlya_vladel_ca_i_druzej' => '   ', 'object-tol_ko_dlya_vladel_ca_bloga' => '   ', 'object-height'    => '', 'object-low'    => '', 'object-medium'    => '', 'object-status-preunpublish' => '    ', 'object-status-publish'  => '', 'object-status-unpublish' => '  ', 'perms-data-main' => ' ', 'perms-data-guides' => ' ', 'perms-data-trash' => ' ', 'perms-data-types' => '  ', 'field-form_sending_time' => ' ', 'field-auto_reply'   => '', 'js-data-add-field'   => ' ', 'js-view-guide-items'  => ' ', 'group-currency-props'  => ' ', 'min-discount-order-total' => '  ', 'max-discount-order-total' => '  ', 'global-discount-order-size' => '  ', 'global-discount-end'  => '  ', 'global-discount-start'  => '  ', 'global-discount-active-time' => '  ', 'order-total-range'  =>  '  ', 'eshop-order-currency' => '   ', 'eshop-currency' => '   ', 'eshop-currency-letter-code' => ' ', 'eshop-currency-digit-code'  => ' ', 'eshop-currency-exchange-rate' => ' ', 'eshop-order-currency-id'  => ' ', 'locktime'      => '  ', 'lockuser'      => '  ', 'label-section-description'     => ' ', "eshop-order-currency-exchange_rate" => " ", "eshop-order-currency-total"  => "   ", "date-empty-field"    => "", 'object-type-users-avatar'   => '', 'object-type-blogs20-blog'   => ' 2.0', 'object-type-eshop-currency'   => '   ', 'object-type-blogs20-comment'   => '  2.0', 'object-type-blogs20-post'   => '  2.0', 'object-type-status_stranicy'   => ' ', 'object-type-webforms-page'   => '    ', 'hierarchy-type-users-avatar'   => ' ', 'hierarchy-type-blogs20-post'   => ' ', 'hierarchy-type-eshop-currency'   => '   ', 'hierarchy-type-webforms-page'   => '    ', 'field-body'   => ' ', 'field-userpic'   => ' ', 'field-picture'   => '', 'field-is_hidden'   => '', 'field-forced_subscribers'   => '  :', 'field-msg_date'   => ' ', 'field-short_body'   => '  ', 'field-new_relation'   => '  ', 'field-publish_status_id'   => 'id ', 'field-locktime'   => ' ', 'field-lockuser'   => ' ', 'field-last_message'   => ' ', 'field-friendlist'   => ' ', 'field-only_for_friends'   => '  ', 'field-user_settings_data'   => ' ', 'field-opinion'   => '  ?', 'fields-group-userpic'   => '', 'fields-group-auto_reply'   => '', 'fields-group-svojstva_statusa_stranicy'   => '  ', 'fields-group-locks'   => '', 'fields-group-privacy'   => ' ', 'fields-group-osnovnoe'   => '', 'object-supervajzery'   => '', 'object-zaregistrirovannye_pol_zovateli'   => ' ', 'fields-group-svojstva_publikacii' => ' ', 'field-expiration_date' => '   ', 'field-notification_date' => ' ', 'field-publish_status' => ' ', 'field-global-discount-size'  => '  ', 'field-eshop_order_currency'  => '   ', 'field-currency_exchange_rate'  => ' ', 'field-eshop_order_currency_total' => '   ', 'field-sending_time'    => ' ', 'js-trash-confirm-title'   => ' ', 'js-trash-confirm-text'    => '   .  ,        .', 'js-trash-confirm-cancel'   => '', 'js-trash-confirm-ok'    => '', 'eshop-global-discount-proc'  => '  ',  'fields-group-currency-props'  => ' ', 'field-use_in_eshop'    => '  -', 'field-eshop_currency_letter_code' => ' ', 'field-eshop_currency_exchange_rate' => ' ', 'field-eshop-currency-symbol'    => '  ' );class ulangStream extends umiBaseStream {protected $scheme = "ulang", $prop_name = NULL;protected static $i18nCache = Array();public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");if(substr($vd6fe1d0be6347b8ef2427fa629c04485, -3) == ".js" || substr($vd6fe1d0be6347b8ef2427fa629c04485, -3) == "?js") {$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($vd6fe1d0be6347b8ef2427fa629c04485) - 3);$v8d777f385d3dfec8815d20f7496026dc = $this->generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485);$this->setData($v8d777f385d3dfec8815d20f7496026dc);return true;}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485])) {$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$vd6fe1d0be6347b8ef2427fa629c04485] = $this->translateToDTD($v11cc313f766c5d93e6b73ba8439ade0f);}$this->setData($v8d777f385d3dfec8815d20f7496026dc);return true;}protected function translateToDTD($v5a1969515ab7b523d913732d256e644a) {$v6a87284914054e1ba5d1d288c1b09f43 = "<!ENTITY quote '&#34;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY nbsp '&#160;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY middot '&#183;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY reg '&#174;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY copy '&#169;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY raquo '&#187;'>\n";$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY laquo '&#171;'>\n";$v156577e912dd9b1be50a671edc17c4a0 = getServer('REQUEST_URI');$v156577e912dd9b1be50a671edc17c4a0 = htmlspecialchars($v156577e912dd9b1be50a671edc17c4a0);foreach($v5a1969515ab7b523d913732d256e644a as $v18389a4a9ad5795744699cff0ba66c15 => $v385aa5385e83efc5d83c7588ee5fb7e8) {if($this->isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15)) continue;$v385aa5385e83efc5d83c7588ee5fb7e8 = $this->protectEntityValue($v385aa5385e83efc5d83c7588ee5fb7e8);$v6a87284914054e1ba5d1d288c1b09f43 .= "<!ENTITY {$v18389a4a9ad5795744699cff0ba66c15} \"{$v385aa5385e83efc5d83c7588ee5fb7e8}\">\n";}return $v6a87284914054e1ba5d1d288c1b09f43;}protected function isRestrictedRef($v18389a4a9ad5795744699cff0ba66c15) {$v47c80780ab608cc046f2a6e6f071feb6 = Array('field-', 'object-type-', 'hierarchy-type-', 'fields-group-', 'field-type-');for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < sizeof($v47c80780ab608cc046f2a6e6f071feb6);$v865c0c0b4ab0e063e5caa3387c1a8741++) {if(bytes_substr($v18389a4a9ad5795744699cff0ba66c15, 0, bytes_strlen($v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741])) == $v47c80780ab608cc046f2a6e6f071feb6[$v865c0c0b4ab0e063e5caa3387c1a8741]) {return true;}}return false;}protected function protectEntityValue($v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$vd98a07f84921b24ee30f86fd8cd85c3c = Array('&', '"');$v01b6e20344b68835c5ed1ddedf20d531 = Array('&amp;', '&quote;');$v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);return $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}protected static function parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485) {$v81788ba0d7d02d81c063dbca621ba11b = "ulang://";if(substr($vd6fe1d0be6347b8ef2427fa629c04485, 0, strlen($v81788ba0d7d02d81c063dbca621ba11b)) == $v81788ba0d7d02d81c063dbca621ba11b) {$vd6fe1d0be6347b8ef2427fa629c04485 = substr($vd6fe1d0be6347b8ef2427fa629c04485, strlen($v81788ba0d7d02d81c063dbca621ba11b));}$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");return split("\/", $vd6fe1d0be6347b8ef2427fa629c04485);}protected static function loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485) {global $i18n;static $v7abdda3251de25a51bf5fb15d7c3391d = "content", $v4a8a08f09d37b73795649038408b5f33 = 0;if(!$v7abdda3251de25a51bf5fb15d7c3391d) {$v594c103f2c6e04c3d8ab059f031e0c1a = cmsController::getInstance();$v7abdda3251de25a51bf5fb15d7c3391d = $v594c103f2c6e04c3d8ab059f031e0c1a->getCurrentModule();}$ve6451b27d4123951dfd29d32a18b3919 = self::$i18nCache;$ve8723cd5a634e83ba1d810e6584f3e59 = self::parseLangsPath($vd6fe1d0be6347b8ef2427fa629c04485);$v753527be46567ad90a4203cf4b40d70e = self::getLangPrefix();$v11cc313f766c5d93e6b73ba8439ade0f = Array();if(!in_array($v7abdda3251de25a51bf5fb15d7c3391d, $ve8723cd5a634e83ba1d810e6584f3e59)) {$ve8723cd5a634e83ba1d810e6584f3e59[] = $v7abdda3251de25a51bf5fb15d7c3391d;}$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve8723cd5a634e83ba1d810e6584f3e59);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vdff9a6fde59e8dfc96361ffa7b52426a = $ve8723cd5a634e83ba1d810e6584f3e59[$v865c0c0b4ab0e063e5caa3387c1a8741];if($vdff9a6fde59e8dfc96361ffa7b52426a == false) continue;$v797a70c0592f1ea67c7f63d456de20fd = "i18n." . $v753527be46567ad90a4203cf4b40d70e . ".php";$vfe3c2e38a8d7e5bca55ebb32d6733fc0 = "i18n.php";$v851148b4fd8fd7ae74bd9100c5c0c898 = ($vdff9a6fde59e8dfc96361ffa7b52426a == "common") ? "/classes/modules/" : "/classes/modules/" . $vdff9a6fde59e8dfc96361ffa7b52426a . "/";$v851148b4fd8fd7ae74bd9100c5c0c898 = CURRENT_WORKING_DIR . $v851148b4fd8fd7ae74bd9100c5c0c898;$vcd5aac9b508ee14d7ec74cfaf518c07d = $v851148b4fd8fd7ae74bd9100c5c0c898 . $v797a70c0592f1ea67c7f63d456de20fd;$v71bc9962768a0cfd271153976203c648 = $v851148b4fd8fd7ae74bd9100c5c0c898 . $vfe3c2e38a8d7e5bca55ebb32d6733fc0;if(array_key_exists($vdff9a6fde59e8dfc96361ffa7b52426a, $ve6451b27d4123951dfd29d32a18b3919)) {$i18n = $ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a];}else {if(file_exists($vcd5aac9b508ee14d7ec74cfaf518c07d)) {include $vcd5aac9b508ee14d7ec74cfaf518c07d;}else if (file_exists($v71bc9962768a0cfd271153976203c648)) {include $v71bc9962768a0cfd271153976203c648;}}if(isset($i18n) && is_array($i18n)) {$ve6451b27d4123951dfd29d32a18b3919[$vdff9a6fde59e8dfc96361ffa7b52426a] = $i18n;$v11cc313f766c5d93e6b73ba8439ade0f = $i18n + $v11cc313f766c5d93e6b73ba8439ade0f;unset($i18n);}}self::$i18nCache = $ve6451b27d4123951dfd29d32a18b3919;return $v11cc313f766c5d93e6b73ba8439ade0f;}public static function getLabel($vd304ba20e96d87411588eeabac850e34, $vd6fe1d0be6347b8ef2427fa629c04485 = false) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();static $v535d02e594853266d2db02ff178dd7f7 = false;if($v535d02e594853266d2db02ff178dd7f7 === false) {$v535d02e594853266d2db02ff178dd7f7 = self::getLangPrefix();}if($v9b207167e5381c47682c6b4f58a623fb = cacheFrontend::getInstance()->loadSql($vd304ba20e96d87411588eeabac850e34 . "_ulang_label_" . $v535d02e594853266d2db02ff178dd7f7)) {}if($vd6fe1d0be6347b8ef2427fa629c04485 == false) {$v9a4a6f6ee974a928a90c9152a674b141 = "common/data";}else {$v9a4a6f6ee974a928a90c9152a674b141 = $vd6fe1d0be6347b8ef2427fa629c04485;}if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = &$v11cc313f766c5d93e6b73ba8439ade0f;}if(isset($v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34])) {$v9b207167e5381c47682c6b4f58a623fb = $v11cc313f766c5d93e6b73ba8439ade0f[$vd304ba20e96d87411588eeabac850e34];}else {$v9b207167e5381c47682c6b4f58a623fb = "{$vd304ba20e96d87411588eeabac850e34}";};cacheFrontend::getInstance()->saveSql($vd304ba20e96d87411588eeabac850e34 . "_ulang_label", $v9b207167e5381c47682c6b4f58a623fb, 180);return $v9b207167e5381c47682c6b4f58a623fb;}public static function getI18n($v3c6e0b8a9c15224a8228b9a98ca1531d, $v240bf022e685b0ee30ad9fe9e1fb5d5b = "") {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(!$v3c6e0b8a9c15224a8228b9a98ca1531d) {return $v3c6e0b8a9c15224a8228b9a98ca1531d;}$v9a4a6f6ee974a928a90c9152a674b141 = "common/data";$v851f5ac9941d720844d143ed9cfcf60a = "i18n::";if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141])) {$v11cc313f766c5d93e6b73ba8439ade0f = $v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141];}else {$v11cc313f766c5d93e6b73ba8439ade0f = self::loadI18NFiles($v9a4a6f6ee974a928a90c9152a674b141);$v0fea6a13c52b4d4725368f24b045ca84[$v9a4a6f6ee974a928a90c9152a674b141] = $v11cc313f766c5d93e6b73ba8439ade0f;}$result = NULL;foreach($v11cc313f766c5d93e6b73ba8439ade0f as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if($v9e3669d19b675bd57058fd4664205d2a == $v3c6e0b8a9c15224a8228b9a98ca1531d) {if($v240bf022e685b0ee30ad9fe9e1fb5d5b) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}else {$result = $v851f5ac9941d720844d143ed9cfcf60a . $v865c0c0b4ab0e063e5caa3387c1a8741;break;}}}if(!is_null($result)) {$v61aa67e6eaba94628806fae66b03cc2c = Array(     'object-type-',     'hierarchy-type-',     'field-',     'fields-group-',     'field-type-',     'object-'    );$v22ee71e9dcc9ca12fc313c6e1ce3f806 = false;$vf663bcefae644ae5f8a16deb6b2fd115 = str_replace("i18n::", "", $v240bf022e685b0ee30ad9fe9e1fb5d5b);foreach($v61aa67e6eaba94628806fae66b03cc2c as $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$v240bf022e685b0ee30ad9fe9e1fb5d5b = $v240bf022e685b0ee30ad9fe9e1fb5d5b;if(substr($vf663bcefae644ae5f8a16deb6b2fd115, 0, strlen($v240bf022e685b0ee30ad9fe9e1fb5d5b)) == $vf663bcefae644ae5f8a16deb6b2fd115) {$v22ee71e9dcc9ca12fc313c6e1ce3f806 = true;}}if($v22ee71e9dcc9ca12fc313c6e1ce3f806 == false) {return NULL;}}return $result;}public static function getLangPrefix() {return "ru";static $vc105c08af1d0d83b729e22ecb887f52a;if(!is_null($vc105c08af1d0d83b729e22ecb887f52a)) {return $vc105c08af1d0d83b729e22ecb887f52a;}$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v851f5ac9941d720844d143ed9cfcf60a = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getPrefix();if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() != "admin" && !defined('VIA_HTTP_SCHEME')) {return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_POST, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getArrayKey($_GET, 'ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}if(!is_null($vc105c08af1d0d83b729e22ecb887f52a = getCookie('ilang'))) {$vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($vc105c08af1d0d83b729e22ecb887f52a);setcookie('ilang', $vc105c08af1d0d83b729e22ecb887f52a, time() + 3600*24*31, '/');return $vc105c08af1d0d83b729e22ecb887f52a;}return $vc105c08af1d0d83b729e22ecb887f52a = checkInterfaceLang($v851f5ac9941d720844d143ed9cfcf60a);}public function __construct() {parent::__construct();}public function __destruct() {}protected function generateJavaScriptLabels($vd6fe1d0be6347b8ef2427fa629c04485) {header("Content-type: text/javascript; charset=utf-8");$i18n = self::loadI18NFiles($vd6fe1d0be6347b8ef2427fa629c04485);$result = <<<INITJS
function getLabel(key, str) {if(setLabel.langLabels[key]) {var res = setLabel.langLabels[key];if(str) {res = res.replace("%s", str);}return res;} else {return "[" + key + "]";}}
function setLabel(key, label) {setLabel.langLabels[key] = label;}setLabel.langLabels = new Array();


INITJS;   foreach($i18n as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {if(substr($v865c0c0b4ab0e063e5caa3387c1a8741, 0, 3) != "js-") {continue;}$v865c0c0b4ab0e063e5caa3387c1a8741 = self::filterOutputString($v865c0c0b4ab0e063e5caa3387c1a8741);$v9e3669d19b675bd57058fd4664205d2a = self::filterOutputString($v9e3669d19b675bd57058fd4664205d2a);$result .= "setLabel('{$v865c0c0b4ab0e063e5caa3387c1a8741}', '{$v9e3669d19b675bd57058fd4664205d2a}');\n";}umiBaseStream::$allowTimeMark = false;return $result;}protected function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("\r\n", "\\r\\n", $vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("\n", "\\n", $vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("'", "\\'", $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}};class cacheFrontend extends singleton implements iSingleton {public static $cacheMode = false;public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function getIsConnected() {return false;}protected function __construct() {}public function load() {return false;}public function save() {return false;}public function loadSql() {return false;}public function saveSql() {return false;}public function flush() {return false;}};class umiBranch {public static function checkIfBranchedByHierarchyTypeId($vacf567c9c3d6cf7c6e2cc0ce108e0631) {return false;}public static function getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069) {return "cms3_object_content";}};class umiEventPoint {public function setParam() {}public function addRef() {}public function call() {}};?>