<?php
 abstract class __exchange_import extends baseModuleAdmin {public function import_do() {$this->setDataType("list");$this->setActionType("view");$vb80bb7740288fda1f201890375a60c8f = getRequest('param0');$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = $v5891da2d64975cae48d175d1e001f5da->getObject($vb80bb7740288fda1f201890375a60c8f);if (!$v2e5d8aa3dfa8ef34ca5131d20f9dad51 instanceof umiObject) {throw new publicException(getLabel("exchange-err-settings_notfound"));}$ve333aabd0a4078100241a8fe7edd6b59 = $v2e5d8aa3dfa8ef34ca5131d20f9dad51->file;if (!($ve333aabd0a4078100241a8fe7edd6b59 instanceof umiFile) || ($ve333aabd0a4078100241a8fe7edd6b59->getIsBroken())) {throw new publicException(getLabel("exchange-err-importfile"));}$vf2fa2147ad132e8e2d65c0f37ef53d9d = $v2e5d8aa3dfa8ef34ca5131d20f9dad51->format;$vd0b86cf78681c016b42b6c54d1591ab9 = $v5891da2d64975cae48d175d1e001f5da->getObject($vf2fa2147ad132e8e2d65c0f37ef53d9d);if (!$vd0b86cf78681c016b42b6c54d1591ab9 instanceof umiObject) {throw new publicException(getLabel("exchange-err-format_undefined"));}$v4ec1b477cd0232b832c1899905ec51a4 = $vd0b86cf78681c016b42b6c54d1591ab9->sid;$vd329d4f3c7be72761631509333155d22 = (int) getSession("import_offset_" . $vb80bb7740288fda1f201890375a60c8f);$ved8430dc53fe9c99911b7c85e45aa6a2 = umiImportSplitter::get($v4ec1b477cd0232b832c1899905ec51a4);$ved8430dc53fe9c99911b7c85e45aa6a2->load($ve333aabd0a4078100241a8fe7edd6b59->getFilePath(), 25, $vd329d4f3c7be72761631509333155d22);$v9a09b4dfda82e3e665e31092d1c3ec8d = $ved8430dc53fe9c99911b7c85e45aa6a2->getDocument();$vb9ef165b255673dde47bff07f4390fb1 = $ved8430dc53fe9c99911b7c85e45aa6a2->translate($v9a09b4dfda82e3e665e31092d1c3ec8d);$v1bc49dba86c5074c5266c6d38c301a46 = new xmlImporter();$v1bc49dba86c5074c5266c6d38c301a46->loadXmlString($vb9ef165b255673dde47bff07f4390fb1);$v6a7f245843454cf4f28ad7c5e2572aa2 = $v2e5d8aa3dfa8ef34ca5131d20f9dad51->elements;if (is_array($v6a7f245843454cf4f28ad7c5e2572aa2) && count($v6a7f245843454cf4f28ad7c5e2572aa2)) {$v1bc49dba86c5074c5266c6d38c301a46->setDestinationElement($v6a7f245843454cf4f28ad7c5e2572aa2[0]);}$v1bc49dba86c5074c5266c6d38c301a46->execute();$_SESSION["import_offset_" . $vb80bb7740288fda1f201890375a60c8f] = $ved8430dc53fe9c99911b7c85e45aa6a2->getOffset();if ($ved8430dc53fe9c99911b7c85e45aa6a2->getIsComplete()) {unset($_SESSION["import_offset_" . $vb80bb7740288fda1f201890375a60c8f]);}$v8d777f385d3dfec8815d20f7496026dc = array(    "attribute:complete" => (int) $ved8430dc53fe9c99911b7c85e45aa6a2->getIsComplete(),    "attribute:created" => $v1bc49dba86c5074c5266c6d38c301a46->created_elements,    "attribute:updated" => $v1bc49dba86c5074c5266c6d38c301a46->updated_elements,    "attribute:deleted" => $v1bc49dba86c5074c5266c6d38c301a46->deleted_elements,    "attribute:errors" => $v1bc49dba86c5074c5266c6d38c301a46->import_errors,    "nodes:log" => $v1bc49dba86c5074c5266c6d38c301a46->getImportLog()   );$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}}?>