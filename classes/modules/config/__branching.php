<?php
 abstract class __branching_config extends baseModuleAdmin {public function branching() {$v21ffce5b8a6cc8cc6a41448dd69623c9 = Array();$this->setDataType('settings');$this->setActionType('view');$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($v21ffce5b8a6cc8cc6a41448dd69623c9, 'settings');$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}public function getDatabaseReport() {$v2213c0ace0e89772ec74576aa7a0c37d = 0;$vb7b629590e841005377a2675de45ad1e = 0;$v586317c4754af72393ae0aee68eba38c = 3500;$v838082ca722a362da0dc36441d7de253 = round($v586317c4754af72393ae0aee68eba38c / 2);foreach(umiBranch::getDatabaseStatus() as $vcaf9b6b99962bf5c2264824231d7a40c) {$v2213c0ace0e89772ec74576aa7a0c37d++;$v4aa3988e15afb9618423a0c2961a469f = $vcaf9b6b99962bf5c2264824231d7a40c['isBranched'];$vf7bd60b75b29d79b660a2859395c1a24 = $vcaf9b6b99962bf5c2264824231d7a40c['count'];if(!$v4aa3988e15afb9618423a0c2961a469f && ($vf7bd60b75b29d79b660a2859395c1a24 > $v586317c4754af72393ae0aee68eba38c)) {$vb7b629590e841005377a2675de45ad1e++;}if($v4aa3988e15afb9618423a0c2961a469f && ($vf7bd60b75b29d79b660a2859395c1a24 < $v838082ca722a362da0dc36441d7de253)) {$vb7b629590e841005377a2675de45ad1e++;}}return ($v2213c0ace0e89772ec74576aa7a0c37d > 0) ? round($vb7b629590e841005377a2675de45ad1e * 100 / $v2213c0ace0e89772ec74576aa7a0c37d) : 0;}public function reviewDatabase() {$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();$v7f2db423a49b305459147332fb01cf87->contentType('text/javascript');$v7f2db423a49b305459147332fb01cf87->charset('utf-8');$v586317c4754af72393ae0aee68eba38c = 3500;$v838082ca722a362da0dc36441d7de253 = round($v586317c4754af72393ae0aee68eba38c / 2);$v9acb44549b41563697bb490144ec6258 = umiBranch::getDatabaseStatus();foreach($v9acb44549b41563697bb490144ec6258 as $v447b7147e84be512208dcc0995d67ebc) {if($v447b7147e84be512208dcc0995d67ebc['isBranched'] == false) {if($v447b7147e84be512208dcc0995d67ebc['count'] > $v586317c4754af72393ae0aee68eba38c) {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $v447b7147e84be512208dcc0995d67ebc['id'];self::branchTable($vacf567c9c3d6cf7c6e2cc0ce108e0631);}}else {if($v447b7147e84be512208dcc0995d67ebc['count'] < $v838082ca722a362da0dc36441d7de253) {$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $v447b7147e84be512208dcc0995d67ebc['id'];self::mergeTable($vacf567c9c3d6cf7c6e2cc0ce108e0631);}}}$v7f2db423a49b305459147332fb01cf87->push("\nwindow.location = window.location;\n");$v7f2db423a49b305459147332fb01cf87->end();}protected static function branchTable($vacf567c9c3d6cf7c6e2cc0ce108e0631) {$v1081232f9f4c5953506a75107dd45f6f = new baseXmlConfig(SYS_KERNEL_PATH . "subsystems/manifest/manifests/BranchContentTable.xml");$v1081232f9f4c5953506a75107dd45f6f->addParam('hierarchy-type-id', $vacf567c9c3d6cf7c6e2cc0ce108e0631);$vea81aa7df47d74c6737bf98fabf3ff82 = new manifest($v1081232f9f4c5953506a75107dd45f6f);$v7f5cb74af5d7f4b82200738fdbdc5a45->hibernationsCountLeft = -1;$vea81aa7df47d74c6737bf98fabf3ff82->setCallback(new jsonManifestCallback);$vea81aa7df47d74c6737bf98fabf3ff82->execute();}protected static function mergeTable($vacf567c9c3d6cf7c6e2cc0ce108e0631) {$v1081232f9f4c5953506a75107dd45f6f = new baseXmlConfig(SYS_KERNEL_PATH . "subsystems/manifest/manifests/MergeContentTable.xml");$v1081232f9f4c5953506a75107dd45f6f->addParam('hierarchy-type-id', $vacf567c9c3d6cf7c6e2cc0ce108e0631);$vea81aa7df47d74c6737bf98fabf3ff82 = new manifest($v1081232f9f4c5953506a75107dd45f6f);$v7f5cb74af5d7f4b82200738fdbdc5a45->hibernationsCountLeft = -1;$vea81aa7df47d74c6737bf98fabf3ff82->setCallback(new jsonManifestCallback);$vea81aa7df47d74c6737bf98fabf3ff82->execute();}};?>