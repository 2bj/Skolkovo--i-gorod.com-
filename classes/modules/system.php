<?php
class system {public $thumbs_path = "./images/cms/thumbs/";public function __toString() {return "umi.__system";}public function cms_callMethod($v2fa70149e2a7e75da2b0303d0a36a944, $args) {return call_user_func_array(Array($this, $v2fa70149e2a7e75da2b0303d0a36a944), $args);}public function __call($vea9f6aca279138c58f705c8d4cb4b8ce, $args) {throw new publicException("Method " . get_class($this) . "::" . $vea9f6aca279138c58f705c8d4cb4b8ce . " doesn't exists");}public function is_int($v61dd86c2dc75c3f569ec619bd283a33f) {return is_numeric($v61dd86c2dc75c3f569ec619bd283a33f);}public function setThumbsPath($vabdc6fca39c945587efec7f17113d48a) {$v24195c46f19d58194c0224e234bcf1b5 = $this->thumbs_path;$this->thumbs_path = $vabdc6fca39c945587efec7f17113d48a;return $v24195c46f19d58194c0224e234bcf1b5;}public function bool2str($v61dd86c2dc75c3f569ec619bd283a33f) {return ($v61dd86c2dc75c3f569ec619bd283a33f) ? "true" : "false";}public function fileExists($v61dd86c2dc75c3f569ec619bd283a33f) {return file_exists(ini_get('include_path') . $v61dd86c2dc75c3f569ec619bd283a33f);}public function isSubscribedOnChanges($v7552cd149af7495ee7d8225974e50f80) {if(!$v7552cd149af7495ee7d8225974e50f80) return "";$v3793ea52a7be2d7deafd858fda50775c = " checked";$permissions = permissionsCollection::getInstance();$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$v8e44f0089b076e18a718eb9ca3d94674 = $permissions->getUserId();$vee11cbb19052e40b07aac0ca060c23ee = $v5891da2d64975cae48d175d1e001f5da->getObject($v8e44f0089b076e18a718eb9ca3d94674);if($vee11cbb19052e40b07aac0ca060c23ee instanceof iUmiObject == false) return false;foreach($vee11cbb19052e40b07aac0ca060c23ee->subscribed_pages as $v71860c77c6745379b0d44304d66b6a13) {if($v71860c77c6745379b0d44304d66b6a13 instanceof iUmiHierarchyElement) {if($v71860c77c6745379b0d44304d66b6a13->id == $v7552cd149af7495ee7d8225974e50f80) return $v3793ea52a7be2d7deafd858fda50775c;}else {if($v71860c77c6745379b0d44304d66b6a13 == $v7552cd149af7495ee7d8225974e50f80) return $v3793ea52a7be2d7deafd858fda50775c;}}}private function getImageProps($v47826cacc65c665212b821e6ff80b9b0, $v6e578ced8620311c061ee588b4a74f67 = "width") {$v47826cacc65c665212b821e6ff80b9b0 = ini_get('include_path') . $v47826cacc65c665212b821e6ff80b9b0;if(!file_exists($v47826cacc65c665212b821e6ff80b9b0)) return false;list($veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81) = getimagesize($v47826cacc65c665212b821e6ff80b9b0);if($v6e578ced8620311c061ee588b4a74f67 == "width")  return $veaae26a6fb20ed3ef54fb23bfa0b1fcc;if($v6e578ced8620311c061ee588b4a74f67 == "height") return $vb435e227d5dd201e1768b2bcb2e0aa81;}public function getImageWidth($v47826cacc65c665212b821e6ff80b9b0) {return $this->getImageProps($v47826cacc65c665212b821e6ff80b9b0, 'width');}public function getImageHeight($v47826cacc65c665212b821e6ff80b9b0) {return $this->getImageProps($v47826cacc65c665212b821e6ff80b9b0, 'height');}public function getOuterContent($v61dd86c2dc75c3f569ec619bd283a33f, $v8c58e4e21f2c1d8038c61963ba47d476 = "UTF-8") {if(!$v8c58e4e21f2c1d8038c61963ba47d476) $v8c58e4e21f2c1d8038c61963ba47d476 = "UTF-8";if(str_replace("http://", "", $v61dd86c2dc75c3f569ec619bd283a33f) != $v61dd86c2dc75c3f569ec619bd283a33f || str_replace("umap://", "", $v61dd86c2dc75c3f569ec619bd283a33f) != $v61dd86c2dc75c3f569ec619bd283a33f) {if($v9b207167e5381c47682c6b4f58a623fb = cacheFrontend::getInstance()->loadSql($v61dd86c2dc75c3f569ec619bd283a33f)) {return $v9b207167e5381c47682c6b4f58a623fb;}$v9b207167e5381c47682c6b4f58a623fb = umiRemoteFileGetter::get($v61dd86c2dc75c3f569ec619bd283a33f);if($v8c58e4e21f2c1d8038c61963ba47d476 != "UTF-8") {$v9b207167e5381c47682c6b4f58a623fb = iconv($v8c58e4e21f2c1d8038c61963ba47d476, "UTF-8//IGNORE", $v9b207167e5381c47682c6b4f58a623fb);}cacheFrontend::getInstance()->saveSql($v61dd86c2dc75c3f569ec619bd283a33f, $v9b207167e5381c47682c6b4f58a623fb);return $v9b207167e5381c47682c6b4f58a623fb;}else {if(substr($v61dd86c2dc75c3f569ec619bd283a33f, -4, 4) == ".tpl") {$v9b207167e5381c47682c6b4f58a623fb = umiRemoteFileGetter::get($v61dd86c2dc75c3f569ec619bd283a33f);if($v8c58e4e21f2c1d8038c61963ba47d476 != "UTF-8") {$v9b207167e5381c47682c6b4f58a623fb = iconv($v8c58e4e21f2c1d8038c61963ba47d476, "UTF-8//IGNORE", $v9b207167e5381c47682c6b4f58a623fb);}return $v9b207167e5381c47682c6b4f58a623fb;}else {throw new publicException(getLabel('error-resource-not-found', null, $v61dd86c2dc75c3f569ec619bd283a33f));}}}public function getSize($ve866231598ed4cb18be5e493240a11b0, $v80a26383e00e892c98ebd598edcc5dbb = "B", $v3b6478e2d54b4966388cfd33e5e87f78 = 0) {$vb4d1cb64bb422ee326f99d05c787e465 = ini_get('include_path') . $ve866231598ed4cb18be5e493240a11b0;if(is_numeric($ve866231598ed4cb18be5e493240a11b0)) {$v7dabf5c198b0bab2eaa42bb03a113e55 = $ve866231598ed4cb18be5e493240a11b0;}else {if(!file_exists($vb4d1cb64bb422ee326f99d05c787e465)) {throw new publicException(getLabel('error-file-does-not-exist', null, $ve866231598ed4cb18be5e493240a11b0));}$v7dabf5c198b0bab2eaa42bb03a113e55 = filesize($vb4d1cb64bb422ee326f99d05c787e465);}if(!$v3b6478e2d54b4966388cfd33e5e87f78) $v3b6478e2d54b4966388cfd33e5e87f78 = 0;if($v80a26383e00e892c98ebd598edcc5dbb == "B") return round($v7dabf5c198b0bab2eaa42bb03a113e55, $v3b6478e2d54b4966388cfd33e5e87f78);if($v80a26383e00e892c98ebd598edcc5dbb == "K") return round($v7dabf5c198b0bab2eaa42bb03a113e55 / 1024, $v3b6478e2d54b4966388cfd33e5e87f78);if($v80a26383e00e892c98ebd598edcc5dbb == "M") return round($v7dabf5c198b0bab2eaa42bb03a113e55 / (1024*1024), $v3b6478e2d54b4966388cfd33e5e87f78);if($v80a26383e00e892c98ebd598edcc5dbb == "G") return round($v7dabf5c198b0bab2eaa42bb03a113e55 / (1024*1024*1024), $v3b6478e2d54b4966388cfd33e5e87f78);}public function convertDate($vd7e6d55ba379a13d08c25d15faf2a23b, $v1ddcb92ade31c8fbd370001f9b29a7d9 = false) {if($vd7e6d55ba379a13d08c25d15faf2a23b == 'now') $vd7e6d55ba379a13d08c25d15faf2a23b = time();if(!is_numeric($vd7e6d55ba379a13d08c25d15faf2a23b)) return "";if(!$v1ddcb92ade31c8fbd370001f9b29a7d9) $v1ddcb92ade31c8fbd370001f9b29a7d9 = DEFAULT_DATE_FORMAT;return $vd7e6d55ba379a13d08c25d15faf2a23b ? date($v1ddcb92ade31c8fbd370001f9b29a7d9, $vd7e6d55ba379a13d08c25d15faf2a23b) : '';}public function ifClause($v26542fb18a8b14c9775aa475f23c909f, $v7c92cf1eee8d99cc85f8355a3d6e4b86 = "", $vd279186428a75016b17e4df5ea43d080 = "") {return ($v26542fb18a8b14c9775aa475f23c909f) ? $v7c92cf1eee8d99cc85f8355a3d6e4b86 : $vd279186428a75016b17e4df5ea43d080;}public function parse_price($v0fc3cfbc27e91ea60a787de13dae3e3c = 0) {return number_format($v0fc3cfbc27e91ea60a787de13dae3e3c, 0, ',', ' ');}public function getCurrentURI() {return getServer('REQUEST_URI');}public function makeThumbnail($vd6fe1d0be6347b8ef2427fa629c04485 = false, $veaae26a6fb20ed3ef54fb23bfa0b1fcc = 'auto', $vb435e227d5dd201e1768b2bcb2e0aa81 = 'auto', $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $v4f21a3dc48a4939b99266894c9fa2237 = false, $v4e5868d676cb634aa75b125a0f741abf = 0) {if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";$v4e5868d676cb634aa75b125a0f741abf = (int)$v4e5868d676cb634aa75b125a0f741abf;$v78805a221a988e79ef3f42d7c5bfd418 = new umiImageFile($vd6fe1d0be6347b8ef2427fa629c04485);$v3090ad88ff7c9ca191579b709069fe64 = $v78805a221a988e79ef3f42d7c5bfd418->getFileName();$veb9f74e698fbb6e2897b3791bc406cbf = $v78805a221a988e79ef3f42d7c5bfd418->getExt();$vb43c766cbc1365dca0ffcee38e46b613 = sha1($v78805a221a988e79ef3f42d7c5bfd418->getDirName());if (!is_dir($this->thumbs_path.$vb43c766cbc1365dca0ffcee38e46b613)) {mkdir($this->thumbs_path.$vb43c766cbc1365dca0ffcee38e46b613, 0755, true);}$veb9f74e698fbb6e2897b3791bc406cbf = strtolower($veb9f74e698fbb6e2897b3791bc406cbf);$v107703932395f334896434b598ccdc55 = Array('gif', 'jpeg', 'jpg', 'png', 'bmp');if(!in_array($veb9f74e698fbb6e2897b3791bc406cbf, $v107703932395f334896434b598ccdc55)) return "";$v3090ad88ff7c9ca191579b709069fe64 = substr($v3090ad88ff7c9ca191579b709069fe64, 0, (strlen($v3090ad88ff7c9ca191579b709069fe64) - (strlen($veb9f74e698fbb6e2897b3791bc406cbf) + 1)) );$vddc9a97c07cfa1f9fe744dbc63143e5c = $v3090ad88ff7c9ca191579b709069fe64 . "_" . $veaae26a6fb20ed3ef54fb23bfa0b1fcc . "_" . $vb435e227d5dd201e1768b2bcb2e0aa81 . "." . $veb9f74e698fbb6e2897b3791bc406cbf;$vf38211e4c6839893265bcda112b63f80 = $this->thumbs_path .$vb43c766cbc1365dca0ffcee38e46b613."/". $vddc9a97c07cfa1f9fe744dbc63143e5c;if(!file_exists($vf38211e4c6839893265bcda112b63f80) || filemtime($vf38211e4c6839893265bcda112b63f80) < filemtime($vd6fe1d0be6347b8ef2427fa629c04485)) {if(file_exists($vf38211e4c6839893265bcda112b63f80)) {unlink($vf38211e4c6839893265bcda112b63f80);}$v3a8d65a128a22de38fe374a76974161c = $v78805a221a988e79ef3f42d7c5bfd418->getWidth();$v427c23061461a4b29c5d39dd32b7f2c6 = $v78805a221a988e79ef3f42d7c5bfd418->getHeight();if($v3a8d65a128a22de38fe374a76974161c <= $veaae26a6fb20ed3ef54fb23bfa0b1fcc && $v427c23061461a4b29c5d39dd32b7f2c6 <= $vb435e227d5dd201e1768b2bcb2e0aa81) {copy($vd6fe1d0be6347b8ef2427fa629c04485, $vf38211e4c6839893265bcda112b63f80);$v6f81aaeb51b38cddc8851000851e9c98  = $veaae26a6fb20ed3ef54fb23bfa0b1fcc;$v3c10300988ff410c7f7181d43214229e = $vb435e227d5dd201e1768b2bcb2e0aa81;}else {if ($veaae26a6fb20ed3ef54fb23bfa0b1fcc == "auto" && $vb435e227d5dd201e1768b2bcb2e0aa81 == "auto"){$v3c10300988ff410c7f7181d43214229e = $v427c23061461a4b29c5d39dd32b7f2c6;$v6f81aaeb51b38cddc8851000851e9c98 = $v3a8d65a128a22de38fe374a76974161c;}elseif ($veaae26a6fb20ed3ef54fb23bfa0b1fcc == "auto" || $vb435e227d5dd201e1768b2bcb2e0aa81 == "auto"){if ($vb435e227d5dd201e1768b2bcb2e0aa81 == "auto"){if($v4e5868d676cb634aa75b125a0f741abf & 0x2 && $veaae26a6fb20ed3ef54fb23bfa0b1fcc > $v3a8d65a128a22de38fe374a76974161c) {$v3c10300988ff410c7f7181d43214229e = $v427c23061461a4b29c5d39dd32b7f2c6;$v6f81aaeb51b38cddc8851000851e9c98  = $v3a8d65a128a22de38fe374a76974161c;}else {$v6f81aaeb51b38cddc8851000851e9c98 = (int) $veaae26a6fb20ed3ef54fb23bfa0b1fcc;$v3c10300988ff410c7f7181d43214229e = (int) round($v427c23061461a4b29c5d39dd32b7f2c6 * ($veaae26a6fb20ed3ef54fb23bfa0b1fcc / $v3a8d65a128a22de38fe374a76974161c));}}elseif($veaae26a6fb20ed3ef54fb23bfa0b1fcc == "auto"){if($v4e5868d676cb634aa75b125a0f741abf & 0x2 && $vb435e227d5dd201e1768b2bcb2e0aa81 > $v427c23061461a4b29c5d39dd32b7f2c6) {$v3c10300988ff410c7f7181d43214229e = $v427c23061461a4b29c5d39dd32b7f2c6;$v6f81aaeb51b38cddc8851000851e9c98  = $v3a8d65a128a22de38fe374a76974161c;}else {$v3c10300988ff410c7f7181d43214229e = (int) $vb435e227d5dd201e1768b2bcb2e0aa81;$v6f81aaeb51b38cddc8851000851e9c98 = (int) round($v3a8d65a128a22de38fe374a76974161c * ($vb435e227d5dd201e1768b2bcb2e0aa81 / $v427c23061461a4b29c5d39dd32b7f2c6));}}}else{if($v4e5868d676cb634aa75b125a0f741abf & 0x1) {$v71601a1f68d42d55d91f4c9e39e61685  = (float) $veaae26a6fb20ed3ef54fb23bfa0b1fcc / $v3a8d65a128a22de38fe374a76974161c;$v7263447d6d1b368bcdbd1fe30835d087 = (float) $vb435e227d5dd201e1768b2bcb2e0aa81 / $v427c23061461a4b29c5d39dd32b7f2c6;$v8ce4b16b22b58894aa86c421e8759df3 = max(array($v71601a1f68d42d55d91f4c9e39e61685, $v7263447d6d1b368bcdbd1fe30835d087));if(($v4e5868d676cb634aa75b125a0f741abf & 0x2) && ($v8ce4b16b22b58894aa86c421e8759df3 > 1.0)) {$v8ce4b16b22b58894aa86c421e8759df3 = 1.0;}$v6f81aaeb51b38cddc8851000851e9c98  = (int) round($v3a8d65a128a22de38fe374a76974161c * $v8ce4b16b22b58894aa86c421e8759df3);$v3c10300988ff410c7f7181d43214229e = (int) round($v427c23061461a4b29c5d39dd32b7f2c6 * $v8ce4b16b22b58894aa86c421e8759df3);}else {$v6f81aaeb51b38cddc8851000851e9c98  = $veaae26a6fb20ed3ef54fb23bfa0b1fcc;$v3c10300988ff410c7f7181d43214229e = $vb435e227d5dd201e1768b2bcb2e0aa81;}}$vf12105146129696d6a7e0ed521db2e48 = imagecreatetruecolor($v6f81aaeb51b38cddc8851000851e9c98, $v3c10300988ff410c7f7181d43214229e);if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromgif($vd6fe1d0be6347b8ef2427fa629c04485);$vde6403c41549334bb72244a31e9edf52 = imagecolorallocate($vf12105146129696d6a7e0ed521db2e48, 255, 255, 255);imagefill($vf12105146129696d6a7e0ed521db2e48, 0, 0, $vde6403c41549334bb72244a31e9edf52);imagecolortransparent($vf12105146129696d6a7e0ed521db2e48, $vde6403c41549334bb72244a31e9edf52);imagealphablending($v36cd38f49b9afa08222c0dc9ebfe35eb, TRUE);imagealphablending($vf12105146129696d6a7e0ed521db2e48, TRUE);}else if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefrompng($vd6fe1d0be6347b8ef2427fa629c04485);$vde6403c41549334bb72244a31e9edf52 = imagecolorallocate($vf12105146129696d6a7e0ed521db2e48, 255, 255, 255);imagefill($vf12105146129696d6a7e0ed521db2e48, 0, 0, $vde6403c41549334bb72244a31e9edf52);imagecolortransparent($vf12105146129696d6a7e0ed521db2e48, $vde6403c41549334bb72244a31e9edf52);imagealphablending($v36cd38f49b9afa08222c0dc9ebfe35eb, TRUE);imagealphablending($vf12105146129696d6a7e0ed521db2e48, TRUE);}else {$v36cd38f49b9afa08222c0dc9ebfe35eb = imagecreatefromjpeg($vd6fe1d0be6347b8ef2427fa629c04485);}imagecopyresampled($vf12105146129696d6a7e0ed521db2e48, $v36cd38f49b9afa08222c0dc9ebfe35eb, 0, 0, 0, 0, $v6f81aaeb51b38cddc8851000851e9c98, $v3c10300988ff410c7f7181d43214229e, $v3a8d65a128a22de38fe374a76974161c, $v427c23061461a4b29c5d39dd32b7f2c6);if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "png") {imagepng($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else if($v78805a221a988e79ef3f42d7c5bfd418->getExt() == "gif") {imagegif($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80);}else {imagejpeg($vf12105146129696d6a7e0ed521db2e48, $vf38211e4c6839893265bcda112b63f80, 100);}}}$v2063c1608d6e0baf80249c42e2be5804 = new umiImageFile($vf38211e4c6839893265bcda112b63f80);$v47c80780ab608cc046f2a6e6f071feb6 = Array();$v47c80780ab608cc046f2a6e6f071feb6['size'] = $v2063c1608d6e0baf80249c42e2be5804->getSize();$v47c80780ab608cc046f2a6e6f071feb6['filename'] = $v2063c1608d6e0baf80249c42e2be5804->getFileName();$v47c80780ab608cc046f2a6e6f071feb6['filepath'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath();$v47c80780ab608cc046f2a6e6f071feb6['src'] = $v2063c1608d6e0baf80249c42e2be5804->getFilePath(true);$v47c80780ab608cc046f2a6e6f071feb6['ext'] = $v2063c1608d6e0baf80249c42e2be5804->getExt();$v47c80780ab608cc046f2a6e6f071feb6['width'] = $v2063c1608d6e0baf80249c42e2be5804->getWidth();$v47c80780ab608cc046f2a6e6f071feb6['height'] = $v2063c1608d6e0baf80249c42e2be5804->getHeight();$v47c80780ab608cc046f2a6e6f071feb6['void:template'] = $v66f6181bcb4cff4cd38fbc804a036db6;if(cmsController::getInstance()->getCurrentMode() == "admin") {$v47c80780ab608cc046f2a6e6f071feb6['src'] = str_replace("&", "&amp;", $v47c80780ab608cc046f2a6e6f071feb6['src']);}if($v4f21a3dc48a4939b99266894c9fa2237) {return $v47c80780ab608cc046f2a6e6f071feb6;}else {list($v4f2afc9c4099ee1f39c9f551123e54bd) = def_module::loadTemplates("tpls/thumbs/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "image");return def_module::parseTemplate($v4f2afc9c4099ee1f39c9f551123e54bd, $v47c80780ab608cc046f2a6e6f071feb6);}}public function numpages($vfbb44b4487415b134bce9c790a27fe5e = 0, $v9d85c254b5062e518a134a61950999c3 = 0, $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $v51746fc9cfaaf892e94c2d56d7508b37 = "p", $vc381645e69cb46e1f8cd9c8efaf89360 = false) {if(!$v51746fc9cfaaf892e94c2d56d7508b37) $v51746fc9cfaaf892e94c2d56d7508b37 = "p";if(!$vc381645e69cb46e1f8cd9c8efaf89360) (int) $vc381645e69cb46e1f8cd9c8efaf89360 = false;return umiPagenum::generateNumPage($vfbb44b4487415b134bce9c790a27fe5e, $v9d85c254b5062e518a134a61950999c3, $v66f6181bcb4cff4cd38fbc804a036db6, $v51746fc9cfaaf892e94c2d56d7508b37, $vc381645e69cb46e1f8cd9c8efaf89360);}public function order_by($v972bf3f05d14ffbdb817bef60638ff00, $v5f694956811487225d15e973ca38fbab, $v66f6181bcb4cff4cd38fbc804a036db6 = "default") {$vd98a07f84921b24ee30f86fd8cd85c3c = Array('%5B', '%5D');$v01b6e20344b68835c5ed1ddedf20d531 = Array('[', ']');$result = umiPagenum::generateOrderBy($v972bf3f05d14ffbdb817bef60638ff00, $v5f694956811487225d15e973ca38fbab, $v66f6181bcb4cff4cd38fbc804a036db6);$result = str_replace($vd98a07f84921b24ee30f86fd8cd85c3c, $v01b6e20344b68835c5ed1ddedf20d531, $result);return $result;}public function uri_path_pic() {list($v9b207167e5381c47682c6b4f58a623fb) = split("/", $_REQUEST['path']);$v93d7a1873723d1172c5d52071cb65ebe = Array('about', 'portfolio', 'sites', 'promotion', 'multimedia', 'own_projects', 'contacts');if(!in_array($v9b207167e5381c47682c6b4f58a623fb, $v93d7a1873723d1172c5d52071cb65ebe)) {$v9b207167e5381c47682c6b4f58a623fb = array_pop($v93d7a1873723d1172c5d52071cb65ebe);}return $v9b207167e5381c47682c6b4f58a623fb;}public function captcha($v66f6181bcb4cff4cd38fbc804a036db6="default") {$v2245023265ae4cf87d02c8b6ba991139 = mainConfiguration::getInstance();if(!$v2245023265ae4cf87d02c8b6ba991139->get('anti-spam', 'captcha.enabled')) {return '';}return umiCaptcha::generateCaptcha($v66f6181bcb4cff4cd38fbc804a036db6);}public function smartSubstring($vb45cffe084dd3d20d928bee85e7b0f21, $vd11a7f89d7c79e361cb82bd0ada9ef91 = 30) {if(!$vd11a7f89d7c79e361cb82bd0ada9ef91) $vd11a7f89d7c79e361cb82bd0ada9ef91 = 30;if(strlen($vb45cffe084dd3d20d928bee85e7b0f21) > ($vd11a7f89d7c79e361cb82bd0ada9ef91 - 3)) {return substr($vb45cffe084dd3d20d928bee85e7b0f21, 0, ($vd11a7f89d7c79e361cb82bd0ada9ef91 - 3)) . "...";}else {return $vb45cffe084dd3d20d928bee85e7b0f21;}}public function referer_uri() {return htmlspecialchars(getServer('HTTP_REFERER'));}public function getNext($vd6fe1d0be6347b8ef2427fa629c04485, $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $vdfc394bd05a4b48161c790034af522a8 = "", $v70a17ffa722a3985b86d30b034ad06d7 = 0) {if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";$v7057e8409c7c531a1a6e9ac3df4ed549 = def_module::analyzeRequiredPath($vd6fe1d0be6347b8ef2427fa629c04485);if($v7057e8409c7c531a1a6e9ac3df4ed549 === false) {throw new publicException(getLabel('error-page-does-not-exist', null, $vd6fe1d0be6347b8ef2427fa629c04485));}$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof iUmiHierarchyElement == false) {throw new publicException('error-require-more-permissions');}$v6be379826b20cc58475f636e33f4606b = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();if($vdfc394bd05a4b48161c790034af522a8) {$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->addHierarchyFilter($v6be379826b20cc58475f636e33f4606b);$v8be74552df93e31bbdd6b36ed74bdb6a->addActiveFilter(true);$v8be74552df93e31bbdd6b36ed74bdb6a->addPermissions();$v87306dd4235ed712ebc07fe169b76f83 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$va1b28424d5a1e1b259a214fddb9465cb = $v7ae7003da59ae71dcc9f8638ef50593d->getFieldId($vdfc394bd05a4b48161c790034af522a8);if(!$va1b28424d5a1e1b259a214fddb9465cb) {throw new publicException(getLabel('error-prop-not-found', null, $vdfc394bd05a4b48161c790034af522a8));}$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByProperty($va1b28424d5a1e1b259a214fddb9465cb, $v70a17ffa722a3985b86d30b034ad06d7);$v476b583e3acc46dcf196c34a1a5f93ab = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);}else {$v476b583e3acc46dcf196c34a1a5f93ab = umiHierarchy::getInstance()->getChilds($v6be379826b20cc58475f636e33f4606b, false);$v476b583e3acc46dcf196c34a1a5f93ab = array_keys($v476b583e3acc46dcf196c34a1a5f93ab);}$vca644eb811f5574cac604dd1515edd64 = false;$va80ef2135ca455ab120c8ec307b9c3aa = false;foreach($v476b583e3acc46dcf196c34a1a5f93ab as $vb80bb7740288fda1f201890375a60c8f) {if($va80ef2135ca455ab120c8ec307b9c3aa) {$vca644eb811f5574cac604dd1515edd64 = $vb80bb7740288fda1f201890375a60c8f;break;}if($vb80bb7740288fda1f201890375a60c8f == $v7057e8409c7c531a1a6e9ac3df4ed549) {$va80ef2135ca455ab120c8ec307b9c3aa = true;}}list($v4f2afc9c4099ee1f39c9f551123e54bd, $vdd569abbc7ff08d35b7fee53150fcddc) = def_module::loadTemplates("./tpls/content/slider/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "next", "next_last");if($vca644eb811f5574cac604dd1515edd64 !== false) {$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$vfca1bff8ad8b3a8585abfb0ad523ba42['id'] = $vca644eb811f5574cac604dd1515edd64;$vfca1bff8ad8b3a8585abfb0ad523ba42['link'] = umiHierarchy::getInstance()->getPathById($vca644eb811f5574cac604dd1515edd64);return def_module::parseTemplate($v4f2afc9c4099ee1f39c9f551123e54bd, $vfca1bff8ad8b3a8585abfb0ad523ba42, $vca644eb811f5574cac604dd1515edd64);}else {return $vdd569abbc7ff08d35b7fee53150fcddc;}return $v7057e8409c7c531a1a6e9ac3df4ed549;}public function getPrevious($vd6fe1d0be6347b8ef2427fa629c04485, $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $vdfc394bd05a4b48161c790034af522a8 = "", $v70a17ffa722a3985b86d30b034ad06d7 = 0) {if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";$v7057e8409c7c531a1a6e9ac3df4ed549 = def_module::analyzeRequiredPath($vd6fe1d0be6347b8ef2427fa629c04485);if($v7057e8409c7c531a1a6e9ac3df4ed549 === false) {throw new publicException(getLabel('error-page-does-not-exist', null, $vd6fe1d0be6347b8ef2427fa629c04485));}$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$v6be379826b20cc58475f636e33f4606b = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();if($vdfc394bd05a4b48161c790034af522a8) {$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->addHierarchyFilter($v6be379826b20cc58475f636e33f4606b);$v8be74552df93e31bbdd6b36ed74bdb6a->addActiveFilter(true);$v8be74552df93e31bbdd6b36ed74bdb6a->addPermissions();$v87306dd4235ed712ebc07fe169b76f83 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$va1b28424d5a1e1b259a214fddb9465cb = $v7ae7003da59ae71dcc9f8638ef50593d->getFieldId($vdfc394bd05a4b48161c790034af522a8);if(!$va1b28424d5a1e1b259a214fddb9465cb) {throw new publicException(getLabel('error-prop-not-found', null, $vdfc394bd05a4b48161c790034af522a8));}$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByProperty($va1b28424d5a1e1b259a214fddb9465cb, $v70a17ffa722a3985b86d30b034ad06d7);$v476b583e3acc46dcf196c34a1a5f93ab = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);}else {$v476b583e3acc46dcf196c34a1a5f93ab = umiHierarchy::getInstance()->getChilds($v6be379826b20cc58475f636e33f4606b, false);$v476b583e3acc46dcf196c34a1a5f93ab = array_keys($v476b583e3acc46dcf196c34a1a5f93ab);}$v36c78ef23c280041d34976b38ef4406c = false;foreach($v476b583e3acc46dcf196c34a1a5f93ab as $vb80bb7740288fda1f201890375a60c8f) {if($vb80bb7740288fda1f201890375a60c8f == $v7057e8409c7c531a1a6e9ac3df4ed549) {break;}else {$v36c78ef23c280041d34976b38ef4406c = $vb80bb7740288fda1f201890375a60c8f;}}list($v4f2afc9c4099ee1f39c9f551123e54bd, $vd10a92a0a9d6587947ee1fd7d3e4aa42) = def_module::loadTemplates("./tpls/content/slider/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "previous", "previous_first");if($v36c78ef23c280041d34976b38ef4406c !== false) {$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$vfca1bff8ad8b3a8585abfb0ad523ba42['id'] = $v36c78ef23c280041d34976b38ef4406c;$vfca1bff8ad8b3a8585abfb0ad523ba42['link'] = umiHierarchy::getInstance()->getPathById($v36c78ef23c280041d34976b38ef4406c);return def_module::parseTemplate($v4f2afc9c4099ee1f39c9f551123e54bd, $vfca1bff8ad8b3a8585abfb0ad523ba42, $v36c78ef23c280041d34976b38ef4406c);}else {return $vd10a92a0a9d6587947ee1fd7d3e4aa42;}return $v7057e8409c7c531a1a6e9ac3df4ed549;}public function listErrorMessages($v66f6181bcb4cff4cd38fbc804a036db6 = "default") {if(!$v66f6181bcb4cff4cd38fbc804a036db6) $v66f6181bcb4cff4cd38fbc804a036db6 = "default";if($v510ff634fce407eea1763854519fd3ce = getRequest('_err')) {if($v07213a0161f52846ab198be103b5ab43 = getSession('errors_' . $v510ff634fce407eea1763854519fd3ce)) {try {list($v364f9b183bd2dd9e0beb45c754830a6c, $ve6a2fd7211958cfe50efa4d14bd332f5) = def_module::loadTemplates("./tpls/errors/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "errors_block", "errors_block_line");}catch (publicException $ve1671797c52e15f763380b45e841ec32) {$v364f9b183bd2dd9e0beb45c754830a6c = '<div class="errorsBlock">%items%</div>';$ve6a2fd7211958cfe50efa4d14bd332f5 = '<div class="errorsBlockLine">%message%</div>';}$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$v691d502cfd0e0626cd3b058e5682ad1c = Array();foreach($v07213a0161f52846ab198be103b5ab43 as $vcb5e100e5a9a3e7f6d1fd97512215282) {$v69ba0c89abba8a3e9cc0c5e32be0d35d = Array();if($vc13367945d5d4c91047b3b50234aa7ab = $vcb5e100e5a9a3e7f6d1fd97512215282['code']) {$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:code'] = $vc13367945d5d4c91047b3b50234aa7ab;}if($vd6ccd2379d1965a49b998d0f4207337d = $vcb5e100e5a9a3e7f6d1fd97512215282['strcode']) {$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:str-code'] = $vd6ccd2379d1965a49b998d0f4207337d;}$vcb5e100e5a9a3e7f6d1fd97512215282['message'] = templater::getInstance()->putLangs($vcb5e100e5a9a3e7f6d1fd97512215282['message']);$v69ba0c89abba8a3e9cc0c5e32be0d35d['node:message'] = $vcb5e100e5a9a3e7f6d1fd97512215282['message'];$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate($ve6a2fd7211958cfe50efa4d14bd332f5, $v69ba0c89abba8a3e9cc0c5e32be0d35d);}$vfca1bff8ad8b3a8585abfb0ad523ba42['subnodes:items'] = $v691d502cfd0e0626cd3b058e5682ad1c;return def_module::parseTemplate($v364f9b183bd2dd9e0beb45c754830a6c, $vfca1bff8ad8b3a8585abfb0ad523ba42);}else {return "";}}else {return "";}}public function getFilteredPages($v94757cae63fd3e398c0811a976dd6bbe, $vdfc394bd05a4b48161c790034af522a8, $v2063c1608d6e0baf80249c42e2be5804, $v9d85c254b5062e518a134a61950999c3 = 10, $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $v126424c808da347218ba631a78feaf04 = false) {$ve1ba980ce14a8c0d7e2779f895ab8695 = getRequest('p');if($v126424c808da347218ba631a78feaf04) $ve1ba980ce14a8c0d7e2779f895ab8695 = 0;list($v364f9b183bd2dd9e0beb45c754830a6c, $ve6a2fd7211958cfe50efa4d14bd332f5, $v28d65bb7a643774ada22f54ca0679289) = def_module::loadTemplates("./tpls/filtered_pages/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl",    "pages_block", "pages_block_line", "pages_block_empty");$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {if($vf8a30f899e9d691c760031d60ea0f3a2 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId($vdfc394bd05a4b48161c790034af522a8)) {$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->forceHierarchyTable(true);$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v94757cae63fd3e398c0811a976dd6bbe);$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($vf8a30f899e9d691c760031d60ea0f3a2);if($v051369818a8073bba5feeb0e957eb308 = $v06e3d36fa30cea095545139854ad1fb9->getGuideId()) {if(!is_numeric($v2063c1608d6e0baf80249c42e2be5804)) {$vd47c20d305d6a44856735d5fe5c086ca = umiObjectsCollection::getInstance()->getGuidedItems($v051369818a8073bba5feeb0e957eb308);$v2063c1608d6e0baf80249c42e2be5804 = array_search($v2063c1608d6e0baf80249c42e2be5804, $vd47c20d305d6a44856735d5fe5c086ca);}}$v8be74552df93e31bbdd6b36ed74bdb6a->addPropertyFilterEqual($vf8a30f899e9d691c760031d60ea0f3a2, $v2063c1608d6e0baf80249c42e2be5804);$v8be74552df93e31bbdd6b36ed74bdb6a->addPermissions();$v8be74552df93e31bbdd6b36ed74bdb6a->addLimit($v9d85c254b5062e518a134a61950999c3, $ve1ba980ce14a8c0d7e2779f895ab8695);$result = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);$vfbb44b4487415b134bce9c790a27fe5e = umiSelectionsParser::runSelectionCounts($v8be74552df93e31bbdd6b36ed74bdb6a);$vfca1bff8ad8b3a8585abfb0ad523ba42 = array();if($vfbb44b4487415b134bce9c790a27fe5e > 0) {$v691d502cfd0e0626cd3b058e5682ad1c = array();$v12a673c3eb40ea95d992c775443b8709 = umiHierarchy::getInstance();foreach($result as $v7057e8409c7c531a1a6e9ac3df4ed549) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $v12a673c3eb40ea95d992c775443b8709->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate($ve6a2fd7211958cfe50efa4d14bd332f5, array(        'attribute:id'  => $v8e2dcfd7e7e24b1ca76c1193f645902b->id,        'attribute:link' => $v8e2dcfd7e7e24b1ca76c1193f645902b->link,        'node:name'   => $v8e2dcfd7e7e24b1ca76c1193f645902b->name       ));}}$vfca1bff8ad8b3a8585abfb0ad523ba42['subnodes:items'] = $v691d502cfd0e0626cd3b058e5682ad1c;$v66f6181bcb4cff4cd38fbc804a036db6 = $v364f9b183bd2dd9e0beb45c754830a6c;}else {$v66f6181bcb4cff4cd38fbc804a036db6 = $v28d65bb7a643774ada22f54ca0679289;}$vfca1bff8ad8b3a8585abfb0ad523ba42['total'] = $vfbb44b4487415b134bce9c790a27fe5e;$vfca1bff8ad8b3a8585abfb0ad523ba42['per_page'] = $v9d85c254b5062e518a134a61950999c3;return def_module::parseTemplate($v66f6181bcb4cff4cd38fbc804a036db6, $vfca1bff8ad8b3a8585abfb0ad523ba42);}else {throw new publicException("Type \"" . $v599dcce2998a6b40b1e38e8c6006cb0a->getName() . "\" doesn't have property \"{$vdfc394bd05a4b48161c790034af522a8}\"");}}else {throw new publicException("Wrong type id \"{$v94757cae63fd3e398c0811a976dd6bbe}\"");}}public function hierarchyTypesList() {$v691d502cfd0e0626cd3b058e5682ad1c = array();$vc47a1ff7587ae1acc82b121f7b297b45 = umiHierarchyTypesCollection::getInstance()->getTypesList();foreach($vc47a1ff7587ae1acc82b121f7b297b45 as $v599dcce2998a6b40b1e38e8c6006cb0a) {$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate("", array(    'attribute:id'  => $v599dcce2998a6b40b1e38e8c6006cb0a->getId(),    'attribute:module' => $v599dcce2998a6b40b1e38e8c6006cb0a->getName(),    'attribute:method' => $v599dcce2998a6b40b1e38e8c6006cb0a->getExt(),    'node:title'  => $v599dcce2998a6b40b1e38e8c6006cb0a->getTitle()   ));}return def_module::parseTemplate("", array(   'subnodes:items' => $v691d502cfd0e0626cd3b058e5682ad1c  ));}public function fieldTypesList() {$v691d502cfd0e0626cd3b058e5682ad1c = array();$v021910e33d90f2aab47294fccb78b0e1 = umiFieldTypesCollection::getInstance()->getFieldTypesList();foreach($v021910e33d90f2aab47294fccb78b0e1 as $v519504d7d4beb745dac24ccfb6c1d7c9) {$v69ba0c89abba8a3e9cc0c5e32be0d35d = array(    'attribute:id'   => $v519504d7d4beb745dac24ccfb6c1d7c9->getId(),    'attribute:data-type' => $v519504d7d4beb745dac24ccfb6c1d7c9->getDataType()   );if($v519504d7d4beb745dac24ccfb6c1d7c9->getIsMultiple()) {$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:is-multiple'] = true;}if($v519504d7d4beb745dac24ccfb6c1d7c9->getIsUnsigned()) {$v69ba0c89abba8a3e9cc0c5e32be0d35d['attribute:is-unsigned'] = true;}$v69ba0c89abba8a3e9cc0c5e32be0d35d['node:name'] = $v519504d7d4beb745dac24ccfb6c1d7c9->getName();$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate("", $v69ba0c89abba8a3e9cc0c5e32be0d35d);}return def_module::parseTemplate('', array(   'subnodes:items' => $v691d502cfd0e0626cd3b058e5682ad1c  ));}public function publicGuidesList() {$v691d502cfd0e0626cd3b058e5682ad1c = array();$v053584ffd4c1f8d93d684bed472c816e = umiObjectTypesCollection::getInstance()->getGuidesList();foreach($v053584ffd4c1f8d93d684bed472c816e as $v051369818a8073bba5feeb0e957eb308 => $vcf4313ee98665bb3d4b717b344ba6999) {$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate("", array(    'attribute:id' => $v051369818a8073bba5feeb0e957eb308,    'node:name'  => $vcf4313ee98665bb3d4b717b344ba6999   ));}return def_module::parseTemplate('', array(   'subnodes:items' => $v691d502cfd0e0626cd3b058e5682ad1c  ));}public function getSkinsList() {$result = array();$v2245023265ae4cf87d02c8b6ba991139 = mainConfiguration::getInstance();$v66f6181bcb4cff4cd38fbc804a036db6 = xslAdminTemplater::getInstance();$v2734ba41d281aa9a3928854ec02f012a = $v2245023265ae4cf87d02c8b6ba991139->get('system', 'skins');$v4a6c95db7ddd624eaf258fbda32c7864 = $v66f6181bcb4cff4cd38fbc804a036db6->getCurrentSkinName();$vada1fd05db818d2ce8b75dcbcfbc5efd = array();foreach($v2734ba41d281aa9a3928854ec02f012a as $vc4e10f4477cadef194adfceb6031a35c) {$vada1fd05db818d2ce8b75dcbcfbc5efd[] = array(    'attribute:id' => $vc4e10f4477cadef194adfceb6031a35c,    'node:name'  => getLabel('skin-' . $vc4e10f4477cadef194adfceb6031a35c)   );}$result['items'] = Array(   'nodes:item' => $vada1fd05db818d2ce8b75dcbcfbc5efd,   'attribute:current' => $v4a6c95db7ddd624eaf258fbda32c7864  );return $result;}public function includeQuickEditJs() {$v2c2f61cd0a0d1cd093c9fb4a831d3e72 = <<<HTML
			<script type="text/javascript" src="/js/client/umiBasket.js" charset="utf-8"></script>
HTML;  $v2c2f61cd0a0d1cd093c9fb4a831d3e72 = '';$permissions = permissionsCollection::getInstance();$v8e44f0089b076e18a718eb9ca3d94674      = $permissions->getUserId();$vca02d1555c813b1b1ad637654c0fe111   = $permissions->isAllowedMethod($v8e44f0089b076e18a718eb9ca3d94674, "content", "sitetree");if($vca02d1555c813b1b1ad637654c0fe111) {$v2c2f61cd0a0d1cd093c9fb4a831d3e72 .= <<<HTML
				<link rel="stylesheet" href="/js/client/edit-in-place/design.css" type="text/css"></link>
				<link rel="stylesheet" href="/js/client/panel/design.css" type="text/css"></link>
				
				<link rel="stylesheet" href="/js/jquery/ui.all.css" type="text/css"></link>
				<link rel="stylesheet" href="/styles/common/css/popup.css" type="text/css"></link>
				
				<link type="text/css" rel="stylesheet" href="/styles/skins/mac/design/calendar/calendar.css"></link>
				
				<script type="text/javascript" src="/ulang/common.js" charset="utf-8"></script>
				
				<script type="text/javascript" src="/js/jquery/jquery-1.4.1.min.js" charset="utf-8"></script>
				<script type="text/javascript" src="/js/jquery/jquery.cookie.js" charset="utf-8"></script>
				
				<script type="text/javascript" src="/js/jquery/jquery-ui-1.8.custom.min.js" charset="utf-8"></script>
				<script type="text/javascript" src="/js/jquery/jquery.umipopups.js" charset="utf-8"></script>
				<script type="text/javascript" src="/js/jquery/jquery.jgrowl_minimized.js" charset="utf-8"></script>
				<script type="text/javascript" src="/js/jquery/jquery-ui-i18n.min.js" charset="utf-8"></script>
				
				<script type="text/javascript" src="/js/client/edit-in-place/compiled.js" charset="utf-8"></script>
				
HTML;}else {$v2c2f61cd0a0d1cd093c9fb4a831d3e72 .= <<<HTML
				<script type="text/javascript" src="/js/jquery/jquery-1.4.1.min.js" charset="utf-8"></script>
				<script type="text/javascript" src="/js/guest.js" charset="utf-8"></script>
HTML;  }return $v2c2f61cd0a0d1cd093c9fb4a831d3e72;}public function includeEditInPlaceJs() {$permissions = permissionsCollection::getInstance();$va344212ad8b530004d703aba88008f80 = cmsController::getInstance()->getCurrentElementId();$vbab394571d9305ff0c667ed256c19a70 = $permissions->isAllowedMethod($permissions->getUserId(), "content", "sitetree");if(!$vbab394571d9305ff0c667ed256c19a70) return "";$veb80977a0fce4f1284d341ca1331e700 = (int) getRequest('editable');$v2c2f61cd0a0d1cd093c9fb4a831d3e72 = <<<HTML
			<script type="text/javascript">
				var currentElementId = '{$va344212ad8b530004d703aba88008f80}';
				var editable = {$veb80977a0fce4f1284d341ca1331e700};
			</script>

			<script type="text/javascript" src="/js/tinymce/jscripts/tiny_mce/tinymce_defs.js" charset="utf-8"></script>
			<script type="text/javascript" src="/js/tinymce/jscripts/tiny_mce/tinymce_custom.js" charset="utf-8"></script>
			<script type="text/javascript" src="/js/tinymce/jscripts/tiny_mce/tiny_mce_src.js" charset="utf-8"></script>

			<script type="text/javascript" src="/js/client/editInPlace.js" charset="utf-8"></script>

			<script type="text/javascript">
				var commStgs = jQuery.extend(window.mceCommonSettings, window.mceCustomSettings);
				
				tinyMCE.init(jQuery.extend(commStgs, {
					theme : "editinplace",
					plugins: "",
					width: '100%'
				}));
			</script>

HTML;  return $v2c2f61cd0a0d1cd093c9fb4a831d3e72;}public function getObjectTypesList($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce = false) {$vb3827f7111095f5ba1a9f49988fe9382 = umiObjectTypesCollection::getInstance();$v1723bdd4ee51910267a625cae41ced8a = umiHierarchyTypesCollection::getInstance();if(is_numeric($v22884db148f0ffb0d830ba431102b0b5) && $vea9f6aca279138c58f705c8d4cb4b8ce === false) {$v599dcce2998a6b40b1e38e8c6006cb0a = $vb3827f7111095f5ba1a9f49988fe9382->getType($v22884db148f0ffb0d830ba431102b0b5);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$v0715f6d9497f93911417c9c324265771 = $v599dcce2998a6b40b1e38e8c6006cb0a->getHierarchyTypeId();$vb946c44d711ade3b061653732977d043 = $v1723bdd4ee51910267a625cae41ced8a->getType($v0715f6d9497f93911417c9c324265771);}else {throw new publicException("Object type #{$v22884db148f0ffb0d830ba431102b0b5} doesn't exists");}}else {$vb946c44d711ade3b061653732977d043 = $v1723bdd4ee51910267a625cae41ced8a->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}if($vb946c44d711ade3b061653732977d043) {$vd14a8022b085f9ef19d479cbdd581127 = $vb3827f7111095f5ba1a9f49988fe9382->getTypesByHierarchyTypeId($vb946c44d711ade3b061653732977d043->getId());$result = Array();foreach($vd14a8022b085f9ef19d479cbdd581127 as $vb80bb7740288fda1f201890375a60c8f => $v22178d66649d30b18a7e4e331dc778ce) {$ve253bed1357afcefc5fadfbc92f9eb97 = Array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $vb80bb7740288fda1f201890375a60c8f;$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $v22178d66649d30b18a7e4e331dc778ce;$result[] = $ve253bed1357afcefc5fadfbc92f9eb97;}return Array("items" => Array("nodes:item" => $result));}else {throw new publicException("Hierarchy type for {$v22884db148f0ffb0d830ba431102b0b5}/{$vea9f6aca279138c58f705c8d4cb4b8ce} not found");}}public function getChildObjectTypesList($v94757cae63fd3e398c0811a976dd6bbe) {$vb3827f7111095f5ba1a9f49988fe9382 = umiObjectTypesCollection::getInstance();$vd14a8022b085f9ef19d479cbdd581127 = $vb3827f7111095f5ba1a9f49988fe9382->getChildClasses($v94757cae63fd3e398c0811a976dd6bbe);$result = Array();foreach($vd14a8022b085f9ef19d479cbdd581127 as $vb80bb7740288fda1f201890375a60c8f) {$ve253bed1357afcefc5fadfbc92f9eb97 = Array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $vb80bb7740288fda1f201890375a60c8f;$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $vb3827f7111095f5ba1a9f49988fe9382->getType($vb80bb7740288fda1f201890375a60c8f)->getName();$result[] = $ve253bed1357afcefc5fadfbc92f9eb97;}return Array("items" => Array("nodes:item" => $result));}public function getLangsList() {$vca33584dfc14a6cf50d466b06fc1ac5f = langsCollection::getInstance();$v5a05866850c28651fe234659f6c92ada = $vca33584dfc14a6cf50d466b06fc1ac5f->getList();$vfca1bff8ad8b3a8585abfb0ad523ba42 = array();$vfca1bff8ad8b3a8585abfb0ad523ba42['items'] = Array('nodes:item' => $v5a05866850c28651fe234659f6c92ada);return $vfca1bff8ad8b3a8585abfb0ad523ba42;}public function getInterfaceLangsList() {$v2245023265ae4cf87d02c8b6ba991139 = mainConfiguration::getInstance();$vd2962d9ba1823a204aa406e3fe3f906b = $v2245023265ae4cf87d02c8b6ba991139->get('system', 'interface-langs');$vf1386a17eed513dff70798b0551dc170 = array();foreach($vd2962d9ba1823a204aa406e3fe3f906b as $v753527be46567ad90a4203cf4b40d70e) {$vf1386a17eed513dff70798b0551dc170[] = array(    "attribute:prefix" => $v753527be46567ad90a4203cf4b40d70e,    "node:title"  => getLabel("interface-lang-" . $v753527be46567ad90a4203cf4b40d70e)   );}$vfca1bff8ad8b3a8585abfb0ad523ba42 = array();$vfca1bff8ad8b3a8585abfb0ad523ba42['items'] = array(   'attribute:current' => uLangStream::getLangPrefix(),   'nodes:item' => $vf1386a17eed513dff70798b0551dc170  );return $vfca1bff8ad8b3a8585abfb0ad523ba42;}public function getTemplatesList($vf9b9218cbe221f8b9f1292474aa6f3e4 = false) {$v499180b7234d1268d482e87df304efc4 = templatesCollection::getInstance();$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = false;if($vf9b9218cbe221f8b9f1292474aa6f3e4) {$v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDomainId($vf9b9218cbe221f8b9f1292474aa6f3e4);}if(!$v662cbf1253ac7d8750ed9190c52163e5) {$v662cbf1253ac7d8750ed9190c52163e5 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentDomain()->getId();}$vfed36e93a0509e20f2dc96cbbd85b678 = $v499180b7234d1268d482e87df304efc4->getTemplatesList($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);$v691d502cfd0e0626cd3b058e5682ad1c = Array();foreach($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {$ve253bed1357afcefc5fadfbc92f9eb97 = Array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $v66f6181bcb4cff4cd38fbc804a036db6->getId();$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $v66f6181bcb4cff4cd38fbc804a036db6->getTitle();$v691d502cfd0e0626cd3b058e5682ad1c[] = $ve253bed1357afcefc5fadfbc92f9eb97;}return Array("items" => Array('nodes:item' => $v691d502cfd0e0626cd3b058e5682ad1c));}public function getFieldTypesList() {$v3fa9d6639f24f9bb4bf81ac6bdbdbc8c = umiFieldTypesCollection::getInstance()->getFieldTypesList();$v691d502cfd0e0626cd3b058e5682ad1c = Array();foreach($v3fa9d6639f24f9bb4bf81ac6bdbdbc8c as $v1e3f04102267eaf5e8d0ca424fd5c561 => $v519504d7d4beb745dac24ccfb6c1d7c9) {$ve253bed1357afcefc5fadfbc92f9eb97 = Array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $v1e3f04102267eaf5e8d0ca424fd5c561;$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $v519504d7d4beb745dac24ccfb6c1d7c9->getName();$v691d502cfd0e0626cd3b058e5682ad1c[] = $ve253bed1357afcefc5fadfbc92f9eb97;}$vfca1bff8ad8b3a8585abfb0ad523ba42 = Array();$vfca1bff8ad8b3a8585abfb0ad523ba42['nodes:item'] = $v691d502cfd0e0626cd3b058e5682ad1c;return $vfca1bff8ad8b3a8585abfb0ad523ba42;}public function base64($v15d61712450a686a7f365adf4fef581f, $v341be97d9aff90c9978347f66f945b77) {switch($v15d61712450a686a7f365adf4fef581f) {case "encode": {return base64_encode($v341be97d9aff90c9978347f66f945b77);}case "decode": {return base64_decode($v341be97d9aff90c9978347f66f945b77);}default: {throw new publicException("Don't know, how to do base64 \"{$v15d61712450a686a7f365adf4fef581f}\". Type \"encode\" or \"decode\".");}}}public function fs($v15d61712450a686a7f365adf4fef581f, $v8c7dd922ad47494fc02c388e12c00eac) {switch($v15d61712450a686a7f365adf4fef581f) {case "dirname": {return dirname($v8c7dd922ad47494fc02c388e12c00eac);}default: {throw new publicException("Don't know, how to do fs \"{$v15d61712450a686a7f365adf4fef581f}\".");}}}public function getSubNavibar($v7057e8409c7c531a1a6e9ac3df4ed549 = false) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v22884db148f0ffb0d830ba431102b0b5 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentModule();$vea9f6aca279138c58f705c8d4cb4b8ce = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentMethod();$result = Array();$result['module'] = Array(   "attribute:label" => getLabel("module-" . $v22884db148f0ffb0d830ba431102b0b5),   "node:name"  => $v22884db148f0ffb0d830ba431102b0b5  );if($v7057e8409c7c531a1a6e9ac3df4ed549 != false) {$vc68ad910ed49ac65f21f1bf2c5dbf912 = $vb81ca7c0ccaa77e7aa91936ab0070695->getAllParents($v7057e8409c7c531a1a6e9ac3df4ed549, true);$vb93bd2eaedb6326fb6706ea082dbaf46 = Array();foreach($vc68ad910ed49ac65f21f1bf2c5dbf912 as $v7057e8409c7c531a1a6e9ac3df4ed549) {if($v7057e8409c7c531a1a6e9ac3df4ed549 == 0) {continue;}$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$vb53e8255f052e2d8f7574bfac8663930 = Array();$vb53e8255f052e2d8f7574bfac8663930['attribute:id'] = $v7057e8409c7c531a1a6e9ac3df4ed549;$vb53e8255f052e2d8f7574bfac8663930['xlink:href'] = "upage://" . $v7057e8409c7c531a1a6e9ac3df4ed549;$vb53e8255f052e2d8f7574bfac8663930['attribute:name'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getName();$vb53e8255f052e2d8f7574bfac8663930['attribute:edit-link'] = $this->getEditLink($v7057e8409c7c531a1a6e9ac3df4ed549);$vb93bd2eaedb6326fb6706ea082dbaf46[] = $vb53e8255f052e2d8f7574bfac8663930;}}if(sizeof($vb93bd2eaedb6326fb6706ea082dbaf46)) {$result['parents'] = Array('nodes:page' => $vb93bd2eaedb6326fb6706ea082dbaf46);}}if($vea9f6aca279138c58f705c8d4cb4b8ce) {$vd304ba20e96d87411588eeabac850e34 = "header-" . $v22884db148f0ffb0d830ba431102b0b5 . "-" . $vea9f6aca279138c58f705c8d4cb4b8ce;if($v8b1dc169bf460ee884fceef66c6607d6->headerLabel) {$vd304ba20e96d87411588eeabac850e34 = $v8b1dc169bf460ee884fceef66c6607d6->headerLabel;}$result['method'] = Array(    "attribute:label" => getLabel($vd304ba20e96d87411588eeabac850e34),    "node:name"  => $vea9f6aca279138c58f705c8d4cb4b8ce   );}return $result;}public function getEditLink($v7057e8409c7c531a1a6e9ac3df4ed549) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v854203cccade0bbe21be239a208aea49 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$v2fa70149e2a7e75da2b0303d0a36a944 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();$v22884db148f0ffb0d830ba431102b0b5 = $v8b1dc169bf460ee884fceef66c6607d6->getModule($v854203cccade0bbe21be239a208aea49);if($v22884db148f0ffb0d830ba431102b0b5 instanceof def_module) {$v807765384d9d5527da8848df14a4f02f = $v22884db148f0ffb0d830ba431102b0b5->getEditLink($v7057e8409c7c531a1a6e9ac3df4ed549, $v2fa70149e2a7e75da2b0303d0a36a944);if(isset($v807765384d9d5527da8848df14a4f02f[1])) {return $v807765384d9d5527da8848df14a4f02f[1];}}else {throw new publicException("Module \"{$v854203cccade0bbe21be239a208aea49}\" not found. So I can't get edit link for element #{$v7057e8409c7c531a1a6e9ac3df4ed549}");}}else {throw new publicException("Element #{$v7057e8409c7c531a1a6e9ac3df4ed549} doesn't exists.");}}public function getObjectName($vaf31437ce61345f416579830a98c91e5) {$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$va8cfde6331bd59eb2ac96f8911c4b666 = $v5891da2d64975cae48d175d1e001f5da->getObject($vaf31437ce61345f416579830a98c91e5);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {return $va8cfde6331bd59eb2ac96f8911c4b666->getName();}else {throw new publicException(getLabel('error-object-does-not-exist', null, $vaf31437ce61345f416579830a98c91e5));}}public function makeThumbnailFull($vd6fe1d0be6347b8ef2427fa629c04485, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $v66f6181bcb4cff4cd38fbc804a036db6 = "default", $v4f21a3dc48a4939b99266894c9fa2237 = false, $va634e7960e04b1633c103382004fe526 = true, $v70c8b4c146f72fc2a6a1886dae113831 = 5, $vb5db1323df6de62d5bda823c63ad4cbe = false) {$v47c80780ab608cc046f2a6e6f071feb6 = makeThumbnailFull($vd6fe1d0be6347b8ef2427fa629c04485, $this->thumbs_path, $veaae26a6fb20ed3ef54fb23bfa0b1fcc, $vb435e227d5dd201e1768b2bcb2e0aa81, $va634e7960e04b1633c103382004fe526, $v70c8b4c146f72fc2a6a1886dae113831, $vb5db1323df6de62d5bda823c63ad4cbe);if(cmsController::getInstance()->getCurrentMode() == "admin") {$v47c80780ab608cc046f2a6e6f071feb6['src'] = str_replace("&", "&amp;", $v47c80780ab608cc046f2a6e6f071feb6['src']);}$v47c80780ab608cc046f2a6e6f071feb6['void:template'] = $v66f6181bcb4cff4cd38fbc804a036db6;if($v4f21a3dc48a4939b99266894c9fa2237) {return $v47c80780ab608cc046f2a6e6f071feb6;}else {list($v4f2afc9c4099ee1f39c9f551123e54bd) = def_module::loadTemplates("tpls/thumbs/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "image");return def_module::parseTemplate($v4f2afc9c4099ee1f39c9f551123e54bd, $v47c80780ab608cc046f2a6e6f071feb6);}}public function getModuleSetting($v52a43e48ec4649dee819dadabcab1bde, $v21dade6473390f170d5fae814999b20a) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if($v8b1dc169bf460ee884fceef66c6607d6->getCurrentMode() != 'admin') {throw new publicException("Sorry, but you are not allowed to use this method here");}if($v22884db148f0ffb0d830ba431102b0b5 = $v8b1dc169bf460ee884fceef66c6607d6->getModule($v52a43e48ec4649dee819dadabcab1bde)) {$v73cadb677a61befb9ddecf78d492feff = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/" . get_class($v22884db148f0ffb0d830ba431102b0b5) . "/" . $v21dade6473390f170d5fae814999b20a);return $v73cadb677a61befb9ddecf78d492feff ? $v73cadb677a61befb9ddecf78d492feff : null;}else return false;}public function googleAnalyticsCode() {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();$vad5f82e879a9c5d6b5b442eb37e50551 = cmsController::getInstance()->getCurrentDomain();$vfcd851286997bae96c59cdaa3be5e630 = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/ga-id/{$vad5f82e879a9c5d6b5b442eb37e50551->getId()}");if($vfcd851286997bae96c59cdaa3be5e630) {return <<<END
var _gaq = _gaq || [];
_gaq.push(
    ['_setAccount', '{$vfcd851286997bae96c59cdaa3be5e630}'],
    ['_setDomainName', '{$vad5f82e879a9c5d6b5b442eb37e50551->getHost()}'],
    ["_addOrganic", "mail.ru", "q"],
    ["_addOrganic","rambler.ru", "words"],
    ["_addOrganic","nigma.ru", "s"],
    ["_addOrganic","blogs.yandex.ru", "text"],
    ["_addOrganic","webalta.ru", "q"],
    ["_addOrganic","aport.ru", "r"],
    ["_addOrganic","akavita.by", "z"],
    ["_addOrganic","meta.ua", "q"],
    ["_addOrganic","bigmir.net", "q"],
    ["_addOrganic","tut.by", "query"],
    ["_addOrganic","all.by", "query"],
    ["_addOrganic","i.ua", "q"],
    ["_addOrganic","online.ua", "q"],
    ["_addOrganic","a.ua", "s"],
    ["_addOrganic","ukr.net", "search_query"],
    ["_addOrganic","search.com.ua", "q"],
    ["_addOrganic","search.ua", "query"],
    ["_addOrganic","poisk.ru", "text"],
    ["_addOrganic","km.ru", "sq"],
    ["_addOrganic","liveinternet.ru", "ask"],
    ["_addOrganic","gogo.ru", "q"],
    ["_addOrganic","gde.ru", "keywords"],
    ["_addOrganic","quintura.ru", "request"],
    ['_trackPageview']
);

(function() {
 var ga = document.createElement('script');
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 ga.setAttribute('async', 'true');
 document.documentElement.firstChild.appendChild(ga);
})();
END;  }else {return "";}}public function get_module_tabs($v854203cccade0bbe21be239a208aea49, $v2fa70149e2a7e75da2b0303d0a36a944) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v22884db148f0ffb0d830ba431102b0b5 = $v8b1dc169bf460ee884fceef66c6607d6->getModule($v854203cccade0bbe21be239a208aea49);if (!$v22884db148f0ffb0d830ba431102b0b5 instanceof def_module) return "";$v38d1e18b54816e157dda5426c36970e3 = $v22884db148f0ffb0d830ba431102b0b5->getCommonTabs();$v7513817107edd8b1833da90a2411cb3e = $v22884db148f0ffb0d830ba431102b0b5->getConfigTabs();$vceb12ff9731fb079df7ea47fb2e4a604 = null;$v6e047379f152b9e31a6aad6ec1147849 = false;if ($v38d1e18b54816e157dda5426c36970e3 && $v6e047379f152b9e31a6aad6ec1147849 = $v38d1e18b54816e157dda5426c36970e3->getTabNameByAlias($v2fa70149e2a7e75da2b0303d0a36a944)) {$vceb12ff9731fb079df7ea47fb2e4a604 = $v38d1e18b54816e157dda5426c36970e3;}elseif ($v7513817107edd8b1833da90a2411cb3e && $v6e047379f152b9e31a6aad6ec1147849 = $v7513817107edd8b1833da90a2411cb3e->getTabNameByAlias($v2fa70149e2a7e75da2b0303d0a36a944)) {$vceb12ff9731fb079df7ea47fb2e4a604 = $v7513817107edd8b1833da90a2411cb3e;}if (!$vceb12ff9731fb079df7ea47fb2e4a604 instanceof adminModuleTabs) return "";$v25173eac47bcd1aa0bb3a146f0595bb7 = $v8b1dc169bf460ee884fceef66c6607d6->pre_lang;$v691d502cfd0e0626cd3b058e5682ad1c = array();foreach ($vceb12ff9731fb079df7ea47fb2e4a604->getAll() as $v45b0e323c6cba7792060c8ecd906a6d4 => $v0a771f51ecff07684f2250745c64e937) {$v52787dda9c47b8cfa41529251c9c0975 = $v854203cccade0bbe21be239a208aea49. "-" . $v45b0e323c6cba7792060c8ecd906a6d4;$vd304ba20e96d87411588eeabac850e34 = getLabel("tabs-" . $v52787dda9c47b8cfa41529251c9c0975) != "tabs-" . $v52787dda9c47b8cfa41529251c9c0975 ? getLabel("tabs-" . $v52787dda9c47b8cfa41529251c9c0975) : getLabel("header-" . $v52787dda9c47b8cfa41529251c9c0975);$ve253bed1357afcefc5fadfbc92f9eb97 = array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:name'] = $v45b0e323c6cba7792060c8ecd906a6d4;$ve253bed1357afcefc5fadfbc92f9eb97['attribute:label'] = $vd304ba20e96d87411588eeabac850e34;$ve253bed1357afcefc5fadfbc92f9eb97['attribute:link'] = $v25173eac47bcd1aa0bb3a146f0595bb7 . "/admin/" . $v854203cccade0bbe21be239a208aea49 . "/" . $v45b0e323c6cba7792060c8ecd906a6d4 . "/";$v9299da2529c98fccce0e32b476ba3266 = array();foreach($v0a771f51ecff07684f2250745c64e937 as $v724874d1be77f450a09b305fc1534afb) {$v9299da2529c98fccce0e32b476ba3266[] = def_module::parseTemplate("", array("attribute:name" => $v724874d1be77f450a09b305fc1534afb));}if ($v45b0e323c6cba7792060c8ecd906a6d4 == $v6e047379f152b9e31a6aad6ec1147849) {$ve253bed1357afcefc5fadfbc92f9eb97['attribute:active'] = 1;}$ve253bed1357afcefc5fadfbc92f9eb97['subnodes:aliases'] = $v9299da2529c98fccce0e32b476ba3266;$v691d502cfd0e0626cd3b058e5682ad1c[] = def_module::parseTemplate("", $ve253bed1357afcefc5fadfbc92f9eb97);}return def_module::parseTemplate("", array(   "subnodes:items" => $v691d502cfd0e0626cd3b058e5682ad1c  ));}public function alphabeticalIndex($v7552cd149af7495ee7d8225974e50f80 = false, $v12a055bf01a31369fe81ac35d85c7bc1 = 1, $v66f6181bcb4cff4cd38fbc804a036db6 = 'default', $v240bf022e685b0ee30ad9fe9e1fb5d5b = 'а-яa-z0-9') {list($v31912934b8f34be4364cc043cd8a0176, $v6b20224f643eeef1295322b78466a87e, $vf4e6e20a2f50e67d31f5513a9df55207) = def_module::loadTemplates("./tpls/alphabetical-index/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", "block", "block_item", "block_item_a");$vb3b32a2d422265cd25c3323ed0157f81 = new selector('pages');$v7552cd149af7495ee7d8225974e50f80 = def_module::analyzeRequiredPath($v7552cd149af7495ee7d8225974e50f80);if($v7552cd149af7495ee7d8225974e50f80) {$vb3b32a2d422265cd25c3323ed0157f81->where('hierarchy')->page($v7552cd149af7495ee7d8225974e50f80)->childs($v12a055bf01a31369fe81ac35d85c7bc1);}$v6a992d5529f459a44fee58c733255e86 = new alphabeticalIndex($vb3b32a2d422265cd25c3323ed0157f81);$v9a31962b953d38f5702495fdf5b44ad0 = $v6a992d5529f459a44fee58c733255e86->index($v240bf022e685b0ee30ad9fe9e1fb5d5b);$v79f5fae92f4da5d4ad1eddea50cc575c = null;$v8e2dcfd7e7e24b1ca76c1193f645902b = selector::get('page')->id($v7552cd149af7495ee7d8225974e50f80);$v79f5fae92f4da5d4ad1eddea50cc575c = $v8e2dcfd7e7e24b1ca76c1193f645902b->link;$vf1386a17eed513dff70798b0551dc170 = array();foreach($v9a31962b953d38f5702495fdf5b44ad0 as $vf5b75010ea8a54b96f8fe7dafac65c18 => $ve2942a04780e223b215eb8b663cf5353) {$v839bf4ce4f682ac29d72f21f39abbd61 = ($ve2942a04780e223b215eb8b663cf5353 ? $vf4e6e20a2f50e67d31f5513a9df55207 : $v6b20224f643eeef1295322b78466a87e);$v2a304a1348456ccd2234cd71a81bd338 = $ve2942a04780e223b215eb8b663cf5353 ? ($v79f5fae92f4da5d4ad1eddea50cc575c . '?fields_filter[name]=' . $vf5b75010ea8a54b96f8fe7dafac65c18 . '%') : null;$vf1386a17eed513dff70798b0551dc170[] = def_module::parseTemplate($v839bf4ce4f682ac29d72f21f39abbd61, array(    '@count' => $ve2942a04780e223b215eb8b663cf5353,    '@link'  => $v2a304a1348456ccd2234cd71a81bd338,    '#letter' => (string) $vf5b75010ea8a54b96f8fe7dafac65c18   ));}$vfca1bff8ad8b3a8585abfb0ad523ba42 = array(   'nodes:letter' => $vf1386a17eed513dff70798b0551dc170  );return def_module::parseTemplate($v31912934b8f34be4364cc043cd8a0176, $vfca1bff8ad8b3a8585abfb0ad523ba42);}public function calendarIndex($v7552cd149af7495ee7d8225974e50f80, $v972bf3f05d14ffbdb817bef60638ff00, $v84cdc76cabf41bd7c961f6ab12f117d8 = false, $v7436f942d5ea836cb84f1bb2527d8286 = false, $v12a055bf01a31369fe81ac35d85c7bc1 = 1, $v66f6181bcb4cff4cd38fbc804a036db6 = 'default') {list($v31912934b8f34be4364cc043cd8a0176, $v4aea309357d3d2b6db2d854df7b2cb21, $v965a7685c914026380d3c7016175e350, $vcd3886ae8293ea7c31578c12fc4e0b8a, $v38d22f83de5454f9463b73ef57e59183) = def_module::loadTemplates(  "./tpls/calendar/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", 'calendar', 'week', 'day','day_a', 'day_null');$vb3b32a2d422265cd25c3323ed0157f81 = new selector('pages');$v7552cd149af7495ee7d8225974e50f80 = def_module::analyzeRequiredPath($v7552cd149af7495ee7d8225974e50f80);if(!$v7552cd149af7495ee7d8225974e50f80) {throw new publicException("Page #{$v7552cd149af7495ee7d8225974e50f80} not found");}$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v6301cee35ea764a1e241978f93f01069 = $vb81ca7c0ccaa77e7aa91936ab0070695->getDominantTypeId($v7552cd149af7495ee7d8225974e50f80);if(!$v6301cee35ea764a1e241978f93f01069) return;$vb3b32a2d422265cd25c3323ed0157f81->types('object-type')->id($v6301cee35ea764a1e241978f93f01069);$vb3b32a2d422265cd25c3323ed0157f81->where('hierarchy')->page($v7552cd149af7495ee7d8225974e50f80)->childs($v12a055bf01a31369fe81ac35d85c7bc1);try {$v6a992d5529f459a44fee58c733255e86 = new calendarIndex($vb3b32a2d422265cd25c3323ed0157f81);$va0e7b2a565119c0a7ec3126a16016113 = $v6a992d5529f459a44fee58c733255e86->index($v972bf3f05d14ffbdb817bef60638ff00, $v84cdc76cabf41bd7c961f6ab12f117d8, $v7436f942d5ea836cb84f1bb2527d8286);}catch (baseException $ve1671797c52e15f763380b45e841ec32) {throw new publicException($ve1671797c52e15f763380b45e841ec32->getMessage());}$vae60f11ab51860bdb22794a943335a34 = array();$v659dfac5417796f5351cb780481795fe = ceil((sizeof($va0e7b2a565119c0a7ec3126a16016113['days']) + $va0e7b2a565119c0a7ec3126a16016113['first-day']) / 7);$vee21496299dbf88355a35db78a7c1e99 = $v659dfac5417796f5351cb780481795fe * 7;$v79f5fae92f4da5d4ad1eddea50cc575c = null;$v8e2dcfd7e7e24b1ca76c1193f645902b = selector::get('page')->id($v7552cd149af7495ee7d8225974e50f80);if($v8e2dcfd7e7e24b1ca76c1193f645902b) $v79f5fae92f4da5d4ad1eddea50cc575c = $v8e2dcfd7e7e24b1ca76c1193f645902b->link;$vd56c863670800e22ac293bb8e275c1a3 = $v6a992d5529f459a44fee58c733255e86->timeStart;for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v659dfac5417796f5351cb780481795fe;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v44fdec47036f482b68b748f9d786801b = array();for($v363b122c528f54df4a0446b6bab05515 = 0;$v363b122c528f54df4a0446b6bab05515 < 7;$v363b122c528f54df4a0446b6bab05515++) {$vb1bc248a7ff2b2e95569f56de68615df = $v865c0c0b4ab0e063e5caa3387c1a8741 * 7 + $v363b122c528f54df4a0446b6bab05515 - $va0e7b2a565119c0a7ec3126a16016113['first-day'] + 1;if($vb1bc248a7ff2b2e95569f56de68615df > sizeof($va0e7b2a565119c0a7ec3126a16016113['days']) || $vb1bc248a7ff2b2e95569f56de68615df <= 0) {$vb1bc248a7ff2b2e95569f56de68615df = false;$v4f2afc9c4099ee1f39c9f551123e54bd = $v38d22f83de5454f9463b73ef57e59183;$ve2942a04780e223b215eb8b663cf5353 = 0;}else {$ve2942a04780e223b215eb8b663cf5353 = (int) $va0e7b2a565119c0a7ec3126a16016113['days'][$vb1bc248a7ff2b2e95569f56de68615df];$v4f2afc9c4099ee1f39c9f551123e54bd = $ve2942a04780e223b215eb8b663cf5353 ? $vcd3886ae8293ea7c31578c12fc4e0b8a : $v965a7685c914026380d3c7016175e350;}$v2a304a1348456ccd2234cd71a81bd338 = null;if($ve2942a04780e223b215eb8b663cf5353) {$v83f1535f99ab0bf4e9d02dfd85d3e3f7 = $vd56c863670800e22ac293bb8e275c1a3 + 3600 * 24 * ($vb1bc248a7ff2b2e95569f56de68615df - 1);$v0f826a89cf68c399c5f4cf320c1a5842 = $v83f1535f99ab0bf4e9d02dfd85d3e3f7 + 3600 * 24;$v2a304a1348456ccd2234cd71a81bd338 = $v79f5fae92f4da5d4ad1eddea50cc575c . "?fields_filter[{$v972bf3f05d14ffbdb817bef60638ff00}][]={$v83f1535f99ab0bf4e9d02dfd85d3e3f7}&fields_filter[{$v972bf3f05d14ffbdb817bef60638ff00}][]=" . $v0f826a89cf68c399c5f4cf320c1a5842;}$v44fdec47036f482b68b748f9d786801b[] = def_module::parseTemplate($v4f2afc9c4099ee1f39c9f551123e54bd, array(     '@count' => $ve2942a04780e223b215eb8b663cf5353,     '@link'  => $v2a304a1348456ccd2234cd71a81bd338,     '#day'  => $vb1bc248a7ff2b2e95569f56de68615df         ));}$v172a8327fcd3685ab3c0f740d031da09 = array(    'void:days' => $v44fdec47036f482b68b748f9d786801b,    'nodes:day' => $v44fdec47036f482b68b748f9d786801b   );$vae60f11ab51860bdb22794a943335a34[] = def_module::parseTemplate($v4aea309357d3d2b6db2d854df7b2cb21, $v172a8327fcd3685ab3c0f740d031da09);}return def_module::parseTemplate($v31912934b8f34be4364cc043cd8a0176, array(   'date'    => $v6a992d5529f459a44fee58c733255e86->timeStart,   'year'    => $va0e7b2a565119c0a7ec3126a16016113['year'],   'month'    => $va0e7b2a565119c0a7ec3126a16016113['month'],   'void:weeks'  => $vae60f11ab51860bdb22794a943335a34,   'nodes:week'  => $vae60f11ab51860bdb22794a943335a34  ));}public function getDominantTypeId($v7552cd149af7495ee7d8225974e50f80 = 0) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();return $vb81ca7c0ccaa77e7aa91936ab0070695->getDominantTypeId((int) $v7552cd149af7495ee7d8225974e50f80);}public function getVideoPlayer() {$veaae26a6fb20ed3ef54fb23bfa0b1fcc  = 640;$vb435e227d5dd201e1768b2bcb2e0aa81 = 360;$v66f6181bcb4cff4cd38fbc804a036db6 = "default";$vdbc11caa5bda99f77e6fb4dabd882e7d = func_get_args();if(!count($vdbc11caa5bda99f77e6fb4dabd882e7d)) {throw new publicException("No video specified");return null;}if(count($vdbc11caa5bda99f77e6fb4dabd882e7d) > 1 && strval(intval($vdbc11caa5bda99f77e6fb4dabd882e7d[0])) === $vdbc11caa5bda99f77e6fb4dabd882e7d[0]) {$vb1b26d9d245655a2cf8422f066203b2a  = (int)$vdbc11caa5bda99f77e6fb4dabd882e7d[0];$v972bf3f05d14ffbdb817bef60638ff00 = $vdbc11caa5bda99f77e6fb4dabd882e7d[1];$vd129937a7a79553a979fc1b0df2bc62b = 2;$vf5e638cc78dd325906c1298a0c21fb6b = umiHierarchy::getInstance()->getElement($vb1b26d9d245655a2cf8422f066203b2a);if(!$vf5e638cc78dd325906c1298a0c21fb6b) {$vf5e638cc78dd325906c1298a0c21fb6b = umiObjectsCollection::getInstance()->getObject($vb1b26d9d245655a2cf8422f066203b2a);if($vf5e638cc78dd325906c1298a0c21fb6b) {throw new publicException("Entity {$vb1b26d9d245655a2cf8422f066203b2a} doesn't exists");return null;}}$vd6fe1d0be6347b8ef2427fa629c04485 = (string)$vf5e638cc78dd325906c1298a0c21fb6b->getValue($v972bf3f05d14ffbdb817bef60638ff00);}else {$vd6fe1d0be6347b8ef2427fa629c04485 = $vdbc11caa5bda99f77e6fb4dabd882e7d[0];$vd129937a7a79553a979fc1b0df2bc62b = 1;}if(count($vdbc11caa5bda99f77e6fb4dabd882e7d) > $vd129937a7a79553a979fc1b0df2bc62b) {$veaae26a6fb20ed3ef54fb23bfa0b1fcc = (int)$vdbc11caa5bda99f77e6fb4dabd882e7d[$vd129937a7a79553a979fc1b0df2bc62b];}if(count($vdbc11caa5bda99f77e6fb4dabd882e7d) > $vd129937a7a79553a979fc1b0df2bc62b+1) {$vb435e227d5dd201e1768b2bcb2e0aa81 = (int)$vdbc11caa5bda99f77e6fb4dabd882e7d[$vd129937a7a79553a979fc1b0df2bc62b+1];}if(count($vdbc11caa5bda99f77e6fb4dabd882e7d) > $vd129937a7a79553a979fc1b0df2bc62b+2) {$v66f6181bcb4cff4cd38fbc804a036db6 = (int)$vdbc11caa5bda99f77e6fb4dabd882e7d[$vd129937a7a79553a979fc1b0df2bc62b+2];}list($v66f6181bcb4cff4cd38fbc804a036db6) = def_module::loadTemplates("./tpls/video/{$v66f6181bcb4cff4cd38fbc804a036db6}.tpl", 'video_player');return def_module::parseTemplate($v66f6181bcb4cff4cd38fbc804a036db6, array("path"=>$vd6fe1d0be6347b8ef2427fa629c04485, "width"=>$veaae26a6fb20ed3ef54fb23bfa0b1fcc, "height"=>$vb435e227d5dd201e1768b2bcb2e0aa81) );}};?>