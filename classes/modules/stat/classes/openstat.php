<?php
class openstat{private $str;private $data = array();private $error = false;public function __construct($v341be97d9aff90c9978347f66f945b77)    {if (!strpos($v341be97d9aff90c9978347f66f945b77, ';')) {$v341be97d9aff90c9978347f66f945b77 = str_replace(array('*', '-'), array('+', '/'), $v341be97d9aff90c9978347f66f945b77);$v341be97d9aff90c9978347f66f945b77 = base64_decode($v341be97d9aff90c9978347f66f945b77);}$this->str = $v341be97d9aff90c9978347f66f945b77;$v17757530e68209ec838613781b99a535 = explode(';', $v341be97d9aff90c9978347f66f945b77, 4);if (empty($v17757530e68209ec838613781b99a535[0]) || empty($v17757530e68209ec838613781b99a535[2])) {throw new Exception('»м€ сервиса и рекламного объ€влени€ об€зательные параметры');}if (sizeof($v17757530e68209ec838613781b99a535) == 4) {$this->parse($v17757530e68209ec838613781b99a535);}else {throw new Exception('„исло аргументов != 4');}}public function getServiceId()    {return $this->data['service_id'];}public function getCampaignId()    {return $this->data['campaign_id'];}public function getAdId()    {return $this->data['ad_id'];}public function getSourceId()    {return $this->data['source_id'];}private function parse($v17757530e68209ec838613781b99a535)    {list($v6e407aaed6dc834566b48baf2739c5fe, $ve9b78b1d92efd0b28d79d0bda64a82d8, $vf69e1891af4b222448c7603b89968acc, $vf5524bc2c119555699fe06e726d070c9) = $v17757530e68209ec838613781b99a535;$this->appendData($v6e407aaed6dc834566b48baf2739c5fe, 'service');$this->appendData($ve9b78b1d92efd0b28d79d0bda64a82d8, 'campaign');$this->appendData($vf69e1891af4b222448c7603b89968acc, 'ad');$this->appendData($vf5524bc2c119555699fe06e726d070c9, 'source');}private function appendData($v8d777f385d3dfec8815d20f7496026dc, $v599dcce2998a6b40b1e38e8c6006cb0a)    {$v36f75e2036c54462c47b965f4a581cff = "SELECT SQL_CACHE `id` FROM `cms_stat_sources_openstat_" . $v599dcce2998a6b40b1e38e8c6006cb0a . "` WHERE `name` = '" . mysql_real_escape_string($v8d777f385d3dfec8815d20f7496026dc) . "'";$v9b207167e5381c47682c6b4f58a623fb = l_mysql_query($v36f75e2036c54462c47b965f4a581cff);$vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_assoc($v9b207167e5381c47682c6b4f58a623fb);if (isset($vf1965a857bc285d26fe22023aa5ab50d['id'])) {$this->data[$v599dcce2998a6b40b1e38e8c6006cb0a . '_id'] = $vf1965a857bc285d26fe22023aa5ab50d['id'];}else {$v36f75e2036c54462c47b965f4a581cff = "INSERT INTO `cms_stat_sources_openstat_" . $v599dcce2998a6b40b1e38e8c6006cb0a . "` (`name`) VALUES ('" . mysql_real_escape_string($v8d777f385d3dfec8815d20f7496026dc) . "')";l_mysql_query($v36f75e2036c54462c47b965f4a581cff);$this->data[$v599dcce2998a6b40b1e38e8c6006cb0a . '_id'] = mysql_insert_id();}}}?>