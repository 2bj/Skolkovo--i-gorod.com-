<?php
 abstract class __rss_data {public $rss_per_page = 10;public function rss() {$v7057e8409c7c531a1a6e9ac3df4ed549 = getRequest('param0');if(defined("VIA_HTTP_SCHEME")) {throw new publicException("Not avalibable via scheme");}if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "%data_feed_nofeed%";}if(!$this->checkIfFeedable($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "%data_feed_wrong%";}$vfe53e41d8de996a88a87ecafae37162c = "xsl/rss.xsl";$this->generateFeed($v7057e8409c7c531a1a6e9ac3df4ed549, $vfe53e41d8de996a88a87ecafae37162c);}public function atom() {$v7057e8409c7c531a1a6e9ac3df4ed549 = getRequest('param0');if(defined("VIA_HTTP_SCHEME")) {throw new publicException("Not avalibable via scheme");}if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "%data_feed_nofeed%";}if(!$this->checkIfFeedable($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "%data_feed_wrong%";}$vfe53e41d8de996a88a87ecafae37162c = "xsl/atom.xsl";$this->generateFeed($v7057e8409c7c531a1a6e9ac3df4ed549, $vfe53e41d8de996a88a87ecafae37162c);}public function rssByCustomIds($v05df999a2364db21a1b8812093ba86e5 = NULL, $v666842e220c5b236ed6ccd5a059fe9ef = NULL, $v302f6aa9b57358722a3b62cc52f0c823 = NULL) {if (is_null($v05df999a2364db21a1b8812093ba86e5)) {return $this->rss();}else {if (is_null($v302f6aa9b57358722a3b62cc52f0c823)) $v302f6aa9b57358722a3b62cc52f0c823 = "xsl/rss.xsl";return $this->feedByCustomIds($v05df999a2364db21a1b8812093ba86e5, $v666842e220c5b236ed6ccd5a059fe9ef, $v302f6aa9b57358722a3b62cc52f0c823);}}public function atomByCustomIds($v05df999a2364db21a1b8812093ba86e5 = NULL, $v666842e220c5b236ed6ccd5a059fe9ef = NULL, $v302f6aa9b57358722a3b62cc52f0c823 = NULL) {if (is_null($v05df999a2364db21a1b8812093ba86e5)) {return $this->rss();}else {if (is_null($v302f6aa9b57358722a3b62cc52f0c823)) $v302f6aa9b57358722a3b62cc52f0c823 = "xsl/atom.xsl";return $this->feedByCustomIds($v05df999a2364db21a1b8812093ba86e5, $v666842e220c5b236ed6ccd5a059fe9ef, $v302f6aa9b57358722a3b62cc52f0c823);}}public function feedByCustomIds($v05df999a2364db21a1b8812093ba86e5, $v666842e220c5b236ed6ccd5a059fe9ef, $v99e23baa20149237f8b31a8ca600c872) {if (!umiHierarchy::getInstance()->isExists($v05df999a2364db21a1b8812093ba86e5)) {return "%data_feed_nofeed%";}else {$v23de53dfbbd4cfcb65a514ef75fb5714 = array();if (is_string($v666842e220c5b236ed6ccd5a059fe9ef)) {$v23de53dfbbd4cfcb65a514ef75fb5714 = preg_split("/[^\d]/is", $v666842e220c5b236ed6ccd5a059fe9ef);}elseif (is_numeric($vb84684c51768c267eb8836ba206ab734)) {$v23de53dfbbd4cfcb65a514ef75fb5714 = array(intval($v666842e220c5b236ed6ccd5a059fe9ef));}elseif (!is_array($v666842e220c5b236ed6ccd5a059fe9ef)) {$v23de53dfbbd4cfcb65a514ef75fb5714 = array();}$v23de53dfbbd4cfcb65a514ef75fb5714 = array_map('intval', $v23de53dfbbd4cfcb65a514ef75fb5714);$result = array();$result[] = $v05df999a2364db21a1b8812093ba86e5;foreach ($v23de53dfbbd4cfcb65a514ef75fb5714 as $vb29d0d2045b21053dcd1d90c7ae969ec) {if ($vb29d0d2045b21053dcd1d90c7ae969ec && $v9e260d61b0921d8e43f060c17a435aa0 = umiHierarchy::getInstance()->getElement($vb29d0d2045b21053dcd1d90c7ae969ec)) {$v4dc742b8c149e1cd4f174e5a73c8b8f3 = intval($v9e260d61b0921d8e43f060c17a435aa0->getRel());if ($this->checkIfFeedable($v4dc742b8c149e1cd4f174e5a73c8b8f3)) {$result[] = $vb29d0d2045b21053dcd1d90c7ae969ec;}}}$ve358efa489f58062f10dd7316b65649e = new umiXmlExporter();$ve358efa489f58062f10dd7316b65649e->setElements($result);$ve358efa489f58062f10dd7316b65649e->run();$v25d902c24283ab8cfbac54dfa101ad31 = $ve358efa489f58062f10dd7316b65649e->getResultFile();$v15bd89812a6c92120c29775dcef7b3b6 = DomDocument::loadXML($v25d902c24283ab8cfbac54dfa101ad31);$v801f7201346b43f8ee8390a1ef20ddcd = new xsltProcessor;$v801f7201346b43f8ee8390a1ef20ddcd->importStyleSheet(DomDocument::load($v99e23baa20149237f8b31a8ca600c872));$v9be17bcb5016279b920cf0fbc42aa00e = $v801f7201346b43f8ee8390a1ef20ddcd->transformToXML($v15bd89812a6c92120c29775dcef7b3b6);header("Content-type: text/xml; charset=utf-8");$this->flush($v9be17bcb5016279b920cf0fbc42aa00e);}}public function generateFeed($v7057e8409c7c531a1a6e9ac3df4ed549, $vfe53e41d8de996a88a87ecafae37162c) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection();$v8be74552df93e31bbdd6b36ed74bdb6a->addLimit($this->rss_per_page);$v8be74552df93e31bbdd6b36ed74bdb6a->addHierarchyFilter($v7057e8409c7c531a1a6e9ac3df4ed549);if($v94757cae63fd3e398c0811a976dd6bbe = $vb81ca7c0ccaa77e7aa91936ab0070695->getDominantTypeId($v7057e8409c7c531a1a6e9ac3df4ed549)) {$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$v3aabf39f2d943fa886d86dcbbee4d910 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId("publish_time");$v8be74552df93e31bbdd6b36ed74bdb6a->setOrderByProperty($v3aabf39f2d943fa886d86dcbbee4d910, false);}}$result = Array($v7057e8409c7c531a1a6e9ac3df4ed549);$result = array_merge($result, umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a));$ve358efa489f58062f10dd7316b65649e = new umiXmlExporter();$ve358efa489f58062f10dd7316b65649e->setElements($result);$ve358efa489f58062f10dd7316b65649e->run();$v25d902c24283ab8cfbac54dfa101ad31 = $ve358efa489f58062f10dd7316b65649e->getResultFile();$v15bd89812a6c92120c29775dcef7b3b6 = DomDocument::loadXML($v25d902c24283ab8cfbac54dfa101ad31);$v801f7201346b43f8ee8390a1ef20ddcd = new xsltProcessor;$v801f7201346b43f8ee8390a1ef20ddcd->importStyleSheet(DomDocument::load($vfe53e41d8de996a88a87ecafae37162c));$v9be17bcb5016279b920cf0fbc42aa00e = $v801f7201346b43f8ee8390a1ef20ddcd->transformToXML($v15bd89812a6c92120c29775dcef7b3b6);$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();$v7f2db423a49b305459147332fb01cf87->contentType('text/xml');$v7f2db423a49b305459147332fb01cf87->clear();$v7f2db423a49b305459147332fb01cf87->push($v9be17bcb5016279b920cf0fbc42aa00e);$v7f2db423a49b305459147332fb01cf87->end();}public function getRssMeta($v7057e8409c7c531a1a6e9ac3df4ed549 = false, $vb6827dcf027e592c55c51fdd8ed718c0 = "") {$v7057e8409c7c531a1a6e9ac3df4ed549 = $this->analyzeRequiredPath($v7057e8409c7c531a1a6e9ac3df4ed549);if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "";}if(!$this->checkIfFeedable($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "";}$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$vde1fb0e2c36ce64c318a1d010e9557cb = $vb6827dcf027e592c55c51fdd8ed718c0 . $v8e2dcfd7e7e24b1ca76c1193f645902b->getName();return "<link rel=\"alternate\" type=\"application/rss+xml\" href=\"/data/rss/{$v7057e8409c7c531a1a6e9ac3df4ed549}/\" title=\"{$vde1fb0e2c36ce64c318a1d010e9557cb}\" />";}public function getRssMetaByPath($vd6fe1d0be6347b8ef2427fa629c04485, $vb6827dcf027e592c55c51fdd8ed718c0 = "") {if($v7057e8409c7c531a1a6e9ac3df4ed549 = umiHierarchy::getInstance()->getIdByPath($vd6fe1d0be6347b8ef2427fa629c04485)) {return $this->getRssMeta($v7057e8409c7c531a1a6e9ac3df4ed549, $vb6827dcf027e592c55c51fdd8ed718c0);}else {return "";}}public function getAtomMeta($v7057e8409c7c531a1a6e9ac3df4ed549 = false, $vb6827dcf027e592c55c51fdd8ed718c0 = "") {$v7057e8409c7c531a1a6e9ac3df4ed549 = $this->analyzeRequiredPath($v7057e8409c7c531a1a6e9ac3df4ed549);if(!umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "";}if(!$this->checkIfFeedable($v7057e8409c7c531a1a6e9ac3df4ed549)) {return "";}$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);$vde1fb0e2c36ce64c318a1d010e9557cb = $vb6827dcf027e592c55c51fdd8ed718c0 . $v8e2dcfd7e7e24b1ca76c1193f645902b->getName();return "<link rel=\"alternate\" type=\"application/rss+xml\" href=\"/data/atom/{$v7057e8409c7c531a1a6e9ac3df4ed549}/\" title=\"{$vde1fb0e2c36ce64c318a1d010e9557cb}\" />";}public function getAtomMetaByPath($vd6fe1d0be6347b8ef2427fa629c04485, $vb6827dcf027e592c55c51fdd8ed718c0 = "") {if($v7057e8409c7c531a1a6e9ac3df4ed549 = umiHierarchy::getInstance()->getIdByPath($vd6fe1d0be6347b8ef2427fa629c04485)) {return $this->getAtomMeta($v7057e8409c7c531a1a6e9ac3df4ed549, $vb6827dcf027e592c55c51fdd8ed718c0);}else {return "";}}public function checkIfFeedable($v7057e8409c7c531a1a6e9ac3df4ed549) {$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if(!$v8e2dcfd7e7e24b1ca76c1193f645902b) return false;$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId());$v22884db148f0ffb0d830ba431102b0b5 = $vb946c44d711ade3b061653732977d043->getName();$vea9f6aca279138c58f705c8d4cb4b8ce = $vb946c44d711ade3b061653732977d043->getExt();foreach($this->alowed_source as $v22ee71e9dcc9ca12fc313c6e1ce3f806) {if($v22884db148f0ffb0d830ba431102b0b5 == $v22ee71e9dcc9ca12fc313c6e1ce3f806[0] && $vea9f6aca279138c58f705c8d4cb4b8ce == $v22ee71e9dcc9ca12fc313c6e1ce3f806[1]) {return true;}}return false;}};?>