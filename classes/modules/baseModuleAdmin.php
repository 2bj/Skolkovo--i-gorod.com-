<?php
 class baseModuleAdmin {protected $dataTypes = array('list', 'message', 'form'),    $actionTypes = array('modify', 'create', 'view');public function setDataRange($vaa9f73eea60a006820d0f8768bc8a3fc, $v7a86c157ee9713c34fbd7a1ee40f0c5a = 0) {$this->limit = (int) $vaa9f73eea60a006820d0f8768bc8a3fc;$this->offset = (int) $v7a86c157ee9713c34fbd7a1ee40f0c5a;}public function setDataRangeByPerPage($v9d85c254b5062e518a134a61950999c3, $ve1ba980ce14a8c0d7e2779f895ab8695 = 0) {$this->setDataRange($v9d85c254b5062e518a134a61950999c3, $ve1ba980ce14a8c0d7e2779f895ab8695 * $v9d85c254b5062e518a134a61950999c3);}public function setDataType($v870b60148237c1452dfb337fdd19c314) {$this->limit = false;$this->offset = false;$this->dataType = $v870b60148237c1452dfb337fdd19c314;}public function setActionType($vc3e705290a2a0a940dc4a4859b9a2fbb) {$this->actionType = $vc3e705290a2a0a940dc4a4859b9a2fbb;}public function setData($v8d777f385d3dfec8815d20f7496026dc, $vfbb44b4487415b134bce9c790a27fe5e = false) {$this->total = $vfbb44b4487415b134bce9c790a27fe5e;$this->data = $v8d777f385d3dfec8815d20f7496026dc;}public function doData() {$v181746b262df9e42f6016b8637fc8c52 = array();$v181746b262df9e42f6016b8637fc8c52['attribute:type'] = $this->dataType;$v181746b262df9e42f6016b8637fc8c52['attribute:action'] = $this->actionType;if($this->total) {$v181746b262df9e42f6016b8637fc8c52['attribute:total'] = $this->total;if(!is_null($this->offset)) {$v181746b262df9e42f6016b8637fc8c52['attribute:offset'] = $this->offset;}if(!is_null($this->limit)) {$v181746b262df9e42f6016b8637fc8c52['attribute:limit'] = $this->limit;}}$v181746b262df9e42f6016b8637fc8c52 = array_merge($v181746b262df9e42f6016b8637fc8c52, $this->data);xslAdminTemplater::getInstance()->setDataSet($v181746b262df9e42f6016b8637fc8c52);}public function prepareData($ve62e4d22f2d8630f6e44e2b7c3f70ddc, $v599dcce2998a6b40b1e38e8c6006cb0a) {$v8d777f385d3dfec8815d20f7496026dc = array();$this->requireSlashEnding();switch($v599dcce2998a6b40b1e38e8c6006cb0a) {case "page": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataPage($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "pages": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataPages($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "object": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataObject($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "objects": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataObjects($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "type": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataType($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "field": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataField($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "group": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataGroup($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "types": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataTypes($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "hierarchy_types": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataHierarchyTypes($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "domains": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataDomains($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "domain_mirrows": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataDomainMirrows($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "templates": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataTemplates($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "template": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataTemplate($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "settings": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataSettings($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "modules": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataModules($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}case "langs": {$v8d777f385d3dfec8815d20f7496026dc = $this->prepareDataLangs($ve62e4d22f2d8630f6e44e2b7c3f70ddc);break;}default: {throw new coreException("Data type \"{$v599dcce2998a6b40b1e38e8c6006cb0a}\" is unknown.");}}return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataPage($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, "element");$v186ba0d5990f6e43e7ad46f0dbaa47fb = cmsController::getInstance()->getModule("users");if ($this->systemIsLocked($v8e2dcfd7e7e24b1ca76c1193f645902b, $v186ba0d5990f6e43e7ad46f0dbaa47fb->user_id)){throw new wrongElementTypeAdminException(getLabel("error-element-locked"));}$v161c9aaa4fe035e7b2f465bc59f3ab45 = new umiEventPoint("sysytemBeginPageEdit");$v161c9aaa4fe035e7b2f465bc59f3ab45->setMode("before");$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("user_id", $v186ba0d5990f6e43e7ad46f0dbaa47fb->user_id);$v161c9aaa4fe035e7b2f465bc59f3ab45->setParam("lock_time", time());$v161c9aaa4fe035e7b2f465bc59f3ab45->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$v161c9aaa4fe035e7b2f465bc59f3ab45->call();$v8d777f385d3dfec8815d20f7496026dc = array();$v89e96bd1c461a4b70d8aaaba636b0f85 = cmsController::getInstance()->getModule("data");$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v71860c77c6745379b0d44304d66b6a13 = array();if($this->actionType == "create") {$v22884db148f0ffb0d830ba431102b0b5 = get_class($this);if(getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'module')) $v22884db148f0ffb0d830ba431102b0b5 = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'module');if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$vea9f6aca279138c58f705c8d4cb4b8ce = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type'];if($vea9f6aca279138c58f705c8d4cb4b8ce == "page" && $v22884db148f0ffb0d830ba431102b0b5 == "content") {$vea9f6aca279138c58f705c8d4cb4b8ce = "";}if(is_numeric($vea9f6aca279138c58f705c8d4cb4b8ce)) {$v85a0d697cef37e3885323fd9088343b0 = $v94757cae63fd3e398c0811a976dd6bbe = $vea9f6aca279138c58f705c8d4cb4b8ce;}else {$v85a0d697cef37e3885323fd9088343b0 = $v94757cae63fd3e398c0811a976dd6bbe = umiObjectTypesCollection::getInstance()->getBaseType($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}$vd0e45878043844ffc41aac437e86b602 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['parent'];if($vd0e45878043844ffc41aac437e86b602 instanceof iUmiHierarchyElement) {$v6be379826b20cc58475f636e33f4606b = $vd0e45878043844ffc41aac437e86b602->getId();$this->checkDomainPermissions($vd0e45878043844ffc41aac437e86b602->getDomainId());$this->checkElementPermissions($v6be379826b20cc58475f636e33f4606b);xslAdminTemplater::getInstance()->currentEditElementId = $v6be379826b20cc58475f636e33f4606b;$v5a509ca3ce95bc71bf833077b7d5a178 = umiHierarchy::getInstance()->getDominantTypeId($v6be379826b20cc58475f636e33f4606b);if($v5a509ca3ce95bc71bf833077b7d5a178) {$v94757cae63fd3e398c0811a976dd6bbe = $v5a509ca3ce95bc71bf833077b7d5a178;}$vb6aaa85825f7ae803766f43e00873d06 = umiHierarchy::getInstance()->getDominantTplId($v6be379826b20cc58475f636e33f4606b);if($vb6aaa85825f7ae803766f43e00873d06) {$vd02e12eb6d6c3f6ebd763197df01e211 = $vb6aaa85825f7ae803766f43e00873d06;}}else {$v6be379826b20cc58475f636e33f4606b = 0;$this->checkDomainPermissions();$v5a509ca3ce95bc71bf833077b7d5a178 = umiHierarchy::getInstance()->getDominantTypeId(0);if($v5a509ca3ce95bc71bf833077b7d5a178) {$v94757cae63fd3e398c0811a976dd6bbe = $v5a509ca3ce95bc71bf833077b7d5a178;}$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentDomain()->getId();if($v84ad1b49a83349491077e094ad5c5d1b = $this->getFloatedDomain()) {$v662cbf1253ac7d8750ed9190c52163e5 = $v84ad1b49a83349491077e094ad5c5d1b;}$v5574e9581faeef63fc053e2f5de8ddc4 = templatesCollection::getInstance()->getDefaultTemplate($v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86);if($v5574e9581faeef63fc053e2f5de8ddc4 instanceof iTemplate) {$vd02e12eb6d6c3f6ebd763197df01e211 = $v5574e9581faeef63fc053e2f5de8ddc4->getId();}else {throw new publicAdminException(getLabel('error-require-default-template'));}}if($this->compareObjectTypeByHierarchy($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $v94757cae63fd3e398c0811a976dd6bbe) == false) {$v94757cae63fd3e398c0811a976dd6bbe = $v85a0d697cef37e3885323fd9088343b0;}if(isset($ve62e4d22f2d8630f6e44e2b7c3f70ddc['type_id'])) {$v94757cae63fd3e398c0811a976dd6bbe = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type_id'];}elseif(isset($ve62e4d22f2d8630f6e44e2b7c3f70ddc['type-id'])) {$v94757cae63fd3e398c0811a976dd6bbe = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type-id'];}if($v94757cae63fd3e398c0811a976dd6bbe > 0) {$v71860c77c6745379b0d44304d66b6a13['attribute:name'] = "";$v71860c77c6745379b0d44304d66b6a13['attribute:parentId'] = $v6be379826b20cc58475f636e33f4606b;$v71860c77c6745379b0d44304d66b6a13['attribute:type-id'] = $v94757cae63fd3e398c0811a976dd6bbe;$v71860c77c6745379b0d44304d66b6a13['attribute:tpl-id'] = $vd02e12eb6d6c3f6ebd763197df01e211;$v71860c77c6745379b0d44304d66b6a13['attribute:active'] = "active";$v71860c77c6745379b0d44304d66b6a13['basetype'] = umiHierarchyTypesCollection::getInstance()->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);$v71860c77c6745379b0d44304d66b6a13['properties'] = $v89e96bd1c461a4b70d8aaaba636b0f85->getCreateForm($v94757cae63fd3e398c0811a976dd6bbe, false, false, true);}else {throw new coreException("Give me a normal type to create ;)");}if($v22884db148f0ffb0d830ba431102b0b5 == 'content' && $vea9f6aca279138c58f705c8d4cb4b8ce == '') {$v71860c77c6745379b0d44304d66b6a13['attribute:visible'] = 'visible';}}else if ($this->actionType == "modify") {if($ve62e4d22f2d8630f6e44e2b7c3f70ddc instanceof umiHierarchyElement) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $ve62e4d22f2d8630f6e44e2b7c3f70ddc;}else if (is_array($ve62e4d22f2d8630f6e44e2b7c3f70ddc)){$v8e2dcfd7e7e24b1ca76c1193f645902b = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['element'];}else {throw new coreException("Unknown type of input data");}if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$this->checkDomainPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId());$this->checkElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());xslAdminTemplater::getInstance()->currentEditElementId = $v8e2dcfd7e7e24b1ca76c1193f645902b->getId();$vaf31437ce61345f416579830a98c91e5 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getId();$v71860c77c6745379b0d44304d66b6a13['attribute:id'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getId();$v71860c77c6745379b0d44304d66b6a13['attribute:parentId'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();$v71860c77c6745379b0d44304d66b6a13['attribute:object-id'] = $vaf31437ce61345f416579830a98c91e5;$v71860c77c6745379b0d44304d66b6a13['attribute:type-id'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getTypeId();$v71860c77c6745379b0d44304d66b6a13['attribute:alt-name'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getAltName();$v71860c77c6745379b0d44304d66b6a13['attribute:tpl-id'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTplId();if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive()) {$v71860c77c6745379b0d44304d66b6a13['attribute:active'] = "active";}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsVisible()) {$v71860c77c6745379b0d44304d66b6a13['attribute:visible'] = "visible";}if($v8e2dcfd7e7e24b1ca76c1193f645902b->getIsDefault()) {$v71860c77c6745379b0d44304d66b6a13['attribute:default'] = "default";}$v71860c77c6745379b0d44304d66b6a13['basetype'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getHierarchyType();$v71860c77c6745379b0d44304d66b6a13['name'] = $v8e2dcfd7e7e24b1ca76c1193f645902b->getName();$v71860c77c6745379b0d44304d66b6a13['properties'] = $v89e96bd1c461a4b70d8aaaba636b0f85->getEditForm($vaf31437ce61345f416579830a98c91e5, false, false, true, true);}$v8d777f385d3dfec8815d20f7496026dc['page'] = $v71860c77c6745379b0d44304d66b6a13;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataPages($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$vb3b32a2d422265cd25c3323ed0157f81 = array();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve62e4d22f2d8630f6e44e2b7c3f70ddc);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $ve62e4d22f2d8630f6e44e2b7c3f70ddc[$v865c0c0b4ab0e063e5caa3387c1a8741];if(is_numeric($v8e2dcfd7e7e24b1ca76c1193f645902b)) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v8e2dcfd7e7e24b1ca76c1193f645902b, false, true);}if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {if(getRequest('viewMode') == 'full') {$vb3b32a2d422265cd25c3323ed0157f81[] = array('full:' => $v8e2dcfd7e7e24b1ca76c1193f645902b);}else {$vb3b32a2d422265cd25c3323ed0157f81[] = $v8e2dcfd7e7e24b1ca76c1193f645902b;$vb81ca7c0ccaa77e7aa91936ab0070695->unloadElement($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());}}}$v8d777f385d3dfec8815d20f7496026dc['nodes:page'] = $vb3b32a2d422265cd25c3323ed0157f81;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataObjects($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v69ae498121c2d8e63f20c7144a0246d7 = umiObjectsCollection::getInstance();$v5891da2d64975cae48d175d1e001f5da = array();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve62e4d22f2d8630f6e44e2b7c3f70ddc);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$va8cfde6331bd59eb2ac96f8911c4b666 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc[$v865c0c0b4ab0e063e5caa3387c1a8741];if(is_numeric($va8cfde6331bd59eb2ac96f8911c4b666)) {$va8cfde6331bd59eb2ac96f8911c4b666 = $v69ae498121c2d8e63f20c7144a0246d7->getObject($va8cfde6331bd59eb2ac96f8911c4b666);}if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {if(getRequest('viewMode') == 'full') {$v5891da2d64975cae48d175d1e001f5da[] = array('full:' => $va8cfde6331bd59eb2ac96f8911c4b666);}else {$v5891da2d64975cae48d175d1e001f5da[] = $va8cfde6331bd59eb2ac96f8911c4b666;$v69ae498121c2d8e63f20c7144a0246d7->unloadObject($va8cfde6331bd59eb2ac96f8911c4b666->getId());}}}$v8d777f385d3dfec8815d20f7496026dc['nodes:object'] = $v5891da2d64975cae48d175d1e001f5da;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataObject($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v89e96bd1c461a4b70d8aaaba636b0f85 = cmsController::getInstance()->getModule("data");if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc, true) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$va8cfde6331bd59eb2ac96f8911c4b666 = array();if($this->actionType == "create") {$v5f694956811487225d15e973ca38fbab = false;$v22884db148f0ffb0d830ba431102b0b5 = get_class($this);$vea9f6aca279138c58f705c8d4cb4b8ce = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type');if($v22884db148f0ffb0d830ba431102b0b5 && $vea9f6aca279138c58f705c8d4cb4b8ce) {$v5f694956811487225d15e973ca38fbab = umiObjectTypesCollection::getInstance()->getBaseType($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}if(isset($ve62e4d22f2d8630f6e44e2b7c3f70ddc['type-id'])) {$v5f694956811487225d15e973ca38fbab = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type-id'];}if($v5f694956811487225d15e973ca38fbab == false) {throw new publicAdminException("Object type id is required to create new object");}$va8cfde6331bd59eb2ac96f8911c4b666['attribute:type-id'] = $v5f694956811487225d15e973ca38fbab;$va8cfde6331bd59eb2ac96f8911c4b666['properties'] = $v89e96bd1c461a4b70d8aaaba636b0f85->getCreateForm($v5f694956811487225d15e973ca38fbab, false, false, true);}else {if($ve62e4d22f2d8630f6e44e2b7c3f70ddc instanceof umiObject == false) {if(is_object($ve62e4d22f2d8630f6e44e2b7c3f70ddc = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'object')) === false) {throw new publicAdminException(getLabel("error-expect-object"));}}$va8cfde6331bd59eb2ac96f8911c4b666['attribute:id'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc->getId();$va8cfde6331bd59eb2ac96f8911c4b666['attribute:name'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc->getName();$va8cfde6331bd59eb2ac96f8911c4b666['attribute:type-id'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc->getTypeId();$va8cfde6331bd59eb2ac96f8911c4b666['attribute:owner-id'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc->getOwnerId();$va8cfde6331bd59eb2ac96f8911c4b666['properties'] = $v89e96bd1c461a4b70d8aaaba636b0f85->getEditForm($ve62e4d22f2d8630f6e44e2b7c3f70ddc->getId(), false, false, true, true);}$v8d777f385d3dfec8815d20f7496026dc['object'] = $va8cfde6331bd59eb2ac96f8911c4b666;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataType($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v8d777f385d3dfec8815d20f7496026dc['full:type'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc;xmlTranslator::$showHiddenFieldGroups = true;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataField($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();if($this->actionType == "create") {$v06e3d36fa30cea095545139854ad1fb9 = array();$v06e3d36fa30cea095545139854ad1fb9['attribute:visible'] = 'visible';$v8d777f385d3dfec8815d20f7496026dc['field'] = $v06e3d36fa30cea095545139854ad1fb9;}else {$v8d777f385d3dfec8815d20f7496026dc['full:field'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc;}return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataGroup($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();if($this->actionType == "create") {$vca16dceccba97b5f16060a7c1f62f5c7 = array();$vca16dceccba97b5f16060a7c1f62f5c7['attribute:visible'] = true;$v8d777f385d3dfec8815d20f7496026dc['group'] = $vca16dceccba97b5f16060a7c1f62f5c7;}else {if($ve62e4d22f2d8630f6e44e2b7c3f70ddc instanceof umiFieldsGroup) {$v8d777f385d3dfec8815d20f7496026dc['group'] = $ve62e4d22f2d8630f6e44e2b7c3f70ddc;}else {throw new coreException("Expected instance of umiFieldsGroup");}}return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataTypes($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$vb3827f7111095f5ba1a9f49988fe9382 = umiObjectTypesCollection::getInstance();$vd14a8022b085f9ef19d479cbdd581127 = array();$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($ve62e4d22f2d8630f6e44e2b7c3f70ddc);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v94757cae63fd3e398c0811a976dd6bbe = $ve62e4d22f2d8630f6e44e2b7c3f70ddc[$v865c0c0b4ab0e063e5caa3387c1a8741];$v599dcce2998a6b40b1e38e8c6006cb0a = $vb3827f7111095f5ba1a9f49988fe9382->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$vd14a8022b085f9ef19d479cbdd581127[] = $v599dcce2998a6b40b1e38e8c6006cb0a;}}$v8d777f385d3dfec8815d20f7496026dc['nodes:type'] = $vd14a8022b085f9ef19d479cbdd581127;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataHierarchyTypes($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$vb3827f7111095f5ba1a9f49988fe9382 = umiHierarchyTypesCollection::getInstance();$vd14a8022b085f9ef19d479cbdd581127 = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $v447b7147e84be512208dcc0995d67ebc) {if($v447b7147e84be512208dcc0995d67ebc instanceof iUmiHierarchyType) {$vd14a8022b085f9ef19d479cbdd581127[] = $v447b7147e84be512208dcc0995d67ebc;}else {$v94757cae63fd3e398c0811a976dd6bbe = $v447b7147e84be512208dcc0995d67ebc;$v599dcce2998a6b40b1e38e8c6006cb0a = $vb3827f7111095f5ba1a9f49988fe9382->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof iUmiHierarchyType) {$vd14a8022b085f9ef19d479cbdd581127[] = $v599dcce2998a6b40b1e38e8c6006cb0a;}}}$v8d777f385d3dfec8815d20f7496026dc['nodes:basetype'] = $vd14a8022b085f9ef19d479cbdd581127;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataDomains($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $v447b7147e84be512208dcc0995d67ebc) {$ve4e46deb7f9cc58c7abfb32e5570b6f3[] = $v447b7147e84be512208dcc0995d67ebc;}$v8d777f385d3dfec8815d20f7496026dc['nodes:domain'] = $ve4e46deb7f9cc58c7abfb32e5570b6f3;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataDomainMirrows($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $v447b7147e84be512208dcc0995d67ebc) {$ve4e46deb7f9cc58c7abfb32e5570b6f3[] = $v447b7147e84be512208dcc0995d67ebc;}$v8d777f385d3dfec8815d20f7496026dc['nodes:domainMirrow'] = $ve4e46deb7f9cc58c7abfb32e5570b6f3;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataTemplates($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v14a0ffee308315f250f040d5b4d48560 = domainsCollection::getInstance();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $v67b3dba8bc6778101892eb77249db32e => $vfed36e93a0509e20f2dc96cbbd85b678) {$vad5f82e879a9c5d6b5b442eb37e50551 = array();$vad5f82e879a9c5d6b5b442eb37e50551['attribute:id'] = $v14a0ffee308315f250f040d5b4d48560->getDomainId($v67b3dba8bc6778101892eb77249db32e);$vad5f82e879a9c5d6b5b442eb37e50551['attribute:host'] = $v67b3dba8bc6778101892eb77249db32e;$vad5f82e879a9c5d6b5b442eb37e50551['nodes:template'] = $vfed36e93a0509e20f2dc96cbbd85b678;$ve4e46deb7f9cc58c7abfb32e5570b6f3[] = $vad5f82e879a9c5d6b5b442eb37e50551;}$v8d777f385d3dfec8815d20f7496026dc['nodes:domain'] = $ve4e46deb7f9cc58c7abfb32e5570b6f3;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataTemplate(iTemplate $v66f6181bcb4cff4cd38fbc804a036db6) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v8d777f385d3dfec8815d20f7496026dc = array();$vcaf9b6b99962bf5c2264824231d7a40c = array();$vcaf9b6b99962bf5c2264824231d7a40c['attribute:id'] = $v66f6181bcb4cff4cd38fbc804a036db6->getId();$vcaf9b6b99962bf5c2264824231d7a40c['attribute:title'] = $v66f6181bcb4cff4cd38fbc804a036db6->getTitle();$vcaf9b6b99962bf5c2264824231d7a40c['attribute:filename'] = $v66f6181bcb4cff4cd38fbc804a036db6->getFileName();$vcaf9b6b99962bf5c2264824231d7a40c['attribute:lang-id'] = $v66f6181bcb4cff4cd38fbc804a036db6->getLangId();$vcaf9b6b99962bf5c2264824231d7a40c['attribute:domain-id'] = $v66f6181bcb4cff4cd38fbc804a036db6->getDomainId();$v557f12a93c5bf0febb3b293feeb085be = $v66f6181bcb4cff4cd38fbc804a036db6->getUsedPages();$vb3b32a2d422265cd25c3323ed0157f81 = array();foreach($v557f12a93c5bf0febb3b293feeb085be as $vfc07ae6b81515e9c73cb36ac08488ca1) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($vfc07ae6b81515e9c73cb36ac08488ca1[0]);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v7057e8409c7c531a1a6e9ac3df4ed549 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getId();$vb53e8255f052e2d8f7574bfac8663930['attribute:id'] = $v7057e8409c7c531a1a6e9ac3df4ed549;$vb53e8255f052e2d8f7574bfac8663930['xlink:href'] = "upage://" . $v7057e8409c7c531a1a6e9ac3df4ed549;$vb53e8255f052e2d8f7574bfac8663930['basetype'] = selector::get('hierarchy-type')->id($v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId());$vb53e8255f052e2d8f7574bfac8663930['name'] = str_replace("\"", "\\\"", $v8e2dcfd7e7e24b1ca76c1193f645902b->getName());$vb3b32a2d422265cd25c3323ed0157f81[] = $vb53e8255f052e2d8f7574bfac8663930;}}$vcaf9b6b99962bf5c2264824231d7a40c['used-pages']['nodes:page'] = $vb3b32a2d422265cd25c3323ed0157f81;$v8d777f385d3dfec8815d20f7496026dc['template'] = $vcaf9b6b99962bf5c2264824231d7a40c;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataSettings($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v8d777f385d3dfec8815d20f7496026dc['nodes:group'] = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $veeeb23fbd23e52a6a6ff78b9f18cbc4e => $v21ffce5b8a6cc8cc6a41448dd69623c9) {if(!is_array($v21ffce5b8a6cc8cc6a41448dd69623c9)) {continue;}$vdb0f6f37ebeb6ea09489124345af2a45 = array();$vdb0f6f37ebeb6ea09489124345af2a45['attribute:name'] = $veeeb23fbd23e52a6a6ff78b9f18cbc4e;$vdb0f6f37ebeb6ea09489124345af2a45['attribute:label'] = getLabel("group-" . $veeeb23fbd23e52a6a6ff78b9f18cbc4e);$v93da65a9fd0004d9477aeac024e08e15 = array();foreach($v21ffce5b8a6cc8cc6a41448dd69623c9 as $v26521b6206cf44c2307504f57a37bcb7 => $v6dcb021c803bcc0f8eb29ea77e28c233) {$v57289251b219b7784ca956e1cc149ea0 = def_module::getRealKey($v26521b6206cf44c2307504f57a37bcb7);$v63235cb515d30fdbbe1cd6beef1e210f = def_module::getRealKey($v26521b6206cf44c2307504f57a37bcb7, true);$vef3e30e070f70244fd6578d88a6b77ac = array();$vef3e30e070f70244fd6578d88a6b77ac['attribute:name'] = $v57289251b219b7784ca956e1cc149ea0;$vef3e30e070f70244fd6578d88a6b77ac['attribute:type'] = $v63235cb515d30fdbbe1cd6beef1e210f;$vef3e30e070f70244fd6578d88a6b77ac['attribute:label'] = getLabel("option-" . $v57289251b219b7784ca956e1cc149ea0);switch($v63235cb515d30fdbbe1cd6beef1e210f) {case "select": {$v691d502cfd0e0626cd3b058e5682ad1c = array();$v2063c1608d6e0baf80249c42e2be5804 = isset($v6dcb021c803bcc0f8eb29ea77e28c233['value']) ? $v6dcb021c803bcc0f8eb29ea77e28c233['value'] : false;foreach($v6dcb021c803bcc0f8eb29ea77e28c233 as $v82bfda7962fd12f51163ae45886c4c62 => $v9d0307ba8eb290ff0e158fc1bca7fae7) {if($v82bfda7962fd12f51163ae45886c4c62 === "value") continue;$ve253bed1357afcefc5fadfbc92f9eb97 = array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $v82bfda7962fd12f51163ae45886c4c62;$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $v9d0307ba8eb290ff0e158fc1bca7fae7;$v691d502cfd0e0626cd3b058e5682ad1c[] = $ve253bed1357afcefc5fadfbc92f9eb97;}$vef3e30e070f70244fd6578d88a6b77ac['value'] = array("nodes:item" => $v691d502cfd0e0626cd3b058e5682ad1c);if($v2063c1608d6e0baf80249c42e2be5804 !== false) {$vef3e30e070f70244fd6578d88a6b77ac['value']['attribute:id'] = $v2063c1608d6e0baf80249c42e2be5804;}break;}case "password": {if($v6dcb021c803bcc0f8eb29ea77e28c233) {$v6dcb021c803bcc0f8eb29ea77e28c233 = "********";}else {$v6dcb021c803bcc0f8eb29ea77e28c233 = "";}break;}case "symlink": {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v6dcb021c803bcc0f8eb29ea77e28c233 = @unserialize($v6dcb021c803bcc0f8eb29ea77e28c233);if(!is_array($v6dcb021c803bcc0f8eb29ea77e28c233)) {$v6dcb021c803bcc0f8eb29ea77e28c233 = array();}$v691d502cfd0e0626cd3b058e5682ad1c = array();foreach($v6dcb021c803bcc0f8eb29ea77e28c233 as $v82bfda7962fd12f51163ae45886c4c62) {$v447b7147e84be512208dcc0995d67ebc = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v82bfda7962fd12f51163ae45886c4c62);if($v447b7147e84be512208dcc0995d67ebc instanceof umiHierarchyElement == false) {continue;}$ve253bed1357afcefc5fadfbc92f9eb97 = array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:id'] = $v82bfda7962fd12f51163ae45886c4c62;$ve253bed1357afcefc5fadfbc92f9eb97['node:name'] = $v447b7147e84be512208dcc0995d67ebc->getName();$v691d502cfd0e0626cd3b058e5682ad1c[] = $ve253bed1357afcefc5fadfbc92f9eb97;}$vef3e30e070f70244fd6578d88a6b77ac['value'] = array('nodes:item' => $v691d502cfd0e0626cd3b058e5682ad1c);break;}default: {$vef3e30e070f70244fd6578d88a6b77ac['value'] = $v6dcb021c803bcc0f8eb29ea77e28c233;break;}}$v93da65a9fd0004d9477aeac024e08e15[] = $vef3e30e070f70244fd6578d88a6b77ac;}$vdb0f6f37ebeb6ea09489124345af2a45['nodes:option'] = $v93da65a9fd0004d9477aeac024e08e15;$v8d777f385d3dfec8815d20f7496026dc['nodes:group'][] = $vdb0f6f37ebeb6ea09489124345af2a45;}return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataModules($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v0eb9b3af2e4a00837a1b1a854c9ea18c = array_values($ve62e4d22f2d8630f6e44e2b7c3f70ddc);$v691d502cfd0e0626cd3b058e5682ad1c = array();foreach($v0eb9b3af2e4a00837a1b1a854c9ea18c as $v854203cccade0bbe21be239a208aea49) {$ve253bed1357afcefc5fadfbc92f9eb97 = array();$ve253bed1357afcefc5fadfbc92f9eb97['attribute:label'] = getLabel('module-' . $v854203cccade0bbe21be239a208aea49);$ve253bed1357afcefc5fadfbc92f9eb97['node:module'] = $v854203cccade0bbe21be239a208aea49;$v691d502cfd0e0626cd3b058e5682ad1c[] = $ve253bed1357afcefc5fadfbc92f9eb97;}$v8d777f385d3dfec8815d20f7496026dc['nodes:module'] = $v691d502cfd0e0626cd3b058e5682ad1c;return $v8d777f385d3dfec8815d20f7496026dc;}public function prepareDataLangs($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8d777f385d3dfec8815d20f7496026dc = array();$v5a05866850c28651fe234659f6c92ada = array();foreach($ve62e4d22f2d8630f6e44e2b7c3f70ddc as $v7572559ca86e781ba8fe8073a0b725c6) {$vfbdd276e365b935bbc9e5d282201665e = array();$vfbdd276e365b935bbc9e5d282201665e['attribute:id'] = $v7572559ca86e781ba8fe8073a0b725c6->getId();$vfbdd276e365b935bbc9e5d282201665e['attribute:title'] = $v7572559ca86e781ba8fe8073a0b725c6->getTitle();$vfbdd276e365b935bbc9e5d282201665e['attribute:prefix'] = $v7572559ca86e781ba8fe8073a0b725c6->getPrefix();$v5a05866850c28651fe234659f6c92ada[] = $vfbdd276e365b935bbc9e5d282201665e;}$v8d777f385d3dfec8815d20f7496026dc['nodes:lang'] = $v5a05866850c28651fe234659f6c92ada;return $v8d777f385d3dfec8815d20f7496026dc;}public function expectParams($v21ffce5b8a6cc8cc6a41448dd69623c9) {foreach($v21ffce5b8a6cc8cc6a41448dd69623c9 as $v6fb519cd0e7b78b19a008aae9a704da9 => $vdb0f6f37ebeb6ea09489124345af2a45) {foreach($vdb0f6f37ebeb6ea09489124345af2a45 as $v26521b6206cf44c2307504f57a37bcb7 => $veca07335a33c5aeb5e1bc7c98b4b9d80) {$v57289251b219b7784ca956e1cc149ea0 = def_module::getRealKey($v26521b6206cf44c2307504f57a37bcb7);$v63235cb515d30fdbbe1cd6beef1e210f = def_module::getRealKey($v26521b6206cf44c2307504f57a37bcb7, true);$v21ffce5b8a6cc8cc6a41448dd69623c9[$v6fb519cd0e7b78b19a008aae9a704da9][$v26521b6206cf44c2307504f57a37bcb7] = $this->getExpectedParam($v57289251b219b7784ca956e1cc149ea0, $v63235cb515d30fdbbe1cd6beef1e210f, $veca07335a33c5aeb5e1bc7c98b4b9d80);}}return $v21ffce5b8a6cc8cc6a41448dd69623c9;}public function getExpectedParam($v57289251b219b7784ca956e1cc149ea0, $v63235cb515d30fdbbe1cd6beef1e210f, $veca07335a33c5aeb5e1bc7c98b4b9d80 = NULL) {global $_FILES;$v2063c1608d6e0baf80249c42e2be5804 = getRequest($v57289251b219b7784ca956e1cc149ea0);if($v63235cb515d30fdbbe1cd6beef1e210f == "status") {return NULL;}if(is_null($v2063c1608d6e0baf80249c42e2be5804) && !in_array($v63235cb515d30fdbbe1cd6beef1e210f, array('file', 'weak_guide'))) {throw new requireAdminParamException("I expect value in request for param \"" . $v57289251b219b7784ca956e1cc149ea0 . "\"");}switch($v63235cb515d30fdbbe1cd6beef1e210f) {case "float": {return (float) $v2063c1608d6e0baf80249c42e2be5804;}case "bool":    case "boolean":    case "templates":    case "guide":    case "weak_guide":    case "int": {return (int) $v2063c1608d6e0baf80249c42e2be5804;}case "password": {$v2063c1608d6e0baf80249c42e2be5804 = ($v2063c1608d6e0baf80249c42e2be5804 == "********") ? NULL : (string) $v2063c1608d6e0baf80249c42e2be5804;if($v2063c1608d6e0baf80249c42e2be5804) {try {$vc1070685cc705de2c6ef676e1b41d257 = new umiOpenSSL();$v52fcb0450476610e7d8a870e84e3ea54 = $vc1070685cc705de2c6ef676e1b41d257->supplyDefaultKeyFiles();if ($v52fcb0450476610e7d8a870e84e3ea54) {$v2063c1608d6e0baf80249c42e2be5804 = 'umipwd_b64::' . base64_encode($vc1070685cc705de2c6ef676e1b41d257->encrypt($v2063c1608d6e0baf80249c42e2be5804));}else {$v2063c1608d6e0baf80249c42e2be5804 = NULL;}}catch(publicException $ve1671797c52e15f763380b45e841ec32) {$v2063c1608d6e0baf80249c42e2be5804 = NULL;}}return $v2063c1608d6e0baf80249c42e2be5804;}case "email":    case "status":    case "string": {return (string) $v2063c1608d6e0baf80249c42e2be5804;}case "symlink": {return serialize($v2063c1608d6e0baf80249c42e2be5804);}case "file": {$v5b396db1931f24274e64fafd2e60f961 = $veca07335a33c5aeb5e1bc7c98b4b9d80['destination-folder'];$vdb0f6f37ebeb6ea09489124345af2a45 = isset($veca07335a33c5aeb5e1bc7c98b4b9d80['group']) ? $veca07335a33c5aeb5e1bc7c98b4b9d80['group'] : "pics";if($v2063c1608d6e0baf80249c42e2be5804 = umiFile::upload($vdb0f6f37ebeb6ea09489124345af2a45, $v57289251b219b7784ca956e1cc149ea0, $v5b396db1931f24274e64fafd2e60f961)) {return $v2063c1608d6e0baf80249c42e2be5804;}else {$vd6fe1d0be6347b8ef2427fa629c04485 = $v5b396db1931f24274e64fafd2e60f961 . getRequest('select_' . $v57289251b219b7784ca956e1cc149ea0);return new umiFile($vd6fe1d0be6347b8ef2427fa629c04485);}break;}case "select": {return $v2063c1608d6e0baf80249c42e2be5804;break;}default: {throw new wrongParamException("I don't expect param \"" . $v63235cb515d30fdbbe1cd6beef1e210f . "\"");}}}public function expectElement($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false, $vde8649b95160445760560c5e4e418ef3 = false, $vbeaf7e25161be5ef9784e550ab4fc891 = false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = ($vde8649b95160445760560c5e4e418ef3) ? $vb2145aac704ce76dbe1ac7adac535b23 : (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);$v8e2dcfd7e7e24b1ca76c1193f645902b = umiHierarchy::getInstance()->getElement((int) $v7057e8409c7c531a1a6e9ac3df4ed549, false, $vbeaf7e25161be5ef9784e550ab4fc891);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {return $v8e2dcfd7e7e24b1ca76c1193f645902b;}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectElementException(getLabel("error-expect-element"));}else {return false;}}}public function expectObject($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false, $vde8649b95160445760560c5e4e418ef3 = false) {$vaf31437ce61345f416579830a98c91e5 = ($vde8649b95160445760560c5e4e418ef3) ? $vb2145aac704ce76dbe1ac7adac535b23 : (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject((int) $vaf31437ce61345f416579830a98c91e5);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {return $va8cfde6331bd59eb2ac96f8911c4b666;}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectObjectException(getLabel("error-expect-object"));}else {return false;}}}public function expectElementId($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false) {$v7057e8409c7c531a1a6e9ac3df4ed549 = (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);if($v7057e8409c7c531a1a6e9ac3df4ed549 === 0 || umiHierarchy::getInstance()->isExists($v7057e8409c7c531a1a6e9ac3df4ed549)) {return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectElementException(getLabel("error-expect-element"));}else {return false;}}}public function expectObjectId($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false) {$vaf31437ce61345f416579830a98c91e5 = (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);if($vaf31437ce61345f416579830a98c91e5 === 0 || umiObjectsCollection::getInstance()->isExists($vaf31437ce61345f416579830a98c91e5)) {return $vaf31437ce61345f416579830a98c91e5;}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectObjectException(getLabel("error-expect-object"));}else {return false;}}}public function expectObjectType($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false) {$v87306dd4235ed712ebc07fe169b76f83 = (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);if($v87306dd4235ed712ebc07fe169b76f83 === 0 || umiObjectTypesCollection::getInstance()->isExists($v87306dd4235ed712ebc07fe169b76f83)) {return umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectObjectTypeException(getLabel("error-expect-object-type"));}else {return false;}}}public function expectObjectTypeId($vb2145aac704ce76dbe1ac7adac535b23, $v2133fd717402a7966ee88d06f9e0b792 = false, $vde8649b95160445760560c5e4e418ef3 = false) {$v87306dd4235ed712ebc07fe169b76f83 = (int) getRequest($vb2145aac704ce76dbe1ac7adac535b23);if($vde8649b95160445760560c5e4e418ef3) {$v87306dd4235ed712ebc07fe169b76f83 = $vb2145aac704ce76dbe1ac7adac535b23;}$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();if($v87306dd4235ed712ebc07fe169b76f83 === 0 || $v0e8133eb006c0f85ed9444ae07a60842->getType($v87306dd4235ed712ebc07fe169b76f83)) {return $v87306dd4235ed712ebc07fe169b76f83;}else {if($v2133fd717402a7966ee88d06f9e0b792) {throw new expectObjectTypeException(getLabel("error-expect-object-type"));}else {return false;}}}public function saveEditedElementData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, "element");$v186ba0d5990f6e43e7ad46f0dbaa47fb = cmsController::getInstance()->getModule("users");$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemModifyElement");$v4119639092e62c55ea8be348e4d9260d->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$v4119639092e62c55ea8be348e4d9260d->addRef("inputData", $ve62e4d22f2d8630f6e44e2b7c3f70ddc);$v4119639092e62c55ea8be348e4d9260d->setParam("user_id", $v186ba0d5990f6e43e7ad46f0dbaa47fb->user_id);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement === false) {throw new expectElementException(getLabel("error-expect-element"));}$this->checkDomainPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getDomainId());$this->checkElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());if(!is_null($vd84ff935144e00c3e1d395c2379aca47 = getRequest('alt-name'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setAltName($vd84ff935144e00c3e1d395c2379aca47);}$v854203cccade0bbe21be239a208aea49 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$v2fa70149e2a7e75da2b0303d0a36a944 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();if(!is_null($v4264c638e0098acb172519b0436db099 = getRequest('active'))) {$permissions = permissionsCollection::getInstance();$ve8701ad48ba05a91604e480dd60899a3 = $permissions->getUserId();if($permissions->isAllowedMethod($ve8701ad48ba05a91604e480dd60899a3, $v854203cccade0bbe21be239a208aea49, "publish") != false) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsActive($v4264c638e0098acb172519b0436db099);}}if(!is_null($ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getRequest('is-visible'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);}if(!is_null($vf62baf4c4ead98d50d516eca0ac5a746 = getRequest('is-default'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);}if(!is_null($vd02e12eb6d6c3f6ebd763197df01e211 = getRequest('template-id'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setTplId($vd02e12eb6d6c3f6ebd763197df01e211);}$v9bc65c2abec141778ffaa729489f3e87 = cmsController::getInstance()->getModule('users');if($v9bc65c2abec141778ffaa729489f3e87 instanceof users) {if(is_array(getRequest('perms_read'))     || is_array(getRequest('perms_edit'))     || is_array(getRequest('perms_create'))     || is_array(getRequest('perms_delete'))     || is_array(getRequest('perms_move'))) {$v9bc65c2abec141778ffaa729489f3e87->setPerms($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());}}backupModel::getInstance()->save($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());$va8cfde6331bd59eb2ac96f8911c4b666 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject();if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$this->saveEditedObjectData($va8cfde6331bd59eb2ac96f8911c4b666);}$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$this->currentEditedElementId = $v8e2dcfd7e7e24b1ca76c1193f645902b->getId();$v4119639092e62c55ea8be348e4d9260d->setMode("after");$v4119639092e62c55ea8be348e4d9260d->call();return $v8e2dcfd7e7e24b1ca76c1193f645902b;}public function saveAddedElementData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v6942e8fa62b3cc9d93881a58210e2fd7 = umiHierarchyTypesCollection::getInstance();$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$vfed36e93a0509e20f2dc96cbbd85b678 = templatesCollection::getInstance();$v22884db148f0ffb0d830ba431102b0b5 = get_class($this);if(isset($ve62e4d22f2d8630f6e44e2b7c3f70ddc['module'])) $v22884db148f0ffb0d830ba431102b0b5 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['module'];$vea9f6aca279138c58f705c8d4cb4b8ce = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type'];$vd0e45878043844ffc41aac437e86b602 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['parent'];if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}if($v22884db148f0ffb0d830ba431102b0b5 == "content" && $vea9f6aca279138c58f705c8d4cb4b8ce == "page") {$vea9f6aca279138c58f705c8d4cb4b8ce = "";}if($vd0e45878043844ffc41aac437e86b602) {$this->checkElementPermissions($vd0e45878043844ffc41aac437e86b602->getId(), permissionsCollection::E_CREATE_ALLOWED);}$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemCreateElement");$v4119639092e62c55ea8be348e4d9260d->addRef("inputData", $ve62e4d22f2d8630f6e44e2b7c3f70ddc);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();if($vd0e45878043844ffc41aac437e86b602 instanceof iUmiHierarchyElement) {$v6be379826b20cc58475f636e33f4606b = $vd0e45878043844ffc41aac437e86b602->getId();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $vd0e45878043844ffc41aac437e86b602->getLangId();$v662cbf1253ac7d8750ed9190c52163e5 = $vd0e45878043844ffc41aac437e86b602->getDomainId();$vb6aaa85825f7ae803766f43e00873d06 = umiHierarchy::getInstance()->getDominantTplId($v6be379826b20cc58475f636e33f4606b);if($vb6aaa85825f7ae803766f43e00873d06) {$vd02e12eb6d6c3f6ebd763197df01e211 = $vb6aaa85825f7ae803766f43e00873d06;}else {throw new coreException(getLabel('error-dominant-template-not-found'));}}else {$v6be379826b20cc58475f636e33f4606b = 0;$v78e6dd7a49f5b0cb2106a3a434dd5c86 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentLang()->getId();$v662cbf1253ac7d8750ed9190c52163e5 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentDomain()->getId();if($v84ad1b49a83349491077e094ad5c5d1b = $this->getFloatedDomain()) {$v662cbf1253ac7d8750ed9190c52163e5 = $v84ad1b49a83349491077e094ad5c5d1b;}$vd02e12eb6d6c3f6ebd763197df01e211 = $vfed36e93a0509e20f2dc96cbbd85b678->getDefaultTemplate()->getId();}$this->checkDomainPermissions($v662cbf1253ac7d8750ed9190c52163e5);if(getRequest('template-id')) {$vd02e12eb6d6c3f6ebd763197df01e211 = getRequest('template-id');}$vb946c44d711ade3b061653732977d043 = $v6942e8fa62b3cc9d93881a58210e2fd7->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);if($vb946c44d711ade3b061653732977d043 instanceof iUmiHierarchyType) {$v0715f6d9497f93911417c9c324265771 = $vb946c44d711ade3b061653732977d043->getId();}else {throw new coreException(getLabel('error-element-type-detect-failed'));}if(is_null($vb068931cc450442b63f5b3d276ea4297 = getRequest('name'))) {throw new coreException(getLabel('error-require-name-param'));}if(is_null($vd84ff935144e00c3e1d395c2379aca47 = getRequest('alt-name'))) {$vd84ff935144e00c3e1d395c2379aca47 = $vb068931cc450442b63f5b3d276ea4297;}$v94757cae63fd3e398c0811a976dd6bbe = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type-id');if(!$v94757cae63fd3e398c0811a976dd6bbe && !($v94757cae63fd3e398c0811a976dd6bbe = getRequest("type-id"))) {$v94757cae63fd3e398c0811a976dd6bbe = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);if($vd0e45878043844ffc41aac437e86b602 instanceof iUmiHierarchyElement) {$v5a509ca3ce95bc71bf833077b7d5a178 = $vb81ca7c0ccaa77e7aa91936ab0070695->getDominantTypeId($vd0e45878043844ffc41aac437e86b602->getId());if($v5a509ca3ce95bc71bf833077b7d5a178) {$v94757cae63fd3e398c0811a976dd6bbe = $v5a509ca3ce95bc71bf833077b7d5a178;}}}if(!$v94757cae63fd3e398c0811a976dd6bbe) {throw new coreException("Base type for {$v22884db148f0ffb0d830ba431102b0b5}::{$vea9f6aca279138c58f705c8d4cb4b8ce} doesn't exists");}$v7057e8409c7c531a1a6e9ac3df4ed549 = $vb81ca7c0ccaa77e7aa91936ab0070695->addElement($v6be379826b20cc58475f636e33f4606b, $v0715f6d9497f93911417c9c324265771, $vb068931cc450442b63f5b3d276ea4297, $vd84ff935144e00c3e1d395c2379aca47, $v94757cae63fd3e398c0811a976dd6bbe, $v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vd02e12eb6d6c3f6ebd763197df01e211);$v9bc65c2abec141778ffaa729489f3e87 = $v8b1dc169bf460ee884fceef66c6607d6->getModule('users');if($v9bc65c2abec141778ffaa729489f3e87 instanceof users) {if(     is_array(getRequest('perms_read')) ||     is_array(getRequest('perms_edit')) ||     is_array(getRequest('perms_create')) ||     is_array(getRequest('perms_delete')) ||     is_array(getRequest('perms_move'))    ) {$v9bc65c2abec141778ffaa729489f3e87->setPerms($v7057e8409c7c531a1a6e9ac3df4ed549);backupModel::getInstance()->save($v7057e8409c7c531a1a6e9ac3df4ed549);}else {permissionsCollection::getInstance()->setDefaultPermissions($v7057e8409c7c531a1a6e9ac3df4ed549);}}$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof iUmiHierarchyElement) {$v854203cccade0bbe21be239a208aea49 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$v2fa70149e2a7e75da2b0303d0a36a944 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();if(!is_null($v4264c638e0098acb172519b0436db099 = getRequest('active'))) {$permissions = permissionsCollection::getInstance();$ve8701ad48ba05a91604e480dd60899a3 = $permissions->getUserId();if($permissions->isAllowedMethod($ve8701ad48ba05a91604e480dd60899a3, $v8b1dc169bf460ee884fceef66c6607d6->getCurrentModule(), "publish") == false) {$v4264c638e0098acb172519b0436db099 = false;}$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsActive($v4264c638e0098acb172519b0436db099);}if(!is_null($ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getRequest('is-visible'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);}if(!is_null($vd02e12eb6d6c3f6ebd763197df01e211 = getRequest('template-id'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setTplId($vd02e12eb6d6c3f6ebd763197df01e211);}if(!is_null($vf62baf4c4ead98d50d516eca0ac5a746 = getRequest('is-default'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);}if(!is_null($vb068931cc450442b63f5b3d276ea4297 = getRequest('name'))) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setValue('h1', $vb068931cc450442b63f5b3d276ea4297);}$va8cfde6331bd59eb2ac96f8911c4b666 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject();$this->saveAddedObject($va8cfde6331bd59eb2ac96f8911c4b666);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$v0c7f28926c50104e917a6cd58527573e = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject();if (!$v0c7f28926c50104e917a6cd58527573e->getValue("publish_status")){$v0c7f28926c50104e917a6cd58527573e->setValue("publish_status", $this->getPageStatusIdByStatusSid());$v0c7f28926c50104e917a6cd58527573e->commit();}$vad255fe3eb36ab4782f3e471966df353 = new umiEventPoint("systemCreateElement");$vad255fe3eb36ab4782f3e471966df353->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$vad255fe3eb36ab4782f3e471966df353->setMode("after");$vad255fe3eb36ab4782f3e471966df353->call();$this->currentEditedElementId = $v7057e8409c7c531a1a6e9ac3df4ed549;return $v7057e8409c7c531a1a6e9ac3df4ed549;}else {throw new coreException("Can't get created element instance");}}public function saveEditedObjectData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {if(is_array($ve62e4d22f2d8630f6e44e2b7c3f70ddc)) {$va8cfde6331bd59eb2ac96f8911c4b666 = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'object');}else {$va8cfde6331bd59eb2ac96f8911c4b666 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc;}if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject === false) {throw new coreException("Expected instance of umiObject in param");}if(is_array($ve62e4d22f2d8630f6e44e2b7c3f70ddc)) {$this->setRequestDataAliases(getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'aliases'), $va8cfde6331bd59eb2ac96f8911c4b666->getId());}$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemModifyObject");$v4119639092e62c55ea8be348e4d9260d->addRef("object", $va8cfde6331bd59eb2ac96f8911c4b666);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();if(!is_null($vb068931cc450442b63f5b3d276ea4297 = getRequest('name'))) {$va8cfde6331bd59eb2ac96f8911c4b666->setName($vb068931cc450442b63f5b3d276ea4297);$va8cfde6331bd59eb2ac96f8911c4b666->setValue('nazvanie', $vb068931cc450442b63f5b3d276ea4297);}if(!is_null($v94757cae63fd3e398c0811a976dd6bbe = getRequest('type-id'))) {$va8cfde6331bd59eb2ac96f8911c4b666->setTypeId($v94757cae63fd3e398c0811a976dd6bbe);}$v89e96bd1c461a4b70d8aaaba636b0f85 = cmsController::getInstance()->getModule("data");$v89e96bd1c461a4b70d8aaaba636b0f85->saveEditedObject($va8cfde6331bd59eb2ac96f8911c4b666->getId(), false, true, true);$va8cfde6331bd59eb2ac96f8911c4b666->commit();$v4119639092e62c55ea8be348e4d9260d->setMode("after");$v4119639092e62c55ea8be348e4d9260d->call();return $va8cfde6331bd59eb2ac96f8911c4b666;}public function saveAddedObject(umiObject $va8cfde6331bd59eb2ac96f8911c4b666) {$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemCreateObject");$v4119639092e62c55ea8be348e4d9260d->addRef("object", $va8cfde6331bd59eb2ac96f8911c4b666);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();$v89e96bd1c461a4b70d8aaaba636b0f85 = cmsController::getInstance()->getModule("data");$v89e96bd1c461a4b70d8aaaba636b0f85->saveEditedObject($va8cfde6331bd59eb2ac96f8911c4b666->getId(), true, true, true);if(!is_null($vb068931cc450442b63f5b3d276ea4297 = getRequest('name'))) {$va8cfde6331bd59eb2ac96f8911c4b666->setValue('nazvanie', $va8cfde6331bd59eb2ac96f8911c4b666->getName());}$va8cfde6331bd59eb2ac96f8911c4b666->commit();$v4119639092e62c55ea8be348e4d9260d->setMode("after");$v4119639092e62c55ea8be348e4d9260d->call();return $va8cfde6331bd59eb2ac96f8911c4b666->getId();}public function saveAddedObjectData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v69ae498121c2d8e63f20c7144a0246d7 = umiObjectsCollection::getInstance();$vb3827f7111095f5ba1a9f49988fe9382 = umiObjectTypesCollection::getInstance();if($this->checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc, true) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$this->setRequestDataAliases(getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'aliases'));if(is_null($vb068931cc450442b63f5b3d276ea4297 = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'name'))) {$vb068931cc450442b63f5b3d276ea4297 = getRequest('name');}if(is_null($vb068931cc450442b63f5b3d276ea4297)) {throw new publicAdminException("Require 'name' param in _REQUEST array.");}$v22884db148f0ffb0d830ba431102b0b5 = get_class($this);$vea9f6aca279138c58f705c8d4cb4b8ce = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type');$v5f694956811487225d15e973ca38fbab = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type-id');if(!$v5f694956811487225d15e973ca38fbab) {$v5f694956811487225d15e973ca38fbab = $vb3827f7111095f5ba1a9f49988fe9382->getBaseType($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);}$v16b2b26000987faccb260b9d39df1269 = $v69ae498121c2d8e63f20c7144a0246d7->addObject($vb068931cc450442b63f5b3d276ea4297, $v5f694956811487225d15e973ca38fbab);$va8cfde6331bd59eb2ac96f8911c4b666 = $v69ae498121c2d8e63f20c7144a0246d7->getObject($v16b2b26000987faccb260b9d39df1269);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$this->saveAddedObject($va8cfde6331bd59eb2ac96f8911c4b666);return $va8cfde6331bd59eb2ac96f8911c4b666;}else {throw new coreException("Can't create object #{$v16b2b26000987faccb260b9d39df1269} \"{$vb068931cc450442b63f5b3d276ea4297}\" of type #{$v5f694956811487225d15e973ca38fbab}");}}public function saveEditedList($v599dcce2998a6b40b1e38e8c6006cb0a, $v21ffce5b8a6cc8cc6a41448dd69623c9 = false) {$v8d777f385d3dfec8815d20f7496026dc = getRequest("data");$vcc86ffa55f0ab6b9ddbf32c1a3d24d67 = getRequest("dels");switch($v599dcce2998a6b40b1e38e8c6006cb0a) {case "objects": {return $this->saveEditedObjectsList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67, $v21ffce5b8a6cc8cc6a41448dd69623c9);}case "basetypes": {return $this->saveEditedBaseTypesList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67);}case "domains": {return $this->saveEditedDomains($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67);}case "domain_mirrows": {return $this->saveEditedDomainMirrows($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67);}case "langs": {return $this->saveEditedLangs($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67);}case "templates": {return $this->saveEditedTemplatesList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67, $v21ffce5b8a6cc8cc6a41448dd69623c9);}default: {throw new coreException("Can't save edited list of type \"{$v599dcce2998a6b40b1e38e8c6006cb0a}\"");}}}public function saveEditedObjectsList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67, $v21ffce5b8a6cc8cc6a41448dd69623c9) {$vdb6d9b451b818ccc9a449383f2f0c450 = umiObjectsCollection::getInstance();$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$v642318310ea1d693ed91345deb5921da = false;if(is_array($v8d777f385d3dfec8815d20f7496026dc)) {foreach($v8d777f385d3dfec8815d20f7496026dc as $vb80bb7740288fda1f201890375a60c8f => $vcaf9b6b99962bf5c2264824231d7a40c) {$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$v94757cae63fd3e398c0811a976dd6bbe = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'type_id');$vea9f6aca279138c58f705c8d4cb4b8ce = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'type');if(!$v94757cae63fd3e398c0811a976dd6bbe && $vea9f6aca279138c58f705c8d4cb4b8ce) {$v94757cae63fd3e398c0811a976dd6bbe = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType(get_class($this), $vea9f6aca279138c58f705c8d4cb4b8ce);}if($vb80bb7740288fda1f201890375a60c8f == "new") {if($vb068931cc450442b63f5b3d276ea4297 && $v94757cae63fd3e398c0811a976dd6bbe) {$vb80bb7740288fda1f201890375a60c8f = $vdb6d9b451b818ccc9a449383f2f0c450->addObject($vb068931cc450442b63f5b3d276ea4297, $v94757cae63fd3e398c0811a976dd6bbe);$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getObject($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof umiObject) {$v642318310ea1d693ed91345deb5921da = $this->saveAddedObject($v447b7147e84be512208dcc0995d67ebc);$v447b7147e84be512208dcc0995d67ebc->commit();}}}else {$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getObject($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof umiObject) {$v447b7147e84be512208dcc0995d67ebc->setName($vb068931cc450442b63f5b3d276ea4297);$this->saveEditedObjectData($v447b7147e84be512208dcc0995d67ebc);$v447b7147e84be512208dcc0995d67ebc->commit();}else {throw new coreException("Object #{$vb80bb7740288fda1f201890375a60c8f} doesn't exists");}}}}if(is_array($vcc86ffa55f0ab6b9ddbf32c1a3d24d67)) {foreach($vcc86ffa55f0ab6b9ddbf32c1a3d24d67 as $vb80bb7740288fda1f201890375a60c8f) {$vdb6d9b451b818ccc9a449383f2f0c450->delObject($vb80bb7740288fda1f201890375a60c8f);}}return $v642318310ea1d693ed91345deb5921da;}public function saveEditedBaseTypesList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67) {$vdb6d9b451b818ccc9a449383f2f0c450 = umiHierarchyTypesCollection::getInstance();if(is_array($v8d777f385d3dfec8815d20f7496026dc)) {foreach($v8d777f385d3dfec8815d20f7496026dc as $vb80bb7740288fda1f201890375a60c8f => $vcaf9b6b99962bf5c2264824231d7a40c) {$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$v22884db148f0ffb0d830ba431102b0b5 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'module');$vea9f6aca279138c58f705c8d4cb4b8ce = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'method');if($vb80bb7740288fda1f201890375a60c8f == "new") {if($v22884db148f0ffb0d830ba431102b0b5 && $vd5d3db1765287eef77d7927cc956f50a) {$vdb6d9b451b818ccc9a449383f2f0c450->addType($v22884db148f0ffb0d830ba431102b0b5, $vd5d3db1765287eef77d7927cc956f50a, $vea9f6aca279138c58f705c8d4cb4b8ce);}}else {$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getType($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof iUmiHierarchyType) {$v447b7147e84be512208dcc0995d67ebc->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v447b7147e84be512208dcc0995d67ebc->setName($v22884db148f0ffb0d830ba431102b0b5);$v447b7147e84be512208dcc0995d67ebc->setExt($vea9f6aca279138c58f705c8d4cb4b8ce);$v447b7147e84be512208dcc0995d67ebc->commit();}else {throw new coreException("Hierarchy type #{$vb80bb7740288fda1f201890375a60c8f} doesn't exists");}}}}if(is_array($vcc86ffa55f0ab6b9ddbf32c1a3d24d67)) {foreach($vcc86ffa55f0ab6b9ddbf32c1a3d24d67 as $vb80bb7740288fda1f201890375a60c8f) {$vdb6d9b451b818ccc9a449383f2f0c450->delType($vb80bb7740288fda1f201890375a60c8f);}}}public function saveEditedTemplatesList($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67, $v21ffce5b8a6cc8cc6a41448dd69623c9) {$vdb6d9b451b818ccc9a449383f2f0c450 = templatesCollection::getInstance();$vc21f969b5f03d33d43e04f8f136e7682 = getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'default');foreach($v21ffce5b8a6cc8cc6a41448dd69623c9 as $v67b3dba8bc6778101892eb77249db32e => $vfed36e93a0509e20f2dc96cbbd85b678) {$v662cbf1253ac7d8750ed9190c52163e5 = domainsCollection::getInstance()->getDomainId($v67b3dba8bc6778101892eb77249db32e);$v4b28f331523f732cd51b3314d5a3c88f = getArrayKey($v8d777f385d3dfec8815d20f7496026dc, $v67b3dba8bc6778101892eb77249db32e);$v3822e54d799ece2cf6bec7120d8a3a9f = getArrayKey($vc21f969b5f03d33d43e04f8f136e7682, $v662cbf1253ac7d8750ed9190c52163e5);foreach($vfed36e93a0509e20f2dc96cbbd85b678 as $v66f6181bcb4cff4cd38fbc804a036db6) {$veae16ae723825858a85927d1ac28ad51 = getArrayKey($v4b28f331523f732cd51b3314d5a3c88f, $v66f6181bcb4cff4cd38fbc804a036db6->getId());$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($veae16ae723825858a85927d1ac28ad51, 'title');$v435ed7e9f07f740abf511a62c00eef6e = getArrayKey($veae16ae723825858a85927d1ac28ad51, 'filename');if(!$vd5d3db1765287eef77d7927cc956f50a || !$v435ed7e9f07f740abf511a62c00eef6e) {continue;}$v66f6181bcb4cff4cd38fbc804a036db6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v66f6181bcb4cff4cd38fbc804a036db6->setFileName($v435ed7e9f07f740abf511a62c00eef6e);if(is_numeric($v3822e54d799ece2cf6bec7120d8a3a9f)) {if($v66f6181bcb4cff4cd38fbc804a036db6->getId() == $v3822e54d799ece2cf6bec7120d8a3a9f) {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(true);}else {$v66f6181bcb4cff4cd38fbc804a036db6->setIsDefault(false);}}$v66f6181bcb4cff4cd38fbc804a036db6->commit();}if(!is_null($veae16ae723825858a85927d1ac28ad51 = getArrayKey($v4b28f331523f732cd51b3314d5a3c88f, 'new'))) {$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($veae16ae723825858a85927d1ac28ad51, 'title');$v435ed7e9f07f740abf511a62c00eef6e = getArrayKey($veae16ae723825858a85927d1ac28ad51, 'filename');if($vd5d3db1765287eef77d7927cc956f50a && $v435ed7e9f07f740abf511a62c00eef6e) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = cmsController::getInstance()->getCurrentLang()->getId();$vf62baf4c4ead98d50d516eca0ac5a746 = ($v3822e54d799ece2cf6bec7120d8a3a9f == "new") ? true : false;$vdb6d9b451b818ccc9a449383f2f0c450->addTemplate($v435ed7e9f07f740abf511a62c00eef6e, $vd5d3db1765287eef77d7927cc956f50a, $v662cbf1253ac7d8750ed9190c52163e5, $v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf62baf4c4ead98d50d516eca0ac5a746);}}}if(is_array($vcc86ffa55f0ab6b9ddbf32c1a3d24d67)) {foreach($vcc86ffa55f0ab6b9ddbf32c1a3d24d67 as $vb80bb7740288fda1f201890375a60c8f) {$v66f6181bcb4cff4cd38fbc804a036db6 = $vdb6d9b451b818ccc9a449383f2f0c450->getTemplate($vb80bb7740288fda1f201890375a60c8f);if($v66f6181bcb4cff4cd38fbc804a036db6->getIsDefault() == false) {unset($v66f6181bcb4cff4cd38fbc804a036db6);$vdb6d9b451b818ccc9a449383f2f0c450->delTemplate($vb80bb7740288fda1f201890375a60c8f);}}}}public function saveEditedTemplateData(iTemplate $v66f6181bcb4cff4cd38fbc804a036db6) {$vd5d3db1765287eef77d7927cc956f50a = getRequest('name');$v435ed7e9f07f740abf511a62c00eef6e = getRequest('filename');$v557f12a93c5bf0febb3b293feeb085be = getRequest('used_pages');$v66f6181bcb4cff4cd38fbc804a036db6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v66f6181bcb4cff4cd38fbc804a036db6->setFilename($v435ed7e9f07f740abf511a62c00eef6e);$v66f6181bcb4cff4cd38fbc804a036db6->setUsedPages($v557f12a93c5bf0febb3b293feeb085be);$v66f6181bcb4cff4cd38fbc804a036db6->commit();}public function saveEditedDomains($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67) {$vdb6d9b451b818ccc9a449383f2f0c450 = domainsCollection::getInstance();if(is_array($v8d777f385d3dfec8815d20f7496026dc)) {foreach($v8d777f385d3dfec8815d20f7496026dc as $vb80bb7740288fda1f201890375a60c8f => $vcaf9b6b99962bf5c2264824231d7a40c) {$v67b3dba8bc6778101892eb77249db32e = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'host');$v78e6dd7a49f5b0cb2106a3a434dd5c86 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'lang_id');if($vb80bb7740288fda1f201890375a60c8f == "new") {$v67b3dba8bc6778101892eb77249db32e = domain::filterHostName($v67b3dba8bc6778101892eb77249db32e);if($v67b3dba8bc6778101892eb77249db32e && $v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(defined("CURRENT_VERSION_LINE") &&       in_array(CURRENT_VERSION_LINE, array('free', 'lite', 'freelance'))) {throw new publicAdminException(getLabel('error-disabled-in-demo'));}if($vdb6d9b451b818ccc9a449383f2f0c450->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {throw new publicAdminException(getLabel('error-domain-already-exists'));}$vdb6d9b451b818ccc9a449383f2f0c450->addDomain($v67b3dba8bc6778101892eb77249db32e, $v78e6dd7a49f5b0cb2106a3a434dd5c86);}}else {if(!$v67b3dba8bc6778101892eb77249db32e) {$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getDomain($vb80bb7740288fda1f201890375a60c8f);$v447b7147e84be512208dcc0995d67ebc->setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v447b7147e84be512208dcc0995d67ebc->commit();continue;}$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getDomain($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof iDomain) {if($v447b7147e84be512208dcc0995d67ebc->getIsDefault() == false) {$v447b7147e84be512208dcc0995d67ebc->setHost($v67b3dba8bc6778101892eb77249db32e);}$v447b7147e84be512208dcc0995d67ebc->setDefaultLangId($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v447b7147e84be512208dcc0995d67ebc->commit();}else {throw new coreException("Domain #{$vb80bb7740288fda1f201890375a60c8f} doesn't exists");}}}}if(is_array($vcc86ffa55f0ab6b9ddbf32c1a3d24d67)) {foreach($vcc86ffa55f0ab6b9ddbf32c1a3d24d67 as $vb80bb7740288fda1f201890375a60c8f) {$vdb6d9b451b818ccc9a449383f2f0c450->delDomain($vb80bb7740288fda1f201890375a60c8f);}}}public function saveEditedDomainMirrows($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67) {$vdb6d9b451b818ccc9a449383f2f0c450 = domainsCollection::getInstance();$vad5f82e879a9c5d6b5b442eb37e50551 = $vdb6d9b451b818ccc9a449383f2f0c450->getDomain(getRequest('param0'));if(is_array($v8d777f385d3dfec8815d20f7496026dc)) {foreach($v8d777f385d3dfec8815d20f7496026dc as $vb80bb7740288fda1f201890375a60c8f => $vcaf9b6b99962bf5c2264824231d7a40c) {$v67b3dba8bc6778101892eb77249db32e = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'host');if($vb80bb7740288fda1f201890375a60c8f == "new") {$v67b3dba8bc6778101892eb77249db32e = domain::filterHostName($v67b3dba8bc6778101892eb77249db32e);if($v67b3dba8bc6778101892eb77249db32e) {if($vdb6d9b451b818ccc9a449383f2f0c450->getDomainId($v67b3dba8bc6778101892eb77249db32e)) {throw new publicAdminException(getLabel('error-domain-already-exists'));}$vad5f82e879a9c5d6b5b442eb37e50551->addMirrow($v67b3dba8bc6778101892eb77249db32e);}}else {if(!$v67b3dba8bc6778101892eb77249db32e) {continue;}$v447b7147e84be512208dcc0995d67ebc = $vad5f82e879a9c5d6b5b442eb37e50551->getMirrow($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof iDomainMirrow) {$v447b7147e84be512208dcc0995d67ebc->setHost($v67b3dba8bc6778101892eb77249db32e);$v447b7147e84be512208dcc0995d67ebc->commit();}else {throw new coreException("Domain #{$vb80bb7740288fda1f201890375a60c8f} doesn't exists");}}}}if(is_array($vcc86ffa55f0ab6b9ddbf32c1a3d24d67)) {foreach($vcc86ffa55f0ab6b9ddbf32c1a3d24d67 as $vb80bb7740288fda1f201890375a60c8f) {$vad5f82e879a9c5d6b5b442eb37e50551->delMirrow($vb80bb7740288fda1f201890375a60c8f);}}$vad5f82e879a9c5d6b5b442eb37e50551->setIsUpdated();$vad5f82e879a9c5d6b5b442eb37e50551->commit();}public function saveEditedLangs($v8d777f385d3dfec8815d20f7496026dc, $vcc86ffa55f0ab6b9ddbf32c1a3d24d67) {$vdb6d9b451b818ccc9a449383f2f0c450 = langsCollection::getInstance();if(is_array($v8d777f385d3dfec8815d20f7496026dc)) {foreach($v8d777f385d3dfec8815d20f7496026dc as $vb80bb7740288fda1f201890375a60c8f => $vcaf9b6b99962bf5c2264824231d7a40c) {$vd5d3db1765287eef77d7927cc956f50a  = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$v851f5ac9941d720844d143ed9cfcf60a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'prefix');if(!strlen($vd5d3db1765287eef77d7927cc956f50a) || !strlen($v851f5ac9941d720844d143ed9cfcf60a)) continue;$vd5d3db1765287eef77d7927cc956f50a  = trim($vd5d3db1765287eef77d7927cc956f50a);$v851f5ac9941d720844d143ed9cfcf60a = preg_replace("/[^A-z0-9]*/", "", $v851f5ac9941d720844d143ed9cfcf60a);if(!strlen($vd5d3db1765287eef77d7927cc956f50a) || !strlen($v851f5ac9941d720844d143ed9cfcf60a)) continue;if($vb80bb7740288fda1f201890375a60c8f == "new") {$vb80bb7740288fda1f201890375a60c8f = $vdb6d9b451b818ccc9a449383f2f0c450->addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a);}$v447b7147e84be512208dcc0995d67ebc = $vdb6d9b451b818ccc9a449383f2f0c450->getLang($vb80bb7740288fda1f201890375a60c8f);if($v447b7147e84be512208dcc0995d67ebc instanceof iLang) {$v447b7147e84be512208dcc0995d67ebc->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v447b7147e84be512208dcc0995d67ebc->setPrefix($v851f5ac9941d720844d143ed9cfcf60a);$v447b7147e84be512208dcc0995d67ebc->commit();}else {throw new coreException("Lang #{$vb80bb7740288fda1f201890375a60c8f} doesn't exists");}}}}public function saveEditedTypeData($v8d777f385d3dfec8815d20f7496026dc) {$vcaf9b6b99962bf5c2264824231d7a40c = getRequest('data');$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$v7617e8d03bb811f5c37135234006b114 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_guidable');$v117256556af3bd1a0c9710a593d93814 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_public');$v0715f6d9497f93911417c9c324265771 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'hierarchy_type_id');$v599dcce2998a6b40b1e38e8c6006cb0a = $v8d777f385d3dfec8815d20f7496026dc;if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$v599dcce2998a6b40b1e38e8c6006cb0a->setName($vb068931cc450442b63f5b3d276ea4297);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsGuidable($v7617e8d03bb811f5c37135234006b114);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsPublic($v117256556af3bd1a0c9710a593d93814);$v599dcce2998a6b40b1e38e8c6006cb0a->setHierarchyTypeId($v0715f6d9497f93911417c9c324265771);$v599dcce2998a6b40b1e38e8c6006cb0a->commit();}else {throw new coreException("Expected instance of type umiObjectType");}}public function saveEditedGroupData($vdb0f6f37ebeb6ea09489124345af2a45) {$vcaf9b6b99962bf5c2264824231d7a40c = getRequest('data');$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_visible');if($vdb0f6f37ebeb6ea09489124345af2a45 instanceof iUmiFieldsGroup) {$vdb0f6f37ebeb6ea09489124345af2a45->setName($vb068931cc450442b63f5b3d276ea4297);$vdb0f6f37ebeb6ea09489124345af2a45->setTitle($vd5d3db1765287eef77d7927cc956f50a);$vdb0f6f37ebeb6ea09489124345af2a45->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$vdb0f6f37ebeb6ea09489124345af2a45->setIsActive(true);$vdb0f6f37ebeb6ea09489124345af2a45->commit();}else {throw new coreException("Expected instance of type umiFieldsGroup");}}public function saveEditedFieldData($v06e3d36fa30cea095545139854ad1fb9) {$vcaf9b6b99962bf5c2264824231d7a40c = getRequest('data');$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_visible');$v1e3f04102267eaf5e8d0ca424fd5c561 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'field_type_id');$v051369818a8073bba5feeb0e957eb308 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'guide_id');$v5fa2ecd1dc485ead330e65903d19650a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'in_search');$ve4a2ed2dde6e8354ae6f321744843084 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'in_filter');$v6a2139364f96787c8ce1bbb0070b898c = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'tip');$v2a9d32d17ad47ac15c87d2e7c96d0e69 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_required');$v6b1a57fa235477758817df3c91158006 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'restriction_id');if($v06e3d36fa30cea095545139854ad1fb9 instanceof umiField) {$v06e3d36fa30cea095545139854ad1fb9->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v06e3d36fa30cea095545139854ad1fb9->setName($vb068931cc450442b63f5b3d276ea4297);$v06e3d36fa30cea095545139854ad1fb9->setIsVisible($ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v06e3d36fa30cea095545139854ad1fb9->setFieldTypeId($v1e3f04102267eaf5e8d0ca424fd5c561);$v06e3d36fa30cea095545139854ad1fb9->setIsInSearch($v5fa2ecd1dc485ead330e65903d19650a);$v06e3d36fa30cea095545139854ad1fb9->setIsInFilter($ve4a2ed2dde6e8354ae6f321744843084);$v06e3d36fa30cea095545139854ad1fb9->setTip($v6a2139364f96787c8ce1bbb0070b898c);$v06e3d36fa30cea095545139854ad1fb9->setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69);$v06e3d36fa30cea095545139854ad1fb9->setRestrictionId($v6b1a57fa235477758817df3c91158006);$v19dad066c23a79c33b2975590e364a5a = umiFieldTypesCollection::getInstance()->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v983560f49ede87197144b22c810a5087 = $v19dad066c23a79c33b2975590e364a5a->getDataType();if($v983560f49ede87197144b22c810a5087 == "relation" && $v051369818a8073bba5feeb0e957eb308 == 0) {$v051369818a8073bba5feeb0e957eb308 = self::getAutoGuideId($vd5d3db1765287eef77d7927cc956f50a);}if($v983560f49ede87197144b22c810a5087 == "optioned" && $v051369818a8073bba5feeb0e957eb308 == 0) {$v051369818a8073bba5feeb0e957eb308 = self::getAutoGuideId($vd5d3db1765287eef77d7927cc956f50a, 757);}$v06e3d36fa30cea095545139854ad1fb9->setGuideId($v051369818a8073bba5feeb0e957eb308);$v06e3d36fa30cea095545139854ad1fb9->commit();}else {throw new coreException("Expected instance of type umiField");}}public function saveAddedGroupData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$vcaf9b6b99962bf5c2264824231d7a40c = getRequest('data');$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_visible');$v94757cae63fd3e398c0811a976dd6bbe = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type-id');$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$v6790ebc6beba7eb1ae08a825c28e1600 = $v599dcce2998a6b40b1e38e8c6006cb0a->addFieldsGroup($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, true, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4);$v599dcce2998a6b40b1e38e8c6006cb0a->commit();return $v6790ebc6beba7eb1ae08a825c28e1600;}else {throw new coreException("Expected instance of type umiObjectType");}}public function saveAddedFieldData($ve62e4d22f2d8630f6e44e2b7c3f70ddc) {$v0e939a4ffd3aacd724dd3b50147b4353 = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['group-id'];$v94757cae63fd3e398c0811a976dd6bbe = $ve62e4d22f2d8630f6e44e2b7c3f70ddc['type-id'];$vcaf9b6b99962bf5c2264824231d7a40c = getRequest('data');$vd5d3db1765287eef77d7927cc956f50a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'title');$vb068931cc450442b63f5b3d276ea4297 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'name');$ve1c6c9ef2fcbe75f26f815c4ef2e60b4 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_visible');$v1e3f04102267eaf5e8d0ca424fd5c561 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'field_type_id');$v051369818a8073bba5feeb0e957eb308 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'guide_id');$v5fa2ecd1dc485ead330e65903d19650a = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'in_search');$ve4a2ed2dde6e8354ae6f321744843084 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'in_filter');$v6a2139364f96787c8ce1bbb0070b898c = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'tip');$v2a9d32d17ad47ac15c87d2e7c96d0e69 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'is_required');$v6b1a57fa235477758817df3c91158006 = getArrayKey($vcaf9b6b99962bf5c2264824231d7a40c, 'restriction_id');$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$vd05b6ed7d2345020440df396d6da7f73 = umiFieldsCollection::getInstance();$v69552af3a03df9391f70eb1851f817c5 = umiFieldTypesCollection::getInstance();$v599dcce2998a6b40b1e38e8c6006cb0a = $v0e8133eb006c0f85ed9444ae07a60842->getType($v94757cae63fd3e398c0811a976dd6bbe);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {if($v599dcce2998a6b40b1e38e8c6006cb0a->getFieldId($vb068931cc450442b63f5b3d276ea4297)) {throw new publicAdminException(getLabel('error-non-unique-field-name'));}}$v19dad066c23a79c33b2975590e364a5a = $v69552af3a03df9391f70eb1851f817c5->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v983560f49ede87197144b22c810a5087 = $v19dad066c23a79c33b2975590e364a5a->getDataType();if($v983560f49ede87197144b22c810a5087 == "relation" && $v051369818a8073bba5feeb0e957eb308 == 0) {$v051369818a8073bba5feeb0e957eb308 = self::getAutoGuideId($vd5d3db1765287eef77d7927cc956f50a);}if($v983560f49ede87197144b22c810a5087 == "optioned" && $v051369818a8073bba5feeb0e957eb308 == 0) {$v051369818a8073bba5feeb0e957eb308 = self::getAutoGuideId($vd5d3db1765287eef77d7927cc956f50a, 757);}$v3aabf39f2d943fa886d86dcbbee4d910 = false;$va08f2aee9de301619776deb6fee83e50 = $v599dcce2998a6b40b1e38e8c6006cb0a->getParentId();$v3f5af10cbb47cb1b6fcf196befc17b95 = $v0e8133eb006c0f85ed9444ae07a60842->getSubTypesList($va08f2aee9de301619776deb6fee83e50);foreach($v3f5af10cbb47cb1b6fcf196befc17b95 as $veb2c84964aa55a68255b7466cd21b62c) {if($veb2c84964aa55a68255b7466cd21b62c == $v94757cae63fd3e398c0811a976dd6bbe) continue;$v4ae5fdeb89c7a5a5daf33112bda3f82b = $v0e8133eb006c0f85ed9444ae07a60842->getType($veb2c84964aa55a68255b7466cd21b62c);if($v4ae5fdeb89c7a5a5daf33112bda3f82b instanceof umiObjectType == false) continue;if($v6270c3e00735121953b8585fd836af43 = $v4ae5fdeb89c7a5a5daf33112bda3f82b->getFieldId($vb068931cc450442b63f5b3d276ea4297)) {$vd3b250b73d77cb502490809548ef475e = $vd05b6ed7d2345020440df396d6da7f73->getField($v6270c3e00735121953b8585fd836af43);if($vd3b250b73d77cb502490809548ef475e instanceof umiField == false) continue;if(($vd3b250b73d77cb502490809548ef475e->getFieldTypeId() == $v1e3f04102267eaf5e8d0ca424fd5c561) && ($vd3b250b73d77cb502490809548ef475e->getTitle() == $vd5d3db1765287eef77d7927cc956f50a)) {$v3aabf39f2d943fa886d86dcbbee4d910 = $v6270c3e00735121953b8585fd836af43;break;}}}$v6a8e34c52627084d431e3b4c6edebc2d = $v0e8133eb006c0f85ed9444ae07a60842->getSubTypesList($v94757cae63fd3e398c0811a976dd6bbe);foreach($v6a8e34c52627084d431e3b4c6edebc2d as $vdff2729c2ea51cc1722c9df2117032bd) {$va0100f1c342300cc8f1c583d2b4ad9ee = $v0e8133eb006c0f85ed9444ae07a60842->getType($vdff2729c2ea51cc1722c9df2117032bd);if($va0100f1c342300cc8f1c583d2b4ad9ee instanceof umiObjectType == false) continue;if($ve6b31d5d6cb774ba4498162622b2575a = $va0100f1c342300cc8f1c583d2b4ad9ee->getFieldId($vb068931cc450442b63f5b3d276ea4297)) {$v9efe917b2c0f25687fa4b5e2a36edd5c = $vd05b6ed7d2345020440df396d6da7f73->getField($ve6b31d5d6cb774ba4498162622b2575a);if($v9efe917b2c0f25687fa4b5e2a36edd5c instanceof umiField == false) continue;if(($v9efe917b2c0f25687fa4b5e2a36edd5c->getFieldTypeId() == $v1e3f04102267eaf5e8d0ca424fd5c561) && ($v9efe917b2c0f25687fa4b5e2a36edd5c->getTitle() == $vd5d3db1765287eef77d7927cc956f50a)) {$v3aabf39f2d943fa886d86dcbbee4d910 = $ve6b31d5d6cb774ba4498162622b2575a;break;}}}if($v3aabf39f2d943fa886d86dcbbee4d910 === false) {$v3aabf39f2d943fa886d86dcbbee4d910 = $vd05b6ed7d2345020440df396d6da7f73->addField($vb068931cc450442b63f5b3d276ea4297, $vd5d3db1765287eef77d7927cc956f50a, $v1e3f04102267eaf5e8d0ca424fd5c561, $ve1c6c9ef2fcbe75f26f815c4ef2e60b4, false, false);$v06e3d36fa30cea095545139854ad1fb9 = $vd05b6ed7d2345020440df396d6da7f73->getField($v3aabf39f2d943fa886d86dcbbee4d910);$v06e3d36fa30cea095545139854ad1fb9->setGuideId($v051369818a8073bba5feeb0e957eb308);$v06e3d36fa30cea095545139854ad1fb9->setIsInSearch($v5fa2ecd1dc485ead330e65903d19650a);$v06e3d36fa30cea095545139854ad1fb9->setIsInFilter($ve4a2ed2dde6e8354ae6f321744843084);$v06e3d36fa30cea095545139854ad1fb9->setTip($v6a2139364f96787c8ce1bbb0070b898c);$v06e3d36fa30cea095545139854ad1fb9->setIsRequired($v2a9d32d17ad47ac15c87d2e7c96d0e69);$v06e3d36fa30cea095545139854ad1fb9->setRestrictionId($v6b1a57fa235477758817df3c91158006);$v06e3d36fa30cea095545139854ad1fb9->commit();}if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType) {$vdb0f6f37ebeb6ea09489124345af2a45 = $v599dcce2998a6b40b1e38e8c6006cb0a->getFieldsGroup($v0e939a4ffd3aacd724dd3b50147b4353);if($vdb0f6f37ebeb6ea09489124345af2a45 instanceof umiFieldsGroup) {$vdb0f6f37ebeb6ea09489124345af2a45->attachField($v3aabf39f2d943fa886d86dcbbee4d910);$veeeb23fbd23e52a6a6ff78b9f18cbc4e = $vdb0f6f37ebeb6ea09489124345af2a45->getName();$vadce578d04ed03c31f6ac59451fcf8e4 = $v0e8133eb006c0f85ed9444ae07a60842->getChildClasses($v94757cae63fd3e398c0811a976dd6bbe);$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($vadce578d04ed03c31f6ac59451fcf8e4);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd4fd255f51559df00de5424b64292413 = $vadce578d04ed03c31f6ac59451fcf8e4[$v865c0c0b4ab0e063e5caa3387c1a8741];$v793536b8480511c5e2975eba32738d1d = $v0e8133eb006c0f85ed9444ae07a60842->getType($vd4fd255f51559df00de5424b64292413);if($v793536b8480511c5e2975eba32738d1d instanceof umiObjectType) {$vb19a4f118986f0631ceac2d003e1f4a3 = $v793536b8480511c5e2975eba32738d1d->getFieldsGroupByName($veeeb23fbd23e52a6a6ff78b9f18cbc4e);if($vb19a4f118986f0631ceac2d003e1f4a3 instanceof umiFieldsGroup) {$vb19a4f118986f0631ceac2d003e1f4a3->attachField($v3aabf39f2d943fa886d86dcbbee4d910, true);}else {throw new coreException("Can't find umiFieldsGroup #{$veeeb23fbd23e52a6a6ff78b9f18cbc4e} in umiObjectType #{$vd4fd255f51559df00de5424b64292413}");}}else {throw new coreException("Can't find umiObjectType #{$vd4fd255f51559df00de5424b64292413}");}}return $v3aabf39f2d943fa886d86dcbbee4d910;}else {throw new coreException("Can't find umiFieldsGroup #{$v0e939a4ffd3aacd724dd3b50147b4353}");}}else {throw new coreException("Can't find umiObjectType #{$v94757cae63fd3e398c0811a976dd6bbe}");}}public function chooseRedirect($v28a25256d6223f571b1064a1c4e0b55e = false) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v2b118a2cbbb1d8af749254e5e61b7df0 = $v8b1dc169bf460ee884fceef66c6607d6->getCalculatedRefererUri();$v7bd5b748aa45cab130113ed77f5a159b = getRequest('save-mode');switch($v7bd5b748aa45cab130113ed77f5a159b) {case getLabel('label-save-exit'):    case getLabel('label-save-add-exit'): {$vff88f15e8cd17d762348242a0de7cd1c = 1;break;}case getLabel('label-save-view'):    case getLabel('label-save-add-view'): {$vff88f15e8cd17d762348242a0de7cd1c = 2;break;}case getLabel('label-save'):    case getLabel('label-save-add'): {$vff88f15e8cd17d762348242a0de7cd1c = 3;break;}default: {$vff88f15e8cd17d762348242a0de7cd1c = false;}}if($v5159f957a71513e2a2cc8daba995986f = getArrayKey($_GET, 'force-redirect')) {$this->redirect($v5159f957a71513e2a2cc8daba995986f);}if($vff88f15e8cd17d762348242a0de7cd1c == 1) {$this->redirect($v2b118a2cbbb1d8af749254e5e61b7df0);}if($vff88f15e8cd17d762348242a0de7cd1c == 2) {$v7057e8409c7c531a1a6e9ac3df4ed549 = $this->currentEditedElementId;if($v7057e8409c7c531a1a6e9ac3df4ed549) {$v84d8c2148d233e7430fceb3f20ae3314 = $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v7057e8409c7c531a1a6e9ac3df4ed549);$this->redirect($v84d8c2148d233e7430fceb3f20ae3314);}}if($v28a25256d6223f571b1064a1c4e0b55e !== false) {$this->redirect($v28a25256d6223f571b1064a1c4e0b55e);}if($vff88f15e8cd17d762348242a0de7cd1c && $v7057e8409c7c531a1a6e9ac3df4ed549 = $this->currentEditedElementId) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v7057e8409c7c531a1a6e9ac3df4ed549);if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$vf8fd0c88f22095d75867e82d488e7f15 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getHierarchyType()->getName();$vbf2cd78bc903c712c023186d09be671d = $v8e2dcfd7e7e24b1ca76c1193f645902b->getHierarchyType()->getExt();$v22884db148f0ffb0d830ba431102b0b5 = cmsController::getInstance()->getModule($vf8fd0c88f22095d75867e82d488e7f15);if($v22884db148f0ffb0d830ba431102b0b5 instanceof def_module) {$v807765384d9d5527da8848df14a4f02f = $v22884db148f0ffb0d830ba431102b0b5->getEditLink($v7057e8409c7c531a1a6e9ac3df4ed549, $vbf2cd78bc903c712c023186d09be671d);$v6e8e7b349ee8e52e4f20489290e3ac27 = isset($v807765384d9d5527da8848df14a4f02f[1]) ? $v807765384d9d5527da8848df14a4f02f[1] : false;if($v6e8e7b349ee8e52e4f20489290e3ac27) {$this->redirect($v6e8e7b349ee8e52e4f20489290e3ac27);}}}}$v156577e912dd9b1be50a671edc17c4a0 = $this->removeErrorParam(getServer('HTTP_REFERER'));outputBuffer::current()->redirect($v156577e912dd9b1be50a671edc17c4a0);}public function checkAllowedElementType($ve62e4d22f2d8630f6e44e2b7c3f70ddc, $vb728bdb559aaf487a1e95ceaea9d0815 = true) {$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'element');$va8cfde6331bd59eb2ac96f8911c4b666 = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'object');$v599dcce2998a6b40b1e38e8c6006cb0a = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'type');$vb49eaf5d3952b8f9b7b1a09ab661c63b = getArrayKey($ve62e4d22f2d8630f6e44e2b7c3f70ddc, 'allowed-element-types');$v4ed1934b53e02cba7b361c00bf660ba7 = umiHierarchyTypesCollection::getInstance()->getTypeByName("comments", "comment");if($v4ed1934b53e02cba7b361c00bf660ba7) {$v0e9292c29834c503f695817879e138be = $v4ed1934b53e02cba7b361c00bf660ba7->getId();}else {$v0e9292c29834c503f695817879e138be = false;}if(is_array($vb49eaf5d3952b8f9b7b1a09ab661c63b) === false) {if($vb728bdb559aaf487a1e95ceaea9d0815 === false) {throw new coreException("Allowed types expected to be array");}else {return true;}}if($v599dcce2998a6b40b1e38e8c6006cb0a) {if(in_array($v599dcce2998a6b40b1e38e8c6006cb0a, $vb49eaf5d3952b8f9b7b1a09ab661c63b)) {return true;}else {return false;}}if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement === true) {$v0715f6d9497f93911417c9c324265771 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId();}else if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject === true) {$v87306dd4235ed712ebc07fe169b76f83 = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = umiObjectTypesCollection::getInstance()->getType($v87306dd4235ed712ebc07fe169b76f83);$v0715f6d9497f93911417c9c324265771 = $v7ae7003da59ae71dcc9f8638ef50593d->getHierarchyTypeId();}else {throw new coreException("If you are doing 'add' method, you should pass me 'type' key in 'inputData' array. If you have 'edit' method, pass me 'element' key in 'inputData' array.");}$vb946c44d711ade3b061653732977d043 = umiHierarchyTypesCollection::getInstance()->getType($v0715f6d9497f93911417c9c324265771);if($vb946c44d711ade3b061653732977d043 instanceof iUmiHierarchyType) {$vea9f6aca279138c58f705c8d4cb4b8ce = $vb946c44d711ade3b061653732977d043->getExt();if(in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $vb49eaf5d3952b8f9b7b1a09ab661c63b) || $vb946c44d711ade3b061653732977d043->getId() == $v0e9292c29834c503f695817879e138be) {return true;}else {return false;}}else {throw new coreException("This should never happen");}}public function checkElementPermissions($v7057e8409c7c531a1a6e9ac3df4ed549, $v323d784d081622bc3fa291439a7dc9f7 = permissionsCollection::E_EDIT_ALLOWED) {static $permissions = NULL, $ve8701ad48ba05a91604e480dd60899a3 = NULL;if(is_null($permissions)) {$permissions = permissionsCollection::getInstance();$ve8701ad48ba05a91604e480dd60899a3 = $permissions->getUserId();}$vb394126a0e52e75f1e3d535d0fb0d33c = $permissions->isAllowedObject($ve8701ad48ba05a91604e480dd60899a3, $v7057e8409c7c531a1a6e9ac3df4ed549);if(!isset($vb394126a0e52e75f1e3d535d0fb0d33c[$v323d784d081622bc3fa291439a7dc9f7]) || $vb394126a0e52e75f1e3d535d0fb0d33c[$v323d784d081622bc3fa291439a7dc9f7] == false) {throw new requreMoreAdminPermissionsException(getLabel("error-require-more-permissions"));}else {return true;}}public function switchActivity($v21ffce5b8a6cc8cc6a41448dd69623c9) {if($this->checkAllowedElementType($v21ffce5b8a6cc8cc6a41448dd69623c9) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'element');$v69a256025f66e4ce5d15c9dd7225d357 = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'activity');if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement === false) {throw new expectElementException(getLabel('error-expect-element'));}$this->checkElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());if(is_null($v69a256025f66e4ce5d15c9dd7225d357)) {$v69a256025f66e4ce5d15c9dd7225d357 = !$v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive();}$v854203cccade0bbe21be239a208aea49 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getModule();$v2fa70149e2a7e75da2b0303d0a36a944 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getMethod();$permissions = permissionsCollection::getInstance();$ve8701ad48ba05a91604e480dd60899a3 = $permissions->getUserId();if($permissions->isAllowedMethod($ve8701ad48ba05a91604e480dd60899a3, $v854203cccade0bbe21be239a208aea49, "publish") == false) {throw new requreMoreAdminPermissionsException(getLabel('error-no-publication-permissions'));}if($v69a256025f66e4ce5d15c9dd7225d357 == $v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive()) {return $v69a256025f66e4ce5d15c9dd7225d357;}$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemSwitchElementActivity");$v4119639092e62c55ea8be348e4d9260d->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$v4119639092e62c55ea8be348e4d9260d->setParam("activity", $v69a256025f66e4ce5d15c9dd7225d357);$v4119639092e62c55ea8be348e4d9260d->setMode("before");try {$v4119639092e62c55ea8be348e4d9260d->call();}catch (coreBreakEventsException $ve1671797c52e15f763380b45e841ec32) {return $v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive();}$v8e2dcfd7e7e24b1ca76c1193f645902b->setIsActive($v69a256025f66e4ce5d15c9dd7225d357);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();$v4119639092e62c55ea8be348e4d9260d->setMode("after");try {$v4119639092e62c55ea8be348e4d9260d->call();}catch (coreBreakEventsException $ve1671797c52e15f763380b45e841ec32) {return $v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive();}return $v8e2dcfd7e7e24b1ca76c1193f645902b->getIsActive();}public function moveElement($v21ffce5b8a6cc8cc6a41448dd69623c9) {if($this->checkAllowedElementType($v21ffce5b8a6cc8cc6a41448dd69623c9) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'element');$vbfa030fe63bacd523dd70a76cfaed98a = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'parent-id');$vc778d600f4b6bea4c2a70c04149648f9 = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'domain');$v6f7271d2b14630f80718ba10635b034e = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'as-sibling');$v2862c7667bfa3eb6b4c6fa1de2bd8826 = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'before-id');$this->checkElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), permissionsCollection::E_MOVE_ALLOWED);$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemMoveElement");$v4119639092e62c55ea8be348e4d9260d->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$v4119639092e62c55ea8be348e4d9260d->setParam("parent-id", $vbfa030fe63bacd523dd70a76cfaed98a);$v4119639092e62c55ea8be348e4d9260d->setParam("domain-host", $vc778d600f4b6bea4c2a70c04149648f9);$v4119639092e62c55ea8be348e4d9260d->setParam("as-sibling", $v6f7271d2b14630f80718ba10635b034e);$v4119639092e62c55ea8be348e4d9260d->setParam("before-id", $v2862c7667bfa3eb6b4c6fa1de2bd8826);$v4119639092e62c55ea8be348e4d9260d->setMode("before");try {$v4119639092e62c55ea8be348e4d9260d->call();}catch (coreBreakEventsException $ve1671797c52e15f763380b45e841ec32) {return false;}$v72ee76c5c29383b7c9f9225c1fa4d10b = $ve4e46deb7f9cc58c7abfb32e5570b6f3->getDomainId($vc778d600f4b6bea4c2a70c04149648f9);$vc02811e4c4fdd0b3549131ca8a2c74d1 = $v8e2dcfd7e7e24b1ca76c1193f645902b->getParentId();if ($v72ee76c5c29383b7c9f9225c1fa4d10b) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setDomainId($v72ee76c5c29383b7c9f9225c1fa4d10b);}$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();if ($v6f7271d2b14630f80718ba10635b034e) {$vb81ca7c0ccaa77e7aa91936ab0070695->moveBefore($v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), $vbfa030fe63bacd523dd70a76cfaed98a, (($v2862c7667bfa3eb6b4c6fa1de2bd8826) ? $v2862c7667bfa3eb6b4c6fa1de2bd8826 : false));}else {$vb81ca7c0ccaa77e7aa91936ab0070695->moveFirst($v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), $vbfa030fe63bacd523dd70a76cfaed98a);}$v8e2dcfd7e7e24b1ca76c1193f645902b->update();$v4119639092e62c55ea8be348e4d9260d->setMode("after");try {$v4119639092e62c55ea8be348e4d9260d->call();return true;}catch (coreBreakEventsException $ve1671797c52e15f763380b45e841ec32) {return false;}}public function deleteElement($v21ffce5b8a6cc8cc6a41448dd69623c9) {$v8e2dcfd7e7e24b1ca76c1193f645902b = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'element');if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement === false) {throw new expectElementException(getLabel('error-expect-element'));}if($this->checkAllowedElementType($v21ffce5b8a6cc8cc6a41448dd69623c9) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}$this->checkElementPermissions($v8e2dcfd7e7e24b1ca76c1193f645902b->getId(), permissionsCollection::E_DELETE_ALLOWED);$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemDeleteElement");$v4119639092e62c55ea8be348e4d9260d->addRef("element", $v8e2dcfd7e7e24b1ca76c1193f645902b);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();umiHierarchy::getInstance()->delElement($v8e2dcfd7e7e24b1ca76c1193f645902b->getId());$v4119639092e62c55ea8be348e4d9260d->setMode("after");$v4119639092e62c55ea8be348e4d9260d->call();}public function deleteObject($v21ffce5b8a6cc8cc6a41448dd69623c9) {$v69ae498121c2d8e63f20c7144a0246d7 = umiObjectsCollection::getInstance();$v9b81909fd0da3add2602a8d0ede0e4e7 = umiObjectTypesCollection::getInstance();$v1723bdd4ee51910267a625cae41ced8a = umiHierarchyTypesCollection::getInstance();$va8cfde6331bd59eb2ac96f8911c4b666 = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'object');if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject == false) {throw new coreException("You should pass \"object\" key containing umiObject instance.");}$vaf31437ce61345f416579830a98c91e5 = $va8cfde6331bd59eb2ac96f8911c4b666->getId();$v87306dd4235ed712ebc07fe169b76f83 = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v7ae7003da59ae71dcc9f8638ef50593d = $v9b81909fd0da3add2602a8d0ede0e4e7->getType($v87306dd4235ed712ebc07fe169b76f83);if($v7ae7003da59ae71dcc9f8638ef50593d instanceof umiObjectType == false) {throw new coreException("Object #{$vaf31437ce61345f416579830a98c91e5} hasn't type #{$v87306dd4235ed712ebc07fe169b76f83}. This should not happen.");}if(!is_null(getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'type'))) {$v0715f6d9497f93911417c9c324265771 = $v7ae7003da59ae71dcc9f8638ef50593d->getHierarchyTypeId();$vb946c44d711ade3b061653732977d043 = $v1723bdd4ee51910267a625cae41ced8a->getType($v0715f6d9497f93911417c9c324265771);if($vb946c44d711ade3b061653732977d043 instanceof iUmiHierarchyType == false) {throw new coreException("Object type #{$v87306dd4235ed712ebc07fe169b76f83} doesn't have hierarchy type #{$v0715f6d9497f93911417c9c324265771}. This should not happen.");}$v21ffce5b8a6cc8cc6a41448dd69623c9['type'] = $vb946c44d711ade3b061653732977d043->getExt();if($this->checkAllowedElementType($v21ffce5b8a6cc8cc6a41448dd69623c9) == false) {throw new wrongElementTypeAdminException(getLabel("error-unexpected-element-type"));}}$v4119639092e62c55ea8be348e4d9260d = new umiEventPoint("systemDeleteObject");$v4119639092e62c55ea8be348e4d9260d->addRef("object", $va8cfde6331bd59eb2ac96f8911c4b666);$v4119639092e62c55ea8be348e4d9260d->setMode("before");$v4119639092e62c55ea8be348e4d9260d->call();$result = $v69ae498121c2d8e63f20c7144a0246d7->delObject($vaf31437ce61345f416579830a98c91e5);$v4119639092e62c55ea8be348e4d9260d->setMode("after");$v4119639092e62c55ea8be348e4d9260d->call();return $result;}public function getFloatedDomain() {if(!is_null($va6b64ba4d9e3e0b93a64bb6af8c320cc = getRequest('domain'))) {$vbf8851a393c0ed83c36c4c997e68fd00 = domainsCollection::getInstance()->getDomainId($va6b64ba4d9e3e0b93a64bb6af8c320cc);if($vbf8851a393c0ed83c36c4c997e68fd00) {return $vbf8851a393c0ed83c36c4c997e68fd00;}}return false;}public static function getAutoGuideId($vd5d3db1765287eef77d7927cc956f50a, $v764668ee396165dd0f0559c7585b7699 = 7) {$v9b81909fd0da3add2602a8d0ede0e4e7 = umiObjectTypesCollection::getInstance();$vcf4313ee98665bb3d4b717b344ba6999 = getLabel('autoguide-for-field') . " \"{$vd5d3db1765287eef77d7927cc956f50a}\"";$v2af1d1812273df0bd0f720da7068f8a6 = $v9b81909fd0da3add2602a8d0ede0e4e7->getChildClasses($v764668ee396165dd0f0559c7585b7699);foreach($v2af1d1812273df0bd0f720da7068f8a6 as $vd4fd255f51559df00de5424b64292413) {$v793536b8480511c5e2975eba32738d1d = $v9b81909fd0da3add2602a8d0ede0e4e7->getType($vd4fd255f51559df00de5424b64292413);$vfd297f4a9a622aec6f6fb2589b9cda82 = $v793536b8480511c5e2975eba32738d1d->getName();if($vfd297f4a9a622aec6f6fb2589b9cda82 == $vcf4313ee98665bb3d4b717b344ba6999) {$v793536b8480511c5e2975eba32738d1d->setIsGuidable(true);return $vd4fd255f51559df00de5424b64292413;}}$v051369818a8073bba5feeb0e957eb308 = $v9b81909fd0da3add2602a8d0ede0e4e7->addType($v764668ee396165dd0f0559c7585b7699, $vcf4313ee98665bb3d4b717b344ba6999);$va0c391dc49c440fc9962168353cedde3 = $v9b81909fd0da3add2602a8d0ede0e4e7->getType($v051369818a8073bba5feeb0e957eb308);$va0c391dc49c440fc9962168353cedde3->setIsGuidable(true);$va0c391dc49c440fc9962168353cedde3->setIsPublic(true);$va0c391dc49c440fc9962168353cedde3->commit();return $v051369818a8073bba5feeb0e957eb308;}public function checkDomainPermissions($v662cbf1253ac7d8750ed9190c52163e5 = false) {$permissions = permissionsCollection::getInstance();$ve4e46deb7f9cc58c7abfb32e5570b6f3 = domainsCollection::getInstance();$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();if($v662cbf1253ac7d8750ed9190c52163e5 == false) {if(!is_null($vf9b9218cbe221f8b9f1292474aa6f3e4 = getRequest('domain'))) {$v662cbf1253ac7d8750ed9190c52163e5 = $ve4e46deb7f9cc58c7abfb32e5570b6f3->getDomainId($vf9b9218cbe221f8b9f1292474aa6f3e4);}else {$v662cbf1253ac7d8750ed9190c52163e5 = $v8b1dc169bf460ee884fceef66c6607d6->getCurrentDomain()->getId();}}if(!$v662cbf1253ac7d8750ed9190c52163e5) {throw new coreException("Require domain id to check domain permissions");}$ve8701ad48ba05a91604e480dd60899a3 = $permissions->getUserId();$vbab394571d9305ff0c667ed256c19a70 = $permissions->isAllowedDomain($ve8701ad48ba05a91604e480dd60899a3, $v662cbf1253ac7d8750ed9190c52163e5);if($vbab394571d9305ff0c667ed256c19a70 == 0) {throw new requreMoreAdminPermissionsException(getLabel('error-no-domain-permissions'));}else {return NULL;}}public function setRequestDataAlias($vc2add694bf942dc77b376592d9c862cd, $v78f825aaa0103319aaa1a30bf4fe3ada) {if(isset($_REQUEST[$v78f825aaa0103319aaa1a30bf4fe3ada])) {$_REQUEST[$vc2add694bf942dc77b376592d9c862cd] = &$_REQUEST[$v78f825aaa0103319aaa1a30bf4fe3ada];return true;}else {return false;}}public function setRequestDataAliases($v9299da2529c98fccce0e32b476ba3266, $vb80bb7740288fda1f201890375a60c8f = "new") {if(!is_array($v9299da2529c98fccce0e32b476ba3266)) {return false;}foreach($v9299da2529c98fccce0e32b476ba3266 as $vc2add694bf942dc77b376592d9c862cd => $v78f825aaa0103319aaa1a30bf4fe3ada) {if(isset($_REQUEST['data'][$vb80bb7740288fda1f201890375a60c8f][$v78f825aaa0103319aaa1a30bf4fe3ada])) {$_REQUEST[$vc2add694bf942dc77b376592d9c862cd] = &$_REQUEST['data'][$vb80bb7740288fda1f201890375a60c8f][$v78f825aaa0103319aaa1a30bf4fe3ada];}}}public function compareObjectTypeByHierarchy($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce, $v94757cae63fd3e398c0811a976dd6bbe) {$vb3827f7111095f5ba1a9f49988fe9382 = umiObjectTypesCollection::getInstance();$v1723bdd4ee51910267a625cae41ced8a = umiHierarchyTypesCollection::getInstance();$v599dcce2998a6b40b1e38e8c6006cb0a = $vb3827f7111095f5ba1a9f49988fe9382->getType($v94757cae63fd3e398c0811a976dd6bbe);$vb946c44d711ade3b061653732977d043 = $v1723bdd4ee51910267a625cae41ced8a->getTypeByName($v22884db148f0ffb0d830ba431102b0b5, $vea9f6aca279138c58f705c8d4cb4b8ce);if($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType && $vb946c44d711ade3b061653732977d043 instanceof umiHierarchyType) {return $v599dcce2998a6b40b1e38e8c6006cb0a->getHierarchyTypeId() == $vb946c44d711ade3b061653732977d043->getId();}else {return false;}}public function systemIsLocked($v8e2dcfd7e7e24b1ca76c1193f645902b, $ve8701ad48ba05a91604e480dd60899a3){if ($v8e2dcfd7e7e24b1ca76c1193f645902b){$v8a2c76c90da3802fc2f3d7b0b1f2a77a = $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject();$v31e6b624e5c05c45b0f1e8a7f59801ba = $v8a2c76c90da3802fc2f3d7b0b1f2a77a->getValue("locktime");$vfd394e0fa409a6f15ee8c54a0f069f5e = $v8a2c76c90da3802fc2f3d7b0b1f2a77a->getValue("lockuser");if ($v31e6b624e5c05c45b0f1e8a7f59801ba == null || $vfd394e0fa409a6f15ee8c54a0f069f5e == null){return false;}$vd5034fb9092631c8a2869ebb11b5c591 = regedit::getInstance()->getVal("//settings/lock_duration");if (($v31e6b624e5c05c45b0f1e8a7f59801ba->timestamp + $vd5034fb9092631c8a2869ebb11b5c591) > time() && $vfd394e0fa409a6f15ee8c54a0f069f5e!=$ve8701ad48ba05a91604e480dd60899a3){return true;}else{$v8a2c76c90da3802fc2f3d7b0b1f2a77a->setValue("lockuser", null);$v8a2c76c90da3802fc2f3d7b0b1f2a77a->setValue("locktime", null);$v8a2c76c90da3802fc2f3d7b0b1f2a77a->commit();$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();return false;}}}public function autoDetectAllFilters($v0cc175b9c0f1b6a831c399e269772661 = null, $v92eb5ffee6ae2fec3ad71c777531578f = null, $v4a8a08f09d37b73795649038408b5f33 = null) {}public function getPageStatusIdByStatusSid($v03c07d5bea3270c79066ec0a8b6b5d28 = 'page_status_publish') {$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->setObjectTypeFilter();$v6301cee35ea764a1e241978f93f01069 = $this->getGuideIdByFieldName('publish_status');if(!$v6301cee35ea764a1e241978f93f01069) {return false;}$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v6301cee35ea764a1e241978f93f01069);$result = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);foreach ($result as $v16b2b26000987faccb260b9d39df1269) {$vb2b5820c9d36fad67c5a4aa95ddbd8f9 = umiObjectsCollection::getInstance()->getObject($v16b2b26000987faccb260b9d39df1269)->getValue("publish_status_id");if ($vb2b5820c9d36fad67c5a4aa95ddbd8f9 == $v03c07d5bea3270c79066ec0a8b6b5d28) {return $v16b2b26000987faccb260b9d39df1269;}}return false;}public function getGuideIdByFieldName($v972bf3f05d14ffbdb817bef60638ff00) {$vd05b6ed7d2345020440df396d6da7f73 = new umiObjectType(3);foreach ($vd05b6ed7d2345020440df396d6da7f73->getAllFields() as $v06e3d36fa30cea095545139854ad1fb9) {if ($v06e3d36fa30cea095545139854ad1fb9->getName() == $v972bf3f05d14ffbdb817bef60638ff00) {return $v06e3d36fa30cea095545139854ad1fb9->getGuideId();}}return false;}public function setHeaderLabel($vd304ba20e96d87411588eeabac850e34) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$v8b1dc169bf460ee884fceef66c6607d6->headerLabel = $vd304ba20e96d87411588eeabac850e34;}public function getObjectTypeMethod($va8cfde6331bd59eb2ac96f8911c4b666) {if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject == false) {throw new coreException("Expected instance of umiObject as param.");}$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$v6301cee35ea764a1e241978f93f01069 = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v726e8e4809d4c1b28a6549d86436a124 = $v0e8133eb006c0f85ed9444ae07a60842->getType($v6301cee35ea764a1e241978f93f01069);if($v726e8e4809d4c1b28a6549d86436a124 instanceof umiObjectType) {$v6942e8fa62b3cc9d93881a58210e2fd7 = umiHierarchyTypesCollection::getInstance();$vacf567c9c3d6cf7c6e2cc0ce108e0631 = $v726e8e4809d4c1b28a6549d86436a124->getHierarchyTypeId();$v89b0b9deff65f8b9cd1f71bc74ce36ba = $v6942e8fa62b3cc9d93881a58210e2fd7->getType($vacf567c9c3d6cf7c6e2cc0ce108e0631);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof umiHierarchyType) {return $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt();}else {throw new coreException("Can't get hierarchy type #{$vacf567c9c3d6cf7c6e2cc0ce108e0631}");}}else {throw new coreException("Can't get object type #{$v6301cee35ea764a1e241978f93f01069}");}}public function getDatasetConfiguration($veca07335a33c5aeb5e1bc7c98b4b9d80 = '') {return array(     'methods' => array(      array('title'=>getLabel('smc-load'), 'forload'=>true,     'module'=>'content', '#__name'=>'load_tree_node'),      array('title'=>getLabel('smc-delete'),           'module'=>'content', '#__name'=>'tree_delete_element'),      array('title'=>getLabel('smc-activity'),    'module'=>'content', '#__name'=>'tree_set_activity'),      array('title'=>getLabel('smc-copy'), 'module'=>'content', '#__name'=>'tree_copy_element'),      array('title'=>getLabel('smc-move'),       'module'=>'content', '#__name'=>'tree_move_element'),      array('title'=>getLabel('smc-change-template'),        'module'=>'content', '#__name'=>'change_template'),      array('title'=>getLabel('smc-change-lang'),       'module'=>'content', '#__name'=>'move_to_lang'),     )         );}final public function dataset_config() {$veca07335a33c5aeb5e1bc7c98b4b9d80 = getRequest('param');$v2f4adddaca8e63aeb6aa99e64bd89572 = array('methods'=>'method', 'types'=>'type', 'stoplist'=>'exclude', 'default'=>'column');$v9bf73c8994aad280e5160d0030c48f28 = $this->getDatasetConfiguration($veca07335a33c5aeb5e1bc7c98b4b9d80);$vfdc3bdefb79cec8eb8211d2499e04704 = new DOMDocument();$vfdc3bdefb79cec8eb8211d2499e04704->encoding = "utf-8";$v63a9f0ea7bb98050796b649e85481845   = $vfdc3bdefb79cec8eb8211d2499e04704->createElement('dataset');$vfdc3bdefb79cec8eb8211d2499e04704->appendChild($v63a9f0ea7bb98050796b649e85481845);if(is_array($v9bf73c8994aad280e5160d0030c48f28)) {$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();foreach($v9bf73c8994aad280e5160d0030c48f28 as $vb71772ba2ee2cdb2ebb175d0cb465bd5 => $ve7f1e731d719bc9e6b96840ac4bf5260) {$v73d5342eba070f636ac3246f319bf77f = $vfdc3bdefb79cec8eb8211d2499e04704->createElement($vb71772ba2ee2cdb2ebb175d0cb465bd5);$v63a9f0ea7bb98050796b649e85481845->appendChild($v73d5342eba070f636ac3246f319bf77f);if(is_array($ve7f1e731d719bc9e6b96840ac4bf5260)) {foreach($ve7f1e731d719bc9e6b96840ac4bf5260 as $vde17f0f24b49f8364187891f8550ffbb) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vfdc3bdefb79cec8eb8211d2499e04704->createElement($v2f4adddaca8e63aeb6aa99e64bd89572[$vb71772ba2ee2cdb2ebb175d0cb465bd5]);if(is_array($vde17f0f24b49f8364187891f8550ffbb)) {foreach($vde17f0f24b49f8364187891f8550ffbb as $v9190e95d1c478aceb70ac5c82692a74c => $v9602b952913db0444a013e59553f377e) {if($v9190e95d1c478aceb70ac5c82692a74c === "#__name") {$v8e2dcfd7e7e24b1ca76c1193f645902b->appendChild( $vfdc3bdefb79cec8eb8211d2499e04704->createTextNode($v9602b952913db0444a013e59553f377e) );continue;}if($v9190e95d1c478aceb70ac5c82692a74c == "id" && !is_numeric($v9602b952913db0444a013e59553f377e)) {$v9602b952913db0444a013e59553f377e = $v0e8133eb006c0f85ed9444ae07a60842->getBaseType(get_class($this), $v9602b952913db0444a013e59553f377e);}$v8e2dcfd7e7e24b1ca76c1193f645902b->setAttribute($v9190e95d1c478aceb70ac5c82692a74c, is_bool($v9602b952913db0444a013e59553f377e) ? ($v9602b952913db0444a013e59553f377e ? "true" : "false") : $v9602b952913db0444a013e59553f377e );}}else {$v8e2dcfd7e7e24b1ca76c1193f645902b->appendChild( $vfdc3bdefb79cec8eb8211d2499e04704->createTextNode($vde17f0f24b49f8364187891f8550ffbb) );}$v73d5342eba070f636ac3246f319bf77f->appendChild($v8e2dcfd7e7e24b1ca76c1193f645902b);}}else {$v73d5342eba070f636ac3246f319bf77f->appendChild( $vfdc3bdefb79cec8eb8211d2499e04704->createTextNode($ve7f1e731d719bc9e6b96840ac4bf5260) );}}}$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current();$v7f2db423a49b305459147332fb01cf87->contentType('text/xml');$v7f2db423a49b305459147332fb01cf87->charset('utf-8');$v7f2db423a49b305459147332fb01cf87->push($vfdc3bdefb79cec8eb8211d2499e04704->saveXML());$v7f2db423a49b305459147332fb01cf87->end();}public function change_template() {$v6a7f245843454cf4f28ad7c5e2572aa2 = getRequest('element');if(!is_array($v6a7f245843454cf4f28ad7c5e2572aa2)) {$v6a7f245843454cf4f28ad7c5e2572aa2 = array($v6a7f245843454cf4f28ad7c5e2572aa2);}$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->expectElement("element");$v3200a31fc05da4e9d5a0465c36822e2f = getRequest('template-id');if (!is_null($v3200a31fc05da4e9d5a0465c36822e2f)) {foreach($v6a7f245843454cf4f28ad7c5e2572aa2 as $v7552cd149af7495ee7d8225974e50f80) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $this->expectElement($v7552cd149af7495ee7d8225974e50f80, false, true);if ($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$v8e2dcfd7e7e24b1ca76c1193f645902b->setTplId($v3200a31fc05da4e9d5a0465c36822e2f);$v8e2dcfd7e7e24b1ca76c1193f645902b->commit();}else {throw new publicAdminException(getLabel('error-expect-element'));}}$this->setDataType("list");$this->setActionType("view");$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($v6a7f245843454cf4f28ad7c5e2572aa2, "pages");$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}else {throw new publicAdminException(getLabel('error-expect-action'));}}public function switchGroupsActivity($va2b861d0e7719d9108522aacfd4181bc, $v69a256025f66e4ce5d15c9dd7225d357) {$v1471e4e05a4db95d353cc867fe317314 = umiFieldsGroup::getAllGroupsByName($va2b861d0e7719d9108522aacfd4181bc);foreach($v1471e4e05a4db95d353cc867fe317314 as $vdb0f6f37ebeb6ea09489124345af2a45) {if($vdb0f6f37ebeb6ea09489124345af2a45 instanceof umiFieldsGroup) {$vdb0f6f37ebeb6ea09489124345af2a45->setIsActive($v69a256025f66e4ce5d15c9dd7225d357);$vdb0f6f37ebeb6ea09489124345af2a45->commit();}}}};?>
