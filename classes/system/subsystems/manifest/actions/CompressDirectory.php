<?php
 class CompressDirectoryAction extends atomicAction {protected $outputFileName;public function execute() {$v207e5b7e7d2b07f6b19066e8d62f4b1d = $this->getParam("target-directory");$vc9db0d9cdbf3dab7ae304d2b8fe6f5d8 = $this->getParam("output-file-name");$vc9db0d9cdbf3dab7ae304d2b8fe6f5d8 = $this->replacePlaceHolders($vc9db0d9cdbf3dab7ae304d2b8fe6f5d8);$this->outputFileName = $vc9db0d9cdbf3dab7ae304d2b8fe6f5d8;if(substr($v207e5b7e7d2b07f6b19066e8d62f4b1d, 1, 1) == ":") {$vba237047d6b3d7c06a2bf8b749d226b7 = substr($v207e5b7e7d2b07f6b19066e8d62f4b1d, 2);}else {$vba237047d6b3d7c06a2bf8b749d226b7 = $v207e5b7e7d2b07f6b19066e8d62f4b1d;}$vadcdbd79a8d84175c229b192aadc02f2 = new PclZip($vc9db0d9cdbf3dab7ae304d2b8fe6f5d8);$result = $vadcdbd79a8d84175c229b192aadc02f2->create($v207e5b7e7d2b07f6b19066e8d62f4b1d, PCLZIP_OPT_REMOVE_PATH, $vba237047d6b3d7c06a2bf8b749d226b7);if($result == 0) {throw new Exception("Failed to create zip file: \"" . $vadcdbd79a8d84175c229b192aadc02f2->errorInfo(true) . "\"");}chmod($vc9db0d9cdbf3dab7ae304d2b8fe6f5d8, 0777);}public function rollback() {if(is_file($this->outputFileName)) {unlink($this->outputFileName);}}protected function replacePlaceHolders($v341be97d9aff90c9978347f66f945b77) {if(preg_match_all("/\{([^\}]+)\}/", $v341be97d9aff90c9978347f66f945b77, $vc68271a63ddbc431c307beb7d2918275)) {foreach($vc68271a63ddbc431c307beb7d2918275[1] as $v240bf022e685b0ee30ad9fe9e1fb5d5b) {$v341be97d9aff90c9978347f66f945b77 = str_replace("{" . $v240bf022e685b0ee30ad9fe9e1fb5d5b . "}", date($v240bf022e685b0ee30ad9fe9e1fb5d5b), $v341be97d9aff90c9978347f66f945b77);}}return $v341be97d9aff90c9978347f66f945b77;}};?>