<?php
abstract class __guides_data extends baseModuleAdmin {public $per_page = 50;public function guides() {$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();if(isset($_REQUEST['search-all-text'][0])) {$va339e2404792d7f8add09a5013066a3e = array_extract_values($_REQUEST['search-all-text']);foreach($va339e2404792d7f8add09a5013066a3e as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {$va339e2404792d7f8add09a5013066a3e[$v865c0c0b4ab0e063e5caa3387c1a8741] = wa_strtolower($v9e3669d19b675bd57058fd4664205d2a);}}else {$va339e2404792d7f8add09a5013066a3e = false;}$v7ffc4d510260a8544e5550e62ec56bc1 = 7;if(($v48908871a0d20dd2e5bd0a3d634ac745 = getRequest('rel')) && sizeof($v48908871a0d20dd2e5bd0a3d634ac745)) {$v7ffc4d510260a8544e5550e62ec56bc1 = getArrayKey($v48908871a0d20dd2e5bd0a3d634ac745, 0);}$ve1ba980ce14a8c0d7e2779f895ab8695 = (int) getRequest('p');$v9d85c254b5062e518a134a61950999c3 = 20;$vd14a8022b085f9ef19d479cbdd581127 = umiObjectTypesCollection::getInstance();$v053584ffd4c1f8d93d684bed472c816e = $vd14a8022b085f9ef19d479cbdd581127->getGuidesList(true, $v7ffc4d510260a8544e5550e62ec56bc1);$vfa816edb83e95bf0c8da580bdfd491ef = Array();foreach($v053584ffd4c1f8d93d684bed472c816e as $v5f694956811487225d15e973ca38fbab => $vb068931cc450442b63f5b3d276ea4297) {if($va339e2404792d7f8add09a5013066a3e) {$ve3cc92c14a5e6dd1a7d94b6ff634d7fc = false;foreach($va339e2404792d7f8add09a5013066a3e as $v597a51f04d341eba4ca965899acc10b3) {if(strstr(wa_strtolower($vb068931cc450442b63f5b3d276ea4297), $v597a51f04d341eba4ca965899acc10b3) !== false) {$ve3cc92c14a5e6dd1a7d94b6ff634d7fc = true;}}if(!$ve3cc92c14a5e6dd1a7d94b6ff634d7fc) {continue;}}$vfa816edb83e95bf0c8da580bdfd491ef[$v5f694956811487225d15e973ca38fbab] = $vb068931cc450442b63f5b3d276ea4297;}if(isset($_REQUEST['order_filter']['name'])) {natsort($vfa816edb83e95bf0c8da580bdfd491ef);if($_REQUEST['order_filter']['name'] == "desc") {$vfa816edb83e95bf0c8da580bdfd491ef = array_reverse($vfa816edb83e95bf0c8da580bdfd491ef, true);}}$v053584ffd4c1f8d93d684bed472c816e = array_keys($vfa816edb83e95bf0c8da580bdfd491ef);unset($vfa816edb83e95bf0c8da580bdfd491ef);$v053584ffd4c1f8d93d684bed472c816e = $this->excludeNestedTypes($v053584ffd4c1f8d93d684bed472c816e);$vfbb44b4487415b134bce9c790a27fe5e = sizeof($v053584ffd4c1f8d93d684bed472c816e);$v09dd7000e9f9fa14141eea8ea8edc13c = array_slice($v053584ffd4c1f8d93d684bed472c816e, $v9d85c254b5062e518a134a61950999c3 * $ve1ba980ce14a8c0d7e2779f895ab8695, $v9d85c254b5062e518a134a61950999c3);$this->setDataType("list");$this->setActionType("view");$this->setDataRange($v9d85c254b5062e518a134a61950999c3, $ve1ba980ce14a8c0d7e2779f895ab8695 * $v9d85c254b5062e518a134a61950999c3);$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($v09dd7000e9f9fa14141eea8ea8edc13c, "types");$this->setData($v8d777f385d3dfec8815d20f7496026dc, $vfbb44b4487415b134bce9c790a27fe5e);return $this->doData();}public function guide_items($v051369818a8073bba5feeb0e957eb308 = false, $v9d85c254b5062e518a134a61950999c3 = false, $ve1ba980ce14a8c0d7e2779f895ab8695 = 0) {$this->setDataType("list");$this->setActionType("modify");if(!$ve1ba980ce14a8c0d7e2779f895ab8695) $ve1ba980ce14a8c0d7e2779f895ab8695 = (int) getRequest('p');if(!$v9d85c254b5062e518a134a61950999c3) $v9d85c254b5062e518a134a61950999c3 = $this->per_page;if(!$v051369818a8073bba5feeb0e957eb308) $v051369818a8073bba5feeb0e957eb308 = (int) getRequest('param0');$v15d61712450a686a7f365adf4fef581f = (string) getRequest('param1');if($va0c391dc49c440fc9962168353cedde3 = selector::get('object-type')->id($v051369818a8073bba5feeb0e957eb308)) {$this->setHeaderLabel(getLabel('header-data-guide_items') . ' "' . $va0c391dc49c440fc9962168353cedde3->getName() . '"');}if($this->ifNotXmlMode()) return $this->doData();$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('objects');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->id($v051369818a8073bba5feeb0e957eb308);$v8be74552df93e31bbdd6b36ed74bdb6a->limit($v9d85c254b5062e518a134a61950999c3 * $ve1ba980ce14a8c0d7e2779f895ab8695, $v9d85c254b5062e518a134a61950999c3);selectorHelper::detectFilters($v8be74552df93e31bbdd6b36ed74bdb6a);if($v15d61712450a686a7f365adf4fef581f == "do") {$v21ffce5b8a6cc8cc6a41448dd69623c9 = array(    "type_id" => $v051369818a8073bba5feeb0e957eb308   );$this->saveEditedList("objects", $v21ffce5b8a6cc8cc6a41448dd69623c9);$this->chooseRedirect();}$this->setDataRange($v9d85c254b5062e518a134a61950999c3, $ve1ba980ce14a8c0d7e2779f895ab8695 * $v9d85c254b5062e518a134a61950999c3);$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($v8be74552df93e31bbdd6b36ed74bdb6a->result, "objects");$this->setData($v8d777f385d3dfec8815d20f7496026dc, $v8be74552df93e31bbdd6b36ed74bdb6a->total);return $this->doData();}public function guide_item_add() {$v599dcce2998a6b40b1e38e8c6006cb0a = (int) getRequest('param0');$v15d61712450a686a7f365adf4fef581f = (string) getRequest('param1');$ve62e4d22f2d8630f6e44e2b7c3f70ddc = Array("type-id" => $v599dcce2998a6b40b1e38e8c6006cb0a);if($v15d61712450a686a7f365adf4fef581f == "do") {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->saveAddedObjectData($ve62e4d22f2d8630f6e44e2b7c3f70ddc);$this->chooseRedirect($this->pre_lang . '/admin/data/guide_item_edit/' . $va8cfde6331bd59eb2ac96f8911c4b666->getId() . '/');}else if ($v15d61712450a686a7f365adf4fef581f == 'fast') {$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getINstance();try {$v5891da2d64975cae48d175d1e001f5da->addObject(null, $v599dcce2998a6b40b1e38e8c6006cb0a);}catch(fieldRestrictionException $ve1671797c52e15f763380b45e841ec32) {}}$this->setDataType("form");$this->setActionType("create");$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($ve62e4d22f2d8630f6e44e2b7c3f70ddc, "object");$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}public function guide_item_edit() {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->expectObject("param0");$v15d61712450a686a7f365adf4fef581f = (string) getRequest('param1');if($v15d61712450a686a7f365adf4fef581f == "do") {$this->saveEditedObjectData($va8cfde6331bd59eb2ac96f8911c4b666);$this->chooseRedirect();}$this->setDataType("form");$this->setActionType("modify");$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($va8cfde6331bd59eb2ac96f8911c4b666, "object");$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}public function guide_item_del() {$v5891da2d64975cae48d175d1e001f5da = getRequest('element');if(!is_array($v5891da2d64975cae48d175d1e001f5da)) {$v5891da2d64975cae48d175d1e001f5da = Array($v5891da2d64975cae48d175d1e001f5da);}foreach($v5891da2d64975cae48d175d1e001f5da as $v16b2b26000987faccb260b9d39df1269) {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->expectObject($v16b2b26000987faccb260b9d39df1269, false, true);$v21ffce5b8a6cc8cc6a41448dd69623c9 = array('object' => $va8cfde6331bd59eb2ac96f8911c4b666);$this->deleteObject($v21ffce5b8a6cc8cc6a41448dd69623c9);}$this->setDataType("list");$this->setActionType("view");$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($v5891da2d64975cae48d175d1e001f5da, "objects");$this->setData($v8d777f385d3dfec8815d20f7496026dc);return $this->doData();}public function guide_del() {$v94757cae63fd3e398c0811a976dd6bbe = (int) getRequest('param0');umiObjectTypesCollection::getInstance()->delType($v94757cae63fd3e398c0811a976dd6bbe);$this->redirect($this->pre_lang . "/admin/data/guides/");}public function guide_add() {$v2e3c048401582f4247d7ccac43657d2d = (int) $this->expectObjectTypeId('param0');$v0e8133eb006c0f85ed9444ae07a60842 = umiObjectTypesCollection::getInstance();$v94757cae63fd3e398c0811a976dd6bbe = $v0e8133eb006c0f85ed9444ae07a60842->addType($v2e3c048401582f4247d7ccac43657d2d, "i18n::object-type-new-guide");$v599dcce2998a6b40b1e38e8c6006cb0a = $v0e8133eb006c0f85ed9444ae07a60842->getType($v94757cae63fd3e398c0811a976dd6bbe);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsPublic(true);$v599dcce2998a6b40b1e38e8c6006cb0a->setIsGuidable(true);$v599dcce2998a6b40b1e38e8c6006cb0a->commit();$this->redirect($this->pre_lang . "/admin/data/type_edit/" . $v94757cae63fd3e398c0811a976dd6bbe . "/");}public function guide_items_all() {$this->setDataType("list");$this->setActionType("modify");if($this->ifNotXmlMode()) return $this->doData();$v9d85c254b5062e518a134a61950999c3 = $this->per_page;$v051369818a8073bba5feeb0e957eb308 = (int) getRequest('param0');$v8be74552df93e31bbdd6b36ed74bdb6a = new umiSelection;$v8be74552df93e31bbdd6b36ed74bdb6a->addObjectType($v051369818a8073bba5feeb0e957eb308);$veaf334a55552b978eee8fdf096a1fe83 = 50;$vfbb44b4487415b134bce9c790a27fe5e = umiSelectionsParser::runSelectionCounts($v8be74552df93e31bbdd6b36ed74bdb6a);if(!is_null(getRequest('allow-empty')) && $vfbb44b4487415b134bce9c790a27fe5e > $veaf334a55552b978eee8fdf096a1fe83) {$v8d777f385d3dfec8815d20f7496026dc = Array(    'empty' => Array(     'attribute:total'  => $vfbb44b4487415b134bce9c790a27fe5e,     'attribute:result' => 'Too much items'    )   );$this->setDataRange(0, 0);$this->setData($v8d777f385d3dfec8815d20f7496026dc, $vfbb44b4487415b134bce9c790a27fe5e);return $this->doData();}if($v3302f3b7e05fb5b0314a323580a67dba = getRequest('search')) {foreach($v3302f3b7e05fb5b0314a323580a67dba as $v597a51f04d341eba4ca965899acc10b3)    $v8be74552df93e31bbdd6b36ed74bdb6a->addNameFilterLike($v597a51f04d341eba4ca965899acc10b3);}if(!is_null(getRequest('limit'))) {$v8be74552df93e31bbdd6b36ed74bdb6a->addLimit(15);}$vd47c20d305d6a44856735d5fe5c086ca = umiSelectionsParser::runSelection($v8be74552df93e31bbdd6b36ed74bdb6a);if(!intval(regedit::getInstance()->getVal("//settings/ignore_guides_sort"))) {$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$vfa816edb83e95bf0c8da580bdfd491ef = Array();foreach($vd47c20d305d6a44856735d5fe5c086ca as $v59a814aa020a1b32c4674a5887a35022) {$v447b7147e84be512208dcc0995d67ebc = $v5891da2d64975cae48d175d1e001f5da->getObject($v59a814aa020a1b32c4674a5887a35022);if($v447b7147e84be512208dcc0995d67ebc instanceof umiObject) {$vfa816edb83e95bf0c8da580bdfd491ef[$v59a814aa020a1b32c4674a5887a35022] = $v447b7147e84be512208dcc0995d67ebc->getName();}}natsort($vfa816edb83e95bf0c8da580bdfd491ef);$vd47c20d305d6a44856735d5fe5c086ca = array_keys($vfa816edb83e95bf0c8da580bdfd491ef);unset($vfa816edb83e95bf0c8da580bdfd491ef);}$this->setDataRangeByPerPage($veaf334a55552b978eee8fdf096a1fe83, 0);$v8d777f385d3dfec8815d20f7496026dc = $this->prepareData($vd47c20d305d6a44856735d5fe5c086ca, "objects");$this->setData($v8d777f385d3dfec8815d20f7496026dc, $vfbb44b4487415b134bce9c790a27fe5e);return $this->doData();}};?>
