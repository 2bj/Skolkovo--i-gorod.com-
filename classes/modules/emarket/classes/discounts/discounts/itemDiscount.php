<?php
 class itemDiscount extends discount {public function validate(iUmiHierarchyElement $v8e2dcfd7e7e24b1ca76c1193f645902b) {$va4f86f7bfc24194b276c22e0ef158197 = $this->getDiscountRules();foreach($va4f86f7bfc24194b276c22e0ef158197 as $v981c1e7b3795da18687613fbd66d4954) {if($v981c1e7b3795da18687613fbd66d4954 instanceof itemDiscountRule == false) {continue;}if($v981c1e7b3795da18687613fbd66d4954->validateItem($v8e2dcfd7e7e24b1ca76c1193f645902b) == false) {return false;}}return true;}final public static function search(iUmiHierarchyElement $v8e2dcfd7e7e24b1ca76c1193f645902b) {$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vfcaea7edd270964cc145ea48e4367d43 = $v8b1dc169bf460ee884fceef66c6607d6->getModule('emarket');if($vfcaea7edd270964cc145ea48e4367d43 instanceof def_module == false) {throw new privateException('Emarket module must be installed in order to calculate discounts');}$vb0da66a18c79bb89bab185ee6d476ad4 = $vfcaea7edd270964cc145ea48e4367d43->getAllDiscounts('item');$v9544fa2fae515081e7fc27ef2d268642 = array();foreach($vb0da66a18c79bb89bab185ee6d476ad4 as $v4c3e3e50c8ef3b2a481767d59ccbc0b8) {$ve2dc6c48c56de466f6d13781796abf3d = discount::get($v4c3e3e50c8ef3b2a481767d59ccbc0b8->id);if($ve2dc6c48c56de466f6d13781796abf3d instanceof itemDiscount == false) continue;if($ve2dc6c48c56de466f6d13781796abf3d->validate($v8e2dcfd7e7e24b1ca76c1193f645902b))  $v9544fa2fae515081e7fc27ef2d268642[] = $ve2dc6c48c56de466f6d13781796abf3d;}switch(sizeof($v9544fa2fae515081e7fc27ef2d268642)) {case 0: return null;default:     $vb40d35d5f4d3843d92d22379f482557d = $v8e2dcfd7e7e24b1ca76c1193f645902b->price;$va2deda85c9dbefb340d40b13a5121a79 = null;$va642c4b864a2b19d3d979321bc21f831 = null;foreach($v9544fa2fae515081e7fc27ef2d268642 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $ve2dc6c48c56de466f6d13781796abf3d) {$v78a5eb43deef9a7b5b9ce157b9d52ac4 = $ve2dc6c48c56de466f6d13781796abf3d->recalcPrice($vb40d35d5f4d3843d92d22379f482557d);if($v78a5eb43deef9a7b5b9ce157b9d52ac4 <= 0) continue;if(is_null($va642c4b864a2b19d3d979321bc21f831) || $va642c4b864a2b19d3d979321bc21f831 > $v78a5eb43deef9a7b5b9ce157b9d52ac4) {$va642c4b864a2b19d3d979321bc21f831 = $v78a5eb43deef9a7b5b9ce157b9d52ac4;$va2deda85c9dbefb340d40b13a5121a79 = $ve2dc6c48c56de466f6d13781796abf3d;}}return $va2deda85c9dbefb340d40b13a5121a79;}}};?>