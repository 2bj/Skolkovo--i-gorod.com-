<?php
 class umiObjectPropertyOptioned extends umiObjectProperty {public function setValue($v2063c1608d6e0baf80249c42e2be5804) {if(is_array($v2063c1608d6e0baf80249c42e2be5804)) {$v2063c1608d6e0baf80249c42e2be5804 = array_distinct($v2063c1608d6e0baf80249c42e2be5804);}parent::setValue($v2063c1608d6e0baf80249c42e2be5804);}protected function loadValue() {$vf09cc7ee3a9a93273f4b80601cafb00c = array();$v8d777f385d3dfec8815d20f7496026dc = $this->getPropData();if($v8d777f385d3dfec8815d20f7496026dc == false) {$v8d777f385d3dfec8815d20f7496026dc = array();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE int_val, varchar_val, text_val, rel_val, tree_val, float_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$this->field_id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);while($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_assoc($result)) {foreach($vf1965a857bc285d26fe22023aa5ab50d as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {$v8d777f385d3dfec8815d20f7496026dc[$v865c0c0b4ab0e063e5caa3387c1a8741][] = $v9e3669d19b675bd57058fd4664205d2a;}}}for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;true;$v865c0c0b4ab0e063e5caa3387c1a8741++) {if($v2063c1608d6e0baf80249c42e2be5804 = $this->parsePropData($v8d777f385d3dfec8815d20f7496026dc, $v865c0c0b4ab0e063e5caa3387c1a8741)) {foreach($v2063c1608d6e0baf80249c42e2be5804 as $ve358efa489f58062f10dd7316b65649e => $v9e3669d19b675bd57058fd4664205d2a) {$v2063c1608d6e0baf80249c42e2be5804[$ve358efa489f58062f10dd7316b65649e] = ($ve358efa489f58062f10dd7316b65649e == 'float') ? $this->filterFloat($v9e3669d19b675bd57058fd4664205d2a) : self::filterOutputString($v9e3669d19b675bd57058fd4664205d2a);}$vf09cc7ee3a9a93273f4b80601cafb00c[] = $v2063c1608d6e0baf80249c42e2be5804;continue;}break;}return $vf09cc7ee3a9a93273f4b80601cafb00c;}protected function saveValue() {$this->deleteCurrentRows();foreach($this->value as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v8d777f385d3dfec8815d20f7496026dc) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO `{$this->tableName}` (`obj_id`, `field_id`, `int_val`, `varchar_val`, `rel_val`, `tree_val`, `float_val`) VALUES ('{$this->object_id}', '{$this->field_id}', ";$v2817f701d5e1a1181e657251363295fd = 0;if($v481f44389b52d587646c4a792551b4dc = (int) getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'int')) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "'{$v481f44389b52d587646c4a792551b4dc}', ";++$v2817f701d5e1a1181e657251363295fd;}else {$vac5c74b64b4b8352ef2f181affb5ac2a .= "NULL, ";}if($v32f5f5d74be991e6f2147a3dce8f7c4a = (string) getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'varchar')) {$v32f5f5d74be991e6f2147a3dce8f7c4a = self::filterInputString($v32f5f5d74be991e6f2147a3dce8f7c4a);$vac5c74b64b4b8352ef2f181affb5ac2a .= "'{$v32f5f5d74be991e6f2147a3dce8f7c4a}', ";++$v2817f701d5e1a1181e657251363295fd;}else {$vac5c74b64b4b8352ef2f181affb5ac2a .= "NULL, ";}if($va3c2d20026816e57d6022b2034f48e88 = (int) $this->prepareRelationValue(getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'rel'))) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "'{$va3c2d20026816e57d6022b2034f48e88}', ";++$v2817f701d5e1a1181e657251363295fd;}else {$vac5c74b64b4b8352ef2f181affb5ac2a .= "NULL, ";}$this->values[$v3c6e0b8a9c15224a8228b9a98ca1531d]['rel'] = $va3c2d20026816e57d6022b2034f48e88;if($vfec328f17e29d6639c673223e83cdac4 = (int) getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'tree')) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "'{$vfec328f17e29d6639c673223e83cdac4}', ";++$v2817f701d5e1a1181e657251363295fd;}else {$vac5c74b64b4b8352ef2f181affb5ac2a .= "NULL, ";}if($v9ec90e82509332a2d6e51de04dbbe788 = (int) getArrayKey($v8d777f385d3dfec8815d20f7496026dc, 'float')) {$vac5c74b64b4b8352ef2f181affb5ac2a .= "'{$v9ec90e82509332a2d6e51de04dbbe788}'";++$v2817f701d5e1a1181e657251363295fd;}else {$vac5c74b64b4b8352ef2f181affb5ac2a .= "NULL";}$vac5c74b64b4b8352ef2f181affb5ac2a .= ")";if($v2817f701d5e1a1181e657251363295fd < 2) {continue;}l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);}}protected function parsePropData($v8d777f385d3dfec8815d20f7496026dc, $v6a992d5529f459a44fee58c733255e86) {$result = Array();$vca66516bb4d6585b92b5fee0264db0d7 = false;foreach($v8d777f385d3dfec8815d20f7496026dc as $vdf5feafab86601ea0e1e6fe6e20df6c5 => $vf09cc7ee3a9a93273f4b80601cafb00c) {if(isset($vf09cc7ee3a9a93273f4b80601cafb00c[$v6a992d5529f459a44fee58c733255e86])) {$vdf5feafab86601ea0e1e6fe6e20df6c5 = $this->decodeContentType($vdf5feafab86601ea0e1e6fe6e20df6c5);$result[$vdf5feafab86601ea0e1e6fe6e20df6c5] = $vf09cc7ee3a9a93273f4b80601cafb00c[$v6a992d5529f459a44fee58c733255e86];$vca66516bb4d6585b92b5fee0264db0d7 = true;}}return $vca66516bb4d6585b92b5fee0264db0d7 ? $result : false;}protected function decodeContentType($vdf5feafab86601ea0e1e6fe6e20df6c5) {if(substr($vdf5feafab86601ea0e1e6fe6e20df6c5, -4) == '_val') {$vdf5feafab86601ea0e1e6fe6e20df6c5 = substr($vdf5feafab86601ea0e1e6fe6e20df6c5, 0, strlen($vdf5feafab86601ea0e1e6fe6e20df6c5) - 4);}return $vdf5feafab86601ea0e1e6fe6e20df6c5;}protected function applyParams($vf09cc7ee3a9a93273f4b80601cafb00c, $v21ffce5b8a6cc8cc6a41448dd69623c9 = NULL) {$vb2c97ae425dd751b0e48a3acae79cf4a = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'filter');$v927f8c827f23f513d40e3dc9cd23e52f = getArrayKey($v21ffce5b8a6cc8cc6a41448dd69623c9, 'field-type');if(!is_null($vb2c97ae425dd751b0e48a3acae79cf4a)) {$result = Array();foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v6a992d5529f459a44fee58c733255e86 => $v2063c1608d6e0baf80249c42e2be5804) {foreach($vb2c97ae425dd751b0e48a3acae79cf4a as $v833750ac635fcc57dc33ecafe365f9a7 => $v24b86e853ae3f6cdeaa0f580056a545c) {if(isset($v2063c1608d6e0baf80249c42e2be5804[$v833750ac635fcc57dc33ecafe365f9a7]) && $v2063c1608d6e0baf80249c42e2be5804[$v833750ac635fcc57dc33ecafe365f9a7] == $v24b86e853ae3f6cdeaa0f580056a545c) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}}}$vf09cc7ee3a9a93273f4b80601cafb00c = $result;}if(!is_null($v927f8c827f23f513d40e3dc9cd23e52f)) {foreach($vf09cc7ee3a9a93273f4b80601cafb00c as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v2063c1608d6e0baf80249c42e2be5804) {$vf09cc7ee3a9a93273f4b80601cafb00c[$v865c0c0b4ab0e063e5caa3387c1a8741] = getArrayKey($v2063c1608d6e0baf80249c42e2be5804, $v927f8c827f23f513d40e3dc9cd23e52f);}}return $vf09cc7ee3a9a93273f4b80601cafb00c;}protected function filterFloat($v2063c1608d6e0baf80249c42e2be5804) {return round($v2063c1608d6e0baf80249c42e2be5804, 2);}};?>