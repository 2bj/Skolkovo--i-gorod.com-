<?php
 class uselStream extends umiBaseStream {protected $scheme = "usel", $selectionFilePath, $selectionName, $selectionParams = Array();protected $dom, $sel, $mode = "objects";protected $modes = Array("objects" => "objects", "pages" => "pages", "count" => "count", "objects count" => "objects", "pages count" => "pages");protected $lastTypeId = false;protected $forceCounts = true;public function stream_open($vd6fe1d0be6347b8ef2427fa629c04485, $v15d61712450a686a7f365adf4fef581f, $v93da65a9fd0004d9477aeac024e08e15, $v6385a5865e0b96f09e4142ab2d9e3736) {$vb99eb979e6f6efabc396f777b503f7e7 = cacheFrontend::getInstance();if($v8d777f385d3dfec8815d20f7496026dc = $vb99eb979e6f6efabc396f777b503f7e7->loadData($vd6fe1d0be6347b8ef2427fa629c04485)) {return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}$v8be74552df93e31bbdd6b36ed74bdb6a = $this->parsePath($vd6fe1d0be6347b8ef2427fa629c04485);if($v8be74552df93e31bbdd6b36ed74bdb6a instanceof selector) {if($this->mode !== "count") {$v9b207167e5381c47682c6b4f58a623fb = $v8be74552df93e31bbdd6b36ed74bdb6a->result;if($this->forceCounts) {$v9b207167e5381c47682c6b4f58a623fb['total'] = $v8be74552df93e31bbdd6b36ed74bdb6a->length;}}else {$v9b207167e5381c47682c6b4f58a623fb = $v8be74552df93e31bbdd6b36ed74bdb6a->length;}$v8d777f385d3dfec8815d20f7496026dc = $this->translateToXml($v9b207167e5381c47682c6b4f58a623fb);if($this->expire) $vb99eb979e6f6efabc396f777b503f7e7->saveData($vd6fe1d0be6347b8ef2427fa629c04485, $v8d777f385d3dfec8815d20f7496026dc, $this->expire);return $this->setData($v8d777f385d3dfec8815d20f7496026dc);}else {return $this->setDataError('not-found');}}public function call($v6cab342b4c04b93bd0801e25b295b0d2, $v21ffce5b8a6cc8cc6a41448dd69623c9 = NULL) {$this->selectionFilePath = $vb5fe40710f18abb5e2fc26fa0eafbc47 = "./usels/" . $v6cab342b4c04b93bd0801e25b295b0d2 . ".xml";if(!file_exists($vb5fe40710f18abb5e2fc26fa0eafbc47)) {throw new publicException("File {$vb5fe40710f18abb5e2fc26fa0eafbc47} not found");}if(is_array($v21ffce5b8a6cc8cc6a41448dd69623c9)) {$this->selectionParams = $v21ffce5b8a6cc8cc6a41448dd69623c9;}return Array(    "sel" => $this->createSelection(),    "mode" => $this->mode   );}protected function parsePath($vd6fe1d0be6347b8ef2427fa629c04485) {$vd6fe1d0be6347b8ef2427fa629c04485 = parent::parsePath($vd6fe1d0be6347b8ef2427fa629c04485);$vd6fe1d0be6347b8ef2427fa629c04485 = trim($vd6fe1d0be6347b8ef2427fa629c04485, "/");$vd6fe1d0be6347b8ef2427fa629c04485 = str_replace(")(", ") (", $vd6fe1d0be6347b8ef2427fa629c04485);$vd6fe1d0be6347b8ef2427fa629c04485 = preg_replace("/\(([^\)]+)\)/Ue", "umiBaseStream::protectParams('\\1')", $vd6fe1d0be6347b8ef2427fa629c04485);$v32660e7b27600e0fde6ff1333c6c0568 = split("\/", $vd6fe1d0be6347b8ef2427fa629c04485);if(sizeof($v32660e7b27600e0fde6ff1333c6c0568) == 0) {throw new publicException("File {$vb5fe40710f18abb5e2fc26fa0eafbc47} not found");}$this->selectionName = $v6cab342b4c04b93bd0801e25b295b0d2 = $v32660e7b27600e0fde6ff1333c6c0568[0];$this->selectionFilePath = $vb5fe40710f18abb5e2fc26fa0eafbc47 = CURRENT_WORKING_DIR . "/usels/" . $v6cab342b4c04b93bd0801e25b295b0d2 . ".xml";if(!file_exists($vb5fe40710f18abb5e2fc26fa0eafbc47)) {return false;}for($v865c0c0b4ab0e063e5caa3387c1a8741 = 1;$v865c0c0b4ab0e063e5caa3387c1a8741 < sizeof($v32660e7b27600e0fde6ff1333c6c0568);$v865c0c0b4ab0e063e5caa3387c1a8741++) {$this->selectionParams[] = umiBaseStream::unprotectParams($v32660e7b27600e0fde6ff1333c6c0568[$v865c0c0b4ab0e063e5caa3387c1a8741]);}return $this->createSelection();}protected function translateToXml($v47c80780ab608cc046f2a6e6f071feb6) {$v69ae498121c2d8e63f20c7144a0246d7 = umiObjectsCollection::getInstance();$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v10573b873d2fa5a365d558a45e328e47 = Array();switch($this->mode) {case "pages": {$vb3b32a2d422265cd25c3323ed0157f81 = Array();foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v8e2dcfd7e7e24b1ca76c1193f645902b) {if("total" == (string) $v865c0c0b4ab0e063e5caa3387c1a8741) {continue;}if($v8e2dcfd7e7e24b1ca76c1193f645902b instanceof umiHierarchyElement) {$vb3b32a2d422265cd25c3323ed0157f81[] = $v8e2dcfd7e7e24b1ca76c1193f645902b;}}$v10573b873d2fa5a365d558a45e328e47['nodes:page'] = $vb3b32a2d422265cd25c3323ed0157f81;if(isset($v47c80780ab608cc046f2a6e6f071feb6['total'])) {$v10573b873d2fa5a365d558a45e328e47['total'] = $v47c80780ab608cc046f2a6e6f071feb6['total'];}break;}case "objects": {$v5891da2d64975cae48d175d1e001f5da = Array();foreach($v47c80780ab608cc046f2a6e6f071feb6 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $va8cfde6331bd59eb2ac96f8911c4b666) {if("total" == (string) $v865c0c0b4ab0e063e5caa3387c1a8741) {continue;}if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {$v5891da2d64975cae48d175d1e001f5da[] = $va8cfde6331bd59eb2ac96f8911c4b666;}}$v10573b873d2fa5a365d558a45e328e47['nodes:item'] = $v5891da2d64975cae48d175d1e001f5da;if(isset($v47c80780ab608cc046f2a6e6f071feb6['total'])) {$v10573b873d2fa5a365d558a45e328e47['total'] = $v47c80780ab608cc046f2a6e6f071feb6['total'];}break;}case "count": {$v10573b873d2fa5a365d558a45e328e47['total'] = $v47c80780ab608cc046f2a6e6f071feb6;break;}default: {$v10573b873d2fa5a365d558a45e328e47['error'] = "Unknown result mode \"{$this->mode}\"";break;}}return parent::translateToXml($v10573b873d2fa5a365d558a45e328e47);}protected function loadDomXml() {$this->dom = DOMDocument::load($this->selectionFilePath);}protected function createSelection() {$this->loadDomXml();$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("/selection");if(sizeof($vca15fd43dfaeb80eb8c125735e0479b0) == 1) {$v8d33e0fd532b847a73062a9f30dccada = $vca15fd43dfaeb80eb8c125735e0479b0->item(0);$this->getTargets($v8d33e0fd532b847a73062a9f30dccada);$this->getHierarchy($v8d33e0fd532b847a73062a9f30dccada);$this->getSorts($v8d33e0fd532b847a73062a9f30dccada);$this->getLimit($v8d33e0fd532b847a73062a9f30dccada);$this->getProperties($v8d33e0fd532b847a73062a9f30dccada);return $this->sel;}else {return false;}}protected function getTargets(DOMElement $v8d33e0fd532b847a73062a9f30dccada) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("target", $v8d33e0fd532b847a73062a9f30dccada);$v8e65decc3598d3ebebcb735b16acf53f = $vca15fd43dfaeb80eb8c125735e0479b0->item(0);if($v8e65decc3598d3ebebcb735b16acf53f) {$v93b57534feb532c2db47a4613b99506d = (string) $v8e65decc3598d3ebebcb735b16acf53f->getAttribute("result");if(!$v93b57534feb532c2db47a4613b99506d) {$v93b57534feb532c2db47a4613b99506d = (string) $v8e65decc3598d3ebebcb735b16acf53f->getAttribute("expected-result");}$vb8c8ec69026adfe891bf5e618eabb17b = (string) $v8e65decc3598d3ebebcb735b16acf53f->getAttribute("force-hierarchy");if(isset($this->modes[$v93b57534feb532c2db47a4613b99506d])) {if(strpos($v93b57534feb532c2db47a4613b99506d, " ") !== false) {$this->forceCounts = true;}$v93b57534feb532c2db47a4613b99506d = $this->modes[$v93b57534feb532c2db47a4613b99506d];$this->mode = $v93b57534feb532c2db47a4613b99506d;$v737704c3c45329f589b09345a41dd3de = ($this->mode != 'count') ? $this->mode : ($vb8c8ec69026adfe891bf5e618eabb17b ? 'pages' : 'objects');$this->sel = new selector($this->mode);if ($this->mode == 'pages') {$vcaa44eb065cddfc7ede1950adcea56a5 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("domain", $v8e65decc3598d3ebebcb735b16acf53f);if ($vcaa44eb065cddfc7ede1950adcea56a5->length > 0) {$v204aadf644884156d194b4fccb7a101a = $vcaa44eb065cddfc7ede1950adcea56a5->item(0);$vad5f82e879a9c5d6b5b442eb37e50551 = $v204aadf644884156d194b4fccb7a101a->nodeValue;if (!is_numeric($vad5f82e879a9c5d6b5b442eb37e50551)) {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDomainId($vad5f82e879a9c5d6b5b442eb37e50551);}if ($vad5f82e879a9c5d6b5b442eb37e50551 && domainsCollection::getInstance()->isExists($vad5f82e879a9c5d6b5b442eb37e50551)) {$v52f1e208e3cee17087c7c698eee42fcd->where('domain')->equals($vad5f82e879a9c5d6b5b442eb37e50551);}}}}else {return false;}}else {return false;}$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("target/type");foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v8d90d57cd5d62bf377f6f8bc0cffc325) {$v5f694956811487225d15e973ca38fbab = $v8d90d57cd5d62bf377f6f8bc0cffc325->getAttribute("id");$v34fcf34df8c8ba155d0eaed678a799d7 = $v8d90d57cd5d62bf377f6f8bc0cffc325->getAttribute("module");$ve0ffc5711775f5b9d18ed1235050612f = $v8d90d57cd5d62bf377f6f8bc0cffc325->getAttribute("method");$v5f694956811487225d15e973ca38fbab = $this->parseInputParams($v5f694956811487225d15e973ca38fbab);$v34fcf34df8c8ba155d0eaed678a799d7 = $this->parseInputParams($v34fcf34df8c8ba155d0eaed678a799d7);$ve0ffc5711775f5b9d18ed1235050612f = $this->parseInputParams($ve0ffc5711775f5b9d18ed1235050612f);$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;if($v5f694956811487225d15e973ca38fbab) {$this->lastTypeId = $v5f694956811487225d15e973ca38fbab;$v52f1e208e3cee17087c7c698eee42fcd->types('object-type')->id((int) $v5f694956811487225d15e973ca38fbab);continue;}if($v34fcf34df8c8ba155d0eaed678a799d7 && $ve0ffc5711775f5b9d18ed1235050612f) {$v89b0b9deff65f8b9cd1f71bc74ce36ba = umiHierarchyTypesCollection::getInstance()->getTypeByName($v34fcf34df8c8ba155d0eaed678a799d7, $ve0ffc5711775f5b9d18ed1235050612f);if($v89b0b9deff65f8b9cd1f71bc74ce36ba instanceof iUmiHierarchyType) {$v5f694956811487225d15e973ca38fbab = umiObjectTypesCollection::getInstance()->getTypeByHierarchyTypeId($v89b0b9deff65f8b9cd1f71bc74ce36ba->getId());$this->lastTypeId = $v5f694956811487225d15e973ca38fbab;if($this->mode == "pages") {$v52f1e208e3cee17087c7c698eee42fcd->types('hierarchy-type')->id($v89b0b9deff65f8b9cd1f71bc74ce36ba->getId());continue;}if($this->mode == "objects") {$v52f1e208e3cee17087c7c698eee42fcd->types('object-type')->id((int) $v5f694956811487225d15e973ca38fbab);}}else {continue;}}}}protected function getSorts(DOMElement $v8d33e0fd532b847a73062a9f30dccada) {$v84c937a3a3e86720649bc708544abe51 = true;if($this->lastTypeId !== false) {$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($this->lastTypeId);if(!($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType)) {$v84c937a3a3e86720649bc708544abe51 = false;}}else {$v84c937a3a3e86720649bc708544abe51 = false;}$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("sort", $v8d33e0fd532b847a73062a9f30dccada);foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v06eb4015dd72e1c39213f6f24a0e4505) {$v70a17ffa722a3985b86d30b034ad06d7 = (string) $v06eb4015dd72e1c39213f6f24a0e4505->getAttribute("order");$v70a17ffa722a3985b86d30b034ad06d7 = $this->parseInputParams($v70a17ffa722a3985b86d30b034ad06d7);$v73f329f154a663bfda020aadcdd0b775 = $v06eb4015dd72e1c39213f6f24a0e4505->nodeValue;$v73f329f154a663bfda020aadcdd0b775 = $this->parseInputParams($v73f329f154a663bfda020aadcdd0b775);$v70a17ffa722a3985b86d30b034ad06d7 = (strtolower($v70a17ffa722a3985b86d30b034ad06d7) == "descending" || strtolower($v70a17ffa722a3985b86d30b034ad06d7) == "desc") ? false : true;$vcadc8c8db42409733582cb3e2298ef87 = null;switch($v73f329f154a663bfda020aadcdd0b775) {case "name": {if($v84c937a3a3e86720649bc708544abe51) {$vcadc8c8db42409733582cb3e2298ef87 = $v52f1e208e3cee17087c7c698eee42fcd->order('name');}break;}case "ord": {$vcadc8c8db42409733582cb3e2298ef87 = $v52f1e208e3cee17087c7c698eee42fcd->order('ord');break;}case "rand()": {$vcadc8c8db42409733582cb3e2298ef87 = $v52f1e208e3cee17087c7c698eee42fcd->order('rand');break;}default: {if($v84c937a3a3e86720649bc708544abe51 && $v73f329f154a663bfda020aadcdd0b775) {$vcadc8c8db42409733582cb3e2298ef87 = $v52f1e208e3cee17087c7c698eee42fcd->order($v73f329f154a663bfda020aadcdd0b775);}break;}}if($vcadc8c8db42409733582cb3e2298ef87) {if($v70a17ffa722a3985b86d30b034ad06d7) $vcadc8c8db42409733582cb3e2298ef87->asc();else $vcadc8c8db42409733582cb3e2298ef87->desc();}}}protected function getLimit(DOMElement $v8d33e0fd532b847a73062a9f30dccada) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("limit", $v8d33e0fd532b847a73062a9f30dccada);if($ve23d91c134866d1d40ab2ac3ab18b86d = $vca15fd43dfaeb80eb8c125735e0479b0->item(0)) {$vaa9f73eea60a006820d0f8768bc8a3fc = $ve23d91c134866d1d40ab2ac3ab18b86d->nodeValue;$v71860c77c6745379b0d44304d66b6a13 = $ve23d91c134866d1d40ab2ac3ab18b86d->getAttribute("page");$vaa9f73eea60a006820d0f8768bc8a3fc = $this->parseInputParams($vaa9f73eea60a006820d0f8768bc8a3fc);$v71860c77c6745379b0d44304d66b6a13 = (int) $this->parseInputParams($v71860c77c6745379b0d44304d66b6a13);if($vaa9f73eea60a006820d0f8768bc8a3fc) {$v52f1e208e3cee17087c7c698eee42fcd->limit($vaa9f73eea60a006820d0f8768bc8a3fc * $v71860c77c6745379b0d44304d66b6a13, $vaa9f73eea60a006820d0f8768bc8a3fc);}}else {return false;}}protected function getProperties(DOMElement $v8d33e0fd532b847a73062a9f30dccada) {if($this->lastTypeId !== false) {$v599dcce2998a6b40b1e38e8c6006cb0a = umiObjectTypesCollection::getInstance()->getType($this->lastTypeId);if(!($v599dcce2998a6b40b1e38e8c6006cb0a instanceof umiObjectType)) {return false;}}else {return false;}$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("property", $v8d33e0fd532b847a73062a9f30dccada);foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v96b8eeb9e337bd8704b337b404d62688) {$v9190e95d1c478aceb70ac5c82692a74c = $v96b8eeb9e337bd8704b337b404d62688->getAttribute("name");$v9602b952913db0444a013e59553f377e = $v96b8eeb9e337bd8704b337b404d62688->getAttribute("value");$v9602b952913db0444a013e59553f377e = $this->parseInputParams($v9602b952913db0444a013e59553f377e);$v6247ed2c2095b0c52fe9c3c31e3d935b = $v96b8eeb9e337bd8704b337b404d62688->getAttribute("mode") == "not" ? true : false;$v0bc3b6f72cb1dd95d59bb4af831912ee = $v96b8eeb9e337bd8704b337b404d62688->getAttribute("mode") == "like" ? true : false;$vd2e16d3f793e62737a6cdf2d54b0d9c1 = $this->getInterval($v96b8eeb9e337bd8704b337b404d62688);$vb3b32a2d422265cd25c3323ed0157f81 = $this->getPages($v96b8eeb9e337bd8704b337b404d62688);$v5891da2d64975cae48d175d1e001f5da = $this->getObjects($v96b8eeb9e337bd8704b337b404d62688);switch(true) {case (bool) $v9602b952913db0444a013e59553f377e: {$this->filterSimpleProperty($v9190e95d1c478aceb70ac5c82692a74c, $v9602b952913db0444a013e59553f377e, $v6247ed2c2095b0c52fe9c3c31e3d935b, $v0bc3b6f72cb1dd95d59bb4af831912ee);break;}case ($vd2e16d3f793e62737a6cdf2d54b0d9c1['min'] !== false || $vd2e16d3f793e62737a6cdf2d54b0d9c1['max'] !== false): {$this->filterIntervalProperty($v9190e95d1c478aceb70ac5c82692a74c, $vd2e16d3f793e62737a6cdf2d54b0d9c1);break;}case sizeof($vb3b32a2d422265cd25c3323ed0157f81) > 0 : {$this->filterPagesProperty($v9190e95d1c478aceb70ac5c82692a74c, $vb3b32a2d422265cd25c3323ed0157f81, $v6247ed2c2095b0c52fe9c3c31e3d935b);break;}case sizeof($v5891da2d64975cae48d175d1e001f5da) > 0 : {$this->filterObjectsProperty($v9190e95d1c478aceb70ac5c82692a74c, $v5891da2d64975cae48d175d1e001f5da, $v6247ed2c2095b0c52fe9c3c31e3d935b);break;}default: {break;}}}}protected function getInterval(DOMElement $v96b8eeb9e337bd8704b337b404d62688) {$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("min-value|max-value", $v96b8eeb9e337bd8704b337b404d62688);$result = Array("min" => false, "max" => false);foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v36c4536996ca5615dcf9911f068786dc) {$v2063c1608d6e0baf80249c42e2be5804 = $v36c4536996ca5615dcf9911f068786dc->nodeValue;$v2063c1608d6e0baf80249c42e2be5804 = $this->parseInputParams($v2063c1608d6e0baf80249c42e2be5804);if (!strlen($v2063c1608d6e0baf80249c42e2be5804)) $v2063c1608d6e0baf80249c42e2be5804 = false;if($v1ddcb92ade31c8fbd370001f9b29a7d9 = $v36c4536996ca5615dcf9911f068786dc->getAttribute("format")) {$v2063c1608d6e0baf80249c42e2be5804 = $this->formatValue($v2063c1608d6e0baf80249c42e2be5804, $v1ddcb92ade31c8fbd370001f9b29a7d9);}if($v36c4536996ca5615dcf9911f068786dc->tagName == "min-value") {$result['min'] = $v2063c1608d6e0baf80249c42e2be5804;}if($v36c4536996ca5615dcf9911f068786dc->tagName == "max-value") {$result['max'] = $v2063c1608d6e0baf80249c42e2be5804;}}return $result;}protected function formatValue($v2063c1608d6e0baf80249c42e2be5804, $v1ddcb92ade31c8fbd370001f9b29a7d9) {switch($v1ddcb92ade31c8fbd370001f9b29a7d9) {case "timestamp": {$v2063c1608d6e0baf80249c42e2be5804 = (int) $v2063c1608d6e0baf80249c42e2be5804;break;}case "GMT":    case "UTC": {$v2063c1608d6e0baf80249c42e2be5804 = strtotime($v2063c1608d6e0baf80249c42e2be5804);break;}}return $v2063c1608d6e0baf80249c42e2be5804;}protected function getPages(DOMElement $v96b8eeb9e337bd8704b337b404d62688) {$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("page", $v96b8eeb9e337bd8704b337b404d62688);$result = Array();foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v36c4536996ca5615dcf9911f068786dc) {$v2063c1608d6e0baf80249c42e2be5804 = $v36c4536996ca5615dcf9911f068786dc->nodeValue;$v2063c1608d6e0baf80249c42e2be5804 = $this->parseInputParams($v2063c1608d6e0baf80249c42e2be5804);if(is_numeric($v2063c1608d6e0baf80249c42e2be5804)) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}else {$v2063c1608d6e0baf80249c42e2be5804 = umiHierarchy::getInstance()->getIdByPath($v2063c1608d6e0baf80249c42e2be5804);if($v2063c1608d6e0baf80249c42e2be5804) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}else {continue;}}}return $result;}protected function getHierarchy(DOMElement $v8d33e0fd532b847a73062a9f30dccada) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("target/category", $v8d33e0fd532b847a73062a9f30dccada);$result = Array();foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v36c4536996ca5615dcf9911f068786dc) {$v2063c1608d6e0baf80249c42e2be5804 = $v36c4536996ca5615dcf9911f068786dc->nodeValue;$v2063c1608d6e0baf80249c42e2be5804 = $this->parseInputParams($v2063c1608d6e0baf80249c42e2be5804);$v12a055bf01a31369fe81ac35d85c7bc1 = $v36c4536996ca5615dcf9911f068786dc->getAttribute("depth");$v12a055bf01a31369fe81ac35d85c7bc1 = (int) $this->parseInputParams($v12a055bf01a31369fe81ac35d85c7bc1);if(is_numeric($v2063c1608d6e0baf80249c42e2be5804)) {$v2063c1608d6e0baf80249c42e2be5804 = (int) $v2063c1608d6e0baf80249c42e2be5804;}else {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();$v2063c1608d6e0baf80249c42e2be5804 = (int) $vb81ca7c0ccaa77e7aa91936ab0070695->getIdByPath($v2063c1608d6e0baf80249c42e2be5804);}if($v2063c1608d6e0baf80249c42e2be5804) {$v2510c39011c5be704182423e3a695e91 = $v52f1e208e3cee17087c7c698eee42fcd->where('hierarchy')->page($v2063c1608d6e0baf80249c42e2be5804)->childs($v12a055bf01a31369fe81ac35d85c7bc1 ? $v12a055bf01a31369fe81ac35d85c7bc1 : 100);}}}protected function getObjects(DOMElement $v96b8eeb9e337bd8704b337b404d62688) {$v3d788fa62d7c185a1bee4c9147ee1091 = new DOMXPath($this->dom);$vca15fd43dfaeb80eb8c125735e0479b0 = $v3d788fa62d7c185a1bee4c9147ee1091->evaluate("object", $v96b8eeb9e337bd8704b337b404d62688);$result = Array();foreach($vca15fd43dfaeb80eb8c125735e0479b0 as $v36c4536996ca5615dcf9911f068786dc) {if($v2063c1608d6e0baf80249c42e2be5804 = $v36c4536996ca5615dcf9911f068786dc->nodeValue) {if($v2063c1608d6e0baf80249c42e2be5804 = $this->parseInputParams($v2063c1608d6e0baf80249c42e2be5804)) {$result[] = $v2063c1608d6e0baf80249c42e2be5804;}}}return $result;}protected function filterSimpleProperty($v972bf3f05d14ffbdb817bef60638ff00, $v2063c1608d6e0baf80249c42e2be5804, $v15d61712450a686a7f365adf4fef581f, $vbe1ab1632e4285edc3733b142935c60b) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;if($v972bf3f05d14ffbdb817bef60638ff00 != "name") {if($v15d61712450a686a7f365adf4fef581f) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->equals($v2063c1608d6e0baf80249c42e2be5804);return true;}else {if($vbe1ab1632e4285edc3733b142935c60b) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->like('%' . $v2063c1608d6e0baf80249c42e2be5804 . '%');}else {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->equals($v2063c1608d6e0baf80249c42e2be5804);}return true;}}else {if(!$v15d61712450a686a7f365adf4fef581f) {if($vbe1ab1632e4285edc3733b142935c60b) {$v52f1e208e3cee17087c7c698eee42fcd->where('name')->like('%' . $v2063c1608d6e0baf80249c42e2be5804 . '%');}else {$v52f1e208e3cee17087c7c698eee42fcd->where('name')->equals($v2063c1608d6e0baf80249c42e2be5804);}return true;}else {return false;}}}protected function filterIntervalProperty($v972bf3f05d14ffbdb817bef60638ff00, $vd2e16d3f793e62737a6cdf2d54b0d9c1) {$vd8bd79cc131920d5de426f914d17405a = $vd2e16d3f793e62737a6cdf2d54b0d9c1['min'];$v2ffe4e77325d9a7152f7086ea7aa5114 = $vd2e16d3f793e62737a6cdf2d54b0d9c1['max'];$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;if($vd8bd79cc131920d5de426f914d17405a !== false && $v2ffe4e77325d9a7152f7086ea7aa5114 !== false) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->between($vd8bd79cc131920d5de426f914d17405a, $v2ffe4e77325d9a7152f7086ea7aa5114);return true;}else {if($vd8bd79cc131920d5de426f914d17405a !== false) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->more($vd8bd79cc131920d5de426f914d17405a);return true;}if($v2ffe4e77325d9a7152f7086ea7aa5114 !== false) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->less($v2ffe4e77325d9a7152f7086ea7aa5114);return true;}return false;}}protected function filterPagesProperty($v972bf3f05d14ffbdb817bef60638ff00, $vb3b32a2d422265cd25c3323ed0157f81, $v15d61712450a686a7f365adf4fef581f) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;if($v15d61712450a686a7f365adf4fef581f) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->notequals($vb3b32a2d422265cd25c3323ed0157f81);}else {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->equals($vb3b32a2d422265cd25c3323ed0157f81);}}protected function filterObjectsProperty($v972bf3f05d14ffbdb817bef60638ff00, $v5891da2d64975cae48d175d1e001f5da, $v15d61712450a686a7f365adf4fef581f) {$v52f1e208e3cee17087c7c698eee42fcd = $this->sel;$v52f1e208e3cee17087c7c698eee42fcd->setPropertyFilter();if($v15d61712450a686a7f365adf4fef581f) {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->notequals($v5891da2d64975cae48d175d1e001f5da);}else {$v52f1e208e3cee17087c7c698eee42fcd->where($v972bf3f05d14ffbdb817bef60638ff00)->equals($v5891da2d64975cae48d175d1e001f5da);}}protected function parseInputParams($v341be97d9aff90c9978347f66f945b77) {$v21ffce5b8a6cc8cc6a41448dd69623c9 = $this->selectionParams;$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($v21ffce5b8a6cc8cc6a41448dd69623c9);for($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$v83878c91171338902e0fe0fb97a8c47a = "{" . ($v865c0c0b4ab0e063e5caa3387c1a8741 + 1) . "}";$v9e3669d19b675bd57058fd4664205d2a = $v21ffce5b8a6cc8cc6a41448dd69623c9[$v865c0c0b4ab0e063e5caa3387c1a8741];$v341be97d9aff90c9978347f66f945b77 = str_replace($v83878c91171338902e0fe0fb97a8c47a, $v9e3669d19b675bd57058fd4664205d2a, $v341be97d9aff90c9978347f66f945b77);}foreach($this->params as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v9e3669d19b675bd57058fd4664205d2a) {$v83878c91171338902e0fe0fb97a8c47a = "{" . $v865c0c0b4ab0e063e5caa3387c1a8741 . "}";$v341be97d9aff90c9978347f66f945b77 = str_replace($v83878c91171338902e0fe0fb97a8c47a, $v9e3669d19b675bd57058fd4664205d2a, $v341be97d9aff90c9978347f66f945b77);}$v341be97d9aff90c9978347f66f945b77 = preg_replace("/\{[^\{\}]+\}/", "", $v341be97d9aff90c9978347f66f945b77);return $v341be97d9aff90c9978347f66f945b77;}};?>
