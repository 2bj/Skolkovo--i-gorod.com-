<?php
class __tags_mk_cloud {public function tags_mk_cloud($ve2e057726efeb9a546eda92e6381fe27 = NULL, $v3ed5b343328db107bc720771701a2e39 = "tags", $v31d6b76c1497a19da70f395ec9d06ea8 = -1, $v6016bcc6f7effd8b6eaaea39ee02896f = true, $v48376880b6e27c3ebcd6aba4b46819ee = false, $v2cdbebd95dc4898c7816ff5cf9073eac = array()) {$vbefcdf726b07f87cfaf4eda41abdc371 = "cloud_tags";$v5fcf9725dbd39a4134c0555e72ec1d6e = "cloud_tag";$v81f1984684c31d5fd3f4521d979846ef = "cloud_tagseparator";$v34e66082336a18f0fce1c5c5aac64cb7 = "cloud_tags_empty";if (!$v2cdbebd95dc4898c7816ff5cf9073eac || intval($v2cdbebd95dc4898c7816ff5cf9073eac) === -1 || strval($v2cdbebd95dc4898c7816ff5cf9073eac) === 'all' || $v2cdbebd95dc4898c7816ff5cf9073eac == "Все") {$v2cdbebd95dc4898c7816ff5cf9073eac = array();}if (is_int($v2cdbebd95dc4898c7816ff5cf9073eac)) {$v2cdbebd95dc4898c7816ff5cf9073eac = array(intval($v2cdbebd95dc4898c7816ff5cf9073eac));}elseif (is_array($v2cdbebd95dc4898c7816ff5cf9073eac)) {$v2cdbebd95dc4898c7816ff5cf9073eac = array_map('intval', $v2cdbebd95dc4898c7816ff5cf9073eac);}else {$v2cdbebd95dc4898c7816ff5cf9073eac = array(intval(strval($v2cdbebd95dc4898c7816ff5cf9073eac)));}$v31d6b76c1497a19da70f395ec9d06ea8 = intval($v31d6b76c1497a19da70f395ec9d06ea8);if (!$v31d6b76c1497a19da70f395ec9d06ea8) $v31d6b76c1497a19da70f395ec9d06ea8 = 10;if ($v31d6b76c1497a19da70f395ec9d06ea8 === -1) $v6016bcc6f7effd8b6eaaea39ee02896f = true;$v3ed5b343328db107bc720771701a2e39 = strval($v3ed5b343328db107bc720771701a2e39);if (!strlen($v3ed5b343328db107bc720771701a2e39)) $v3ed5b343328db107bc720771701a2e39 = "tags";$v5147d0e2653ceed8f71d25fe9fc076ee = intval(getRequest('p'));if ($v6016bcc6f7effd8b6eaaea39ee02896f) $v5147d0e2653ceed8f71d25fe9fc076ee = 0;list(   $vfeb93dd04c8e0bc69b09559c2688dd50,   $vf9823ccde856505a89d96031a605d2b5,   $v48b5960dc6bccff711161342b1cc3c06,   $vc8d176dc5832a531b30d1c5057f535b0  ) = $this->loadTemplates(   "tpls/content/".$v3ed5b343328db107bc720771701a2e39.".tpl",   $vbefcdf726b07f87cfaf4eda41abdc371,   $v5fcf9725dbd39a4134c0555e72ec1d6e,   $v81f1984684c31d5fd3f4521d979846ef,   $v34e66082336a18f0fce1c5c5aac64cb7  );$v5000ce979d5622b062ccb203d911c6d7 = 32;$v912ea8aaca8c737b7213e487f231bf68 = 10;$ve3d3cf51dbf23af5be457edeeb686731 = '';if ($v48376880b6e27c3ebcd6aba4b46819ee) {$vf5b788937450a693e6cbec05d8b8b13f = 3;$v8636cb7e3d45cd4e1e8e863d3286393e = umiObjectTypesCollection::getInstance()->getType($vf5b788937450a693e6cbec05d8b8b13f);$vef9a071f13863047c0f6a71945a74c95 = $v8636cb7e3d45cd4e1e8e863d3286393e->getFieldId('tags');$result = umiObjectProperty::objectsByValue($vef9a071f13863047c0f6a71945a74c95, 'all', true, true, ($ve2e057726efeb9a546eda92e6381fe27 ? $ve2e057726efeb9a546eda92e6381fe27 : -1));}else {$v77ddcb5f19832f4145345889013ab3a4 = cmsController::getInstance()->getModule('stat');$va03e58920367bc902348317b738d1f78 = dirname(dirname(dirname(dirname(__FILE__)))) . '/stat/classes';if(class_exists("statisticFactory") == false) {return;}$v9549dd6065d019211460c59a86dd6536 = new statisticFactory($va03e58920367bc902348317b738d1f78);$v9549dd6065d019211460c59a86dd6536->isValid('allTags');$ve98d2f001da5678b39482efbdf5770dc = $v9549dd6065d019211460c59a86dd6536->get('allTags');if ($ve2e057726efeb9a546eda92e6381fe27) {$ve3d3cf51dbf23af5be457edeeb686731 = 'Domain';$v54bf05dfdecb05f5917014b7f5f2bc97 = $ve98d2f001da5678b39482efbdf5770dc->setDomain($ve2e057726efeb9a546eda92e6381fe27);}else {$ve3d3cf51dbf23af5be457edeeb686731 = 'Account';$v54bf05dfdecb05f5917014b7f5f2bc97 = $ve98d2f001da5678b39482efbdf5770dc->setDomain(-1);}if (is_array($v2cdbebd95dc4898c7816ff5cf9073eac) && count($v2cdbebd95dc4898c7816ff5cf9073eac)) {$ve98d2f001da5678b39482efbdf5770dc->setUserIDs($v2cdbebd95dc4898c7816ff5cf9073eac);}$result = $ve98d2f001da5678b39482efbdf5770dc->get();}if(isset($result['values']) && is_array($result['values'])) {natsort2d($result['values'], "cnt");$result['values'] = array_slice($result['values'], -$v31d6b76c1497a19da70f395ec9d06ea8, $v31d6b76c1497a19da70f395ec9d06ea8);natsort2d($result['values'], "value");}$v2ffe4e77325d9a7152f7086ea7aa5114 = intval($result['max']);$v1d623b89683f9ce4e074de1676d12416 = intval($result['sum']);$v478008dd5b40f456548526379518e8b4 = array();$v8d75f3bad0e3a1e8fbb2f1c395ba6de2 = ($v48376880b6e27c3ebcd6aba4b46819ee ? 'values' : 'labels');$v3c3b2ab5098cf790fa48597adf356e09 = ($v48376880b6e27c3ebcd6aba4b46819ee ? 'value' : 'tag');$vcc3a3042d47c815b98f33a57abd85220 = 'cnt';$v7dabf5c198b0bab2eaa42bb03a113e55 = sizeof($result[$v8d75f3bad0e3a1e8fbb2f1c395ba6de2]);for ($v865c0c0b4ab0e063e5caa3387c1a8741 = 0;$v865c0c0b4ab0e063e5caa3387c1a8741 < $v7dabf5c198b0bab2eaa42bb03a113e55;$v865c0c0b4ab0e063e5caa3387c1a8741++) {$vd304ba20e96d87411588eeabac850e34 = $result[$v8d75f3bad0e3a1e8fbb2f1c395ba6de2][$v865c0c0b4ab0e063e5caa3387c1a8741];$ve4d23e841d8e8804190027bce3180fa5 = $vd304ba20e96d87411588eeabac850e34[$v3c3b2ab5098cf790fa48597adf356e09];if (is_null($ve4d23e841d8e8804190027bce3180fa5)) continue;$v2817f701d5e1a1181e657251363295fd = intval($vd304ba20e96d87411588eeabac850e34[$vcc3a3042d47c815b98f33a57abd85220]);$vfea81d97671685c4f485c80fbb293296 = round($v2817f701d5e1a1181e657251363295fd * 100 / $v1d623b89683f9ce4e074de1676d12416, 1);$vc4db0b59ed68b4b2952fa7303e78a56e = round(((($v5000ce979d5622b062ccb203d911c6d7 - $v912ea8aaca8c737b7213e487f231bf68)/100) * $vfea81d97671685c4f485c80fbb293296) + $v912ea8aaca8c737b7213e487f231bf68);$v478008dd5b40f456548526379518e8b4[$ve4d23e841d8e8804190027bce3180fa5] = array('weight' => $vfea81d97671685c4f485c80fbb293296, 'font' => $vc4db0b59ed68b4b2952fa7303e78a56e);}$v2dfd6d3da5a5c06734b14cf8cbff4935 = 0;if (count($v478008dd5b40f456548526379518e8b4)) {$vee02d064010ce387aef996c78508ec13 = array();foreach ($v478008dd5b40f456548526379518e8b4 as $v547bcc1f022f4f3730ae8646d83f8f7f => $v4c37e6249744db66b2d537f5c6e2c0f1) {$v2dfd6d3da5a5c06734b14cf8cbff4935 += $v4c37e6249744db66b2d537f5c6e2c0f1['weight'];$v21ffce5b8a6cc8cc6a41448dd69623c9 = array(     'tag'=>$v547bcc1f022f4f3730ae8646d83f8f7f,     'tag_urlencoded'=>rawurlencode($v547bcc1f022f4f3730ae8646d83f8f7f),     'attribute:weight' => $v4c37e6249744db66b2d537f5c6e2c0f1['weight'],     'attribute:font' => $v4c37e6249744db66b2d537f5c6e2c0f1['font'],     'attribute:context' => $ve3d3cf51dbf23af5be457edeeb686731    );$vee02d064010ce387aef996c78508ec13[] = def_module::parseTemplate($vf9823ccde856505a89d96031a605d2b5, $v21ffce5b8a6cc8cc6a41448dd69623c9);}if (isset($vee02d064010ce387aef996c78508ec13[0]) && is_array($vee02d064010ce387aef996c78508ec13[0])) {$v3ac6192927e0df1685c31b83f09891e8 = array('subnodes:items'=>$vee02d064010ce387aef996c78508ec13);}else {$v3ac6192927e0df1685c31b83f09891e8 = array('items'=>implode($v48b5960dc6bccff711161342b1cc3c06, $vee02d064010ce387aef996c78508ec13));}$v3ac6192927e0df1685c31b83f09891e8['attribute:summ_weight'] = ceil($v2dfd6d3da5a5c06734b14cf8cbff4935);$v3ac6192927e0df1685c31b83f09891e8['attribute:context'] = $ve3d3cf51dbf23af5be457edeeb686731;return def_module::parseTemplate($vfeb93dd04c8e0bc69b09559c2688dd50, $v3ac6192927e0df1685c31b83f09891e8);}else {$v3ac6192927e0df1685c31b83f09891e8 = array();return def_module::parseTemplate($vc8d176dc5832a531b30d1c5057f535b0, $v3ac6192927e0df1685c31b83f09891e8);}}}?>