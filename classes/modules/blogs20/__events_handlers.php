<?php
abstract class __eventsHandlersBlogs {public function onCommentAdd(iUmiEventPoint $v161c9aaa4fe035e7b2f465bc59f3ab45) {$vb1444fb0c07653567ad325aa25d4e37a = regedit::getInstance();if(!$vb1444fb0c07653567ad325aa25d4e37a->getVal("//modules/blogs20/notifications/on_comment_add")) {return;}$v66f6181bcb4cff4cd38fbc804a036db6 = ($vfa816edb83e95bf0c8da580bdfd491ef = $v161c9aaa4fe035e7b2f465bc59f3ab45->getParam('template')) ? $vfa816edb83e95bf0c8da580bdfd491ef : 'default';$ve2e1896b91c77e852e93acb763cdb1a7  = $v161c9aaa4fe035e7b2f465bc59f3ab45->getParam('id');$vb81ca7c0ccaa77e7aa91936ab0070695  = umiHierarchy::getInstance();$vdb6d9b451b818ccc9a449383f2f0c450 = umiObjectsCollection::getInstance();$vbfa030fe63bacd523dd70a76cfaed98a   = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($ve2e1896b91c77e852e93acb763cdb1a7, true)->getRel();$v8e2dcfd7e7e24b1ca76c1193f645902b     = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($vbfa030fe63bacd523dd70a76cfaed98a);$vd37d0ccc488a1865c0cfff1eac242116 = umiHierarchyTypesCollection::getInstance()->getTypeByName('blogs20', 'post')->getId();$v42b90196b487c54069097a68fe98ab6f = $v8e2dcfd7e7e24b1ca76c1193f645902b;if($v42b90196b487c54069097a68fe98ab6f instanceof umiHierarchyElement == false) {return false;}$v65b002304ab8df0d8ac6327c5d9d545a = xslTemplater::getInstance()->setIsInited(false);while($v42b90196b487c54069097a68fe98ab6f->getTypeId() != $vd37d0ccc488a1865c0cfff1eac242116) $v42b90196b487c54069097a68fe98ab6f = $vb81ca7c0ccaa77e7aa91936ab0070695->getElement($v42b90196b487c54069097a68fe98ab6f->getRel(), true);if($v8e2dcfd7e7e24b1ca76c1193f645902b->getTypeId() == $vd37d0ccc488a1865c0cfff1eac242116) {$vf6c920cd98fc127970a09c60be886928 = $vdb6d9b451b818ccc9a449383f2f0c450->getObject( $v8e2dcfd7e7e24b1ca76c1193f645902b->getObject()->getOwnerId() );if($vf6c920cd98fc127970a09c60be886928 instanceof umiObject == false) {xslTemplater::getInstance()->setIsInited($v65b002304ab8df0d8ac6327c5d9d545a);return false;}$v0c83f57c786a0b4a39efab23731c7ebc = $vf6c920cd98fc127970a09c60be886928->getValue('e-mail');$ve2e42a07550863f8b67f5eb252581f6d  = $vf6c920cd98fc127970a09c60be886928->getValue('login');$va3da707b651c79ecc39a4986516180b2 = $vf6c920cd98fc127970a09c60be886928->getValue('fname');$vbfbb12dc2dce9d328e8303093db2ca33 = $vf6c920cd98fc127970a09c60be886928->getValue('lname');$v5c2ed0f478e079b3e3bdd94456ecb7be  = $vf6c920cd98fc127970a09c60be886928->getValue('father_name');$vb068931cc450442b63f5b3d276ea4297  = strlen($va3da707b651c79ecc39a4986516180b2) ? ($va3da707b651c79ecc39a4986516180b2 . ' ' . $v5c2ed0f478e079b3e3bdd94456ecb7be . ' ' . $vbfbb12dc2dce9d328e8303093db2ca33) : $ve2e42a07550863f8b67f5eb252581f6d;list($vc0f6cf7e29a3b89dbf33e290bff2ada1, $vab79dcd4c9bdd53a5ac716b2e672fe28) = $this->loadTemplates('tpls/blogs20/mail/'.$v66f6181bcb4cff4cd38fbc804a036db6.'.tpl', 'comment_for_post_subj', 'comment_for_post_body');}else {$vf6c920cd98fc127970a09c60be886928 = $vdb6d9b451b818ccc9a449383f2f0c450->getObject( $v8e2dcfd7e7e24b1ca76c1193f645902b->getValue('author_id') );if($vf6c920cd98fc127970a09c60be886928->getValue('is_registrated')) {$vee11cbb19052e40b07aac0ca060c23ee  = $vdb6d9b451b818ccc9a449383f2f0c450->getObject( $vf6c920cd98fc127970a09c60be886928->getValue('user_id') );$v0c83f57c786a0b4a39efab23731c7ebc = $vee11cbb19052e40b07aac0ca060c23ee->getValue('e-mail');$ve2e42a07550863f8b67f5eb252581f6d  = $vee11cbb19052e40b07aac0ca060c23ee->getValue('login');$va3da707b651c79ecc39a4986516180b2 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('fname');$vbfbb12dc2dce9d328e8303093db2ca33 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('lname');$v5c2ed0f478e079b3e3bdd94456ecb7be  = $vee11cbb19052e40b07aac0ca060c23ee->getValue('father_name');$vb068931cc450442b63f5b3d276ea4297  = strlen($va3da707b651c79ecc39a4986516180b2) ? ($va3da707b651c79ecc39a4986516180b2 . ' ' . $v5c2ed0f478e079b3e3bdd94456ecb7be . ' ' . $vbfbb12dc2dce9d328e8303093db2ca33) : $ve2e42a07550863f8b67f5eb252581f6d;}else {$v0c83f57c786a0b4a39efab23731c7ebc = $vf6c920cd98fc127970a09c60be886928->getValue('email');$vb068931cc450442b63f5b3d276ea4297  = $vf6c920cd98fc127970a09c60be886928->getValue('nickname');}list($vc0f6cf7e29a3b89dbf33e290bff2ada1, $vab79dcd4c9bdd53a5ac716b2e672fe28) = $this->loadTemplates('tpls/blogs20/mail/'.$v66f6181bcb4cff4cd38fbc804a036db6.'.tpl', 'comment_for_comment_subj', 'comment_for_comment_body');}$vbc56a26be3caac24e508bf4003a5eb4d = array();$vbc56a26be3caac24e508bf4003a5eb4d['name'] = $vb068931cc450442b63f5b3d276ea4297;$vbc56a26be3caac24e508bf4003a5eb4d['link'] = 'http://'.cmsController::getInstance()->getCurrentDomain()->getHost() . $vb81ca7c0ccaa77e7aa91936ab0070695->getPathById($v42b90196b487c54069097a68fe98ab6f->getId()) . '#comment_' . $ve2e1896b91c77e852e93acb763cdb1a7;$vb5e3374e43f6544852f7751dfc529100   = $this->parseTemplate($vc0f6cf7e29a3b89dbf33e290bff2ada1, $vbc56a26be3caac24e508bf4003a5eb4d);$v841a2d689ad86bd1611447453c22c6fc    = $this->parseTemplate($vab79dcd4c9bdd53a5ac716b2e672fe28,    $vbc56a26be3caac24e508bf4003a5eb4d);$v1469975c8e7f6b2f32ecfe7c5edbe14a = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/email_from");$v67acb9f4729fd8c96f4bed4a9706d424  = $vb1444fb0c07653567ad325aa25d4e37a->getVal("//settings/fio_from");$v5e1cc51f1171dfa25c10bc755c1974d8 = new umiMail();$v5e1cc51f1171dfa25c10bc755c1974d8->addRecipient( $v0c83f57c786a0b4a39efab23731c7ebc, $vb068931cc450442b63f5b3d276ea4297 );$v5e1cc51f1171dfa25c10bc755c1974d8->setFrom( $v1469975c8e7f6b2f32ecfe7c5edbe14a, $v67acb9f4729fd8c96f4bed4a9706d424 );$v5e1cc51f1171dfa25c10bc755c1974d8->setSubject($vb5e3374e43f6544852f7751dfc529100);$v5e1cc51f1171dfa25c10bc755c1974d8->setContent($v841a2d689ad86bd1611447453c22c6fc);$v5e1cc51f1171dfa25c10bc755c1974d8->commit();$v5e1cc51f1171dfa25c10bc755c1974d8->send();xslTemplater::getInstance()->setIsInited($v65b002304ab8df0d8ac6327c5d9d545a);}}?>
