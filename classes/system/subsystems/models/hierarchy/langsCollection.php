<?php
 class langsCollection extends singleton implements iSingleton, iLangsCollection {private $langs = Array(),   $def_lang;protected function __construct() {$this->loadLangs();}public static function getInstance() {return parent::getInstance(__CLASS__);}private function loadLangs() {$vb99eb979e6f6efabc396f777b503f7e7 = cacheFrontend::getInstance();$v116f28135fae5e979e381e4d66222936 = $vb99eb979e6f6efabc396f777b503f7e7->loadData('langs_list');if(!is_array($v116f28135fae5e979e381e4d66222936)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT SQL_CACHE id, prefix, is_default, title FROM cms3_langs ORDER BY id";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v116f28135fae5e979e381e4d66222936 = array();while(list($v78e6dd7a49f5b0cb2106a3a434dd5c86) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v116f28135fae5e979e381e4d66222936[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = $vf1965a857bc285d26fe22023aa5ab50d;}$vb99eb979e6f6efabc396f777b503f7e7->saveData('langs_list', $v116f28135fae5e979e381e4d66222936, 3600);}else $vf1965a857bc285d26fe22023aa5ab50d = false;foreach($v116f28135fae5e979e381e4d66222936 as $v78e6dd7a49f5b0cb2106a3a434dd5c86 => $vf1965a857bc285d26fe22023aa5ab50d) {$v7572559ca86e781ba8fe8073a0b725c6 = $vb99eb979e6f6efabc396f777b503f7e7->load($v78e6dd7a49f5b0cb2106a3a434dd5c86, 'lang');if($v7572559ca86e781ba8fe8073a0b725c6 instanceof lang == false) {try {$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {continue;}$vb99eb979e6f6efabc396f777b503f7e7->save($v7572559ca86e781ba8fe8073a0b725c6, 'lang');}$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = $v7572559ca86e781ba8fe8073a0b725c6;if($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]->getIsDefault()) {$this->def_lang = $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86];}}}public function getLangId($v851f5ac9941d720844d143ed9cfcf60a) {foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {if($v7572559ca86e781ba8fe8073a0b725c6->getPrefix() == $v851f5ac9941d720844d143ed9cfcf60a) {return $v7572559ca86e781ba8fe8073a0b725c6->getId();}}return false;}public function addLang($v851f5ac9941d720844d143ed9cfcf60a, $vd5d3db1765287eef77d7927cc956f50a, $vf62baf4c4ead98d50d516eca0ac5a746 = false) {$this->disableCache();cacheFrontend::getInstance()->flush();if($v78e6dd7a49f5b0cb2106a3a434dd5c86 = $this->getLangId($v851f5ac9941d720844d143ed9cfcf60a)) {return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_langs VALUES()";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v78e6dd7a49f5b0cb2106a3a434dd5c86 = mysql_insert_id();$v7572559ca86e781ba8fe8073a0b725c6 = new lang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$v7572559ca86e781ba8fe8073a0b725c6->setPrefix($v851f5ac9941d720844d143ed9cfcf60a);$v7572559ca86e781ba8fe8073a0b725c6->setTitle($vd5d3db1765287eef77d7927cc956f50a);$v7572559ca86e781ba8fe8073a0b725c6->setIsDefault($vf62baf4c4ead98d50d516eca0ac5a746);$v7572559ca86e781ba8fe8073a0b725c6->commit();$this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] = &$v7572559ca86e781ba8fe8073a0b725c6;return $v78e6dd7a49f5b0cb2106a3a434dd5c86;}public function delLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$this->disableCache();cacheFrontend::getInstance()->flush();$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) return false;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_langs WHERE id = '{$v78e6dd7a49f5b0cb2106a3a434dd5c86}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);unset($this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86]);}public function getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86) {$v78e6dd7a49f5b0cb2106a3a434dd5c86 = (int) $v78e6dd7a49f5b0cb2106a3a434dd5c86;return ($this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) ? $this->langs[$v78e6dd7a49f5b0cb2106a3a434dd5c86] : false;}public function isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86) {return (bool) array_key_exists($v78e6dd7a49f5b0cb2106a3a434dd5c86, $this->langs);}public function getList() {return $this->langs;}public function setDefault($v78e6dd7a49f5b0cb2106a3a434dd5c86) {if(!$this->isExists($v78e6dd7a49f5b0cb2106a3a434dd5c86)) return false;if($this->def_lang) {$this->def_lang->setIsDefault(false);$this->def_lang->commit();}$this->def_lang = $this->getLang($v78e6dd7a49f5b0cb2106a3a434dd5c86);$this->def_lang->setIsDefault(true);$this->def_lang->commit();}public function getDefaultLang() {return ($this->def_lang) ? $this->def_lang : false;}public function getAssocArray() {$v9b207167e5381c47682c6b4f58a623fb = array();foreach($this->langs as $v7572559ca86e781ba8fe8073a0b725c6) {$v9b207167e5381c47682c6b4f58a623fb[$v7572559ca86e781ba8fe8073a0b725c6->getId()] = $v7572559ca86e781ba8fe8073a0b725c6->getTitle();}return $v9b207167e5381c47682c6b4f58a623fb;}}?>