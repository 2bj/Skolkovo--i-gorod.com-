<?php
 abstract class __subscribers_subscribers {public function subscribers_list() {$v48a1815cdd3ea285c80e708c16b439fc = $_REQUEST['param0'];$this->sheets_set_active("subscribers_list");$this->load_forms();$v627027fffa604a316b3b4b5fd76ed957 = (int) $_REQUEST['p'];$v21ffce5b8a6cc8cc6a41448dd69623c9 = array();$v21ffce5b8a6cc8cc6a41448dd69623c9['rows'] = "";$v18ea1849dbf10a18b2dfd4ed0eb3a231 = new umiSelection;$v18ea1849dbf10a18b2dfd4ed0eb3a231->setObjectTypeFilter();$v18ea1849dbf10a18b2dfd4ed0eb3a231->setLimitFilter();$v18ea1849dbf10a18b2dfd4ed0eb3a231->addLimit($this->per_page, $v627027fffa604a316b3b4b5fd76ed957);$v10c4b55f31b64898e699a5a4f7b48d17 = umiHierarchyTypesCollection::getInstance()->getTypeByName("dispatches", "subscriber")->getId();$v3ec9f372b2dad35356b9884c89cf0ef2 =  umiObjectTypesCollection::getInstance()->getTypeByHierarchyTypeId($v10c4b55f31b64898e699a5a4f7b48d17);$vff500849b1c1163f66c899c7aec17813 = umiObjectTypesCollection::getInstance()->getType($v3ec9f372b2dad35356b9884c89cf0ef2);$v18ea1849dbf10a18b2dfd4ed0eb3a231->addObjectType($v3ec9f372b2dad35356b9884c89cf0ef2);if ($v48a1815cdd3ea285c80e708c16b439fc) {$v410191f18a9fe508d3f39e36a1297a2c = umiObjectsCollection::getInstance()->getObject($v48a1815cdd3ea285c80e708c16b439fc);if ($v410191f18a9fe508d3f39e36a1297a2c instanceof umiObject) {$v18ea1849dbf10a18b2dfd4ed0eb3a231->setPropertyFilter();$v18ea1849dbf10a18b2dfd4ed0eb3a231->addPropertyFilterEqual($vff500849b1c1163f66c899c7aec17813->getFieldId('subscriber_dispatches'), $v48a1815cdd3ea285c80e708c16b439fc);}}$v1c0742f6c0ec3c1ff468040904993b8a = umiSelectionsParser::runSelection($v18ea1849dbf10a18b2dfd4ed0eb3a231);$v8c459b5dfdfb4d29f4b1c406e0f5e7f6 = umiSelectionsParser::runSelectionCounts($v18ea1849dbf10a18b2dfd4ed0eb3a231);$vdaefcb93ebb633b6770c1a12ff45a401 = $this->per_page*$v627027fffa604a316b3b4b5fd76ed957;for ($v168965c34d6a1fd6ad3d68aa5e76ae56=0;$v168965c34d6a1fd6ad3d68aa5e76ae56<count($v1c0742f6c0ec3c1ff468040904993b8a);$v168965c34d6a1fd6ad3d68aa5e76ae56++) {$v21ffce5b8a6cc8cc6a41448dd69623c9['rows'] .= self::renderSubscriber($v1c0742f6c0ec3c1ff468040904993b8a[$v168965c34d6a1fd6ad3d68aa5e76ae56], ++$vdaefcb93ebb633b6770c1a12ff45a401);}$v21ffce5b8a6cc8cc6a41448dd69623c9['pages'] = $this->generateNumPage($v8c459b5dfdfb4d29f4b1c406e0f5e7f6, $this->per_page, $v627027fffa604a316b3b4b5fd76ed957);return $this->parse_form("subscribers_list", $v21ffce5b8a6cc8cc6a41448dd69623c9);}private function renderSubscriber($v8c083fef4c073b655bd07391cb686aa4, $vdaefcb93ebb633b6770c1a12ff45a401=0) {$vdccc8c8d061984a56d899361b4934477 = "";$vf674b89869b81fcedca2243c18bbcdd1 =  umiObjectsCollection::getInstance()->getObject($v8c083fef4c073b655bd07391cb686aa4);$vf674b89869b81fcedca2243c18bbcdd1 = new umiSubscriber($v8c083fef4c073b655bd07391cb686aa4);$v21ffce5b8a6cc8cc6a41448dd69623c9 = array();if ($vf674b89869b81fcedca2243c18bbcdd1 instanceof umiSubscriber) {$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_name'] = $vf674b89869b81fcedca2243c18bbcdd1->getValue('lname')." ".$vf674b89869b81fcedca2243c18bbcdd1->getValue('fname')." ".$vf674b89869b81fcedca2243c18bbcdd1->getValue('father_name')." (".$vf674b89869b81fcedca2243c18bbcdd1->getName().")";if ($vdaefcb93ebb633b6770c1a12ff45a401>0) {$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_num'] = $vdaefcb93ebb633b6770c1a12ff45a401;}$v749973e5187b6820fc682d1734d6b01e = $vf674b89869b81fcedca2243c18bbcdd1->getValue('subscriber_dispatches');$vda01446faf578e889eb0c3a76a2a3075 = "";if (is_array($v749973e5187b6820fc682d1734d6b01e) && count($v749973e5187b6820fc682d1734d6b01e)) {for ($v168965c34d6a1fd6ad3d68aa5e76ae56=0;$v168965c34d6a1fd6ad3d68aa5e76ae56<count($v749973e5187b6820fc682d1734d6b01e);$v168965c34d6a1fd6ad3d68aa5e76ae56++) {$v722104c9e0e5d5b9f91dc188b512f241 = umiObjectsCollection::getInstance()->getObject($v749973e5187b6820fc682d1734d6b01e[$v168965c34d6a1fd6ad3d68aa5e76ae56]);$vda01446faf578e889eb0c3a76a2a3075 .= "<a href=\"{$this->pre_lang}/admin/dispatches/dispatch_edit/{$v749973e5187b6820fc682d1734d6b01e[$v168965c34d6a1fd6ad3d68aa5e76ae56]}/\">".$v722104c9e0e5d5b9f91dc188b512f241->getName()."</a>";if ($v168965c34d6a1fd6ad3d68aa5e76ae56 < count($v749973e5187b6820fc682d1734d6b01e)-1) $vda01446faf578e889eb0c3a76a2a3075 .= ", ";}}else {$vda01446faf578e889eb0c3a76a2a3075 = "<span style='color:red;'>нет</span>";}$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_dispatches'] = $vda01446faf578e889eb0c3a76a2a3075;$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_status'] = ($vf674b89869b81fcedca2243c18bbcdd1->getValue('uid') && umiObjectsCollection::getInstance()->getObject($vf674b89869b81fcedca2243c18bbcdd1->getValue('uid')) ? "зарегистрированный пользователь": "Гость");$v5effbd04b1924c0778770eeb143e2127 = $vf674b89869b81fcedca2243c18bbcdd1->getValue('subscribe_date');$v5826012425f1e8e700911536d9f94135 = "";if ($v5effbd04b1924c0778770eeb143e2127 instanceof umiDate && $v5effbd04b1924c0778770eeb143e2127->timestamp) {$v5826012425f1e8e700911536d9f94135 = $v5effbd04b1924c0778770eeb143e2127->getFormattedDate("d.m.Y H:m");}$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_date'] = $v5826012425f1e8e700911536d9f94135;$v21ffce5b8a6cc8cc6a41448dd69623c9['sbs_id'] = $vf674b89869b81fcedca2243c18bbcdd1->getId();$vdccc8c8d061984a56d899361b4934477 = $this->parse_form("subscribers_list_row", $v21ffce5b8a6cc8cc6a41448dd69623c9);}return $vdccc8c8d061984a56d899361b4934477;}public function subscriber_del() {$v8c083fef4c073b655bd07391cb686aa4 = $_REQUEST['param0'];umiObjectsCollection::getInstance()->delObject($v8c083fef4c073b655bd07391cb686aa4);$this->redirect($this->pre_lang . "/admin/dispatches/subscribers_list/");}};?>