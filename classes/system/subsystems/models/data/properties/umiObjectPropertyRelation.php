<?php
 class umiObjectPropertyRelation extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = Array();$v3aabf39f2d943fa886d86dcbbee4d910 = $this->field_id;if($v8d777f385d3dfec8815d20f7496026dc = $this->getPropData()) {foreach($v8d777f385d3dfec8815d20f7496026dc['rel_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}if($this->getIsMultiple()) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE rel_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}'";}else {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT  SQL_CACHE rel_val FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v3aabf39f2d943fa886d86dcbbee4d910}' LIMIT 1";}$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a, true);while(list($v3a6d0284e743dc4a9b86f97d6dd1a3bf) = mysql_fetch_row($result)) {if(is_null($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) continue;$v9b207167e5381c47682c6b4f58a623fb[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if(is_null($this->value)) {return;}$vfa816edb83e95bf0c8da580bdfd491ef = Array();foreach($this->value as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;if(is_string($v3a6d0284e743dc4a9b86f97d6dd1a3bf) && strpos($v3a6d0284e743dc4a9b86f97d6dd1a3bf, "|") !== false) {$v2e3a8d3f3d1c742f7234c3d6dd74cc3c = split("\|", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);foreach($v2e3a8d3f3d1c742f7234c3d6dd74cc3c as $v9e3669d19b675bd57058fd4664205d2a) {$v9e3669d19b675bd57058fd4664205d2a = trim($v9e3669d19b675bd57058fd4664205d2a);if($v9e3669d19b675bd57058fd4664205d2a) $vfa816edb83e95bf0c8da580bdfd491ef[] = $v9e3669d19b675bd57058fd4664205d2a;unset($v9e3669d19b675bd57058fd4664205d2a);}unset($v2e3a8d3f3d1c742f7234c3d6dd74cc3c);$this->getField()->setFieldTypeId(7);}else {$vfa816edb83e95bf0c8da580bdfd491ef[] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}}$this->value = $vfa816edb83e95bf0c8da580bdfd491ef;unset($vfa816edb83e95bf0c8da580bdfd491ef);$v2817f701d5e1a1181e657251363295fd = 0;foreach($this->value as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if($v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = $this->prepareRelationValue($v3a6d0284e743dc4a9b86f97d6dd1a3bf);$this->values[$v3c6e0b8a9c15224a8228b9a98ca1531d] = $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}if(!$v3a6d0284e743dc4a9b86f97d6dd1a3bf) continue;$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id, rel_val) VALUES('{$this->object_id}', '{$this->field_id}', '{$v3a6d0284e743dc4a9b86f97d6dd1a3bf}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);++$v2817f701d5e1a1181e657251363295fd;}if(!$v2817f701d5e1a1181e657251363295fd) $this->fillNull();}};?>