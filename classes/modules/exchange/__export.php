<?php
 abstract class __exchange_export extends def_module {public function get_export() {$vb80bb7740288fda1f201890375a60c8f = getRequest('param0');$v0d469cc221330e6d4f7bb55c5cbc1edb = (int) getRequest('as_file');$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = $v5891da2d64975cae48d175d1e001f5da->getObject($vb80bb7740288fda1f201890375a60c8f);if (!$v2e5d8aa3dfa8ef34ca5131d20f9dad51 instanceof umiObject) {throw new publicException(getLabel("exchange-err-settings_notfound"));}$vf2fa2147ad132e8e2d65c0f37ef53d9d = $v2e5d8aa3dfa8ef34ca5131d20f9dad51->format;$vf2632d3ae14c6bc38a44a524a1c3bfde = $v5891da2d64975cae48d175d1e001f5da->getObject($vf2fa2147ad132e8e2d65c0f37ef53d9d);if (!$vf2632d3ae14c6bc38a44a524a1c3bfde instanceof umiObject) {throw new publicException(getLabel("exchange-err-format_undefined"));}$v4ec1b477cd0232b832c1899905ec51a4 = $vf2632d3ae14c6bc38a44a524a1c3bfde->sid;$ved780287e302ec3b9fd3c5e78771919f = umiExporter::get($v4ec1b477cd0232b832c1899905ec51a4);if ($v2e5d8aa3dfa8ef34ca5131d20f9dad51->source_name) {$ved780287e302ec3b9fd3c5e78771919f->setSourceName($v2e5d8aa3dfa8ef34ca5131d20f9dad51->source_name);}$v8a625cdfb89cca554718a39ec0fc9bf6 = (int) $v2e5d8aa3dfa8ef34ca5131d20f9dad51->cache_time;$v857a5246dff0c3c79e476b004684f6d3 = "./sys-temp/export/";if (!is_dir($v857a5246dff0c3c79e476b004684f6d3)) mkdir($v857a5246dff0c3c79e476b004684f6d3, 0777, true);$v8e9e791281df5188f135edcc30eaa97e = $v857a5246dff0c3c79e476b004684f6d3 . $vb80bb7740288fda1f201890375a60c8f . "." . $ved780287e302ec3b9fd3c5e78771919f->getFileExt();$v0f712a9b6a8740b53da1c8623dff3514 = new umiFile($v8e9e791281df5188f135edcc30eaa97e);if (!$v8a625cdfb89cca554718a39ec0fc9bf6 || time() > filectime($v8e9e791281df5188f135edcc30eaa97e) + $v8a625cdfb89cca554718a39ec0fc9bf6 * 60) {$result = $ved780287e302ec3b9fd3c5e78771919f->export($v2e5d8aa3dfa8ef34ca5131d20f9dad51->elements);file_put_contents($v8e9e791281df5188f135edcc30eaa97e, $result);}$v0f712a9b6a8740b53da1c8623dff3514 = new umiFile($v8e9e791281df5188f135edcc30eaa97e);if ($v0d469cc221330e6d4f7bb55c5cbc1edb) $v0f712a9b6a8740b53da1c8623dff3514->download();$v7f2db423a49b305459147332fb01cf87 = $ved780287e302ec3b9fd3c5e78771919f->setOutputBuffer();$v7f2db423a49b305459147332fb01cf87->push(file_get_contents($v8e9e791281df5188f135edcc30eaa97e));$v7f2db423a49b305459147332fb01cf87->end();exit();}}?>